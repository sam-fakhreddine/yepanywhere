var S1=Object.defineProperty;var j1=(e,n,a)=>n in e?S1(e,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[n]=a;var Qe=(e,n,a)=>j1(e,typeof n!="symbol"?n+"":n,a);(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))o(c);new MutationObserver(c=>{for(const u of c)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&o(d)}).observe(document,{childList:!0,subtree:!0});function a(c){const u={};return c.integrity&&(u.integrity=c.integrity),c.referrerPolicy&&(u.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?u.credentials="include":c.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function o(c){if(c.ep)return;c.ep=!0;const u=a(c);fetch(c.href,u)}})();function w1(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function N1(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var n=e.default;if(typeof n=="function"){var a=function o(){return this instanceof o?Reflect.construct(n,arguments,this.constructor):n.apply(this,arguments)};a.prototype=n.prototype}else a={};return Object.defineProperty(a,"__esModule",{value:!0}),Object.keys(e).forEach(function(o){var c=Object.getOwnPropertyDescriptor(e,o);Object.defineProperty(a,o,c.get?c:{enumerable:!0,get:function(){return e[o]}})}),a}var fd={exports:{}},ao={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jg;function E1(){if(jg)return ao;jg=1;var e=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function a(o,c,u){var d=null;if(u!==void 0&&(d=""+u),c.key!==void 0&&(d=""+c.key),"key"in c){u={};for(var m in c)m!=="key"&&(u[m]=c[m])}else u=c;return c=u.ref,{$$typeof:e,type:o,key:d,ref:c!==void 0?c:null,props:u}}return ao.Fragment=n,ao.jsx=a,ao.jsxs=a,ao}var wg;function _1(){return wg||(wg=1,fd.exports=E1()),fd.exports}var i=_1(),hd={exports:{}},yt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ng;function C1(){if(Ng)return yt;Ng=1;var e=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),d=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),w=Symbol.iterator;function _(B){return B===null||typeof B!="object"?null:(B=w&&B[w]||B["@@iterator"],typeof B=="function"?B:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,N={};function z(B,ie,X){this.props=B,this.context=ie,this.refs=N,this.updater=X||C}z.prototype.isReactComponent={},z.prototype.setState=function(B,ie){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,ie,"setState")},z.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function O(){}O.prototype=z.prototype;function U(B,ie,X){this.props=B,this.context=ie,this.refs=N,this.updater=X||C}var P=U.prototype=new O;P.constructor=U,E(P,z.prototype),P.isPureReactComponent=!0;var A=Array.isArray;function D(){}var I={H:null,A:null,T:null,S:null},Z=Object.prototype.hasOwnProperty;function re(B,ie,X){var Se=X.ref;return{$$typeof:e,type:B,key:ie,ref:Se!==void 0?Se:null,props:X}}function _e(B,ie){return re(B.type,ie,B.props)}function Te(B){return typeof B=="object"&&B!==null&&B.$$typeof===e}function se(B){var ie={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(X){return ie[X]})}var le=/\/+/g;function me(B,ie){return typeof B=="object"&&B!==null&&B.key!=null?se(""+B.key):ie.toString(36)}function Re(B){switch(B.status){case"fulfilled":return B.value;case"rejected":throw B.reason;default:switch(typeof B.status=="string"?B.then(D,D):(B.status="pending",B.then(function(ie){B.status==="pending"&&(B.status="fulfilled",B.value=ie)},function(ie){B.status==="pending"&&(B.status="rejected",B.reason=ie)})),B.status){case"fulfilled":return B.value;case"rejected":throw B.reason}}throw B}function L(B,ie,X,Se,pe){var He=typeof B;(He==="undefined"||He==="boolean")&&(B=null);var et=!1;if(B===null)et=!0;else switch(He){case"bigint":case"string":case"number":et=!0;break;case"object":switch(B.$$typeof){case e:case n:et=!0;break;case x:return et=B._init,L(et(B._payload),ie,X,Se,pe)}}if(et)return pe=pe(B),et=Se===""?"."+me(B,0):Se,A(pe)?(X="",et!=null&&(X=et.replace(le,"$&/")+"/"),L(pe,ie,X,"",function(Fe){return Fe})):pe!=null&&(Te(pe)&&(pe=_e(pe,X+(pe.key==null||B&&B.key===pe.key?"":(""+pe.key).replace(le,"$&/")+"/")+et)),ie.push(pe)),1;et=0;var Oe=Se===""?".":Se+":";if(A(B))for(var Ze=0;Ze<B.length;Ze++)Se=B[Ze],He=Oe+me(Se,Ze),et+=L(Se,ie,X,He,pe);else if(Ze=_(B),typeof Ze=="function")for(B=Ze.call(B),Ze=0;!(Se=B.next()).done;)Se=Se.value,He=Oe+me(Se,Ze++),et+=L(Se,ie,X,He,pe);else if(He==="object"){if(typeof B.then=="function")return L(Re(B),ie,X,Se,pe);throw ie=String(B),Error("Objects are not valid as a React child (found: "+(ie==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":ie)+"). If you meant to render a collection of children, use an array instead.")}return et}function F(B,ie,X){if(B==null)return B;var Se=[],pe=0;return L(B,Se,"","",function(He){return ie.call(X,He,pe++)}),Se}function G(B){if(B._status===-1){var ie=B._result;ie=ie(),ie.then(function(X){(B._status===0||B._status===-1)&&(B._status=1,B._result=X)},function(X){(B._status===0||B._status===-1)&&(B._status=2,B._result=X)}),B._status===-1&&(B._status=0,B._result=ie)}if(B._status===1)return B._result.default;throw B._result}var we=typeof reportError=="function"?reportError:function(B){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ie=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof B=="object"&&B!==null&&typeof B.message=="string"?String(B.message):String(B),error:B});if(!window.dispatchEvent(ie))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",B);return}console.error(B)},Me={map:F,forEach:function(B,ie,X){F(B,function(){ie.apply(this,arguments)},X)},count:function(B){var ie=0;return F(B,function(){ie++}),ie},toArray:function(B){return F(B,function(ie){return ie})||[]},only:function(B){if(!Te(B))throw Error("React.Children.only expected to receive a single React element child.");return B}};return yt.Activity=b,yt.Children=Me,yt.Component=z,yt.Fragment=a,yt.Profiler=c,yt.PureComponent=U,yt.StrictMode=o,yt.Suspense=p,yt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=I,yt.__COMPILER_RUNTIME={__proto__:null,c:function(B){return I.H.useMemoCache(B)}},yt.cache=function(B){return function(){return B.apply(null,arguments)}},yt.cacheSignal=function(){return null},yt.cloneElement=function(B,ie,X){if(B==null)throw Error("The argument must be a React element, but you passed "+B+".");var Se=E({},B.props),pe=B.key;if(ie!=null)for(He in ie.key!==void 0&&(pe=""+ie.key),ie)!Z.call(ie,He)||He==="key"||He==="__self"||He==="__source"||He==="ref"&&ie.ref===void 0||(Se[He]=ie[He]);var He=arguments.length-2;if(He===1)Se.children=X;else if(1<He){for(var et=Array(He),Oe=0;Oe<He;Oe++)et[Oe]=arguments[Oe+2];Se.children=et}return re(B.type,pe,Se)},yt.createContext=function(B){return B={$$typeof:d,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null},B.Provider=B,B.Consumer={$$typeof:u,_context:B},B},yt.createElement=function(B,ie,X){var Se,pe={},He=null;if(ie!=null)for(Se in ie.key!==void 0&&(He=""+ie.key),ie)Z.call(ie,Se)&&Se!=="key"&&Se!=="__self"&&Se!=="__source"&&(pe[Se]=ie[Se]);var et=arguments.length-2;if(et===1)pe.children=X;else if(1<et){for(var Oe=Array(et),Ze=0;Ze<et;Ze++)Oe[Ze]=arguments[Ze+2];pe.children=Oe}if(B&&B.defaultProps)for(Se in et=B.defaultProps,et)pe[Se]===void 0&&(pe[Se]=et[Se]);return re(B,He,pe)},yt.createRef=function(){return{current:null}},yt.forwardRef=function(B){return{$$typeof:m,render:B}},yt.isValidElement=Te,yt.lazy=function(B){return{$$typeof:x,_payload:{_status:-1,_result:B},_init:G}},yt.memo=function(B,ie){return{$$typeof:v,type:B,compare:ie===void 0?null:ie}},yt.startTransition=function(B){var ie=I.T,X={};I.T=X;try{var Se=B(),pe=I.S;pe!==null&&pe(X,Se),typeof Se=="object"&&Se!==null&&typeof Se.then=="function"&&Se.then(D,we)}catch(He){we(He)}finally{ie!==null&&X.types!==null&&(ie.types=X.types),I.T=ie}},yt.unstable_useCacheRefresh=function(){return I.H.useCacheRefresh()},yt.use=function(B){return I.H.use(B)},yt.useActionState=function(B,ie,X){return I.H.useActionState(B,ie,X)},yt.useCallback=function(B,ie){return I.H.useCallback(B,ie)},yt.useContext=function(B){return I.H.useContext(B)},yt.useDebugValue=function(){},yt.useDeferredValue=function(B,ie){return I.H.useDeferredValue(B,ie)},yt.useEffect=function(B,ie){return I.H.useEffect(B,ie)},yt.useEffectEvent=function(B){return I.H.useEffectEvent(B)},yt.useId=function(){return I.H.useId()},yt.useImperativeHandle=function(B,ie,X){return I.H.useImperativeHandle(B,ie,X)},yt.useInsertionEffect=function(B,ie){return I.H.useInsertionEffect(B,ie)},yt.useLayoutEffect=function(B,ie){return I.H.useLayoutEffect(B,ie)},yt.useMemo=function(B,ie){return I.H.useMemo(B,ie)},yt.useOptimistic=function(B,ie){return I.H.useOptimistic(B,ie)},yt.useReducer=function(B,ie,X){return I.H.useReducer(B,ie,X)},yt.useRef=function(B){return I.H.useRef(B)},yt.useState=function(B){return I.H.useState(B)},yt.useSyncExternalStore=function(B,ie,X){return I.H.useSyncExternalStore(B,ie,X)},yt.useTransition=function(){return I.H.useTransition()},yt.version="19.2.3",yt}var Eg;function cf(){return Eg||(Eg=1,hd.exports=C1()),hd.exports}var h=cf(),md={exports:{}},ro={},pd={exports:{}},gd={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _g;function T1(){return _g||(_g=1,(function(e){function n(L,F){var G=L.length;L.push(F);e:for(;0<G;){var we=G-1>>>1,Me=L[we];if(0<c(Me,F))L[we]=F,L[G]=Me,G=we;else break e}}function a(L){return L.length===0?null:L[0]}function o(L){if(L.length===0)return null;var F=L[0],G=L.pop();if(G!==F){L[0]=G;e:for(var we=0,Me=L.length,B=Me>>>1;we<B;){var ie=2*(we+1)-1,X=L[ie],Se=ie+1,pe=L[Se];if(0>c(X,G))Se<Me&&0>c(pe,X)?(L[we]=pe,L[Se]=G,we=Se):(L[we]=X,L[ie]=G,we=ie);else if(Se<Me&&0>c(pe,G))L[we]=pe,L[Se]=G,we=Se;else break e}}return F}function c(L,F){var G=L.sortIndex-F.sortIndex;return G!==0?G:L.id-F.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;e.unstable_now=function(){return u.now()}}else{var d=Date,m=d.now();e.unstable_now=function(){return d.now()-m}}var p=[],v=[],x=1,b=null,w=3,_=!1,C=!1,E=!1,N=!1,z=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,U=typeof setImmediate<"u"?setImmediate:null;function P(L){for(var F=a(v);F!==null;){if(F.callback===null)o(v);else if(F.startTime<=L)o(v),F.sortIndex=F.expirationTime,n(p,F);else break;F=a(v)}}function A(L){if(E=!1,P(L),!C)if(a(p)!==null)C=!0,D||(D=!0,se());else{var F=a(v);F!==null&&Re(A,F.startTime-L)}}var D=!1,I=-1,Z=5,re=-1;function _e(){return N?!0:!(e.unstable_now()-re<Z)}function Te(){if(N=!1,D){var L=e.unstable_now();re=L;var F=!0;try{e:{C=!1,E&&(E=!1,O(I),I=-1),_=!0;var G=w;try{t:{for(P(L),b=a(p);b!==null&&!(b.expirationTime>L&&_e());){var we=b.callback;if(typeof we=="function"){b.callback=null,w=b.priorityLevel;var Me=we(b.expirationTime<=L);if(L=e.unstable_now(),typeof Me=="function"){b.callback=Me,P(L),F=!0;break t}b===a(p)&&o(p),P(L)}else o(p);b=a(p)}if(b!==null)F=!0;else{var B=a(v);B!==null&&Re(A,B.startTime-L),F=!1}}break e}finally{b=null,w=G,_=!1}F=void 0}}finally{F?se():D=!1}}}var se;if(typeof U=="function")se=function(){U(Te)};else if(typeof MessageChannel<"u"){var le=new MessageChannel,me=le.port2;le.port1.onmessage=Te,se=function(){me.postMessage(null)}}else se=function(){z(Te,0)};function Re(L,F){I=z(function(){L(e.unstable_now())},F)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(L){L.callback=null},e.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Z=0<L?Math.floor(1e3/L):5},e.unstable_getCurrentPriorityLevel=function(){return w},e.unstable_next=function(L){switch(w){case 1:case 2:case 3:var F=3;break;default:F=w}var G=w;w=F;try{return L()}finally{w=G}},e.unstable_requestPaint=function(){N=!0},e.unstable_runWithPriority=function(L,F){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var G=w;w=L;try{return F()}finally{w=G}},e.unstable_scheduleCallback=function(L,F,G){var we=e.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?we+G:we):G=we,L){case 1:var Me=-1;break;case 2:Me=250;break;case 5:Me=1073741823;break;case 4:Me=1e4;break;default:Me=5e3}return Me=G+Me,L={id:x++,callback:F,priorityLevel:L,startTime:G,expirationTime:Me,sortIndex:-1},G>we?(L.sortIndex=G,n(v,L),a(p)===null&&L===a(v)&&(E?(O(I),I=-1):E=!0,Re(A,G-we))):(L.sortIndex=Me,n(p,L),C||_||(C=!0,D||(D=!0,se()))),L},e.unstable_shouldYield=_e,e.unstable_wrapCallback=function(L){var F=w;return function(){var G=w;w=F;try{return L.apply(this,arguments)}finally{w=G}}}})(gd)),gd}var Cg;function k1(){return Cg||(Cg=1,pd.exports=T1()),pd.exports}var vd={exports:{}},as={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tg;function R1(){if(Tg)return as;Tg=1;var e=cf();function n(p){var v="https://react.dev/errors/"+p;if(1<arguments.length){v+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)v+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+p+"; visit "+v+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(){}var o={d:{f:a,r:function(){throw Error(n(522))},D:a,C:a,L:a,m:a,X:a,S:a,M:a},p:0,findDOMNode:null},c=Symbol.for("react.portal");function u(p,v,x){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:b==null?null:""+b,children:p,containerInfo:v,implementation:x}}var d=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(p,v){if(p==="font")return"";if(typeof v=="string")return v==="use-credentials"?v:""}return as.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,as.createPortal=function(p,v){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!v||v.nodeType!==1&&v.nodeType!==9&&v.nodeType!==11)throw Error(n(299));return u(p,v,null,x)},as.flushSync=function(p){var v=d.T,x=o.p;try{if(d.T=null,o.p=2,p)return p()}finally{d.T=v,o.p=x,o.d.f()}},as.preconnect=function(p,v){typeof p=="string"&&(v?(v=v.crossOrigin,v=typeof v=="string"?v==="use-credentials"?v:"":void 0):v=null,o.d.C(p,v))},as.prefetchDNS=function(p){typeof p=="string"&&o.d.D(p)},as.preinit=function(p,v){if(typeof p=="string"&&v&&typeof v.as=="string"){var x=v.as,b=m(x,v.crossOrigin),w=typeof v.integrity=="string"?v.integrity:void 0,_=typeof v.fetchPriority=="string"?v.fetchPriority:void 0;x==="style"?o.d.S(p,typeof v.precedence=="string"?v.precedence:void 0,{crossOrigin:b,integrity:w,fetchPriority:_}):x==="script"&&o.d.X(p,{crossOrigin:b,integrity:w,fetchPriority:_,nonce:typeof v.nonce=="string"?v.nonce:void 0})}},as.preinitModule=function(p,v){if(typeof p=="string")if(typeof v=="object"&&v!==null){if(v.as==null||v.as==="script"){var x=m(v.as,v.crossOrigin);o.d.M(p,{crossOrigin:x,integrity:typeof v.integrity=="string"?v.integrity:void 0,nonce:typeof v.nonce=="string"?v.nonce:void 0})}}else v==null&&o.d.M(p)},as.preload=function(p,v){if(typeof p=="string"&&typeof v=="object"&&v!==null&&typeof v.as=="string"){var x=v.as,b=m(x,v.crossOrigin);o.d.L(p,x,{crossOrigin:b,integrity:typeof v.integrity=="string"?v.integrity:void 0,nonce:typeof v.nonce=="string"?v.nonce:void 0,type:typeof v.type=="string"?v.type:void 0,fetchPriority:typeof v.fetchPriority=="string"?v.fetchPriority:void 0,referrerPolicy:typeof v.referrerPolicy=="string"?v.referrerPolicy:void 0,imageSrcSet:typeof v.imageSrcSet=="string"?v.imageSrcSet:void 0,imageSizes:typeof v.imageSizes=="string"?v.imageSizes:void 0,media:typeof v.media=="string"?v.media:void 0})}},as.preloadModule=function(p,v){if(typeof p=="string")if(v){var x=m(v.as,v.crossOrigin);o.d.m(p,{as:typeof v.as=="string"&&v.as!=="script"?v.as:void 0,crossOrigin:x,integrity:typeof v.integrity=="string"?v.integrity:void 0})}else o.d.m(p)},as.requestFormReset=function(p){o.d.r(p)},as.unstable_batchedUpdates=function(p,v){return p(v)},as.useFormState=function(p,v,x){return d.H.useFormState(p,v,x)},as.useFormStatus=function(){return d.H.useHostTransitionStatus()},as.version="19.2.3",as}var kg;function s0(){if(kg)return vd.exports;kg=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}return e(),vd.exports=R1(),vd.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rg;function A1(){if(Rg)return ro;Rg=1;var e=k1(),n=cf(),a=s0();function o(t){var s="https://react.dev/errors/"+t;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)s+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var s=t,r=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,(s.flags&4098)!==0&&(r=s.return),t=s.return;while(t)}return s.tag===3?r:null}function d(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function m(t){if(t.tag===31){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function p(t){if(u(t)!==t)throw Error(o(188))}function v(t){var s=t.alternate;if(!s){if(s=u(t),s===null)throw Error(o(188));return s!==t?null:t}for(var r=t,l=s;;){var f=r.return;if(f===null)break;var g=f.alternate;if(g===null){if(l=f.return,l!==null){r=l;continue}break}if(f.child===g.child){for(g=f.child;g;){if(g===r)return p(f),t;if(g===l)return p(f),s;g=g.sibling}throw Error(o(188))}if(r.return!==l.return)r=f,l=g;else{for(var S=!1,R=f.child;R;){if(R===r){S=!0,r=f,l=g;break}if(R===l){S=!0,l=f,r=g;break}R=R.sibling}if(!S){for(R=g.child;R;){if(R===r){S=!0,r=g,l=f;break}if(R===l){S=!0,l=g,r=f;break}R=R.sibling}if(!S)throw Error(o(189))}}if(r.alternate!==l)throw Error(o(190))}if(r.tag!==3)throw Error(o(188));return r.stateNode.current===r?t:s}function x(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t;for(t=t.child;t!==null;){if(s=x(t),s!==null)return s;t=t.sibling}return null}var b=Object.assign,w=Symbol.for("react.element"),_=Symbol.for("react.transitional.element"),C=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),z=Symbol.for("react.profiler"),O=Symbol.for("react.consumer"),U=Symbol.for("react.context"),P=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),D=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),Z=Symbol.for("react.lazy"),re=Symbol.for("react.activity"),_e=Symbol.for("react.memo_cache_sentinel"),Te=Symbol.iterator;function se(t){return t===null||typeof t!="object"?null:(t=Te&&t[Te]||t["@@iterator"],typeof t=="function"?t:null)}var le=Symbol.for("react.client.reference");function me(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===le?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case E:return"Fragment";case z:return"Profiler";case N:return"StrictMode";case A:return"Suspense";case D:return"SuspenseList";case re:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case C:return"Portal";case U:return t.displayName||"Context";case O:return(t._context.displayName||"Context")+".Consumer";case P:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case I:return s=t.displayName||null,s!==null?s:me(t.type)||"Memo";case Z:s=t._payload,t=t._init;try{return me(t(s))}catch{}}return null}var Re=Array.isArray,L=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,F=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G={pending:!1,data:null,method:null,action:null},we=[],Me=-1;function B(t){return{current:t}}function ie(t){0>Me||(t.current=we[Me],we[Me]=null,Me--)}function X(t,s){Me++,we[Me]=t.current,t.current=s}var Se=B(null),pe=B(null),He=B(null),et=B(null);function Oe(t,s){switch(X(He,s),X(pe,t),X(Se,null),s.nodeType){case 9:case 11:t=(t=s.documentElement)&&(t=t.namespaceURI)?Vp(t):0;break;default:if(t=s.tagName,s=s.namespaceURI)s=Vp(s),t=Fp(s,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}ie(Se),X(Se,t)}function Ze(){ie(Se),ie(pe),ie(He)}function Fe(t){t.memoizedState!==null&&X(et,t);var s=Se.current,r=Fp(s,t.type);s!==r&&(X(pe,t),X(Se,r))}function lt(t){pe.current===t&&(ie(Se),ie(pe)),et.current===t&&(ie(et),eo._currentValue=G)}var Xt,qt;function Qt(t){if(Xt===void 0)try{throw Error()}catch(r){var s=r.stack.trim().match(/\n( *(at )?)/);Xt=s&&s[1]||"",qt=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Xt+t+qt}var bn=!1;function Gt(t,s){if(!t||bn)return"";bn=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(s){var je=function(){throw Error()};if(Object.defineProperty(je.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(je,[])}catch(oe){var ae=oe}Reflect.construct(t,[],je)}else{try{je.call()}catch(oe){ae=oe}t.call(je.prototype)}}else{try{throw Error()}catch(oe){ae=oe}(je=t())&&typeof je.catch=="function"&&je.catch(function(){})}}catch(oe){if(oe&&ae&&typeof oe.stack=="string")return[oe.stack,ae.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=l.DetermineComponentFrameRoot(),S=g[0],R=g[1];if(S&&R){var H=S.split(`
`),ee=R.split(`
`);for(f=l=0;l<H.length&&!H[l].includes("DetermineComponentFrameRoot");)l++;for(;f<ee.length&&!ee[f].includes("DetermineComponentFrameRoot");)f++;if(l===H.length||f===ee.length)for(l=H.length-1,f=ee.length-1;1<=l&&0<=f&&H[l]!==ee[f];)f--;for(;1<=l&&0<=f;l--,f--)if(H[l]!==ee[f]){if(l!==1||f!==1)do if(l--,f--,0>f||H[l]!==ee[f]){var fe=`
`+H[l].replace(" at new "," at ");return t.displayName&&fe.includes("<anonymous>")&&(fe=fe.replace("<anonymous>",t.displayName)),fe}while(1<=l&&0<=f);break}}}finally{bn=!1,Error.prepareStackTrace=r}return(r=t?t.displayName||t.name:"")?Qt(r):""}function pn(t,s){switch(t.tag){case 26:case 27:case 5:return Qt(t.type);case 16:return Qt("Lazy");case 13:return t.child!==s&&s!==null?Qt("Suspense Fallback"):Qt("Suspense");case 19:return Qt("SuspenseList");case 0:case 15:return Gt(t.type,!1);case 11:return Gt(t.type.render,!1);case 1:return Gt(t.type,!0);case 31:return Qt("Activity");default:return""}}function V(t){try{var s="",r=null;do s+=pn(t,r),r=t,t=t.return;while(t);return s}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var he=Object.prototype.hasOwnProperty,Ge=e.unstable_scheduleCallback,tt=e.unstable_cancelCallback,Tt=e.unstable_shouldYield,bt=e.unstable_requestPaint,Ct=e.unstable_now,Mn=e.unstable_getCurrentPriorityLevel,cn=e.unstable_ImmediatePriority,st=e.unstable_UserBlockingPriority,Ce=e.unstable_NormalPriority,rt=e.unstable_LowPriority,Vt=e.unstable_IdlePriority,sn=e.log,Ue=e.unstable_setDisableYieldValue,Rt=null,At=null;function Ht(t){if(typeof sn=="function"&&Ue(t),At&&typeof At.setStrictMode=="function")try{At.setStrictMode(Rt,t)}catch{}}var mt=Math.clz32?Math.clz32:jn,is=Math.log,Sn=Math.LN2;function jn(t){return t>>>=0,t===0?32:31-(is(t)/Sn|0)|0}var On=256,Qn=262144,wn=4194304;function kn(t){var s=t&42;if(s!==0)return s;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Nn(t,s,r){var l=t.pendingLanes;if(l===0)return 0;var f=0,g=t.suspendedLanes,S=t.pingedLanes;t=t.warmLanes;var R=l&134217727;return R!==0?(l=R&~g,l!==0?f=kn(l):(S&=R,S!==0?f=kn(S):r||(r=R&~t,r!==0&&(f=kn(r))))):(R=l&~g,R!==0?f=kn(R):S!==0?f=kn(S):r||(r=l&~t,r!==0&&(f=kn(r)))),f===0?0:s!==0&&s!==f&&(s&g)===0&&(g=f&-f,r=s&-s,g>=r||g===32&&(r&4194048)!==0)?s:f}function Pn(t,s){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&s)===0}function cs(t,s){switch(t){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Vn(){var t=wn;return wn<<=1,(wn&62914560)===0&&(wn=4194304),t}function us(t){for(var s=[],r=0;31>r;r++)s.push(t);return s}function ds(t,s){t.pendingLanes|=s,s!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function qs(t,s,r,l,f,g){var S=t.pendingLanes;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=r,t.entangledLanes&=r,t.errorRecoveryDisabledLanes&=r,t.shellSuspendCounter=0;var R=t.entanglements,H=t.expirationTimes,ee=t.hiddenUpdates;for(r=S&~r;0<r;){var fe=31-mt(r),je=1<<fe;R[fe]=0,H[fe]=-1;var ae=ee[fe];if(ae!==null)for(ee[fe]=null,fe=0;fe<ae.length;fe++){var oe=ae[fe];oe!==null&&(oe.lane&=-536870913)}r&=~je}l!==0&&En(t,l,0),g!==0&&f===0&&t.tag!==0&&(t.suspendedLanes|=g&~(S&~s))}function En(t,s,r){t.pendingLanes|=s,t.suspendedLanes&=~s;var l=31-mt(s);t.entangledLanes|=s,t.entanglements[l]=t.entanglements[l]|1073741824|r&261930}function Ks(t,s){var r=t.entangledLanes|=s;for(t=t.entanglements;r;){var l=31-mt(r),f=1<<l;f&s|t[l]&s&&(t[l]|=s),r&=~f}}function j(t,s){var r=s&-s;return r=(r&42)!==0?1:k(r),(r&(t.suspendedLanes|s))!==0?0:r}function k(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function T(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function y(){var t=F.p;return t!==0?t:(t=window.event,t===void 0?32:pg(t.type))}function M(t,s){var r=F.p;try{return F.p=t,s()}finally{F.p=r}}var Y=Math.random().toString(36).slice(2),K="__reactFiber$"+Y,ce="__reactProps$"+Y,ke="__reactContainer$"+Y,Pe="__reactEvents$"+Y,De="__reactListeners$"+Y,wt="__reactHandles$"+Y,Ie="__reactResources$"+Y,nt="__reactMarker$"+Y;function de(t){delete t[K],delete t[ce],delete t[Pe],delete t[De],delete t[wt]}function $e(t){var s=t[K];if(s)return s;for(var r=t.parentNode;r;){if(s=r[ke]||r[K]){if(r=s.alternate,s.child!==null||r!==null&&r.child!==null)for(t=Jp(t);t!==null;){if(r=t[K])return r;t=Jp(t)}return s}t=r,r=t.parentNode}return null}function ct(t){if(t=t[K]||t[ke]){var s=t.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return t}return null}function ut(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t.stateNode;throw Error(o(33))}function dt(t){var s=t[Ie];return s||(s=t[Ie]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Ve(t){t[nt]=!0}var qe=new Set,We={};function ue(t,s){Ne(t,s),Ne(t+"Capture",s)}function Ne(t,s){for(We[t]=s,t=0;t<s.length;t++)qe.add(s[t])}var Le=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ze={},ne={};function te(t){return he.call(ne,t)?!0:he.call(ze,t)?!1:Le.test(t)?ne[t]=!0:(ze[t]=!0,!1)}function be(t,s,r){if(te(s))if(r===null)t.removeAttribute(s);else{switch(typeof r){case"undefined":case"function":case"symbol":t.removeAttribute(s);return;case"boolean":var l=s.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(s);return}}t.setAttribute(s,""+r)}}function ge(t,s,r){if(r===null)t.removeAttribute(s);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttribute(s,""+r)}}function ve(t,s,r,l){if(l===null)t.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttributeNS(s,r,""+l)}}function Ee(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function it(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function xt(t,s,r){var l=Object.getOwnPropertyDescriptor(t.constructor.prototype,s);if(!t.hasOwnProperty(s)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var f=l.get,g=l.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return f.call(this)},set:function(S){r=""+S,g.call(this,S)}}),Object.defineProperty(t,s,{enumerable:l.enumerable}),{getValue:function(){return r},setValue:function(S){r=""+S},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function pt(t){if(!t._valueTracker){var s=it(t)?"checked":"value";t._valueTracker=xt(t,s,""+t[s])}}function gt(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var r=s.getValue(),l="";return t&&(l=it(t)?t.checked?"true":"false":t.value),t=l,t!==r?(s.setValue(t),!0):!1}function $(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Nt=/[\n"\\]/g;function ht(t){return t.replace(Nt,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Mt(t,s,r,l,f,g,S,R){t.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?t.type=S:t.removeAttribute("type"),s!=null?S==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+Ee(s)):t.value!==""+Ee(s)&&(t.value=""+Ee(s)):S!=="submit"&&S!=="reset"||t.removeAttribute("value"),s!=null?kt(t,S,Ee(s)):r!=null?kt(t,S,Ee(r)):l!=null&&t.removeAttribute("value"),f==null&&g!=null&&(t.defaultChecked=!!g),f!=null&&(t.checked=f&&typeof f!="function"&&typeof f!="symbol"),R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?t.name=""+Ee(R):t.removeAttribute("name")}function St(t,s,r,l,f,g,S,R){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(t.type=g),s!=null||r!=null){if(!(g!=="submit"&&g!=="reset"||s!=null)){pt(t);return}r=r!=null?""+Ee(r):"",s=s!=null?""+Ee(s):r,R||s===t.value||(t.value=s),t.defaultValue=s}l=l??f,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=R?t.checked:!!l,t.defaultChecked=!!l,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(t.name=S),pt(t)}function kt(t,s,r){s==="number"&&$(t.ownerDocument)===t||t.defaultValue===""+r||(t.defaultValue=""+r)}function Et(t,s,r,l){if(t=t.options,s){s={};for(var f=0;f<r.length;f++)s["$"+r[f]]=!0;for(r=0;r<t.length;r++)f=s.hasOwnProperty("$"+t[r].value),t[r].selected!==f&&(t[r].selected=f),f&&l&&(t[r].defaultSelected=!0)}else{for(r=""+Ee(r),s=null,f=0;f<t.length;f++){if(t[f].value===r){t[f].selected=!0,l&&(t[f].defaultSelected=!0);return}s!==null||t[f].disabled||(s=t[f])}s!==null&&(s.selected=!0)}}function un(t,s,r){if(s!=null&&(s=""+Ee(s),s!==t.value&&(t.value=s),r==null)){t.defaultValue!==s&&(t.defaultValue=s);return}t.defaultValue=r!=null?""+Ee(r):""}function Bt(t,s,r,l){if(s==null){if(l!=null){if(r!=null)throw Error(o(92));if(Re(l)){if(1<l.length)throw Error(o(93));l=l[0]}r=l}r==null&&(r=""),s=r}r=Ee(s),t.defaultValue=r,l=t.textContent,l===r&&l!==""&&l!==null&&(t.value=l),pt(t)}function Yt(t,s){if(s){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=s;return}}t.textContent=s}var dn=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function rn(t,s,r){var l=s.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?l?t.setProperty(s,""):s==="float"?t.cssFloat="":t[s]="":l?t.setProperty(s,r):typeof r!="number"||r===0||dn.has(s)?s==="float"?t.cssFloat=r:t[s]=(""+r).trim():t[s]=r+"px"}function _n(t,s,r){if(s!=null&&typeof s!="object")throw Error(o(62));if(t=t.style,r!=null){for(var l in r)!r.hasOwnProperty(l)||s!=null&&s.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var f in s)l=s[f],s.hasOwnProperty(f)&&r[f]!==l&&rn(t,f,l)}else for(var g in s)s.hasOwnProperty(g)&&rn(t,g,s[g])}function zn(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Fn=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Gn=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Eo(t){return Gn.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function ta(){}var cc=null;function uc(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Sr=null,jr=null;function qf(t){var s=ct(t);if(s&&(t=s.stateNode)){var r=t[ce]||null;e:switch(t=s.stateNode,s.type){case"input":if(Mt(t,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),s=r.name,r.type==="radio"&&s!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+ht(""+s)+'"][type="radio"]'),s=0;s<r.length;s++){var l=r[s];if(l!==t&&l.form===t.form){var f=l[ce]||null;if(!f)throw Error(o(90));Mt(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(s=0;s<r.length;s++)l=r[s],l.form===t.form&&gt(l)}break e;case"textarea":un(t,r.value,r.defaultValue);break e;case"select":s=r.value,s!=null&&Et(t,!!r.multiple,s,!1)}}}var dc=!1;function Vf(t,s,r){if(dc)return t(s,r);dc=!0;try{var l=t(s);return l}finally{if(dc=!1,(Sr!==null||jr!==null)&&(fl(),Sr&&(s=Sr,t=jr,jr=Sr=null,qf(s),t)))for(s=0;s<t.length;s++)qf(t[s])}}function vi(t,s){var r=t.stateNode;if(r===null)return null;var l=r[ce]||null;if(l===null)return null;r=l[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(o(231,s,typeof r));return r}var na=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),fc=!1;if(na)try{var xi={};Object.defineProperty(xi,"passive",{get:function(){fc=!0}}),window.addEventListener("test",xi,xi),window.removeEventListener("test",xi,xi)}catch{fc=!1}var ja=null,hc=null,_o=null;function Ff(){if(_o)return _o;var t,s=hc,r=s.length,l,f="value"in ja?ja.value:ja.textContent,g=f.length;for(t=0;t<r&&s[t]===f[t];t++);var S=r-t;for(l=1;l<=S&&s[r-l]===f[g-l];l++);return _o=f.slice(t,1<l?1-l:void 0)}function Co(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function To(){return!0}function Gf(){return!1}function fs(t){function s(r,l,f,g,S){this._reactName=r,this._targetInst=f,this.type=l,this.nativeEvent=g,this.target=S,this.currentTarget=null;for(var R in t)t.hasOwnProperty(R)&&(r=t[R],this[R]=r?r(g):g[R]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?To:Gf,this.isPropagationStopped=Gf,this}return b(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=To)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=To)},persist:function(){},isPersistent:To}),s}var Xa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ko=fs(Xa),yi=b({},Xa,{view:0,detail:0}),yy=fs(yi),mc,pc,bi,Ro=b({},yi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vc,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==bi&&(bi&&t.type==="mousemove"?(mc=t.screenX-bi.screenX,pc=t.screenY-bi.screenY):pc=mc=0,bi=t),mc)},movementY:function(t){return"movementY"in t?t.movementY:pc}}),Yf=fs(Ro),by=b({},Ro,{dataTransfer:0}),Sy=fs(by),jy=b({},yi,{relatedTarget:0}),gc=fs(jy),wy=b({},Xa,{animationName:0,elapsedTime:0,pseudoElement:0}),Ny=fs(wy),Ey=b({},Xa,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),_y=fs(Ey),Cy=b({},Xa,{data:0}),Kf=fs(Cy),Ty={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ky={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ry={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ay(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=Ry[t])?!!s[t]:!1}function vc(){return Ay}var My=b({},yi,{key:function(t){if(t.key){var s=Ty[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=Co(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?ky[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vc,charCode:function(t){return t.type==="keypress"?Co(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Co(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Oy=fs(My),zy=b({},Ro,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Wf=fs(zy),Uy=b({},yi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vc}),Ly=fs(Uy),Dy=b({},Xa,{propertyName:0,elapsedTime:0,pseudoElement:0}),By=fs(Dy),$y=b({},Ro,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Iy=fs($y),Py=b({},Xa,{newState:0,oldState:0}),Hy=fs(Py),Zy=[9,13,27,32],xc=na&&"CompositionEvent"in window,Si=null;na&&"documentMode"in document&&(Si=document.documentMode);var qy=na&&"TextEvent"in window&&!Si,Xf=na&&(!xc||Si&&8<Si&&11>=Si),Qf=" ",Jf=!1;function eh(t,s){switch(t){case"keyup":return Zy.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function th(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var wr=!1;function Vy(t,s){switch(t){case"compositionend":return th(s);case"keypress":return s.which!==32?null:(Jf=!0,Qf);case"textInput":return t=s.data,t===Qf&&Jf?null:t;default:return null}}function Fy(t,s){if(wr)return t==="compositionend"||!xc&&eh(t,s)?(t=Ff(),_o=hc=ja=null,wr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Xf&&s.locale!=="ko"?null:s.data;default:return null}}var Gy={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function nh(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!Gy[t.type]:s==="textarea"}function sh(t,s,r,l){Sr?jr?jr.push(l):jr=[l]:Sr=l,s=yl(s,"onChange"),0<s.length&&(r=new ko("onChange","change",null,r,l),t.push({event:r,listeners:s}))}var ji=null,wi=null;function Yy(t){$p(t,0)}function Ao(t){var s=ut(t);if(gt(s))return t}function ah(t,s){if(t==="change")return s}var rh=!1;if(na){var yc;if(na){var bc="oninput"in document;if(!bc){var ih=document.createElement("div");ih.setAttribute("oninput","return;"),bc=typeof ih.oninput=="function"}yc=bc}else yc=!1;rh=yc&&(!document.documentMode||9<document.documentMode)}function oh(){ji&&(ji.detachEvent("onpropertychange",lh),wi=ji=null)}function lh(t){if(t.propertyName==="value"&&Ao(wi)){var s=[];sh(s,wi,t,uc(t)),Vf(Yy,s)}}function Ky(t,s,r){t==="focusin"?(oh(),ji=s,wi=r,ji.attachEvent("onpropertychange",lh)):t==="focusout"&&oh()}function Wy(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ao(wi)}function Xy(t,s){if(t==="click")return Ao(s)}function Qy(t,s){if(t==="input"||t==="change")return Ao(s)}function Jy(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var js=typeof Object.is=="function"?Object.is:Jy;function Ni(t,s){if(js(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var r=Object.keys(t),l=Object.keys(s);if(r.length!==l.length)return!1;for(l=0;l<r.length;l++){var f=r[l];if(!he.call(s,f)||!js(t[f],s[f]))return!1}return!0}function ch(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function uh(t,s){var r=ch(t);t=0;for(var l;r;){if(r.nodeType===3){if(l=t+r.textContent.length,t<=s&&l>=s)return{node:r,offset:s-t};t=l}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ch(r)}}function dh(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?dh(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function fh(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var s=$(t.document);s instanceof t.HTMLIFrameElement;){try{var r=typeof s.contentWindow.location.href=="string"}catch{r=!1}if(r)t=s.contentWindow;else break;s=$(t.document)}return s}function Sc(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}var eb=na&&"documentMode"in document&&11>=document.documentMode,Nr=null,jc=null,Ei=null,wc=!1;function hh(t,s,r){var l=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;wc||Nr==null||Nr!==$(l)||(l=Nr,"selectionStart"in l&&Sc(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Ei&&Ni(Ei,l)||(Ei=l,l=yl(jc,"onSelect"),0<l.length&&(s=new ko("onSelect","select",null,s,r),t.push({event:s,listeners:l}),s.target=Nr)))}function Qa(t,s){var r={};return r[t.toLowerCase()]=s.toLowerCase(),r["Webkit"+t]="webkit"+s,r["Moz"+t]="moz"+s,r}var Er={animationend:Qa("Animation","AnimationEnd"),animationiteration:Qa("Animation","AnimationIteration"),animationstart:Qa("Animation","AnimationStart"),transitionrun:Qa("Transition","TransitionRun"),transitionstart:Qa("Transition","TransitionStart"),transitioncancel:Qa("Transition","TransitionCancel"),transitionend:Qa("Transition","TransitionEnd")},Nc={},mh={};na&&(mh=document.createElement("div").style,"AnimationEvent"in window||(delete Er.animationend.animation,delete Er.animationiteration.animation,delete Er.animationstart.animation),"TransitionEvent"in window||delete Er.transitionend.transition);function Ja(t){if(Nc[t])return Nc[t];if(!Er[t])return t;var s=Er[t],r;for(r in s)if(s.hasOwnProperty(r)&&r in mh)return Nc[t]=s[r];return t}var ph=Ja("animationend"),gh=Ja("animationiteration"),vh=Ja("animationstart"),tb=Ja("transitionrun"),nb=Ja("transitionstart"),sb=Ja("transitioncancel"),xh=Ja("transitionend"),yh=new Map,Ec="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ec.push("scrollEnd");function Vs(t,s){yh.set(t,s),ue(s,[t])}var Mo=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},As=[],_r=0,_c=0;function Oo(){for(var t=_r,s=_c=_r=0;s<t;){var r=As[s];As[s++]=null;var l=As[s];As[s++]=null;var f=As[s];As[s++]=null;var g=As[s];if(As[s++]=null,l!==null&&f!==null){var S=l.pending;S===null?f.next=f:(f.next=S.next,S.next=f),l.pending=f}g!==0&&bh(r,f,g)}}function zo(t,s,r,l){As[_r++]=t,As[_r++]=s,As[_r++]=r,As[_r++]=l,_c|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function Cc(t,s,r,l){return zo(t,s,r,l),Uo(t)}function er(t,s){return zo(t,null,null,s),Uo(t)}function bh(t,s,r){t.lanes|=r;var l=t.alternate;l!==null&&(l.lanes|=r);for(var f=!1,g=t.return;g!==null;)g.childLanes|=r,l=g.alternate,l!==null&&(l.childLanes|=r),g.tag===22&&(t=g.stateNode,t===null||t._visibility&1||(f=!0)),t=g,g=g.return;return t.tag===3?(g=t.stateNode,f&&s!==null&&(f=31-mt(r),t=g.hiddenUpdates,l=t[f],l===null?t[f]=[s]:l.push(s),s.lane=r|536870912),g):null}function Uo(t){if(50<Gi)throw Gi=0,Lu=null,Error(o(185));for(var s=t.return;s!==null;)t=s,s=t.return;return t.tag===3?t.stateNode:null}var Cr={};function ab(t,s,r,l){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ws(t,s,r,l){return new ab(t,s,r,l)}function Tc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function sa(t,s){var r=t.alternate;return r===null?(r=ws(t.tag,s,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=s,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&65011712,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,s=t.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r.refCleanup=t.refCleanup,r}function Sh(t,s){t.flags&=65011714;var r=t.alternate;return r===null?(t.childLanes=0,t.lanes=s,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=r.childLanes,t.lanes=r.lanes,t.child=r.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=r.memoizedProps,t.memoizedState=r.memoizedState,t.updateQueue=r.updateQueue,t.type=r.type,s=r.dependencies,t.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),t}function Lo(t,s,r,l,f,g){var S=0;if(l=t,typeof t=="function")Tc(t)&&(S=1);else if(typeof t=="string")S=c1(t,r,Se.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case re:return t=ws(31,r,s,f),t.elementType=re,t.lanes=g,t;case E:return tr(r.children,f,g,s);case N:S=8,f|=24;break;case z:return t=ws(12,r,s,f|2),t.elementType=z,t.lanes=g,t;case A:return t=ws(13,r,s,f),t.elementType=A,t.lanes=g,t;case D:return t=ws(19,r,s,f),t.elementType=D,t.lanes=g,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case U:S=10;break e;case O:S=9;break e;case P:S=11;break e;case I:S=14;break e;case Z:S=16,l=null;break e}S=29,r=Error(o(130,t===null?"null":typeof t,"")),l=null}return s=ws(S,r,s,f),s.elementType=t,s.type=l,s.lanes=g,s}function tr(t,s,r,l){return t=ws(7,t,l,s),t.lanes=r,t}function kc(t,s,r){return t=ws(6,t,null,s),t.lanes=r,t}function jh(t){var s=ws(18,null,null,0);return s.stateNode=t,s}function Rc(t,s,r){return s=ws(4,t.children!==null?t.children:[],t.key,s),s.lanes=r,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}var wh=new WeakMap;function Ms(t,s){if(typeof t=="object"&&t!==null){var r=wh.get(t);return r!==void 0?r:(s={value:t,source:s,stack:V(s)},wh.set(t,s),s)}return{value:t,source:s,stack:V(s)}}var Tr=[],kr=0,Do=null,_i=0,Os=[],zs=0,wa=null,Ws=1,Xs="";function aa(t,s){Tr[kr++]=_i,Tr[kr++]=Do,Do=t,_i=s}function Nh(t,s,r){Os[zs++]=Ws,Os[zs++]=Xs,Os[zs++]=wa,wa=t;var l=Ws;t=Xs;var f=32-mt(l)-1;l&=~(1<<f),r+=1;var g=32-mt(s)+f;if(30<g){var S=f-f%5;g=(l&(1<<S)-1).toString(32),l>>=S,f-=S,Ws=1<<32-mt(s)+f|r<<f|l,Xs=g+t}else Ws=1<<g|r<<f|l,Xs=t}function Ac(t){t.return!==null&&(aa(t,1),Nh(t,1,0))}function Mc(t){for(;t===Do;)Do=Tr[--kr],Tr[kr]=null,_i=Tr[--kr],Tr[kr]=null;for(;t===wa;)wa=Os[--zs],Os[zs]=null,Xs=Os[--zs],Os[zs]=null,Ws=Os[--zs],Os[zs]=null}function Eh(t,s){Os[zs++]=Ws,Os[zs++]=Xs,Os[zs++]=wa,Ws=s.id,Xs=s.overflow,wa=t}var Jn=null,on=null,Dt=!1,Na=null,Us=!1,Oc=Error(o(519));function Ea(t){var s=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ci(Ms(s,t)),Oc}function _h(t){var s=t.stateNode,r=t.type,l=t.memoizedProps;switch(s[K]=t,s[ce]=l,r){case"dialog":zt("cancel",s),zt("close",s);break;case"iframe":case"object":case"embed":zt("load",s);break;case"video":case"audio":for(r=0;r<Ki.length;r++)zt(Ki[r],s);break;case"source":zt("error",s);break;case"img":case"image":case"link":zt("error",s),zt("load",s);break;case"details":zt("toggle",s);break;case"input":zt("invalid",s),St(s,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":zt("invalid",s);break;case"textarea":zt("invalid",s),Bt(s,l.value,l.defaultValue,l.children)}r=l.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||s.textContent===""+r||l.suppressHydrationWarning===!0||Zp(s.textContent,r)?(l.popover!=null&&(zt("beforetoggle",s),zt("toggle",s)),l.onScroll!=null&&zt("scroll",s),l.onScrollEnd!=null&&zt("scrollend",s),l.onClick!=null&&(s.onclick=ta),s=!0):s=!1,s||Ea(t,!0)}function Ch(t){for(Jn=t.return;Jn;)switch(Jn.tag){case 5:case 31:case 13:Us=!1;return;case 27:case 3:Us=!0;return;default:Jn=Jn.return}}function Rr(t){if(t!==Jn)return!1;if(!Dt)return Ch(t),Dt=!0,!1;var s=t.tag,r;if((r=s!==3&&s!==27)&&((r=s===5)&&(r=t.type,r=!(r!=="form"&&r!=="button")||Xu(t.type,t.memoizedProps)),r=!r),r&&on&&Ea(t),Ch(t),s===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(o(317));on=Qp(t)}else if(s===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(o(317));on=Qp(t)}else s===27?(s=on,$a(t.type)?(t=nd,nd=null,on=t):on=s):on=Jn?Ds(t.stateNode.nextSibling):null;return!0}function nr(){on=Jn=null,Dt=!1}function zc(){var t=Na;return t!==null&&(gs===null?gs=t:gs.push.apply(gs,t),Na=null),t}function Ci(t){Na===null?Na=[t]:Na.push(t)}var Uc=B(null),sr=null,ra=null;function _a(t,s,r){X(Uc,s._currentValue),s._currentValue=r}function ia(t){t._currentValue=Uc.current,ie(Uc)}function Lc(t,s,r){for(;t!==null;){var l=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,l!==null&&(l.childLanes|=s)):l!==null&&(l.childLanes&s)!==s&&(l.childLanes|=s),t===r)break;t=t.return}}function Dc(t,s,r,l){var f=t.child;for(f!==null&&(f.return=t);f!==null;){var g=f.dependencies;if(g!==null){var S=f.child;g=g.firstContext;e:for(;g!==null;){var R=g;g=f;for(var H=0;H<s.length;H++)if(R.context===s[H]){g.lanes|=r,R=g.alternate,R!==null&&(R.lanes|=r),Lc(g.return,r,t),l||(S=null);break e}g=R.next}}else if(f.tag===18){if(S=f.return,S===null)throw Error(o(341));S.lanes|=r,g=S.alternate,g!==null&&(g.lanes|=r),Lc(S,r,t),S=null}else S=f.child;if(S!==null)S.return=f;else for(S=f;S!==null;){if(S===t){S=null;break}if(f=S.sibling,f!==null){f.return=S.return,S=f;break}S=S.return}f=S}}function Ar(t,s,r,l){t=null;for(var f=s,g=!1;f!==null;){if(!g){if((f.flags&524288)!==0)g=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var S=f.alternate;if(S===null)throw Error(o(387));if(S=S.memoizedProps,S!==null){var R=f.type;js(f.pendingProps.value,S.value)||(t!==null?t.push(R):t=[R])}}else if(f===et.current){if(S=f.alternate,S===null)throw Error(o(387));S.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(t!==null?t.push(eo):t=[eo])}f=f.return}t!==null&&Dc(s,t,r,l),s.flags|=262144}function Bo(t){for(t=t.firstContext;t!==null;){if(!js(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function ar(t){sr=t,ra=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function es(t){return Th(sr,t)}function $o(t,s){return sr===null&&ar(t),Th(t,s)}function Th(t,s){var r=s._currentValue;if(s={context:s,memoizedValue:r,next:null},ra===null){if(t===null)throw Error(o(308));ra=s,t.dependencies={lanes:0,firstContext:s},t.flags|=524288}else ra=ra.next=s;return r}var rb=typeof AbortController<"u"?AbortController:function(){var t=[],s=this.signal={aborted:!1,addEventListener:function(r,l){t.push(l)}};this.abort=function(){s.aborted=!0,t.forEach(function(r){return r()})}},ib=e.unstable_scheduleCallback,ob=e.unstable_NormalPriority,Un={$$typeof:U,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Bc(){return{controller:new rb,data:new Map,refCount:0}}function Ti(t){t.refCount--,t.refCount===0&&ib(ob,function(){t.controller.abort()})}var ki=null,$c=0,Mr=0,Or=null;function lb(t,s){if(ki===null){var r=ki=[];$c=0,Mr=Hu(),Or={status:"pending",value:void 0,then:function(l){r.push(l)}}}return $c++,s.then(kh,kh),s}function kh(){if(--$c===0&&ki!==null){Or!==null&&(Or.status="fulfilled");var t=ki;ki=null,Mr=0,Or=null;for(var s=0;s<t.length;s++)(0,t[s])()}}function cb(t,s){var r=[],l={status:"pending",value:null,reason:null,then:function(f){r.push(f)}};return t.then(function(){l.status="fulfilled",l.value=s;for(var f=0;f<r.length;f++)(0,r[f])(s)},function(f){for(l.status="rejected",l.reason=f,f=0;f<r.length;f++)(0,r[f])(void 0)}),l}var Rh=L.S;L.S=function(t,s){hp=Ct(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&lb(t,s),Rh!==null&&Rh(t,s)};var rr=B(null);function Ic(){var t=rr.current;return t!==null?t:an.pooledCache}function Io(t,s){s===null?X(rr,rr.current):X(rr,s.pool)}function Ah(){var t=Ic();return t===null?null:{parent:Un._currentValue,pool:t}}var zr=Error(o(460)),Pc=Error(o(474)),Po=Error(o(542)),Ho={then:function(){}};function Mh(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Oh(t,s,r){switch(r=t[r],r===void 0?t.push(s):r!==s&&(s.then(ta,ta),s=r),s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,Uh(t),t;default:if(typeof s.status=="string")s.then(ta,ta);else{if(t=an,t!==null&&100<t.shellSuspendCounter)throw Error(o(482));t=s,t.status="pending",t.then(function(l){if(s.status==="pending"){var f=s;f.status="fulfilled",f.value=l}},function(l){if(s.status==="pending"){var f=s;f.status="rejected",f.reason=l}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,Uh(t),t}throw or=s,zr}}function ir(t){try{var s=t._init;return s(t._payload)}catch(r){throw r!==null&&typeof r=="object"&&typeof r.then=="function"?(or=r,zr):r}}var or=null;function zh(){if(or===null)throw Error(o(459));var t=or;return or=null,t}function Uh(t){if(t===zr||t===Po)throw Error(o(483))}var Ur=null,Ri=0;function Zo(t){var s=Ri;return Ri+=1,Ur===null&&(Ur=[]),Oh(Ur,t,s)}function Ai(t,s){s=s.props.ref,t.ref=s!==void 0?s:null}function qo(t,s){throw s.$$typeof===w?Error(o(525)):(t=Object.prototype.toString.call(s),Error(o(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t)))}function Lh(t){function s(W,q){if(t){var J=W.deletions;J===null?(W.deletions=[q],W.flags|=16):J.push(q)}}function r(W,q){if(!t)return null;for(;q!==null;)s(W,q),q=q.sibling;return null}function l(W){for(var q=new Map;W!==null;)W.key!==null?q.set(W.key,W):q.set(W.index,W),W=W.sibling;return q}function f(W,q){return W=sa(W,q),W.index=0,W.sibling=null,W}function g(W,q,J){return W.index=J,t?(J=W.alternate,J!==null?(J=J.index,J<q?(W.flags|=67108866,q):J):(W.flags|=67108866,q)):(W.flags|=1048576,q)}function S(W){return t&&W.alternate===null&&(W.flags|=67108866),W}function R(W,q,J,ye){return q===null||q.tag!==6?(q=kc(J,W.mode,ye),q.return=W,q):(q=f(q,J),q.return=W,q)}function H(W,q,J,ye){var ot=J.type;return ot===E?fe(W,q,J.props.children,ye,J.key):q!==null&&(q.elementType===ot||typeof ot=="object"&&ot!==null&&ot.$$typeof===Z&&ir(ot)===q.type)?(q=f(q,J.props),Ai(q,J),q.return=W,q):(q=Lo(J.type,J.key,J.props,null,W.mode,ye),Ai(q,J),q.return=W,q)}function ee(W,q,J,ye){return q===null||q.tag!==4||q.stateNode.containerInfo!==J.containerInfo||q.stateNode.implementation!==J.implementation?(q=Rc(J,W.mode,ye),q.return=W,q):(q=f(q,J.children||[]),q.return=W,q)}function fe(W,q,J,ye,ot){return q===null||q.tag!==7?(q=tr(J,W.mode,ye,ot),q.return=W,q):(q=f(q,J),q.return=W,q)}function je(W,q,J){if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return q=kc(""+q,W.mode,J),q.return=W,q;if(typeof q=="object"&&q!==null){switch(q.$$typeof){case _:return J=Lo(q.type,q.key,q.props,null,W.mode,J),Ai(J,q),J.return=W,J;case C:return q=Rc(q,W.mode,J),q.return=W,q;case Z:return q=ir(q),je(W,q,J)}if(Re(q)||se(q))return q=tr(q,W.mode,J,null),q.return=W,q;if(typeof q.then=="function")return je(W,Zo(q),J);if(q.$$typeof===U)return je(W,$o(W,q),J);qo(W,q)}return null}function ae(W,q,J,ye){var ot=q!==null?q.key:null;if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return ot!==null?null:R(W,q,""+J,ye);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case _:return J.key===ot?H(W,q,J,ye):null;case C:return J.key===ot?ee(W,q,J,ye):null;case Z:return J=ir(J),ae(W,q,J,ye)}if(Re(J)||se(J))return ot!==null?null:fe(W,q,J,ye,null);if(typeof J.then=="function")return ae(W,q,Zo(J),ye);if(J.$$typeof===U)return ae(W,q,$o(W,J),ye);qo(W,J)}return null}function oe(W,q,J,ye,ot){if(typeof ye=="string"&&ye!==""||typeof ye=="number"||typeof ye=="bigint")return W=W.get(J)||null,R(q,W,""+ye,ot);if(typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case _:return W=W.get(ye.key===null?J:ye.key)||null,H(q,W,ye,ot);case C:return W=W.get(ye.key===null?J:ye.key)||null,ee(q,W,ye,ot);case Z:return ye=ir(ye),oe(W,q,J,ye,ot)}if(Re(ye)||se(ye))return W=W.get(J)||null,fe(q,W,ye,ot,null);if(typeof ye.then=="function")return oe(W,q,J,Zo(ye),ot);if(ye.$$typeof===U)return oe(W,q,J,$o(q,ye),ot);qo(q,ye)}return null}function Ye(W,q,J,ye){for(var ot=null,$t=null,Xe=q,_t=q=0,Lt=null;Xe!==null&&_t<J.length;_t++){Xe.index>_t?(Lt=Xe,Xe=null):Lt=Xe.sibling;var It=ae(W,Xe,J[_t],ye);if(It===null){Xe===null&&(Xe=Lt);break}t&&Xe&&It.alternate===null&&s(W,Xe),q=g(It,q,_t),$t===null?ot=It:$t.sibling=It,$t=It,Xe=Lt}if(_t===J.length)return r(W,Xe),Dt&&aa(W,_t),ot;if(Xe===null){for(;_t<J.length;_t++)Xe=je(W,J[_t],ye),Xe!==null&&(q=g(Xe,q,_t),$t===null?ot=Xe:$t.sibling=Xe,$t=Xe);return Dt&&aa(W,_t),ot}for(Xe=l(Xe);_t<J.length;_t++)Lt=oe(Xe,W,_t,J[_t],ye),Lt!==null&&(t&&Lt.alternate!==null&&Xe.delete(Lt.key===null?_t:Lt.key),q=g(Lt,q,_t),$t===null?ot=Lt:$t.sibling=Lt,$t=Lt);return t&&Xe.forEach(function(qa){return s(W,qa)}),Dt&&aa(W,_t),ot}function ft(W,q,J,ye){if(J==null)throw Error(o(151));for(var ot=null,$t=null,Xe=q,_t=q=0,Lt=null,It=J.next();Xe!==null&&!It.done;_t++,It=J.next()){Xe.index>_t?(Lt=Xe,Xe=null):Lt=Xe.sibling;var qa=ae(W,Xe,It.value,ye);if(qa===null){Xe===null&&(Xe=Lt);break}t&&Xe&&qa.alternate===null&&s(W,Xe),q=g(qa,q,_t),$t===null?ot=qa:$t.sibling=qa,$t=qa,Xe=Lt}if(It.done)return r(W,Xe),Dt&&aa(W,_t),ot;if(Xe===null){for(;!It.done;_t++,It=J.next())It=je(W,It.value,ye),It!==null&&(q=g(It,q,_t),$t===null?ot=It:$t.sibling=It,$t=It);return Dt&&aa(W,_t),ot}for(Xe=l(Xe);!It.done;_t++,It=J.next())It=oe(Xe,W,_t,It.value,ye),It!==null&&(t&&It.alternate!==null&&Xe.delete(It.key===null?_t:It.key),q=g(It,q,_t),$t===null?ot=It:$t.sibling=It,$t=It);return t&&Xe.forEach(function(b1){return s(W,b1)}),Dt&&aa(W,_t),ot}function tn(W,q,J,ye){if(typeof J=="object"&&J!==null&&J.type===E&&J.key===null&&(J=J.props.children),typeof J=="object"&&J!==null){switch(J.$$typeof){case _:e:{for(var ot=J.key;q!==null;){if(q.key===ot){if(ot=J.type,ot===E){if(q.tag===7){r(W,q.sibling),ye=f(q,J.props.children),ye.return=W,W=ye;break e}}else if(q.elementType===ot||typeof ot=="object"&&ot!==null&&ot.$$typeof===Z&&ir(ot)===q.type){r(W,q.sibling),ye=f(q,J.props),Ai(ye,J),ye.return=W,W=ye;break e}r(W,q);break}else s(W,q);q=q.sibling}J.type===E?(ye=tr(J.props.children,W.mode,ye,J.key),ye.return=W,W=ye):(ye=Lo(J.type,J.key,J.props,null,W.mode,ye),Ai(ye,J),ye.return=W,W=ye)}return S(W);case C:e:{for(ot=J.key;q!==null;){if(q.key===ot)if(q.tag===4&&q.stateNode.containerInfo===J.containerInfo&&q.stateNode.implementation===J.implementation){r(W,q.sibling),ye=f(q,J.children||[]),ye.return=W,W=ye;break e}else{r(W,q);break}else s(W,q);q=q.sibling}ye=Rc(J,W.mode,ye),ye.return=W,W=ye}return S(W);case Z:return J=ir(J),tn(W,q,J,ye)}if(Re(J))return Ye(W,q,J,ye);if(se(J)){if(ot=se(J),typeof ot!="function")throw Error(o(150));return J=ot.call(J),ft(W,q,J,ye)}if(typeof J.then=="function")return tn(W,q,Zo(J),ye);if(J.$$typeof===U)return tn(W,q,$o(W,J),ye);qo(W,J)}return typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint"?(J=""+J,q!==null&&q.tag===6?(r(W,q.sibling),ye=f(q,J),ye.return=W,W=ye):(r(W,q),ye=kc(J,W.mode,ye),ye.return=W,W=ye),S(W)):r(W,q)}return function(W,q,J,ye){try{Ri=0;var ot=tn(W,q,J,ye);return Ur=null,ot}catch(Xe){if(Xe===zr||Xe===Po)throw Xe;var $t=ws(29,Xe,null,W.mode);return $t.lanes=ye,$t.return=W,$t}finally{}}}var lr=Lh(!0),Dh=Lh(!1),Ca=!1;function Hc(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Zc(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Ta(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function ka(t,s,r){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(Zt&2)!==0){var f=l.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),l.pending=s,s=Uo(t),bh(t,null,r),s}return zo(t,l,s,r),Uo(t)}function Mi(t,s,r){if(s=s.updateQueue,s!==null&&(s=s.shared,(r&4194048)!==0)){var l=s.lanes;l&=t.pendingLanes,r|=l,s.lanes=r,Ks(t,r)}}function qc(t,s){var r=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,r===l)){var f=null,g=null;if(r=r.firstBaseUpdate,r!==null){do{var S={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};g===null?f=g=S:g=g.next=S,r=r.next}while(r!==null);g===null?f=g=s:g=g.next=s}else f=g=s;r={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:g,shared:l.shared,callbacks:l.callbacks},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=s:t.next=s,r.lastBaseUpdate=s}var Vc=!1;function Oi(){if(Vc){var t=Or;if(t!==null)throw t}}function zi(t,s,r,l){Vc=!1;var f=t.updateQueue;Ca=!1;var g=f.firstBaseUpdate,S=f.lastBaseUpdate,R=f.shared.pending;if(R!==null){f.shared.pending=null;var H=R,ee=H.next;H.next=null,S===null?g=ee:S.next=ee,S=H;var fe=t.alternate;fe!==null&&(fe=fe.updateQueue,R=fe.lastBaseUpdate,R!==S&&(R===null?fe.firstBaseUpdate=ee:R.next=ee,fe.lastBaseUpdate=H))}if(g!==null){var je=f.baseState;S=0,fe=ee=H=null,R=g;do{var ae=R.lane&-536870913,oe=ae!==R.lane;if(oe?(Ut&ae)===ae:(l&ae)===ae){ae!==0&&ae===Mr&&(Vc=!0),fe!==null&&(fe=fe.next={lane:0,tag:R.tag,payload:R.payload,callback:null,next:null});e:{var Ye=t,ft=R;ae=s;var tn=r;switch(ft.tag){case 1:if(Ye=ft.payload,typeof Ye=="function"){je=Ye.call(tn,je,ae);break e}je=Ye;break e;case 3:Ye.flags=Ye.flags&-65537|128;case 0:if(Ye=ft.payload,ae=typeof Ye=="function"?Ye.call(tn,je,ae):Ye,ae==null)break e;je=b({},je,ae);break e;case 2:Ca=!0}}ae=R.callback,ae!==null&&(t.flags|=64,oe&&(t.flags|=8192),oe=f.callbacks,oe===null?f.callbacks=[ae]:oe.push(ae))}else oe={lane:ae,tag:R.tag,payload:R.payload,callback:R.callback,next:null},fe===null?(ee=fe=oe,H=je):fe=fe.next=oe,S|=ae;if(R=R.next,R===null){if(R=f.shared.pending,R===null)break;oe=R,R=oe.next,oe.next=null,f.lastBaseUpdate=oe,f.shared.pending=null}}while(!0);fe===null&&(H=je),f.baseState=H,f.firstBaseUpdate=ee,f.lastBaseUpdate=fe,g===null&&(f.shared.lanes=0),za|=S,t.lanes=S,t.memoizedState=je}}function Bh(t,s){if(typeof t!="function")throw Error(o(191,t));t.call(s)}function $h(t,s){var r=t.callbacks;if(r!==null)for(t.callbacks=null,t=0;t<r.length;t++)Bh(r[t],s)}var Lr=B(null),Vo=B(0);function Ih(t,s){t=pa,X(Vo,t),X(Lr,s),pa=t|s.baseLanes}function Fc(){X(Vo,pa),X(Lr,Lr.current)}function Gc(){pa=Vo.current,ie(Lr),ie(Vo)}var Ns=B(null),Ls=null;function Ra(t){var s=t.alternate;X(Rn,Rn.current&1),X(Ns,t),Ls===null&&(s===null||Lr.current!==null||s.memoizedState!==null)&&(Ls=t)}function Yc(t){X(Rn,Rn.current),X(Ns,t),Ls===null&&(Ls=t)}function Ph(t){t.tag===22?(X(Rn,Rn.current),X(Ns,t),Ls===null&&(Ls=t)):Aa()}function Aa(){X(Rn,Rn.current),X(Ns,Ns.current)}function Es(t){ie(Ns),Ls===t&&(Ls=null),ie(Rn)}var Rn=B(0);function Fo(t){for(var s=t;s!==null;){if(s.tag===13){var r=s.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||ed(r)||td(r)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var oa=0,jt=null,Jt=null,Ln=null,Go=!1,Dr=!1,cr=!1,Yo=0,Ui=0,Br=null,ub=0;function Cn(){throw Error(o(321))}function Kc(t,s){if(s===null)return!1;for(var r=0;r<s.length&&r<t.length;r++)if(!js(t[r],s[r]))return!1;return!0}function Wc(t,s,r,l,f,g){return oa=g,jt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,L.H=t===null||t.memoizedState===null?Nm:du,cr=!1,g=r(l,f),cr=!1,Dr&&(g=Zh(s,r,l,f)),Hh(t),g}function Hh(t){L.H=Bi;var s=Jt!==null&&Jt.next!==null;if(oa=0,Ln=Jt=jt=null,Go=!1,Ui=0,Br=null,s)throw Error(o(300));t===null||Dn||(t=t.dependencies,t!==null&&Bo(t)&&(Dn=!0))}function Zh(t,s,r,l){jt=t;var f=0;do{if(Dr&&(Br=null),Ui=0,Dr=!1,25<=f)throw Error(o(301));if(f+=1,Ln=Jt=null,t.updateQueue!=null){var g=t.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}L.H=Em,g=s(r,l)}while(Dr);return g}function db(){var t=L.H,s=t.useState()[0];return s=typeof s.then=="function"?Li(s):s,t=t.useState()[0],(Jt!==null?Jt.memoizedState:null)!==t&&(jt.flags|=1024),s}function Xc(){var t=Yo!==0;return Yo=0,t}function Qc(t,s,r){s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~r}function Jc(t){if(Go){for(t=t.memoizedState;t!==null;){var s=t.queue;s!==null&&(s.pending=null),t=t.next}Go=!1}oa=0,Ln=Jt=jt=null,Dr=!1,Ui=Yo=0,Br=null}function os(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ln===null?jt.memoizedState=Ln=t:Ln=Ln.next=t,Ln}function An(){if(Jt===null){var t=jt.alternate;t=t!==null?t.memoizedState:null}else t=Jt.next;var s=Ln===null?jt.memoizedState:Ln.next;if(s!==null)Ln=s,Jt=t;else{if(t===null)throw jt.alternate===null?Error(o(467)):Error(o(310));Jt=t,t={memoizedState:Jt.memoizedState,baseState:Jt.baseState,baseQueue:Jt.baseQueue,queue:Jt.queue,next:null},Ln===null?jt.memoizedState=Ln=t:Ln=Ln.next=t}return Ln}function Ko(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Li(t){var s=Ui;return Ui+=1,Br===null&&(Br=[]),t=Oh(Br,t,s),s=jt,(Ln===null?s.memoizedState:Ln.next)===null&&(s=s.alternate,L.H=s===null||s.memoizedState===null?Nm:du),t}function Wo(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Li(t);if(t.$$typeof===U)return es(t)}throw Error(o(438,String(t)))}function eu(t){var s=null,r=jt.updateQueue;if(r!==null&&(s=r.memoCache),s==null){var l=jt.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(s={data:l.data.map(function(f){return f.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),r===null&&(r=Ko(),jt.updateQueue=r),r.memoCache=s,r=s.data[s.index],r===void 0)for(r=s.data[s.index]=Array(t),l=0;l<t;l++)r[l]=_e;return s.index++,r}function la(t,s){return typeof s=="function"?s(t):s}function Xo(t){var s=An();return tu(s,Jt,t)}function tu(t,s,r){var l=t.queue;if(l===null)throw Error(o(311));l.lastRenderedReducer=r;var f=t.baseQueue,g=l.pending;if(g!==null){if(f!==null){var S=f.next;f.next=g.next,g.next=S}s.baseQueue=f=g,l.pending=null}if(g=t.baseState,f===null)t.memoizedState=g;else{s=f.next;var R=S=null,H=null,ee=s,fe=!1;do{var je=ee.lane&-536870913;if(je!==ee.lane?(Ut&je)===je:(oa&je)===je){var ae=ee.revertLane;if(ae===0)H!==null&&(H=H.next={lane:0,revertLane:0,gesture:null,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null}),je===Mr&&(fe=!0);else if((oa&ae)===ae){ee=ee.next,ae===Mr&&(fe=!0);continue}else je={lane:0,revertLane:ee.revertLane,gesture:null,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null},H===null?(R=H=je,S=g):H=H.next=je,jt.lanes|=ae,za|=ae;je=ee.action,cr&&r(g,je),g=ee.hasEagerState?ee.eagerState:r(g,je)}else ae={lane:je,revertLane:ee.revertLane,gesture:ee.gesture,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null},H===null?(R=H=ae,S=g):H=H.next=ae,jt.lanes|=je,za|=je;ee=ee.next}while(ee!==null&&ee!==s);if(H===null?S=g:H.next=R,!js(g,t.memoizedState)&&(Dn=!0,fe&&(r=Or,r!==null)))throw r;t.memoizedState=g,t.baseState=S,t.baseQueue=H,l.lastRenderedState=g}return f===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function nu(t){var s=An(),r=s.queue;if(r===null)throw Error(o(311));r.lastRenderedReducer=t;var l=r.dispatch,f=r.pending,g=s.memoizedState;if(f!==null){r.pending=null;var S=f=f.next;do g=t(g,S.action),S=S.next;while(S!==f);js(g,s.memoizedState)||(Dn=!0),s.memoizedState=g,s.baseQueue===null&&(s.baseState=g),r.lastRenderedState=g}return[g,l]}function qh(t,s,r){var l=jt,f=An(),g=Dt;if(g){if(r===void 0)throw Error(o(407));r=r()}else r=s();var S=!js((Jt||f).memoizedState,r);if(S&&(f.memoizedState=r,Dn=!0),f=f.queue,ru(Gh.bind(null,l,f,t),[t]),f.getSnapshot!==s||S||Ln!==null&&Ln.memoizedState.tag&1){if(l.flags|=2048,$r(9,{destroy:void 0},Fh.bind(null,l,f,r,s),null),an===null)throw Error(o(349));g||(oa&127)!==0||Vh(l,s,r)}return r}function Vh(t,s,r){t.flags|=16384,t={getSnapshot:s,value:r},s=jt.updateQueue,s===null?(s=Ko(),jt.updateQueue=s,s.stores=[t]):(r=s.stores,r===null?s.stores=[t]:r.push(t))}function Fh(t,s,r,l){s.value=r,s.getSnapshot=l,Yh(s)&&Kh(t)}function Gh(t,s,r){return r(function(){Yh(s)&&Kh(t)})}function Yh(t){var s=t.getSnapshot;t=t.value;try{var r=s();return!js(t,r)}catch{return!0}}function Kh(t){var s=er(t,2);s!==null&&vs(s,t,2)}function su(t){var s=os();if(typeof t=="function"){var r=t;if(t=r(),cr){Ht(!0);try{r()}finally{Ht(!1)}}}return s.memoizedState=s.baseState=t,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:la,lastRenderedState:t},s}function Wh(t,s,r,l){return t.baseState=r,tu(t,Jt,typeof l=="function"?l:la)}function fb(t,s,r,l,f){if(el(t))throw Error(o(485));if(t=s.action,t!==null){var g={payload:f,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){g.listeners.push(S)}};L.T!==null?r(!0):g.isTransition=!1,l(g),r=s.pending,r===null?(g.next=s.pending=g,Xh(s,g)):(g.next=r.next,s.pending=r.next=g)}}function Xh(t,s){var r=s.action,l=s.payload,f=t.state;if(s.isTransition){var g=L.T,S={};L.T=S;try{var R=r(f,l),H=L.S;H!==null&&H(S,R),Qh(t,s,R)}catch(ee){au(t,s,ee)}finally{g!==null&&S.types!==null&&(g.types=S.types),L.T=g}}else try{g=r(f,l),Qh(t,s,g)}catch(ee){au(t,s,ee)}}function Qh(t,s,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(l){Jh(t,s,l)},function(l){return au(t,s,l)}):Jh(t,s,r)}function Jh(t,s,r){s.status="fulfilled",s.value=r,em(s),t.state=r,s=t.pending,s!==null&&(r=s.next,r===s?t.pending=null:(r=r.next,s.next=r,Xh(t,r)))}function au(t,s,r){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do s.status="rejected",s.reason=r,em(s),s=s.next;while(s!==l)}t.action=null}function em(t){t=t.listeners;for(var s=0;s<t.length;s++)(0,t[s])()}function tm(t,s){return s}function nm(t,s){if(Dt){var r=an.formState;if(r!==null){e:{var l=jt;if(Dt){if(on){t:{for(var f=on,g=Us;f.nodeType!==8;){if(!g){f=null;break t}if(f=Ds(f.nextSibling),f===null){f=null;break t}}g=f.data,f=g==="F!"||g==="F"?f:null}if(f){on=Ds(f.nextSibling),l=f.data==="F!";break e}}Ea(l)}l=!1}l&&(s=r[0])}}return r=os(),r.memoizedState=r.baseState=s,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:tm,lastRenderedState:s},r.queue=l,r=Sm.bind(null,jt,l),l.dispatch=r,l=su(!1),g=uu.bind(null,jt,!1,l.queue),l=os(),f={state:s,dispatch:null,action:t,pending:null},l.queue=f,r=fb.bind(null,jt,f,g,r),f.dispatch=r,l.memoizedState=t,[s,r,!1]}function sm(t){var s=An();return am(s,Jt,t)}function am(t,s,r){if(s=tu(t,s,tm)[0],t=Xo(la)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var l=Li(s)}catch(S){throw S===zr?Po:S}else l=s;s=An();var f=s.queue,g=f.dispatch;return r!==s.memoizedState&&(jt.flags|=2048,$r(9,{destroy:void 0},hb.bind(null,f,r),null)),[l,g,t]}function hb(t,s){t.action=s}function rm(t){var s=An(),r=Jt;if(r!==null)return am(s,r,t);An(),s=s.memoizedState,r=An();var l=r.queue.dispatch;return r.memoizedState=t,[s,l,!1]}function $r(t,s,r,l){return t={tag:t,create:r,deps:l,inst:s,next:null},s=jt.updateQueue,s===null&&(s=Ko(),jt.updateQueue=s),r=s.lastEffect,r===null?s.lastEffect=t.next=t:(l=r.next,r.next=t,t.next=l,s.lastEffect=t),t}function im(){return An().memoizedState}function Qo(t,s,r,l){var f=os();jt.flags|=t,f.memoizedState=$r(1|s,{destroy:void 0},r,l===void 0?null:l)}function Jo(t,s,r,l){var f=An();l=l===void 0?null:l;var g=f.memoizedState.inst;Jt!==null&&l!==null&&Kc(l,Jt.memoizedState.deps)?f.memoizedState=$r(s,g,r,l):(jt.flags|=t,f.memoizedState=$r(1|s,g,r,l))}function om(t,s){Qo(8390656,8,t,s)}function ru(t,s){Jo(2048,8,t,s)}function mb(t){jt.flags|=4;var s=jt.updateQueue;if(s===null)s=Ko(),jt.updateQueue=s,s.events=[t];else{var r=s.events;r===null?s.events=[t]:r.push(t)}}function lm(t){var s=An().memoizedState;return mb({ref:s,nextImpl:t}),function(){if((Zt&2)!==0)throw Error(o(440));return s.impl.apply(void 0,arguments)}}function cm(t,s){return Jo(4,2,t,s)}function um(t,s){return Jo(4,4,t,s)}function dm(t,s){if(typeof s=="function"){t=t();var r=s(t);return function(){typeof r=="function"?r():s(null)}}if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function fm(t,s,r){r=r!=null?r.concat([t]):null,Jo(4,4,dm.bind(null,s,t),r)}function iu(){}function hm(t,s){var r=An();s=s===void 0?null:s;var l=r.memoizedState;return s!==null&&Kc(s,l[1])?l[0]:(r.memoizedState=[t,s],t)}function mm(t,s){var r=An();s=s===void 0?null:s;var l=r.memoizedState;if(s!==null&&Kc(s,l[1]))return l[0];if(l=t(),cr){Ht(!0);try{t()}finally{Ht(!1)}}return r.memoizedState=[l,s],l}function ou(t,s,r){return r===void 0||(oa&1073741824)!==0&&(Ut&261930)===0?t.memoizedState=s:(t.memoizedState=r,t=pp(),jt.lanes|=t,za|=t,r)}function pm(t,s,r,l){return js(r,s)?r:Lr.current!==null?(t=ou(t,r,l),js(t,s)||(Dn=!0),t):(oa&42)===0||(oa&1073741824)!==0&&(Ut&261930)===0?(Dn=!0,t.memoizedState=r):(t=pp(),jt.lanes|=t,za|=t,s)}function gm(t,s,r,l,f){var g=F.p;F.p=g!==0&&8>g?g:8;var S=L.T,R={};L.T=R,uu(t,!1,s,r);try{var H=f(),ee=L.S;if(ee!==null&&ee(R,H),H!==null&&typeof H=="object"&&typeof H.then=="function"){var fe=cb(H,l);Di(t,s,fe,Ts(t))}else Di(t,s,l,Ts(t))}catch(je){Di(t,s,{then:function(){},status:"rejected",reason:je},Ts())}finally{F.p=g,S!==null&&R.types!==null&&(S.types=R.types),L.T=S}}function pb(){}function lu(t,s,r,l){if(t.tag!==5)throw Error(o(476));var f=vm(t).queue;gm(t,f,s,G,r===null?pb:function(){return xm(t),r(l)})}function vm(t){var s=t.memoizedState;if(s!==null)return s;s={memoizedState:G,baseState:G,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:la,lastRenderedState:G},next:null};var r={};return s.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:la,lastRenderedState:r},next:null},t.memoizedState=s,t=t.alternate,t!==null&&(t.memoizedState=s),s}function xm(t){var s=vm(t);s.next===null&&(s=t.alternate.memoizedState),Di(t,s.next.queue,{},Ts())}function cu(){return es(eo)}function ym(){return An().memoizedState}function bm(){return An().memoizedState}function gb(t){for(var s=t.return;s!==null;){switch(s.tag){case 24:case 3:var r=Ts();t=Ta(r);var l=ka(s,t,r);l!==null&&(vs(l,s,r),Mi(l,s,r)),s={cache:Bc()},t.payload=s;return}s=s.return}}function vb(t,s,r){var l=Ts();r={lane:l,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},el(t)?jm(s,r):(r=Cc(t,s,r,l),r!==null&&(vs(r,t,l),wm(r,s,l)))}function Sm(t,s,r){var l=Ts();Di(t,s,r,l)}function Di(t,s,r,l){var f={lane:l,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null};if(el(t))jm(s,f);else{var g=t.alternate;if(t.lanes===0&&(g===null||g.lanes===0)&&(g=s.lastRenderedReducer,g!==null))try{var S=s.lastRenderedState,R=g(S,r);if(f.hasEagerState=!0,f.eagerState=R,js(R,S))return zo(t,s,f,0),an===null&&Oo(),!1}catch{}finally{}if(r=Cc(t,s,f,l),r!==null)return vs(r,t,l),wm(r,s,l),!0}return!1}function uu(t,s,r,l){if(l={lane:2,revertLane:Hu(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},el(t)){if(s)throw Error(o(479))}else s=Cc(t,r,l,2),s!==null&&vs(s,t,2)}function el(t){var s=t.alternate;return t===jt||s!==null&&s===jt}function jm(t,s){Dr=Go=!0;var r=t.pending;r===null?s.next=s:(s.next=r.next,r.next=s),t.pending=s}function wm(t,s,r){if((r&4194048)!==0){var l=s.lanes;l&=t.pendingLanes,r|=l,s.lanes=r,Ks(t,r)}}var Bi={readContext:es,use:Wo,useCallback:Cn,useContext:Cn,useEffect:Cn,useImperativeHandle:Cn,useLayoutEffect:Cn,useInsertionEffect:Cn,useMemo:Cn,useReducer:Cn,useRef:Cn,useState:Cn,useDebugValue:Cn,useDeferredValue:Cn,useTransition:Cn,useSyncExternalStore:Cn,useId:Cn,useHostTransitionStatus:Cn,useFormState:Cn,useActionState:Cn,useOptimistic:Cn,useMemoCache:Cn,useCacheRefresh:Cn};Bi.useEffectEvent=Cn;var Nm={readContext:es,use:Wo,useCallback:function(t,s){return os().memoizedState=[t,s===void 0?null:s],t},useContext:es,useEffect:om,useImperativeHandle:function(t,s,r){r=r!=null?r.concat([t]):null,Qo(4194308,4,dm.bind(null,s,t),r)},useLayoutEffect:function(t,s){return Qo(4194308,4,t,s)},useInsertionEffect:function(t,s){Qo(4,2,t,s)},useMemo:function(t,s){var r=os();s=s===void 0?null:s;var l=t();if(cr){Ht(!0);try{t()}finally{Ht(!1)}}return r.memoizedState=[l,s],l},useReducer:function(t,s,r){var l=os();if(r!==void 0){var f=r(s);if(cr){Ht(!0);try{r(s)}finally{Ht(!1)}}}else f=s;return l.memoizedState=l.baseState=f,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:f},l.queue=t,t=t.dispatch=vb.bind(null,jt,t),[l.memoizedState,t]},useRef:function(t){var s=os();return t={current:t},s.memoizedState=t},useState:function(t){t=su(t);var s=t.queue,r=Sm.bind(null,jt,s);return s.dispatch=r,[t.memoizedState,r]},useDebugValue:iu,useDeferredValue:function(t,s){var r=os();return ou(r,t,s)},useTransition:function(){var t=su(!1);return t=gm.bind(null,jt,t.queue,!0,!1),os().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,s,r){var l=jt,f=os();if(Dt){if(r===void 0)throw Error(o(407));r=r()}else{if(r=s(),an===null)throw Error(o(349));(Ut&127)!==0||Vh(l,s,r)}f.memoizedState=r;var g={value:r,getSnapshot:s};return f.queue=g,om(Gh.bind(null,l,g,t),[t]),l.flags|=2048,$r(9,{destroy:void 0},Fh.bind(null,l,g,r,s),null),r},useId:function(){var t=os(),s=an.identifierPrefix;if(Dt){var r=Xs,l=Ws;r=(l&~(1<<32-mt(l)-1)).toString(32)+r,s="_"+s+"R_"+r,r=Yo++,0<r&&(s+="H"+r.toString(32)),s+="_"}else r=ub++,s="_"+s+"r_"+r.toString(32)+"_";return t.memoizedState=s},useHostTransitionStatus:cu,useFormState:nm,useActionState:nm,useOptimistic:function(t){var s=os();s.memoizedState=s.baseState=t;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=r,s=uu.bind(null,jt,!0,r),r.dispatch=s,[t,s]},useMemoCache:eu,useCacheRefresh:function(){return os().memoizedState=gb.bind(null,jt)},useEffectEvent:function(t){var s=os(),r={impl:t};return s.memoizedState=r,function(){if((Zt&2)!==0)throw Error(o(440));return r.impl.apply(void 0,arguments)}}},du={readContext:es,use:Wo,useCallback:hm,useContext:es,useEffect:ru,useImperativeHandle:fm,useInsertionEffect:cm,useLayoutEffect:um,useMemo:mm,useReducer:Xo,useRef:im,useState:function(){return Xo(la)},useDebugValue:iu,useDeferredValue:function(t,s){var r=An();return pm(r,Jt.memoizedState,t,s)},useTransition:function(){var t=Xo(la)[0],s=An().memoizedState;return[typeof t=="boolean"?t:Li(t),s]},useSyncExternalStore:qh,useId:ym,useHostTransitionStatus:cu,useFormState:sm,useActionState:sm,useOptimistic:function(t,s){var r=An();return Wh(r,Jt,t,s)},useMemoCache:eu,useCacheRefresh:bm};du.useEffectEvent=lm;var Em={readContext:es,use:Wo,useCallback:hm,useContext:es,useEffect:ru,useImperativeHandle:fm,useInsertionEffect:cm,useLayoutEffect:um,useMemo:mm,useReducer:nu,useRef:im,useState:function(){return nu(la)},useDebugValue:iu,useDeferredValue:function(t,s){var r=An();return Jt===null?ou(r,t,s):pm(r,Jt.memoizedState,t,s)},useTransition:function(){var t=nu(la)[0],s=An().memoizedState;return[typeof t=="boolean"?t:Li(t),s]},useSyncExternalStore:qh,useId:ym,useHostTransitionStatus:cu,useFormState:rm,useActionState:rm,useOptimistic:function(t,s){var r=An();return Jt!==null?Wh(r,Jt,t,s):(r.baseState=t,[t,r.queue.dispatch])},useMemoCache:eu,useCacheRefresh:bm};Em.useEffectEvent=lm;function fu(t,s,r,l){s=t.memoizedState,r=r(l,s),r=r==null?s:b({},s,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var hu={enqueueSetState:function(t,s,r){t=t._reactInternals;var l=Ts(),f=Ta(l);f.payload=s,r!=null&&(f.callback=r),s=ka(t,f,l),s!==null&&(vs(s,t,l),Mi(s,t,l))},enqueueReplaceState:function(t,s,r){t=t._reactInternals;var l=Ts(),f=Ta(l);f.tag=1,f.payload=s,r!=null&&(f.callback=r),s=ka(t,f,l),s!==null&&(vs(s,t,l),Mi(s,t,l))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var r=Ts(),l=Ta(r);l.tag=2,s!=null&&(l.callback=s),s=ka(t,l,r),s!==null&&(vs(s,t,r),Mi(s,t,r))}};function _m(t,s,r,l,f,g,S){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,g,S):s.prototype&&s.prototype.isPureReactComponent?!Ni(r,l)||!Ni(f,g):!0}function Cm(t,s,r,l){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(r,l),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(r,l),s.state!==t&&hu.enqueueReplaceState(s,s.state,null)}function ur(t,s){var r=s;if("ref"in s){r={};for(var l in s)l!=="ref"&&(r[l]=s[l])}if(t=t.defaultProps){r===s&&(r=b({},r));for(var f in t)r[f]===void 0&&(r[f]=t[f])}return r}function Tm(t){Mo(t)}function km(t){console.error(t)}function Rm(t){Mo(t)}function tl(t,s){try{var r=t.onUncaughtError;r(s.value,{componentStack:s.stack})}catch(l){setTimeout(function(){throw l})}}function Am(t,s,r){try{var l=t.onCaughtError;l(r.value,{componentStack:r.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function mu(t,s,r){return r=Ta(r),r.tag=3,r.payload={element:null},r.callback=function(){tl(t,s)},r}function Mm(t){return t=Ta(t),t.tag=3,t}function Om(t,s,r,l){var f=r.type.getDerivedStateFromError;if(typeof f=="function"){var g=l.value;t.payload=function(){return f(g)},t.callback=function(){Am(s,r,l)}}var S=r.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(t.callback=function(){Am(s,r,l),typeof f!="function"&&(Ua===null?Ua=new Set([this]):Ua.add(this));var R=l.stack;this.componentDidCatch(l.value,{componentStack:R!==null?R:""})})}function xb(t,s,r,l,f){if(r.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(s=r.alternate,s!==null&&Ar(s,r,f,!0),r=Ns.current,r!==null){switch(r.tag){case 31:case 13:return Ls===null?hl():r.alternate===null&&Tn===0&&(Tn=3),r.flags&=-257,r.flags|=65536,r.lanes=f,l===Ho?r.flags|=16384:(s=r.updateQueue,s===null?r.updateQueue=new Set([l]):s.add(l),$u(t,l,f)),!1;case 22:return r.flags|=65536,l===Ho?r.flags|=16384:(s=r.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([l])},r.updateQueue=s):(r=s.retryQueue,r===null?s.retryQueue=new Set([l]):r.add(l)),$u(t,l,f)),!1}throw Error(o(435,r.tag))}return $u(t,l,f),hl(),!1}if(Dt)return s=Ns.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=f,l!==Oc&&(t=Error(o(422),{cause:l}),Ci(Ms(t,r)))):(l!==Oc&&(s=Error(o(423),{cause:l}),Ci(Ms(s,r))),t=t.current.alternate,t.flags|=65536,f&=-f,t.lanes|=f,l=Ms(l,r),f=mu(t.stateNode,l,f),qc(t,f),Tn!==4&&(Tn=2)),!1;var g=Error(o(520),{cause:l});if(g=Ms(g,r),Fi===null?Fi=[g]:Fi.push(g),Tn!==4&&(Tn=2),s===null)return!0;l=Ms(l,r),r=s;do{switch(r.tag){case 3:return r.flags|=65536,t=f&-f,r.lanes|=t,t=mu(r.stateNode,l,t),qc(r,t),!1;case 1:if(s=r.type,g=r.stateNode,(r.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Ua===null||!Ua.has(g))))return r.flags|=65536,f&=-f,r.lanes|=f,f=Mm(f),Om(f,t,r,l),qc(r,f),!1}r=r.return}while(r!==null);return!1}var pu=Error(o(461)),Dn=!1;function ts(t,s,r,l){s.child=t===null?Dh(s,null,r,l):lr(s,t.child,r,l)}function zm(t,s,r,l,f){r=r.render;var g=s.ref;if("ref"in l){var S={};for(var R in l)R!=="ref"&&(S[R]=l[R])}else S=l;return ar(s),l=Wc(t,s,r,S,g,f),R=Xc(),t!==null&&!Dn?(Qc(t,s,f),ca(t,s,f)):(Dt&&R&&Ac(s),s.flags|=1,ts(t,s,l,f),s.child)}function Um(t,s,r,l,f){if(t===null){var g=r.type;return typeof g=="function"&&!Tc(g)&&g.defaultProps===void 0&&r.compare===null?(s.tag=15,s.type=g,Lm(t,s,g,l,f)):(t=Lo(r.type,null,l,s,s.mode,f),t.ref=s.ref,t.return=s,s.child=t)}if(g=t.child,!wu(t,f)){var S=g.memoizedProps;if(r=r.compare,r=r!==null?r:Ni,r(S,l)&&t.ref===s.ref)return ca(t,s,f)}return s.flags|=1,t=sa(g,l),t.ref=s.ref,t.return=s,s.child=t}function Lm(t,s,r,l,f){if(t!==null){var g=t.memoizedProps;if(Ni(g,l)&&t.ref===s.ref)if(Dn=!1,s.pendingProps=l=g,wu(t,f))(t.flags&131072)!==0&&(Dn=!0);else return s.lanes=t.lanes,ca(t,s,f)}return gu(t,s,r,l,f)}function Dm(t,s,r,l){var f=l.children,g=t!==null?t.memoizedState:null;if(t===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((s.flags&128)!==0){if(g=g!==null?g.baseLanes|r:r,t!==null){for(l=s.child=t.child,f=0;l!==null;)f=f|l.lanes|l.childLanes,l=l.sibling;l=f&~g}else l=0,s.child=null;return Bm(t,s,g,r,l)}if((r&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},t!==null&&Io(s,g!==null?g.cachePool:null),g!==null?Ih(s,g):Fc(),Ph(s);else return l=s.lanes=536870912,Bm(t,s,g!==null?g.baseLanes|r:r,r,l)}else g!==null?(Io(s,g.cachePool),Ih(s,g),Aa(),s.memoizedState=null):(t!==null&&Io(s,null),Fc(),Aa());return ts(t,s,f,r),s.child}function $i(t,s){return t!==null&&t.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function Bm(t,s,r,l,f){var g=Ic();return g=g===null?null:{parent:Un._currentValue,pool:g},s.memoizedState={baseLanes:r,cachePool:g},t!==null&&Io(s,null),Fc(),Ph(s),t!==null&&Ar(t,s,l,!0),s.childLanes=f,null}function nl(t,s){return s=al({mode:s.mode,children:s.children},t.mode),s.ref=t.ref,t.child=s,s.return=t,s}function $m(t,s,r){return lr(s,t.child,null,r),t=nl(s,s.pendingProps),t.flags|=2,Es(s),s.memoizedState=null,t}function yb(t,s,r){var l=s.pendingProps,f=(s.flags&128)!==0;if(s.flags&=-129,t===null){if(Dt){if(l.mode==="hidden")return t=nl(s,l),s.lanes=536870912,$i(null,t);if(Yc(s),(t=on)?(t=Xp(t,Us),t=t!==null&&t.data==="&"?t:null,t!==null&&(s.memoizedState={dehydrated:t,treeContext:wa!==null?{id:Ws,overflow:Xs}:null,retryLane:536870912,hydrationErrors:null},r=jh(t),r.return=s,s.child=r,Jn=s,on=null)):t=null,t===null)throw Ea(s);return s.lanes=536870912,null}return nl(s,l)}var g=t.memoizedState;if(g!==null){var S=g.dehydrated;if(Yc(s),f)if(s.flags&256)s.flags&=-257,s=$m(t,s,r);else if(s.memoizedState!==null)s.child=t.child,s.flags|=128,s=null;else throw Error(o(558));else if(Dn||Ar(t,s,r,!1),f=(r&t.childLanes)!==0,Dn||f){if(l=an,l!==null&&(S=j(l,r),S!==0&&S!==g.retryLane))throw g.retryLane=S,er(t,S),vs(l,t,S),pu;hl(),s=$m(t,s,r)}else t=g.treeContext,on=Ds(S.nextSibling),Jn=s,Dt=!0,Na=null,Us=!1,t!==null&&Eh(s,t),s=nl(s,l),s.flags|=4096;return s}return t=sa(t.child,{mode:l.mode,children:l.children}),t.ref=s.ref,s.child=t,t.return=s,t}function sl(t,s){var r=s.ref;if(r===null)t!==null&&t.ref!==null&&(s.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(o(284));(t===null||t.ref!==r)&&(s.flags|=4194816)}}function gu(t,s,r,l,f){return ar(s),r=Wc(t,s,r,l,void 0,f),l=Xc(),t!==null&&!Dn?(Qc(t,s,f),ca(t,s,f)):(Dt&&l&&Ac(s),s.flags|=1,ts(t,s,r,f),s.child)}function Im(t,s,r,l,f,g){return ar(s),s.updateQueue=null,r=Zh(s,l,r,f),Hh(t),l=Xc(),t!==null&&!Dn?(Qc(t,s,g),ca(t,s,g)):(Dt&&l&&Ac(s),s.flags|=1,ts(t,s,r,g),s.child)}function Pm(t,s,r,l,f){if(ar(s),s.stateNode===null){var g=Cr,S=r.contextType;typeof S=="object"&&S!==null&&(g=es(S)),g=new r(l,g),s.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=hu,s.stateNode=g,g._reactInternals=s,g=s.stateNode,g.props=l,g.state=s.memoizedState,g.refs={},Hc(s),S=r.contextType,g.context=typeof S=="object"&&S!==null?es(S):Cr,g.state=s.memoizedState,S=r.getDerivedStateFromProps,typeof S=="function"&&(fu(s,r,S,l),g.state=s.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(S=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),S!==g.state&&hu.enqueueReplaceState(g,g.state,null),zi(s,l,g,f),Oi(),g.state=s.memoizedState),typeof g.componentDidMount=="function"&&(s.flags|=4194308),l=!0}else if(t===null){g=s.stateNode;var R=s.memoizedProps,H=ur(r,R);g.props=H;var ee=g.context,fe=r.contextType;S=Cr,typeof fe=="object"&&fe!==null&&(S=es(fe));var je=r.getDerivedStateFromProps;fe=typeof je=="function"||typeof g.getSnapshotBeforeUpdate=="function",R=s.pendingProps!==R,fe||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(R||ee!==S)&&Cm(s,g,l,S),Ca=!1;var ae=s.memoizedState;g.state=ae,zi(s,l,g,f),Oi(),ee=s.memoizedState,R||ae!==ee||Ca?(typeof je=="function"&&(fu(s,r,je,l),ee=s.memoizedState),(H=Ca||_m(s,r,H,l,ae,ee,S))?(fe||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(s.flags|=4194308)):(typeof g.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=l,s.memoizedState=ee),g.props=l,g.state=ee,g.context=S,l=H):(typeof g.componentDidMount=="function"&&(s.flags|=4194308),l=!1)}else{g=s.stateNode,Zc(t,s),S=s.memoizedProps,fe=ur(r,S),g.props=fe,je=s.pendingProps,ae=g.context,ee=r.contextType,H=Cr,typeof ee=="object"&&ee!==null&&(H=es(ee)),R=r.getDerivedStateFromProps,(ee=typeof R=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(S!==je||ae!==H)&&Cm(s,g,l,H),Ca=!1,ae=s.memoizedState,g.state=ae,zi(s,l,g,f),Oi();var oe=s.memoizedState;S!==je||ae!==oe||Ca||t!==null&&t.dependencies!==null&&Bo(t.dependencies)?(typeof R=="function"&&(fu(s,r,R,l),oe=s.memoizedState),(fe=Ca||_m(s,r,fe,l,ae,oe,H)||t!==null&&t.dependencies!==null&&Bo(t.dependencies))?(ee||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(l,oe,H),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(l,oe,H)),typeof g.componentDidUpdate=="function"&&(s.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof g.componentDidUpdate!="function"||S===t.memoizedProps&&ae===t.memoizedState||(s.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||S===t.memoizedProps&&ae===t.memoizedState||(s.flags|=1024),s.memoizedProps=l,s.memoizedState=oe),g.props=l,g.state=oe,g.context=H,l=fe):(typeof g.componentDidUpdate!="function"||S===t.memoizedProps&&ae===t.memoizedState||(s.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||S===t.memoizedProps&&ae===t.memoizedState||(s.flags|=1024),l=!1)}return g=l,sl(t,s),l=(s.flags&128)!==0,g||l?(g=s.stateNode,r=l&&typeof r.getDerivedStateFromError!="function"?null:g.render(),s.flags|=1,t!==null&&l?(s.child=lr(s,t.child,null,f),s.child=lr(s,null,r,f)):ts(t,s,r,f),s.memoizedState=g.state,t=s.child):t=ca(t,s,f),t}function Hm(t,s,r,l){return nr(),s.flags|=256,ts(t,s,r,l),s.child}var vu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function xu(t){return{baseLanes:t,cachePool:Ah()}}function yu(t,s,r){return t=t!==null?t.childLanes&~r:0,s&&(t|=Cs),t}function Zm(t,s,r){var l=s.pendingProps,f=!1,g=(s.flags&128)!==0,S;if((S=g)||(S=t!==null&&t.memoizedState===null?!1:(Rn.current&2)!==0),S&&(f=!0,s.flags&=-129),S=(s.flags&32)!==0,s.flags&=-33,t===null){if(Dt){if(f?Ra(s):Aa(),(t=on)?(t=Xp(t,Us),t=t!==null&&t.data!=="&"?t:null,t!==null&&(s.memoizedState={dehydrated:t,treeContext:wa!==null?{id:Ws,overflow:Xs}:null,retryLane:536870912,hydrationErrors:null},r=jh(t),r.return=s,s.child=r,Jn=s,on=null)):t=null,t===null)throw Ea(s);return td(t)?s.lanes=32:s.lanes=536870912,null}var R=l.children;return l=l.fallback,f?(Aa(),f=s.mode,R=al({mode:"hidden",children:R},f),l=tr(l,f,r,null),R.return=s,l.return=s,R.sibling=l,s.child=R,l=s.child,l.memoizedState=xu(r),l.childLanes=yu(t,S,r),s.memoizedState=vu,$i(null,l)):(Ra(s),bu(s,R))}var H=t.memoizedState;if(H!==null&&(R=H.dehydrated,R!==null)){if(g)s.flags&256?(Ra(s),s.flags&=-257,s=Su(t,s,r)):s.memoizedState!==null?(Aa(),s.child=t.child,s.flags|=128,s=null):(Aa(),R=l.fallback,f=s.mode,l=al({mode:"visible",children:l.children},f),R=tr(R,f,r,null),R.flags|=2,l.return=s,R.return=s,l.sibling=R,s.child=l,lr(s,t.child,null,r),l=s.child,l.memoizedState=xu(r),l.childLanes=yu(t,S,r),s.memoizedState=vu,s=$i(null,l));else if(Ra(s),td(R)){if(S=R.nextSibling&&R.nextSibling.dataset,S)var ee=S.dgst;S=ee,l=Error(o(419)),l.stack="",l.digest=S,Ci({value:l,source:null,stack:null}),s=Su(t,s,r)}else if(Dn||Ar(t,s,r,!1),S=(r&t.childLanes)!==0,Dn||S){if(S=an,S!==null&&(l=j(S,r),l!==0&&l!==H.retryLane))throw H.retryLane=l,er(t,l),vs(S,t,l),pu;ed(R)||hl(),s=Su(t,s,r)}else ed(R)?(s.flags|=192,s.child=t.child,s=null):(t=H.treeContext,on=Ds(R.nextSibling),Jn=s,Dt=!0,Na=null,Us=!1,t!==null&&Eh(s,t),s=bu(s,l.children),s.flags|=4096);return s}return f?(Aa(),R=l.fallback,f=s.mode,H=t.child,ee=H.sibling,l=sa(H,{mode:"hidden",children:l.children}),l.subtreeFlags=H.subtreeFlags&65011712,ee!==null?R=sa(ee,R):(R=tr(R,f,r,null),R.flags|=2),R.return=s,l.return=s,l.sibling=R,s.child=l,$i(null,l),l=s.child,R=t.child.memoizedState,R===null?R=xu(r):(f=R.cachePool,f!==null?(H=Un._currentValue,f=f.parent!==H?{parent:H,pool:H}:f):f=Ah(),R={baseLanes:R.baseLanes|r,cachePool:f}),l.memoizedState=R,l.childLanes=yu(t,S,r),s.memoizedState=vu,$i(t.child,l)):(Ra(s),r=t.child,t=r.sibling,r=sa(r,{mode:"visible",children:l.children}),r.return=s,r.sibling=null,t!==null&&(S=s.deletions,S===null?(s.deletions=[t],s.flags|=16):S.push(t)),s.child=r,s.memoizedState=null,r)}function bu(t,s){return s=al({mode:"visible",children:s},t.mode),s.return=t,t.child=s}function al(t,s){return t=ws(22,t,null,s),t.lanes=0,t}function Su(t,s,r){return lr(s,t.child,null,r),t=bu(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function qm(t,s,r){t.lanes|=s;var l=t.alternate;l!==null&&(l.lanes|=s),Lc(t.return,s,r)}function ju(t,s,r,l,f,g){var S=t.memoizedState;S===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:l,tail:r,tailMode:f,treeForkCount:g}:(S.isBackwards=s,S.rendering=null,S.renderingStartTime=0,S.last=l,S.tail=r,S.tailMode=f,S.treeForkCount=g)}function Vm(t,s,r){var l=s.pendingProps,f=l.revealOrder,g=l.tail;l=l.children;var S=Rn.current,R=(S&2)!==0;if(R?(S=S&1|2,s.flags|=128):S&=1,X(Rn,S),ts(t,s,l,r),l=Dt?_i:0,!R&&t!==null&&(t.flags&128)!==0)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&qm(t,r,s);else if(t.tag===19)qm(t,r,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(f){case"forwards":for(r=s.child,f=null;r!==null;)t=r.alternate,t!==null&&Fo(t)===null&&(f=r),r=r.sibling;r=f,r===null?(f=s.child,s.child=null):(f=r.sibling,r.sibling=null),ju(s,!1,f,r,g,l);break;case"backwards":case"unstable_legacy-backwards":for(r=null,f=s.child,s.child=null;f!==null;){if(t=f.alternate,t!==null&&Fo(t)===null){s.child=f;break}t=f.sibling,f.sibling=r,r=f,f=t}ju(s,!0,r,null,g,l);break;case"together":ju(s,!1,null,null,void 0,l);break;default:s.memoizedState=null}return s.child}function ca(t,s,r){if(t!==null&&(s.dependencies=t.dependencies),za|=s.lanes,(r&s.childLanes)===0)if(t!==null){if(Ar(t,s,r,!1),(r&s.childLanes)===0)return null}else return null;if(t!==null&&s.child!==t.child)throw Error(o(153));if(s.child!==null){for(t=s.child,r=sa(t,t.pendingProps),s.child=r,r.return=s;t.sibling!==null;)t=t.sibling,r=r.sibling=sa(t,t.pendingProps),r.return=s;r.sibling=null}return s.child}function wu(t,s){return(t.lanes&s)!==0?!0:(t=t.dependencies,!!(t!==null&&Bo(t)))}function bb(t,s,r){switch(s.tag){case 3:Oe(s,s.stateNode.containerInfo),_a(s,Un,t.memoizedState.cache),nr();break;case 27:case 5:Fe(s);break;case 4:Oe(s,s.stateNode.containerInfo);break;case 10:_a(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,Yc(s),null;break;case 13:var l=s.memoizedState;if(l!==null)return l.dehydrated!==null?(Ra(s),s.flags|=128,null):(r&s.child.childLanes)!==0?Zm(t,s,r):(Ra(s),t=ca(t,s,r),t!==null?t.sibling:null);Ra(s);break;case 19:var f=(t.flags&128)!==0;if(l=(r&s.childLanes)!==0,l||(Ar(t,s,r,!1),l=(r&s.childLanes)!==0),f){if(l)return Vm(t,s,r);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),X(Rn,Rn.current),l)break;return null;case 22:return s.lanes=0,Dm(t,s,r,s.pendingProps);case 24:_a(s,Un,t.memoizedState.cache)}return ca(t,s,r)}function Fm(t,s,r){if(t!==null)if(t.memoizedProps!==s.pendingProps)Dn=!0;else{if(!wu(t,r)&&(s.flags&128)===0)return Dn=!1,bb(t,s,r);Dn=(t.flags&131072)!==0}else Dn=!1,Dt&&(s.flags&1048576)!==0&&Nh(s,_i,s.index);switch(s.lanes=0,s.tag){case 16:e:{var l=s.pendingProps;if(t=ir(s.elementType),s.type=t,typeof t=="function")Tc(t)?(l=ur(t,l),s.tag=1,s=Pm(null,s,t,l,r)):(s.tag=0,s=gu(null,s,t,l,r));else{if(t!=null){var f=t.$$typeof;if(f===P){s.tag=11,s=zm(null,s,t,l,r);break e}else if(f===I){s.tag=14,s=Um(null,s,t,l,r);break e}}throw s=me(t)||t,Error(o(306,s,""))}}return s;case 0:return gu(t,s,s.type,s.pendingProps,r);case 1:return l=s.type,f=ur(l,s.pendingProps),Pm(t,s,l,f,r);case 3:e:{if(Oe(s,s.stateNode.containerInfo),t===null)throw Error(o(387));l=s.pendingProps;var g=s.memoizedState;f=g.element,Zc(t,s),zi(s,l,null,r);var S=s.memoizedState;if(l=S.cache,_a(s,Un,l),l!==g.cache&&Dc(s,[Un],r,!0),Oi(),l=S.element,g.isDehydrated)if(g={element:l,isDehydrated:!1,cache:S.cache},s.updateQueue.baseState=g,s.memoizedState=g,s.flags&256){s=Hm(t,s,l,r);break e}else if(l!==f){f=Ms(Error(o(424)),s),Ci(f),s=Hm(t,s,l,r);break e}else{switch(t=s.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(on=Ds(t.firstChild),Jn=s,Dt=!0,Na=null,Us=!0,r=Dh(s,null,l,r),s.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling}else{if(nr(),l===f){s=ca(t,s,r);break e}ts(t,s,l,r)}s=s.child}return s;case 26:return sl(t,s),t===null?(r=sg(s.type,null,s.pendingProps,null))?s.memoizedState=r:Dt||(r=s.type,t=s.pendingProps,l=bl(He.current).createElement(r),l[K]=s,l[ce]=t,ns(l,r,t),Ve(l),s.stateNode=l):s.memoizedState=sg(s.type,t.memoizedProps,s.pendingProps,t.memoizedState),null;case 27:return Fe(s),t===null&&Dt&&(l=s.stateNode=eg(s.type,s.pendingProps,He.current),Jn=s,Us=!0,f=on,$a(s.type)?(nd=f,on=Ds(l.firstChild)):on=f),ts(t,s,s.pendingProps.children,r),sl(t,s),t===null&&(s.flags|=4194304),s.child;case 5:return t===null&&Dt&&((f=l=on)&&(l=Wb(l,s.type,s.pendingProps,Us),l!==null?(s.stateNode=l,Jn=s,on=Ds(l.firstChild),Us=!1,f=!0):f=!1),f||Ea(s)),Fe(s),f=s.type,g=s.pendingProps,S=t!==null?t.memoizedProps:null,l=g.children,Xu(f,g)?l=null:S!==null&&Xu(f,S)&&(s.flags|=32),s.memoizedState!==null&&(f=Wc(t,s,db,null,null,r),eo._currentValue=f),sl(t,s),ts(t,s,l,r),s.child;case 6:return t===null&&Dt&&((t=r=on)&&(r=Xb(r,s.pendingProps,Us),r!==null?(s.stateNode=r,Jn=s,on=null,t=!0):t=!1),t||Ea(s)),null;case 13:return Zm(t,s,r);case 4:return Oe(s,s.stateNode.containerInfo),l=s.pendingProps,t===null?s.child=lr(s,null,l,r):ts(t,s,l,r),s.child;case 11:return zm(t,s,s.type,s.pendingProps,r);case 7:return ts(t,s,s.pendingProps,r),s.child;case 8:return ts(t,s,s.pendingProps.children,r),s.child;case 12:return ts(t,s,s.pendingProps.children,r),s.child;case 10:return l=s.pendingProps,_a(s,s.type,l.value),ts(t,s,l.children,r),s.child;case 9:return f=s.type._context,l=s.pendingProps.children,ar(s),f=es(f),l=l(f),s.flags|=1,ts(t,s,l,r),s.child;case 14:return Um(t,s,s.type,s.pendingProps,r);case 15:return Lm(t,s,s.type,s.pendingProps,r);case 19:return Vm(t,s,r);case 31:return yb(t,s,r);case 22:return Dm(t,s,r,s.pendingProps);case 24:return ar(s),l=es(Un),t===null?(f=Ic(),f===null&&(f=an,g=Bc(),f.pooledCache=g,g.refCount++,g!==null&&(f.pooledCacheLanes|=r),f=g),s.memoizedState={parent:l,cache:f},Hc(s),_a(s,Un,f)):((t.lanes&r)!==0&&(Zc(t,s),zi(s,null,null,r),Oi()),f=t.memoizedState,g=s.memoizedState,f.parent!==l?(f={parent:l,cache:l},s.memoizedState=f,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=f),_a(s,Un,l)):(l=g.cache,_a(s,Un,l),l!==f.cache&&Dc(s,[Un],r,!0))),ts(t,s,s.pendingProps.children,r),s.child;case 29:throw s.pendingProps}throw Error(o(156,s.tag))}function ua(t){t.flags|=4}function Nu(t,s,r,l,f){if((s=(t.mode&32)!==0)&&(s=!1),s){if(t.flags|=16777216,(f&335544128)===f)if(t.stateNode.complete)t.flags|=8192;else if(yp())t.flags|=8192;else throw or=Ho,Pc}else t.flags&=-16777217}function Gm(t,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!lg(s))if(yp())t.flags|=8192;else throw or=Ho,Pc}function rl(t,s){s!==null&&(t.flags|=4),t.flags&16384&&(s=t.tag!==22?Vn():536870912,t.lanes|=s,Zr|=s)}function Ii(t,s){if(!Dt)switch(t.tailMode){case"hidden":s=t.tail;for(var r=null;s!==null;)s.alternate!==null&&(r=s),s=s.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var l=null;r!==null;)r.alternate!==null&&(l=r),r=r.sibling;l===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function ln(t){var s=t.alternate!==null&&t.alternate.child===t.child,r=0,l=0;if(s)for(var f=t.child;f!==null;)r|=f.lanes|f.childLanes,l|=f.subtreeFlags&65011712,l|=f.flags&65011712,f.return=t,f=f.sibling;else for(f=t.child;f!==null;)r|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=t,f=f.sibling;return t.subtreeFlags|=l,t.childLanes=r,s}function Sb(t,s,r){var l=s.pendingProps;switch(Mc(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ln(s),null;case 1:return ln(s),null;case 3:return r=s.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),s.memoizedState.cache!==l&&(s.flags|=2048),ia(Un),Ze(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Rr(s)?ua(s):t===null||t.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,zc())),ln(s),null;case 26:var f=s.type,g=s.memoizedState;return t===null?(ua(s),g!==null?(ln(s),Gm(s,g)):(ln(s),Nu(s,f,null,l,r))):g?g!==t.memoizedState?(ua(s),ln(s),Gm(s,g)):(ln(s),s.flags&=-16777217):(t=t.memoizedProps,t!==l&&ua(s),ln(s),Nu(s,f,t,l,r)),null;case 27:if(lt(s),r=He.current,f=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==l&&ua(s);else{if(!l){if(s.stateNode===null)throw Error(o(166));return ln(s),null}t=Se.current,Rr(s)?_h(s):(t=eg(f,l,r),s.stateNode=t,ua(s))}return ln(s),null;case 5:if(lt(s),f=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==l&&ua(s);else{if(!l){if(s.stateNode===null)throw Error(o(166));return ln(s),null}if(g=Se.current,Rr(s))_h(s);else{var S=bl(He.current);switch(g){case 1:g=S.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:g=S.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":g=S.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":g=S.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":g=S.createElement("div"),g.innerHTML="<script><\/script>",g=g.removeChild(g.firstChild);break;case"select":g=typeof l.is=="string"?S.createElement("select",{is:l.is}):S.createElement("select"),l.multiple?g.multiple=!0:l.size&&(g.size=l.size);break;default:g=typeof l.is=="string"?S.createElement(f,{is:l.is}):S.createElement(f)}}g[K]=s,g[ce]=l;e:for(S=s.child;S!==null;){if(S.tag===5||S.tag===6)g.appendChild(S.stateNode);else if(S.tag!==4&&S.tag!==27&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===s)break e;for(;S.sibling===null;){if(S.return===null||S.return===s)break e;S=S.return}S.sibling.return=S.return,S=S.sibling}s.stateNode=g;e:switch(ns(g,f,l),f){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&ua(s)}}return ln(s),Nu(s,s.type,t===null?null:t.memoizedProps,s.pendingProps,r),null;case 6:if(t&&s.stateNode!=null)t.memoizedProps!==l&&ua(s);else{if(typeof l!="string"&&s.stateNode===null)throw Error(o(166));if(t=He.current,Rr(s)){if(t=s.stateNode,r=s.memoizedProps,l=null,f=Jn,f!==null)switch(f.tag){case 27:case 5:l=f.memoizedProps}t[K]=s,t=!!(t.nodeValue===r||l!==null&&l.suppressHydrationWarning===!0||Zp(t.nodeValue,r)),t||Ea(s,!0)}else t=bl(t).createTextNode(l),t[K]=s,s.stateNode=t}return ln(s),null;case 31:if(r=s.memoizedState,t===null||t.memoizedState!==null){if(l=Rr(s),r!==null){if(t===null){if(!l)throw Error(o(318));if(t=s.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(o(557));t[K]=s}else nr(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;ln(s),t=!1}else r=zc(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=r),t=!0;if(!t)return s.flags&256?(Es(s),s):(Es(s),null);if((s.flags&128)!==0)throw Error(o(558))}return ln(s),null;case 13:if(l=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(f=Rr(s),l!==null&&l.dehydrated!==null){if(t===null){if(!f)throw Error(o(318));if(f=s.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(o(317));f[K]=s}else nr(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;ln(s),f=!1}else f=zc(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=f),f=!0;if(!f)return s.flags&256?(Es(s),s):(Es(s),null)}return Es(s),(s.flags&128)!==0?(s.lanes=r,s):(r=l!==null,t=t!==null&&t.memoizedState!==null,r&&(l=s.child,f=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(f=l.alternate.memoizedState.cachePool.pool),g=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(g=l.memoizedState.cachePool.pool),g!==f&&(l.flags|=2048)),r!==t&&r&&(s.child.flags|=8192),rl(s,s.updateQueue),ln(s),null);case 4:return Ze(),t===null&&Fu(s.stateNode.containerInfo),ln(s),null;case 10:return ia(s.type),ln(s),null;case 19:if(ie(Rn),l=s.memoizedState,l===null)return ln(s),null;if(f=(s.flags&128)!==0,g=l.rendering,g===null)if(f)Ii(l,!1);else{if(Tn!==0||t!==null&&(t.flags&128)!==0)for(t=s.child;t!==null;){if(g=Fo(t),g!==null){for(s.flags|=128,Ii(l,!1),t=g.updateQueue,s.updateQueue=t,rl(s,t),s.subtreeFlags=0,t=r,r=s.child;r!==null;)Sh(r,t),r=r.sibling;return X(Rn,Rn.current&1|2),Dt&&aa(s,l.treeForkCount),s.child}t=t.sibling}l.tail!==null&&Ct()>ul&&(s.flags|=128,f=!0,Ii(l,!1),s.lanes=4194304)}else{if(!f)if(t=Fo(g),t!==null){if(s.flags|=128,f=!0,t=t.updateQueue,s.updateQueue=t,rl(s,t),Ii(l,!0),l.tail===null&&l.tailMode==="hidden"&&!g.alternate&&!Dt)return ln(s),null}else 2*Ct()-l.renderingStartTime>ul&&r!==536870912&&(s.flags|=128,f=!0,Ii(l,!1),s.lanes=4194304);l.isBackwards?(g.sibling=s.child,s.child=g):(t=l.last,t!==null?t.sibling=g:s.child=g,l.last=g)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=Ct(),t.sibling=null,r=Rn.current,X(Rn,f?r&1|2:r&1),Dt&&aa(s,l.treeForkCount),t):(ln(s),null);case 22:case 23:return Es(s),Gc(),l=s.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(s.flags|=8192):l&&(s.flags|=8192),l?(r&536870912)!==0&&(s.flags&128)===0&&(ln(s),s.subtreeFlags&6&&(s.flags|=8192)):ln(s),r=s.updateQueue,r!==null&&rl(s,r.retryQueue),r=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),l=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),l!==r&&(s.flags|=2048),t!==null&&ie(rr),null;case 24:return r=null,t!==null&&(r=t.memoizedState.cache),s.memoizedState.cache!==r&&(s.flags|=2048),ia(Un),ln(s),null;case 25:return null;case 30:return null}throw Error(o(156,s.tag))}function jb(t,s){switch(Mc(s),s.tag){case 1:return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return ia(Un),Ze(),t=s.flags,(t&65536)!==0&&(t&128)===0?(s.flags=t&-65537|128,s):null;case 26:case 27:case 5:return lt(s),null;case 31:if(s.memoizedState!==null){if(Es(s),s.alternate===null)throw Error(o(340));nr()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 13:if(Es(s),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(o(340));nr()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return ie(Rn),null;case 4:return Ze(),null;case 10:return ia(s.type),null;case 22:case 23:return Es(s),Gc(),t!==null&&ie(rr),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 24:return ia(Un),null;case 25:return null;default:return null}}function Ym(t,s){switch(Mc(s),s.tag){case 3:ia(Un),Ze();break;case 26:case 27:case 5:lt(s);break;case 4:Ze();break;case 31:s.memoizedState!==null&&Es(s);break;case 13:Es(s);break;case 19:ie(Rn);break;case 10:ia(s.type);break;case 22:case 23:Es(s),Gc(),t!==null&&ie(rr);break;case 24:ia(Un)}}function Pi(t,s){try{var r=s.updateQueue,l=r!==null?r.lastEffect:null;if(l!==null){var f=l.next;r=f;do{if((r.tag&t)===t){l=void 0;var g=r.create,S=r.inst;l=g(),S.destroy=l}r=r.next}while(r!==f)}}catch(R){Wt(s,s.return,R)}}function Ma(t,s,r){try{var l=s.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var g=f.next;l=g;do{if((l.tag&t)===t){var S=l.inst,R=S.destroy;if(R!==void 0){S.destroy=void 0,f=s;var H=r,ee=R;try{ee()}catch(fe){Wt(f,H,fe)}}}l=l.next}while(l!==g)}}catch(fe){Wt(s,s.return,fe)}}function Km(t){var s=t.updateQueue;if(s!==null){var r=t.stateNode;try{$h(s,r)}catch(l){Wt(t,t.return,l)}}}function Wm(t,s,r){r.props=ur(t.type,t.memoizedProps),r.state=t.memoizedState;try{r.componentWillUnmount()}catch(l){Wt(t,s,l)}}function Hi(t,s){try{var r=t.ref;if(r!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof r=="function"?t.refCleanup=r(l):r.current=l}}catch(f){Wt(t,s,f)}}function Qs(t,s){var r=t.ref,l=t.refCleanup;if(r!==null)if(typeof l=="function")try{l()}catch(f){Wt(t,s,f)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(f){Wt(t,s,f)}else r.current=null}function Xm(t){var s=t.type,r=t.memoizedProps,l=t.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":r.autoFocus&&l.focus();break e;case"img":r.src?l.src=r.src:r.srcSet&&(l.srcset=r.srcSet)}}catch(f){Wt(t,t.return,f)}}function Eu(t,s,r){try{var l=t.stateNode;qb(l,t.type,r,s),l[ce]=s}catch(f){Wt(t,t.return,f)}}function Qm(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&$a(t.type)||t.tag===4}function _u(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Qm(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&$a(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Cu(t,s,r){var l=t.tag;if(l===5||l===6)t=t.stateNode,s?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(t,s):(s=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,s.appendChild(t),r=r._reactRootContainer,r!=null||s.onclick!==null||(s.onclick=ta));else if(l!==4&&(l===27&&$a(t.type)&&(r=t.stateNode,s=null),t=t.child,t!==null))for(Cu(t,s,r),t=t.sibling;t!==null;)Cu(t,s,r),t=t.sibling}function il(t,s,r){var l=t.tag;if(l===5||l===6)t=t.stateNode,s?r.insertBefore(t,s):r.appendChild(t);else if(l!==4&&(l===27&&$a(t.type)&&(r=t.stateNode),t=t.child,t!==null))for(il(t,s,r),t=t.sibling;t!==null;)il(t,s,r),t=t.sibling}function Jm(t){var s=t.stateNode,r=t.memoizedProps;try{for(var l=t.type,f=s.attributes;f.length;)s.removeAttributeNode(f[0]);ns(s,l,r),s[K]=t,s[ce]=r}catch(g){Wt(t,t.return,g)}}var da=!1,Bn=!1,Tu=!1,ep=typeof WeakSet=="function"?WeakSet:Set,Yn=null;function wb(t,s){if(t=t.containerInfo,Ku=Cl,t=fh(t),Sc(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var l=r.getSelection&&r.getSelection();if(l&&l.rangeCount!==0){r=l.anchorNode;var f=l.anchorOffset,g=l.focusNode;l=l.focusOffset;try{r.nodeType,g.nodeType}catch{r=null;break e}var S=0,R=-1,H=-1,ee=0,fe=0,je=t,ae=null;t:for(;;){for(var oe;je!==r||f!==0&&je.nodeType!==3||(R=S+f),je!==g||l!==0&&je.nodeType!==3||(H=S+l),je.nodeType===3&&(S+=je.nodeValue.length),(oe=je.firstChild)!==null;)ae=je,je=oe;for(;;){if(je===t)break t;if(ae===r&&++ee===f&&(R=S),ae===g&&++fe===l&&(H=S),(oe=je.nextSibling)!==null)break;je=ae,ae=je.parentNode}je=oe}r=R===-1||H===-1?null:{start:R,end:H}}else r=null}r=r||{start:0,end:0}}else r=null;for(Wu={focusedElem:t,selectionRange:r},Cl=!1,Yn=s;Yn!==null;)if(s=Yn,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,Yn=t;else for(;Yn!==null;){switch(s=Yn,g=s.alternate,t=s.flags,s.tag){case 0:if((t&4)!==0&&(t=s.updateQueue,t=t!==null?t.events:null,t!==null))for(r=0;r<t.length;r++)f=t[r],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&g!==null){t=void 0,r=s,f=g.memoizedProps,g=g.memoizedState,l=r.stateNode;try{var Ye=ur(r.type,f);t=l.getSnapshotBeforeUpdate(Ye,g),l.__reactInternalSnapshotBeforeUpdate=t}catch(ft){Wt(r,r.return,ft)}}break;case 3:if((t&1024)!==0){if(t=s.stateNode.containerInfo,r=t.nodeType,r===9)Ju(t);else if(r===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Ju(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(o(163))}if(t=s.sibling,t!==null){t.return=s.return,Yn=t;break}Yn=s.return}}function tp(t,s,r){var l=r.flags;switch(r.tag){case 0:case 11:case 15:ha(t,r),l&4&&Pi(5,r);break;case 1:if(ha(t,r),l&4)if(t=r.stateNode,s===null)try{t.componentDidMount()}catch(S){Wt(r,r.return,S)}else{var f=ur(r.type,s.memoizedProps);s=s.memoizedState;try{t.componentDidUpdate(f,s,t.__reactInternalSnapshotBeforeUpdate)}catch(S){Wt(r,r.return,S)}}l&64&&Km(r),l&512&&Hi(r,r.return);break;case 3:if(ha(t,r),l&64&&(t=r.updateQueue,t!==null)){if(s=null,r.child!==null)switch(r.child.tag){case 27:case 5:s=r.child.stateNode;break;case 1:s=r.child.stateNode}try{$h(t,s)}catch(S){Wt(r,r.return,S)}}break;case 27:s===null&&l&4&&Jm(r);case 26:case 5:ha(t,r),s===null&&l&4&&Xm(r),l&512&&Hi(r,r.return);break;case 12:ha(t,r);break;case 31:ha(t,r),l&4&&ap(t,r);break;case 13:ha(t,r),l&4&&rp(t,r),l&64&&(t=r.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(r=Mb.bind(null,r),Qb(t,r))));break;case 22:if(l=r.memoizedState!==null||da,!l){s=s!==null&&s.memoizedState!==null||Bn,f=da;var g=Bn;da=l,(Bn=s)&&!g?ma(t,r,(r.subtreeFlags&8772)!==0):ha(t,r),da=f,Bn=g}break;case 30:break;default:ha(t,r)}}function np(t){var s=t.alternate;s!==null&&(t.alternate=null,np(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&de(s)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var fn=null,hs=!1;function fa(t,s,r){for(r=r.child;r!==null;)sp(t,s,r),r=r.sibling}function sp(t,s,r){if(At&&typeof At.onCommitFiberUnmount=="function")try{At.onCommitFiberUnmount(Rt,r)}catch{}switch(r.tag){case 26:Bn||Qs(r,s),fa(t,s,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:Bn||Qs(r,s);var l=fn,f=hs;$a(r.type)&&(fn=r.stateNode,hs=!1),fa(t,s,r),Xi(r.stateNode),fn=l,hs=f;break;case 5:Bn||Qs(r,s);case 6:if(l=fn,f=hs,fn=null,fa(t,s,r),fn=l,hs=f,fn!==null)if(hs)try{(fn.nodeType===9?fn.body:fn.nodeName==="HTML"?fn.ownerDocument.body:fn).removeChild(r.stateNode)}catch(g){Wt(r,s,g)}else try{fn.removeChild(r.stateNode)}catch(g){Wt(r,s,g)}break;case 18:fn!==null&&(hs?(t=fn,Kp(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,r.stateNode),Xr(t)):Kp(fn,r.stateNode));break;case 4:l=fn,f=hs,fn=r.stateNode.containerInfo,hs=!0,fa(t,s,r),fn=l,hs=f;break;case 0:case 11:case 14:case 15:Ma(2,r,s),Bn||Ma(4,r,s),fa(t,s,r);break;case 1:Bn||(Qs(r,s),l=r.stateNode,typeof l.componentWillUnmount=="function"&&Wm(r,s,l)),fa(t,s,r);break;case 21:fa(t,s,r);break;case 22:Bn=(l=Bn)||r.memoizedState!==null,fa(t,s,r),Bn=l;break;default:fa(t,s,r)}}function ap(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Xr(t)}catch(r){Wt(s,s.return,r)}}}function rp(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Xr(t)}catch(r){Wt(s,s.return,r)}}function Nb(t){switch(t.tag){case 31:case 13:case 19:var s=t.stateNode;return s===null&&(s=t.stateNode=new ep),s;case 22:return t=t.stateNode,s=t._retryCache,s===null&&(s=t._retryCache=new ep),s;default:throw Error(o(435,t.tag))}}function ol(t,s){var r=Nb(t);s.forEach(function(l){if(!r.has(l)){r.add(l);var f=Ob.bind(null,t,l);l.then(f,f)}})}function ms(t,s){var r=s.deletions;if(r!==null)for(var l=0;l<r.length;l++){var f=r[l],g=t,S=s,R=S;e:for(;R!==null;){switch(R.tag){case 27:if($a(R.type)){fn=R.stateNode,hs=!1;break e}break;case 5:fn=R.stateNode,hs=!1;break e;case 3:case 4:fn=R.stateNode.containerInfo,hs=!0;break e}R=R.return}if(fn===null)throw Error(o(160));sp(g,S,f),fn=null,hs=!1,g=f.alternate,g!==null&&(g.return=null),f.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)ip(s,t),s=s.sibling}var Fs=null;function ip(t,s){var r=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:ms(s,t),ps(t),l&4&&(Ma(3,t,t.return),Pi(3,t),Ma(5,t,t.return));break;case 1:ms(s,t),ps(t),l&512&&(Bn||r===null||Qs(r,r.return)),l&64&&da&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(r=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=r===null?l:r.concat(l))));break;case 26:var f=Fs;if(ms(s,t),ps(t),l&512&&(Bn||r===null||Qs(r,r.return)),l&4){var g=r!==null?r.memoizedState:null;if(l=t.memoizedState,r===null)if(l===null)if(t.stateNode===null){e:{l=t.type,r=t.memoizedProps,f=f.ownerDocument||f;t:switch(l){case"title":g=f.getElementsByTagName("title")[0],(!g||g[nt]||g[K]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=f.createElement(l),f.head.insertBefore(g,f.querySelector("head > title"))),ns(g,l,r),g[K]=t,Ve(g),l=g;break e;case"link":var S=ig("link","href",f).get(l+(r.href||""));if(S){for(var R=0;R<S.length;R++)if(g=S[R],g.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&g.getAttribute("rel")===(r.rel==null?null:r.rel)&&g.getAttribute("title")===(r.title==null?null:r.title)&&g.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){S.splice(R,1);break t}}g=f.createElement(l),ns(g,l,r),f.head.appendChild(g);break;case"meta":if(S=ig("meta","content",f).get(l+(r.content||""))){for(R=0;R<S.length;R++)if(g=S[R],g.getAttribute("content")===(r.content==null?null:""+r.content)&&g.getAttribute("name")===(r.name==null?null:r.name)&&g.getAttribute("property")===(r.property==null?null:r.property)&&g.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&g.getAttribute("charset")===(r.charSet==null?null:r.charSet)){S.splice(R,1);break t}}g=f.createElement(l),ns(g,l,r),f.head.appendChild(g);break;default:throw Error(o(468,l))}g[K]=t,Ve(g),l=g}t.stateNode=l}else og(f,t.type,t.stateNode);else t.stateNode=rg(f,l,t.memoizedProps);else g!==l?(g===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):g.count--,l===null?og(f,t.type,t.stateNode):rg(f,l,t.memoizedProps)):l===null&&t.stateNode!==null&&Eu(t,t.memoizedProps,r.memoizedProps)}break;case 27:ms(s,t),ps(t),l&512&&(Bn||r===null||Qs(r,r.return)),r!==null&&l&4&&Eu(t,t.memoizedProps,r.memoizedProps);break;case 5:if(ms(s,t),ps(t),l&512&&(Bn||r===null||Qs(r,r.return)),t.flags&32){f=t.stateNode;try{Yt(f,"")}catch(Ye){Wt(t,t.return,Ye)}}l&4&&t.stateNode!=null&&(f=t.memoizedProps,Eu(t,f,r!==null?r.memoizedProps:f)),l&1024&&(Tu=!0);break;case 6:if(ms(s,t),ps(t),l&4){if(t.stateNode===null)throw Error(o(162));l=t.memoizedProps,r=t.stateNode;try{r.nodeValue=l}catch(Ye){Wt(t,t.return,Ye)}}break;case 3:if(wl=null,f=Fs,Fs=Sl(s.containerInfo),ms(s,t),Fs=f,ps(t),l&4&&r!==null&&r.memoizedState.isDehydrated)try{Xr(s.containerInfo)}catch(Ye){Wt(t,t.return,Ye)}Tu&&(Tu=!1,op(t));break;case 4:l=Fs,Fs=Sl(t.stateNode.containerInfo),ms(s,t),ps(t),Fs=l;break;case 12:ms(s,t),ps(t);break;case 31:ms(s,t),ps(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,ol(t,l)));break;case 13:ms(s,t),ps(t),t.child.flags&8192&&t.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(cl=Ct()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,ol(t,l)));break;case 22:f=t.memoizedState!==null;var H=r!==null&&r.memoizedState!==null,ee=da,fe=Bn;if(da=ee||f,Bn=fe||H,ms(s,t),Bn=fe,da=ee,ps(t),l&8192)e:for(s=t.stateNode,s._visibility=f?s._visibility&-2:s._visibility|1,f&&(r===null||H||da||Bn||dr(t)),r=null,s=t;;){if(s.tag===5||s.tag===26){if(r===null){H=r=s;try{if(g=H.stateNode,f)S=g.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{R=H.stateNode;var je=H.memoizedProps.style,ae=je!=null&&je.hasOwnProperty("display")?je.display:null;R.style.display=ae==null||typeof ae=="boolean"?"":(""+ae).trim()}}catch(Ye){Wt(H,H.return,Ye)}}}else if(s.tag===6){if(r===null){H=s;try{H.stateNode.nodeValue=f?"":H.memoizedProps}catch(Ye){Wt(H,H.return,Ye)}}}else if(s.tag===18){if(r===null){H=s;try{var oe=H.stateNode;f?Wp(oe,!0):Wp(H.stateNode,!1)}catch(Ye){Wt(H,H.return,Ye)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===t)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;s.sibling===null;){if(s.return===null||s.return===t)break e;r===s&&(r=null),s=s.return}r===s&&(r=null),s.sibling.return=s.return,s=s.sibling}l&4&&(l=t.updateQueue,l!==null&&(r=l.retryQueue,r!==null&&(l.retryQueue=null,ol(t,r))));break;case 19:ms(s,t),ps(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,ol(t,l)));break;case 30:break;case 21:break;default:ms(s,t),ps(t)}}function ps(t){var s=t.flags;if(s&2){try{for(var r,l=t.return;l!==null;){if(Qm(l)){r=l;break}l=l.return}if(r==null)throw Error(o(160));switch(r.tag){case 27:var f=r.stateNode,g=_u(t);il(t,g,f);break;case 5:var S=r.stateNode;r.flags&32&&(Yt(S,""),r.flags&=-33);var R=_u(t);il(t,R,S);break;case 3:case 4:var H=r.stateNode.containerInfo,ee=_u(t);Cu(t,ee,H);break;default:throw Error(o(161))}}catch(fe){Wt(t,t.return,fe)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function op(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var s=t;op(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),t=t.sibling}}function ha(t,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)tp(t,s.alternate,s),s=s.sibling}function dr(t){for(t=t.child;t!==null;){var s=t;switch(s.tag){case 0:case 11:case 14:case 15:Ma(4,s,s.return),dr(s);break;case 1:Qs(s,s.return);var r=s.stateNode;typeof r.componentWillUnmount=="function"&&Wm(s,s.return,r),dr(s);break;case 27:Xi(s.stateNode);case 26:case 5:Qs(s,s.return),dr(s);break;case 22:s.memoizedState===null&&dr(s);break;case 30:dr(s);break;default:dr(s)}t=t.sibling}}function ma(t,s,r){for(r=r&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var l=s.alternate,f=t,g=s,S=g.flags;switch(g.tag){case 0:case 11:case 15:ma(f,g,r),Pi(4,g);break;case 1:if(ma(f,g,r),l=g,f=l.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(ee){Wt(l,l.return,ee)}if(l=g,f=l.updateQueue,f!==null){var R=l.stateNode;try{var H=f.shared.hiddenCallbacks;if(H!==null)for(f.shared.hiddenCallbacks=null,f=0;f<H.length;f++)Bh(H[f],R)}catch(ee){Wt(l,l.return,ee)}}r&&S&64&&Km(g),Hi(g,g.return);break;case 27:Jm(g);case 26:case 5:ma(f,g,r),r&&l===null&&S&4&&Xm(g),Hi(g,g.return);break;case 12:ma(f,g,r);break;case 31:ma(f,g,r),r&&S&4&&ap(f,g);break;case 13:ma(f,g,r),r&&S&4&&rp(f,g);break;case 22:g.memoizedState===null&&ma(f,g,r),Hi(g,g.return);break;case 30:break;default:ma(f,g,r)}s=s.sibling}}function ku(t,s){var r=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),t=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(t=s.memoizedState.cachePool.pool),t!==r&&(t!=null&&t.refCount++,r!=null&&Ti(r))}function Ru(t,s){t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&Ti(t))}function Gs(t,s,r,l){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)lp(t,s,r,l),s=s.sibling}function lp(t,s,r,l){var f=s.flags;switch(s.tag){case 0:case 11:case 15:Gs(t,s,r,l),f&2048&&Pi(9,s);break;case 1:Gs(t,s,r,l);break;case 3:Gs(t,s,r,l),f&2048&&(t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&Ti(t)));break;case 12:if(f&2048){Gs(t,s,r,l),t=s.stateNode;try{var g=s.memoizedProps,S=g.id,R=g.onPostCommit;typeof R=="function"&&R(S,s.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(H){Wt(s,s.return,H)}}else Gs(t,s,r,l);break;case 31:Gs(t,s,r,l);break;case 13:Gs(t,s,r,l);break;case 23:break;case 22:g=s.stateNode,S=s.alternate,s.memoizedState!==null?g._visibility&2?Gs(t,s,r,l):Zi(t,s):g._visibility&2?Gs(t,s,r,l):(g._visibility|=2,Ir(t,s,r,l,(s.subtreeFlags&10256)!==0||!1)),f&2048&&ku(S,s);break;case 24:Gs(t,s,r,l),f&2048&&Ru(s.alternate,s);break;default:Gs(t,s,r,l)}}function Ir(t,s,r,l,f){for(f=f&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var g=t,S=s,R=r,H=l,ee=S.flags;switch(S.tag){case 0:case 11:case 15:Ir(g,S,R,H,f),Pi(8,S);break;case 23:break;case 22:var fe=S.stateNode;S.memoizedState!==null?fe._visibility&2?Ir(g,S,R,H,f):Zi(g,S):(fe._visibility|=2,Ir(g,S,R,H,f)),f&&ee&2048&&ku(S.alternate,S);break;case 24:Ir(g,S,R,H,f),f&&ee&2048&&Ru(S.alternate,S);break;default:Ir(g,S,R,H,f)}s=s.sibling}}function Zi(t,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var r=t,l=s,f=l.flags;switch(l.tag){case 22:Zi(r,l),f&2048&&ku(l.alternate,l);break;case 24:Zi(r,l),f&2048&&Ru(l.alternate,l);break;default:Zi(r,l)}s=s.sibling}}var qi=8192;function Pr(t,s,r){if(t.subtreeFlags&qi)for(t=t.child;t!==null;)cp(t,s,r),t=t.sibling}function cp(t,s,r){switch(t.tag){case 26:Pr(t,s,r),t.flags&qi&&t.memoizedState!==null&&u1(r,Fs,t.memoizedState,t.memoizedProps);break;case 5:Pr(t,s,r);break;case 3:case 4:var l=Fs;Fs=Sl(t.stateNode.containerInfo),Pr(t,s,r),Fs=l;break;case 22:t.memoizedState===null&&(l=t.alternate,l!==null&&l.memoizedState!==null?(l=qi,qi=16777216,Pr(t,s,r),qi=l):Pr(t,s,r));break;default:Pr(t,s,r)}}function up(t){var s=t.alternate;if(s!==null&&(t=s.child,t!==null)){s.child=null;do s=t.sibling,t.sibling=null,t=s;while(t!==null)}}function Vi(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var r=0;r<s.length;r++){var l=s[r];Yn=l,fp(l,t)}up(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)dp(t),t=t.sibling}function dp(t){switch(t.tag){case 0:case 11:case 15:Vi(t),t.flags&2048&&Ma(9,t,t.return);break;case 3:Vi(t);break;case 12:Vi(t);break;case 22:var s=t.stateNode;t.memoizedState!==null&&s._visibility&2&&(t.return===null||t.return.tag!==13)?(s._visibility&=-3,ll(t)):Vi(t);break;default:Vi(t)}}function ll(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var r=0;r<s.length;r++){var l=s[r];Yn=l,fp(l,t)}up(t)}for(t=t.child;t!==null;){switch(s=t,s.tag){case 0:case 11:case 15:Ma(8,s,s.return),ll(s);break;case 22:r=s.stateNode,r._visibility&2&&(r._visibility&=-3,ll(s));break;default:ll(s)}t=t.sibling}}function fp(t,s){for(;Yn!==null;){var r=Yn;switch(r.tag){case 0:case 11:case 15:Ma(8,r,s);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var l=r.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Ti(r.memoizedState.cache)}if(l=r.child,l!==null)l.return=r,Yn=l;else e:for(r=t;Yn!==null;){l=Yn;var f=l.sibling,g=l.return;if(np(l),l===r){Yn=null;break e}if(f!==null){f.return=g,Yn=f;break e}Yn=g}}}var Eb={getCacheForType:function(t){var s=es(Un),r=s.data.get(t);return r===void 0&&(r=t(),s.data.set(t,r)),r},cacheSignal:function(){return es(Un).controller.signal}},_b=typeof WeakMap=="function"?WeakMap:Map,Zt=0,an=null,Ot=null,Ut=0,Kt=0,_s=null,Oa=!1,Hr=!1,Au=!1,pa=0,Tn=0,za=0,fr=0,Mu=0,Cs=0,Zr=0,Fi=null,gs=null,Ou=!1,cl=0,hp=0,ul=1/0,dl=null,Ua=null,Hn=0,La=null,qr=null,ga=0,zu=0,Uu=null,mp=null,Gi=0,Lu=null;function Ts(){return(Zt&2)!==0&&Ut!==0?Ut&-Ut:L.T!==null?Hu():y()}function pp(){if(Cs===0)if((Ut&536870912)===0||Dt){var t=Qn;Qn<<=1,(Qn&3932160)===0&&(Qn=262144),Cs=t}else Cs=536870912;return t=Ns.current,t!==null&&(t.flags|=32),Cs}function vs(t,s,r){(t===an&&(Kt===2||Kt===9)||t.cancelPendingCommit!==null)&&(Vr(t,0),Da(t,Ut,Cs,!1)),ds(t,r),((Zt&2)===0||t!==an)&&(t===an&&((Zt&2)===0&&(fr|=r),Tn===4&&Da(t,Ut,Cs,!1)),Js(t))}function gp(t,s,r){if((Zt&6)!==0)throw Error(o(327));var l=!r&&(s&127)===0&&(s&t.expiredLanes)===0||Pn(t,s),f=l?kb(t,s):Bu(t,s,!0),g=l;do{if(f===0){Hr&&!l&&Da(t,s,0,!1);break}else{if(r=t.current.alternate,g&&!Cb(r)){f=Bu(t,s,!1),g=!1;continue}if(f===2){if(g=s,t.errorRecoveryDisabledLanes&g)var S=0;else S=t.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){s=S;e:{var R=t;f=Fi;var H=R.current.memoizedState.isDehydrated;if(H&&(Vr(R,S).flags|=256),S=Bu(R,S,!1),S!==2){if(Au&&!H){R.errorRecoveryDisabledLanes|=g,fr|=g,f=4;break e}g=gs,gs=f,g!==null&&(gs===null?gs=g:gs.push.apply(gs,g))}f=S}if(g=!1,f!==2)continue}}if(f===1){Vr(t,0),Da(t,s,0,!0);break}e:{switch(l=t,g=f,g){case 0:case 1:throw Error(o(345));case 4:if((s&4194048)!==s)break;case 6:Da(l,s,Cs,!Oa);break e;case 2:gs=null;break;case 3:case 5:break;default:throw Error(o(329))}if((s&62914560)===s&&(f=cl+300-Ct(),10<f)){if(Da(l,s,Cs,!Oa),Nn(l,0,!0)!==0)break e;ga=s,l.timeoutHandle=Gp(vp.bind(null,l,r,gs,dl,Ou,s,Cs,fr,Zr,Oa,g,"Throttled",-0,0),f);break e}vp(l,r,gs,dl,Ou,s,Cs,fr,Zr,Oa,g,null,-0,0)}}break}while(!0);Js(t)}function vp(t,s,r,l,f,g,S,R,H,ee,fe,je,ae,oe){if(t.timeoutHandle=-1,je=s.subtreeFlags,je&8192||(je&16785408)===16785408){je={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ta},cp(s,g,je);var Ye=(g&62914560)===g?cl-Ct():(g&4194048)===g?hp-Ct():0;if(Ye=d1(je,Ye),Ye!==null){ga=g,t.cancelPendingCommit=Ye(Ep.bind(null,t,s,g,r,l,f,S,R,H,fe,je,null,ae,oe)),Da(t,g,S,!ee);return}}Ep(t,s,g,r,l,f,S,R,H)}function Cb(t){for(var s=t;;){var r=s.tag;if((r===0||r===11||r===15)&&s.flags&16384&&(r=s.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var l=0;l<r.length;l++){var f=r[l],g=f.getSnapshot;f=f.value;try{if(!js(g(),f))return!1}catch{return!1}}if(r=s.child,s.subtreeFlags&16384&&r!==null)r.return=s,s=r;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Da(t,s,r,l){s&=~Mu,s&=~fr,t.suspendedLanes|=s,t.pingedLanes&=~s,l&&(t.warmLanes|=s),l=t.expirationTimes;for(var f=s;0<f;){var g=31-mt(f),S=1<<g;l[g]=-1,f&=~S}r!==0&&En(t,r,s)}function fl(){return(Zt&6)===0?(Yi(0),!1):!0}function Du(){if(Ot!==null){if(Kt===0)var t=Ot.return;else t=Ot,ra=sr=null,Jc(t),Ur=null,Ri=0,t=Ot;for(;t!==null;)Ym(t.alternate,t),t=t.return;Ot=null}}function Vr(t,s){var r=t.timeoutHandle;r!==-1&&(t.timeoutHandle=-1,Gb(r)),r=t.cancelPendingCommit,r!==null&&(t.cancelPendingCommit=null,r()),ga=0,Du(),an=t,Ot=r=sa(t.current,null),Ut=s,Kt=0,_s=null,Oa=!1,Hr=Pn(t,s),Au=!1,Zr=Cs=Mu=fr=za=Tn=0,gs=Fi=null,Ou=!1,(s&8)!==0&&(s|=s&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=s;0<l;){var f=31-mt(l),g=1<<f;s|=t[f],l&=~g}return pa=s,Oo(),r}function xp(t,s){jt=null,L.H=Bi,s===zr||s===Po?(s=zh(),Kt=3):s===Pc?(s=zh(),Kt=4):Kt=s===pu?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,_s=s,Ot===null&&(Tn=1,tl(t,Ms(s,t.current)))}function yp(){var t=Ns.current;return t===null?!0:(Ut&4194048)===Ut?Ls===null:(Ut&62914560)===Ut||(Ut&536870912)!==0?t===Ls:!1}function bp(){var t=L.H;return L.H=Bi,t===null?Bi:t}function Sp(){var t=L.A;return L.A=Eb,t}function hl(){Tn=4,Oa||(Ut&4194048)!==Ut&&Ns.current!==null||(Hr=!0),(za&134217727)===0&&(fr&134217727)===0||an===null||Da(an,Ut,Cs,!1)}function Bu(t,s,r){var l=Zt;Zt|=2;var f=bp(),g=Sp();(an!==t||Ut!==s)&&(dl=null,Vr(t,s)),s=!1;var S=Tn;e:do try{if(Kt!==0&&Ot!==null){var R=Ot,H=_s;switch(Kt){case 8:Du(),S=6;break e;case 3:case 2:case 9:case 6:Ns.current===null&&(s=!0);var ee=Kt;if(Kt=0,_s=null,Fr(t,R,H,ee),r&&Hr){S=0;break e}break;default:ee=Kt,Kt=0,_s=null,Fr(t,R,H,ee)}}Tb(),S=Tn;break}catch(fe){xp(t,fe)}while(!0);return s&&t.shellSuspendCounter++,ra=sr=null,Zt=l,L.H=f,L.A=g,Ot===null&&(an=null,Ut=0,Oo()),S}function Tb(){for(;Ot!==null;)jp(Ot)}function kb(t,s){var r=Zt;Zt|=2;var l=bp(),f=Sp();an!==t||Ut!==s?(dl=null,ul=Ct()+500,Vr(t,s)):Hr=Pn(t,s);e:do try{if(Kt!==0&&Ot!==null){s=Ot;var g=_s;t:switch(Kt){case 1:Kt=0,_s=null,Fr(t,s,g,1);break;case 2:case 9:if(Mh(g)){Kt=0,_s=null,wp(s);break}s=function(){Kt!==2&&Kt!==9||an!==t||(Kt=7),Js(t)},g.then(s,s);break e;case 3:Kt=7;break e;case 4:Kt=5;break e;case 7:Mh(g)?(Kt=0,_s=null,wp(s)):(Kt=0,_s=null,Fr(t,s,g,7));break;case 5:var S=null;switch(Ot.tag){case 26:S=Ot.memoizedState;case 5:case 27:var R=Ot;if(S?lg(S):R.stateNode.complete){Kt=0,_s=null;var H=R.sibling;if(H!==null)Ot=H;else{var ee=R.return;ee!==null?(Ot=ee,ml(ee)):Ot=null}break t}}Kt=0,_s=null,Fr(t,s,g,5);break;case 6:Kt=0,_s=null,Fr(t,s,g,6);break;case 8:Du(),Tn=6;break e;default:throw Error(o(462))}}Rb();break}catch(fe){xp(t,fe)}while(!0);return ra=sr=null,L.H=l,L.A=f,Zt=r,Ot!==null?0:(an=null,Ut=0,Oo(),Tn)}function Rb(){for(;Ot!==null&&!Tt();)jp(Ot)}function jp(t){var s=Fm(t.alternate,t,pa);t.memoizedProps=t.pendingProps,s===null?ml(t):Ot=s}function wp(t){var s=t,r=s.alternate;switch(s.tag){case 15:case 0:s=Im(r,s,s.pendingProps,s.type,void 0,Ut);break;case 11:s=Im(r,s,s.pendingProps,s.type.render,s.ref,Ut);break;case 5:Jc(s);default:Ym(r,s),s=Ot=Sh(s,pa),s=Fm(r,s,pa)}t.memoizedProps=t.pendingProps,s===null?ml(t):Ot=s}function Fr(t,s,r,l){ra=sr=null,Jc(s),Ur=null,Ri=0;var f=s.return;try{if(xb(t,f,s,r,Ut)){Tn=1,tl(t,Ms(r,t.current)),Ot=null;return}}catch(g){if(f!==null)throw Ot=f,g;Tn=1,tl(t,Ms(r,t.current)),Ot=null;return}s.flags&32768?(Dt||l===1?t=!0:Hr||(Ut&536870912)!==0?t=!1:(Oa=t=!0,(l===2||l===9||l===3||l===6)&&(l=Ns.current,l!==null&&l.tag===13&&(l.flags|=16384))),Np(s,t)):ml(s)}function ml(t){var s=t;do{if((s.flags&32768)!==0){Np(s,Oa);return}t=s.return;var r=Sb(s.alternate,s,pa);if(r!==null){Ot=r;return}if(s=s.sibling,s!==null){Ot=s;return}Ot=s=t}while(s!==null);Tn===0&&(Tn=5)}function Np(t,s){do{var r=jb(t.alternate,t);if(r!==null){r.flags&=32767,Ot=r;return}if(r=t.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!s&&(t=t.sibling,t!==null)){Ot=t;return}Ot=t=r}while(t!==null);Tn=6,Ot=null}function Ep(t,s,r,l,f,g,S,R,H){t.cancelPendingCommit=null;do pl();while(Hn!==0);if((Zt&6)!==0)throw Error(o(327));if(s!==null){if(s===t.current)throw Error(o(177));if(g=s.lanes|s.childLanes,g|=_c,qs(t,r,g,S,R,H),t===an&&(Ot=an=null,Ut=0),qr=s,La=t,ga=r,zu=g,Uu=f,mp=l,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,zb(Ce,function(){return Rp(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||l){l=L.T,L.T=null,f=F.p,F.p=2,S=Zt,Zt|=4;try{wb(t,s,r)}finally{Zt=S,F.p=f,L.T=l}}Hn=1,_p(),Cp(),Tp()}}function _p(){if(Hn===1){Hn=0;var t=La,s=qr,r=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||r){r=L.T,L.T=null;var l=F.p;F.p=2;var f=Zt;Zt|=4;try{ip(s,t);var g=Wu,S=fh(t.containerInfo),R=g.focusedElem,H=g.selectionRange;if(S!==R&&R&&R.ownerDocument&&dh(R.ownerDocument.documentElement,R)){if(H!==null&&Sc(R)){var ee=H.start,fe=H.end;if(fe===void 0&&(fe=ee),"selectionStart"in R)R.selectionStart=ee,R.selectionEnd=Math.min(fe,R.value.length);else{var je=R.ownerDocument||document,ae=je&&je.defaultView||window;if(ae.getSelection){var oe=ae.getSelection(),Ye=R.textContent.length,ft=Math.min(H.start,Ye),tn=H.end===void 0?ft:Math.min(H.end,Ye);!oe.extend&&ft>tn&&(S=tn,tn=ft,ft=S);var W=uh(R,ft),q=uh(R,tn);if(W&&q&&(oe.rangeCount!==1||oe.anchorNode!==W.node||oe.anchorOffset!==W.offset||oe.focusNode!==q.node||oe.focusOffset!==q.offset)){var J=je.createRange();J.setStart(W.node,W.offset),oe.removeAllRanges(),ft>tn?(oe.addRange(J),oe.extend(q.node,q.offset)):(J.setEnd(q.node,q.offset),oe.addRange(J))}}}}for(je=[],oe=R;oe=oe.parentNode;)oe.nodeType===1&&je.push({element:oe,left:oe.scrollLeft,top:oe.scrollTop});for(typeof R.focus=="function"&&R.focus(),R=0;R<je.length;R++){var ye=je[R];ye.element.scrollLeft=ye.left,ye.element.scrollTop=ye.top}}Cl=!!Ku,Wu=Ku=null}finally{Zt=f,F.p=l,L.T=r}}t.current=s,Hn=2}}function Cp(){if(Hn===2){Hn=0;var t=La,s=qr,r=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||r){r=L.T,L.T=null;var l=F.p;F.p=2;var f=Zt;Zt|=4;try{tp(t,s.alternate,s)}finally{Zt=f,F.p=l,L.T=r}}Hn=3}}function Tp(){if(Hn===4||Hn===3){Hn=0,bt();var t=La,s=qr,r=ga,l=mp;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Hn=5:(Hn=0,qr=La=null,kp(t,t.pendingLanes));var f=t.pendingLanes;if(f===0&&(Ua=null),T(r),s=s.stateNode,At&&typeof At.onCommitFiberRoot=="function")try{At.onCommitFiberRoot(Rt,s,void 0,(s.current.flags&128)===128)}catch{}if(l!==null){s=L.T,f=F.p,F.p=2,L.T=null;try{for(var g=t.onRecoverableError,S=0;S<l.length;S++){var R=l[S];g(R.value,{componentStack:R.stack})}}finally{L.T=s,F.p=f}}(ga&3)!==0&&pl(),Js(t),f=t.pendingLanes,(r&261930)!==0&&(f&42)!==0?t===Lu?Gi++:(Gi=0,Lu=t):Gi=0,Yi(0)}}function kp(t,s){(t.pooledCacheLanes&=s)===0&&(s=t.pooledCache,s!=null&&(t.pooledCache=null,Ti(s)))}function pl(){return _p(),Cp(),Tp(),Rp()}function Rp(){if(Hn!==5)return!1;var t=La,s=zu;zu=0;var r=T(ga),l=L.T,f=F.p;try{F.p=32>r?32:r,L.T=null,r=Uu,Uu=null;var g=La,S=ga;if(Hn=0,qr=La=null,ga=0,(Zt&6)!==0)throw Error(o(331));var R=Zt;if(Zt|=4,dp(g.current),lp(g,g.current,S,r),Zt=R,Yi(0,!1),At&&typeof At.onPostCommitFiberRoot=="function")try{At.onPostCommitFiberRoot(Rt,g)}catch{}return!0}finally{F.p=f,L.T=l,kp(t,s)}}function Ap(t,s,r){s=Ms(r,s),s=mu(t.stateNode,s,2),t=ka(t,s,2),t!==null&&(ds(t,2),Js(t))}function Wt(t,s,r){if(t.tag===3)Ap(t,t,r);else for(;s!==null;){if(s.tag===3){Ap(s,t,r);break}else if(s.tag===1){var l=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Ua===null||!Ua.has(l))){t=Ms(r,t),r=Mm(2),l=ka(s,r,2),l!==null&&(Om(r,l,s,t),ds(l,2),Js(l));break}}s=s.return}}function $u(t,s,r){var l=t.pingCache;if(l===null){l=t.pingCache=new _b;var f=new Set;l.set(s,f)}else f=l.get(s),f===void 0&&(f=new Set,l.set(s,f));f.has(r)||(Au=!0,f.add(r),t=Ab.bind(null,t,s,r),s.then(t,t))}function Ab(t,s,r){var l=t.pingCache;l!==null&&l.delete(s),t.pingedLanes|=t.suspendedLanes&r,t.warmLanes&=~r,an===t&&(Ut&r)===r&&(Tn===4||Tn===3&&(Ut&62914560)===Ut&&300>Ct()-cl?(Zt&2)===0&&Vr(t,0):Mu|=r,Zr===Ut&&(Zr=0)),Js(t)}function Mp(t,s){s===0&&(s=Vn()),t=er(t,s),t!==null&&(ds(t,s),Js(t))}function Mb(t){var s=t.memoizedState,r=0;s!==null&&(r=s.retryLane),Mp(t,r)}function Ob(t,s){var r=0;switch(t.tag){case 31:case 13:var l=t.stateNode,f=t.memoizedState;f!==null&&(r=f.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(o(314))}l!==null&&l.delete(s),Mp(t,r)}function zb(t,s){return Ge(t,s)}var gl=null,Gr=null,Iu=!1,vl=!1,Pu=!1,Ba=0;function Js(t){t!==Gr&&t.next===null&&(Gr===null?gl=Gr=t:Gr=Gr.next=t),vl=!0,Iu||(Iu=!0,Lb())}function Yi(t,s){if(!Pu&&vl){Pu=!0;do for(var r=!1,l=gl;l!==null;){if(t!==0){var f=l.pendingLanes;if(f===0)var g=0;else{var S=l.suspendedLanes,R=l.pingedLanes;g=(1<<31-mt(42|t)+1)-1,g&=f&~(S&~R),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(r=!0,Lp(l,g))}else g=Ut,g=Nn(l,l===an?g:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(g&3)===0||Pn(l,g)||(r=!0,Lp(l,g));l=l.next}while(r);Pu=!1}}function Ub(){Op()}function Op(){vl=Iu=!1;var t=0;Ba!==0&&Fb()&&(t=Ba);for(var s=Ct(),r=null,l=gl;l!==null;){var f=l.next,g=zp(l,s);g===0?(l.next=null,r===null?gl=f:r.next=f,f===null&&(Gr=r)):(r=l,(t!==0||(g&3)!==0)&&(vl=!0)),l=f}Hn!==0&&Hn!==5||Yi(t),Ba!==0&&(Ba=0)}function zp(t,s){for(var r=t.suspendedLanes,l=t.pingedLanes,f=t.expirationTimes,g=t.pendingLanes&-62914561;0<g;){var S=31-mt(g),R=1<<S,H=f[S];H===-1?((R&r)===0||(R&l)!==0)&&(f[S]=cs(R,s)):H<=s&&(t.expiredLanes|=R),g&=~R}if(s=an,r=Ut,r=Nn(t,t===s?r:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,r===0||t===s&&(Kt===2||Kt===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&tt(l),t.callbackNode=null,t.callbackPriority=0;if((r&3)===0||Pn(t,r)){if(s=r&-r,s===t.callbackPriority)return s;switch(l!==null&&tt(l),T(r)){case 2:case 8:r=st;break;case 32:r=Ce;break;case 268435456:r=Vt;break;default:r=Ce}return l=Up.bind(null,t),r=Ge(r,l),t.callbackPriority=s,t.callbackNode=r,s}return l!==null&&l!==null&&tt(l),t.callbackPriority=2,t.callbackNode=null,2}function Up(t,s){if(Hn!==0&&Hn!==5)return t.callbackNode=null,t.callbackPriority=0,null;var r=t.callbackNode;if(pl()&&t.callbackNode!==r)return null;var l=Ut;return l=Nn(t,t===an?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(gp(t,l,s),zp(t,Ct()),t.callbackNode!=null&&t.callbackNode===r?Up.bind(null,t):null)}function Lp(t,s){if(pl())return null;gp(t,s,!0)}function Lb(){Yb(function(){(Zt&6)!==0?Ge(cn,Ub):Op()})}function Hu(){if(Ba===0){var t=Mr;t===0&&(t=On,On<<=1,(On&261888)===0&&(On=256)),Ba=t}return Ba}function Dp(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Eo(""+t)}function Bp(t,s){var r=s.ownerDocument.createElement("input");return r.name=s.name,r.value=s.value,t.id&&r.setAttribute("form",t.id),s.parentNode.insertBefore(r,s),t=new FormData(t),r.parentNode.removeChild(r),t}function Db(t,s,r,l,f){if(s==="submit"&&r&&r.stateNode===f){var g=Dp((f[ce]||null).action),S=l.submitter;S&&(s=(s=S[ce]||null)?Dp(s.formAction):S.getAttribute("formAction"),s!==null&&(g=s,S=null));var R=new ko("action","action",null,l,f);t.push({event:R,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Ba!==0){var H=S?Bp(f,S):new FormData(f);lu(r,{pending:!0,data:H,method:f.method,action:g},null,H)}}else typeof g=="function"&&(R.preventDefault(),H=S?Bp(f,S):new FormData(f),lu(r,{pending:!0,data:H,method:f.method,action:g},g,H))},currentTarget:f}]})}}for(var Zu=0;Zu<Ec.length;Zu++){var qu=Ec[Zu],Bb=qu.toLowerCase(),$b=qu[0].toUpperCase()+qu.slice(1);Vs(Bb,"on"+$b)}Vs(ph,"onAnimationEnd"),Vs(gh,"onAnimationIteration"),Vs(vh,"onAnimationStart"),Vs("dblclick","onDoubleClick"),Vs("focusin","onFocus"),Vs("focusout","onBlur"),Vs(tb,"onTransitionRun"),Vs(nb,"onTransitionStart"),Vs(sb,"onTransitionCancel"),Vs(xh,"onTransitionEnd"),Ne("onMouseEnter",["mouseout","mouseover"]),Ne("onMouseLeave",["mouseout","mouseover"]),Ne("onPointerEnter",["pointerout","pointerover"]),Ne("onPointerLeave",["pointerout","pointerover"]),ue("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ue("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ue("onBeforeInput",["compositionend","keypress","textInput","paste"]),ue("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ue("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ue("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ki="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ib=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ki));function $p(t,s){s=(s&4)!==0;for(var r=0;r<t.length;r++){var l=t[r],f=l.event;l=l.listeners;e:{var g=void 0;if(s)for(var S=l.length-1;0<=S;S--){var R=l[S],H=R.instance,ee=R.currentTarget;if(R=R.listener,H!==g&&f.isPropagationStopped())break e;g=R,f.currentTarget=ee;try{g(f)}catch(fe){Mo(fe)}f.currentTarget=null,g=H}else for(S=0;S<l.length;S++){if(R=l[S],H=R.instance,ee=R.currentTarget,R=R.listener,H!==g&&f.isPropagationStopped())break e;g=R,f.currentTarget=ee;try{g(f)}catch(fe){Mo(fe)}f.currentTarget=null,g=H}}}}function zt(t,s){var r=s[Pe];r===void 0&&(r=s[Pe]=new Set);var l=t+"__bubble";r.has(l)||(Ip(s,t,2,!1),r.add(l))}function Vu(t,s,r){var l=0;s&&(l|=4),Ip(r,t,l,s)}var xl="_reactListening"+Math.random().toString(36).slice(2);function Fu(t){if(!t[xl]){t[xl]=!0,qe.forEach(function(r){r!=="selectionchange"&&(Ib.has(r)||Vu(r,!1,t),Vu(r,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[xl]||(s[xl]=!0,Vu("selectionchange",!1,s))}}function Ip(t,s,r,l){switch(pg(s)){case 2:var f=m1;break;case 8:f=p1;break;default:f=od}r=f.bind(null,s,r,t),f=void 0,!fc||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),l?f!==void 0?t.addEventListener(s,r,{capture:!0,passive:f}):t.addEventListener(s,r,!0):f!==void 0?t.addEventListener(s,r,{passive:f}):t.addEventListener(s,r,!1)}function Gu(t,s,r,l,f){var g=l;if((s&1)===0&&(s&2)===0&&l!==null)e:for(;;){if(l===null)return;var S=l.tag;if(S===3||S===4){var R=l.stateNode.containerInfo;if(R===f)break;if(S===4)for(S=l.return;S!==null;){var H=S.tag;if((H===3||H===4)&&S.stateNode.containerInfo===f)return;S=S.return}for(;R!==null;){if(S=$e(R),S===null)return;if(H=S.tag,H===5||H===6||H===26||H===27){l=g=S;continue e}R=R.parentNode}}l=l.return}Vf(function(){var ee=g,fe=uc(r),je=[];e:{var ae=yh.get(t);if(ae!==void 0){var oe=ko,Ye=t;switch(t){case"keypress":if(Co(r)===0)break e;case"keydown":case"keyup":oe=Oy;break;case"focusin":Ye="focus",oe=gc;break;case"focusout":Ye="blur",oe=gc;break;case"beforeblur":case"afterblur":oe=gc;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":oe=Yf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":oe=Sy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":oe=Ly;break;case ph:case gh:case vh:oe=Ny;break;case xh:oe=By;break;case"scroll":case"scrollend":oe=yy;break;case"wheel":oe=Iy;break;case"copy":case"cut":case"paste":oe=_y;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":oe=Wf;break;case"toggle":case"beforetoggle":oe=Hy}var ft=(s&4)!==0,tn=!ft&&(t==="scroll"||t==="scrollend"),W=ft?ae!==null?ae+"Capture":null:ae;ft=[];for(var q=ee,J;q!==null;){var ye=q;if(J=ye.stateNode,ye=ye.tag,ye!==5&&ye!==26&&ye!==27||J===null||W===null||(ye=vi(q,W),ye!=null&&ft.push(Wi(q,ye,J))),tn)break;q=q.return}0<ft.length&&(ae=new oe(ae,Ye,null,r,fe),je.push({event:ae,listeners:ft}))}}if((s&7)===0){e:{if(ae=t==="mouseover"||t==="pointerover",oe=t==="mouseout"||t==="pointerout",ae&&r!==cc&&(Ye=r.relatedTarget||r.fromElement)&&($e(Ye)||Ye[ke]))break e;if((oe||ae)&&(ae=fe.window===fe?fe:(ae=fe.ownerDocument)?ae.defaultView||ae.parentWindow:window,oe?(Ye=r.relatedTarget||r.toElement,oe=ee,Ye=Ye?$e(Ye):null,Ye!==null&&(tn=u(Ye),ft=Ye.tag,Ye!==tn||ft!==5&&ft!==27&&ft!==6)&&(Ye=null)):(oe=null,Ye=ee),oe!==Ye)){if(ft=Yf,ye="onMouseLeave",W="onMouseEnter",q="mouse",(t==="pointerout"||t==="pointerover")&&(ft=Wf,ye="onPointerLeave",W="onPointerEnter",q="pointer"),tn=oe==null?ae:ut(oe),J=Ye==null?ae:ut(Ye),ae=new ft(ye,q+"leave",oe,r,fe),ae.target=tn,ae.relatedTarget=J,ye=null,$e(fe)===ee&&(ft=new ft(W,q+"enter",Ye,r,fe),ft.target=J,ft.relatedTarget=tn,ye=ft),tn=ye,oe&&Ye)t:{for(ft=Pb,W=oe,q=Ye,J=0,ye=W;ye;ye=ft(ye))J++;ye=0;for(var ot=q;ot;ot=ft(ot))ye++;for(;0<J-ye;)W=ft(W),J--;for(;0<ye-J;)q=ft(q),ye--;for(;J--;){if(W===q||q!==null&&W===q.alternate){ft=W;break t}W=ft(W),q=ft(q)}ft=null}else ft=null;oe!==null&&Pp(je,ae,oe,ft,!1),Ye!==null&&tn!==null&&Pp(je,tn,Ye,ft,!0)}}e:{if(ae=ee?ut(ee):window,oe=ae.nodeName&&ae.nodeName.toLowerCase(),oe==="select"||oe==="input"&&ae.type==="file")var $t=ah;else if(nh(ae))if(rh)$t=Qy;else{$t=Wy;var Xe=Ky}else oe=ae.nodeName,!oe||oe.toLowerCase()!=="input"||ae.type!=="checkbox"&&ae.type!=="radio"?ee&&zn(ee.elementType)&&($t=ah):$t=Xy;if($t&&($t=$t(t,ee))){sh(je,$t,r,fe);break e}Xe&&Xe(t,ae,ee),t==="focusout"&&ee&&ae.type==="number"&&ee.memoizedProps.value!=null&&kt(ae,"number",ae.value)}switch(Xe=ee?ut(ee):window,t){case"focusin":(nh(Xe)||Xe.contentEditable==="true")&&(Nr=Xe,jc=ee,Ei=null);break;case"focusout":Ei=jc=Nr=null;break;case"mousedown":wc=!0;break;case"contextmenu":case"mouseup":case"dragend":wc=!1,hh(je,r,fe);break;case"selectionchange":if(eb)break;case"keydown":case"keyup":hh(je,r,fe)}var _t;if(xc)e:{switch(t){case"compositionstart":var Lt="onCompositionStart";break e;case"compositionend":Lt="onCompositionEnd";break e;case"compositionupdate":Lt="onCompositionUpdate";break e}Lt=void 0}else wr?eh(t,r)&&(Lt="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(Lt="onCompositionStart");Lt&&(Xf&&r.locale!=="ko"&&(wr||Lt!=="onCompositionStart"?Lt==="onCompositionEnd"&&wr&&(_t=Ff()):(ja=fe,hc="value"in ja?ja.value:ja.textContent,wr=!0)),Xe=yl(ee,Lt),0<Xe.length&&(Lt=new Kf(Lt,t,null,r,fe),je.push({event:Lt,listeners:Xe}),_t?Lt.data=_t:(_t=th(r),_t!==null&&(Lt.data=_t)))),(_t=qy?Vy(t,r):Fy(t,r))&&(Lt=yl(ee,"onBeforeInput"),0<Lt.length&&(Xe=new Kf("onBeforeInput","beforeinput",null,r,fe),je.push({event:Xe,listeners:Lt}),Xe.data=_t)),Db(je,t,ee,r,fe)}$p(je,s)})}function Wi(t,s,r){return{instance:t,listener:s,currentTarget:r}}function yl(t,s){for(var r=s+"Capture",l=[];t!==null;){var f=t,g=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||g===null||(f=vi(t,r),f!=null&&l.unshift(Wi(t,f,g)),f=vi(t,s),f!=null&&l.push(Wi(t,f,g))),t.tag===3)return l;t=t.return}return[]}function Pb(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Pp(t,s,r,l,f){for(var g=s._reactName,S=[];r!==null&&r!==l;){var R=r,H=R.alternate,ee=R.stateNode;if(R=R.tag,H!==null&&H===l)break;R!==5&&R!==26&&R!==27||ee===null||(H=ee,f?(ee=vi(r,g),ee!=null&&S.unshift(Wi(r,ee,H))):f||(ee=vi(r,g),ee!=null&&S.push(Wi(r,ee,H)))),r=r.return}S.length!==0&&t.push({event:s,listeners:S})}var Hb=/\r\n?/g,Zb=/\u0000|\uFFFD/g;function Hp(t){return(typeof t=="string"?t:""+t).replace(Hb,`
`).replace(Zb,"")}function Zp(t,s){return s=Hp(s),Hp(t)===s}function en(t,s,r,l,f,g){switch(r){case"children":typeof l=="string"?s==="body"||s==="textarea"&&l===""||Yt(t,l):(typeof l=="number"||typeof l=="bigint")&&s!=="body"&&Yt(t,""+l);break;case"className":ge(t,"class",l);break;case"tabIndex":ge(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":ge(t,r,l);break;case"style":_n(t,l,g);break;case"data":if(s!=="object"){ge(t,"data",l);break}case"src":case"href":if(l===""&&(s!=="a"||r!=="href")){t.removeAttribute(r);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(r);break}l=Eo(""+l),t.setAttribute(r,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(r==="formAction"?(s!=="input"&&en(t,s,"name",f.name,f,null),en(t,s,"formEncType",f.formEncType,f,null),en(t,s,"formMethod",f.formMethod,f,null),en(t,s,"formTarget",f.formTarget,f,null)):(en(t,s,"encType",f.encType,f,null),en(t,s,"method",f.method,f,null),en(t,s,"target",f.target,f,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(r);break}l=Eo(""+l),t.setAttribute(r,l);break;case"onClick":l!=null&&(t.onclick=ta);break;case"onScroll":l!=null&&zt("scroll",t);break;case"onScrollEnd":l!=null&&zt("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(o(61));if(r=l.__html,r!=null){if(f.children!=null)throw Error(o(60));t.innerHTML=r}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}r=Eo(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(r,""+l):t.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(r,""):t.removeAttribute(r);break;case"capture":case"download":l===!0?t.setAttribute(r,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(r,l):t.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(r,l):t.removeAttribute(r);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(r):t.setAttribute(r,l);break;case"popover":zt("beforetoggle",t),zt("toggle",t),be(t,"popover",l);break;case"xlinkActuate":ve(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":ve(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":ve(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":ve(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":ve(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":ve(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":ve(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":ve(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":ve(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":be(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=Fn.get(r)||r,be(t,r,l))}}function Yu(t,s,r,l,f,g){switch(r){case"style":_n(t,l,g);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(o(61));if(r=l.__html,r!=null){if(f.children!=null)throw Error(o(60));t.innerHTML=r}}break;case"children":typeof l=="string"?Yt(t,l):(typeof l=="number"||typeof l=="bigint")&&Yt(t,""+l);break;case"onScroll":l!=null&&zt("scroll",t);break;case"onScrollEnd":l!=null&&zt("scrollend",t);break;case"onClick":l!=null&&(t.onclick=ta);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!We.hasOwnProperty(r))e:{if(r[0]==="o"&&r[1]==="n"&&(f=r.endsWith("Capture"),s=r.slice(2,f?r.length-7:void 0),g=t[ce]||null,g=g!=null?g[r]:null,typeof g=="function"&&t.removeEventListener(s,g,f),typeof l=="function")){typeof g!="function"&&g!==null&&(r in t?t[r]=null:t.hasAttribute(r)&&t.removeAttribute(r)),t.addEventListener(s,l,f);break e}r in t?t[r]=l:l===!0?t.setAttribute(r,""):be(t,r,l)}}}function ns(t,s,r){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":zt("error",t),zt("load",t);var l=!1,f=!1,g;for(g in r)if(r.hasOwnProperty(g)){var S=r[g];if(S!=null)switch(g){case"src":l=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,s));default:en(t,s,g,S,r,null)}}f&&en(t,s,"srcSet",r.srcSet,r,null),l&&en(t,s,"src",r.src,r,null);return;case"input":zt("invalid",t);var R=g=S=f=null,H=null,ee=null;for(l in r)if(r.hasOwnProperty(l)){var fe=r[l];if(fe!=null)switch(l){case"name":f=fe;break;case"type":S=fe;break;case"checked":H=fe;break;case"defaultChecked":ee=fe;break;case"value":g=fe;break;case"defaultValue":R=fe;break;case"children":case"dangerouslySetInnerHTML":if(fe!=null)throw Error(o(137,s));break;default:en(t,s,l,fe,r,null)}}St(t,g,R,H,ee,S,f,!1);return;case"select":zt("invalid",t),l=S=g=null;for(f in r)if(r.hasOwnProperty(f)&&(R=r[f],R!=null))switch(f){case"value":g=R;break;case"defaultValue":S=R;break;case"multiple":l=R;default:en(t,s,f,R,r,null)}s=g,r=S,t.multiple=!!l,s!=null?Et(t,!!l,s,!1):r!=null&&Et(t,!!l,r,!0);return;case"textarea":zt("invalid",t),g=f=l=null;for(S in r)if(r.hasOwnProperty(S)&&(R=r[S],R!=null))switch(S){case"value":l=R;break;case"defaultValue":f=R;break;case"children":g=R;break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(o(91));break;default:en(t,s,S,R,r,null)}Bt(t,l,f,g);return;case"option":for(H in r)if(r.hasOwnProperty(H)&&(l=r[H],l!=null))switch(H){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:en(t,s,H,l,r,null)}return;case"dialog":zt("beforetoggle",t),zt("toggle",t),zt("cancel",t),zt("close",t);break;case"iframe":case"object":zt("load",t);break;case"video":case"audio":for(l=0;l<Ki.length;l++)zt(Ki[l],t);break;case"image":zt("error",t),zt("load",t);break;case"details":zt("toggle",t);break;case"embed":case"source":case"link":zt("error",t),zt("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ee in r)if(r.hasOwnProperty(ee)&&(l=r[ee],l!=null))switch(ee){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,s));default:en(t,s,ee,l,r,null)}return;default:if(zn(s)){for(fe in r)r.hasOwnProperty(fe)&&(l=r[fe],l!==void 0&&Yu(t,s,fe,l,r,void 0));return}}for(R in r)r.hasOwnProperty(R)&&(l=r[R],l!=null&&en(t,s,R,l,r,null))}function qb(t,s,r,l){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,g=null,S=null,R=null,H=null,ee=null,fe=null;for(oe in r){var je=r[oe];if(r.hasOwnProperty(oe)&&je!=null)switch(oe){case"checked":break;case"value":break;case"defaultValue":H=je;default:l.hasOwnProperty(oe)||en(t,s,oe,null,l,je)}}for(var ae in l){var oe=l[ae];if(je=r[ae],l.hasOwnProperty(ae)&&(oe!=null||je!=null))switch(ae){case"type":g=oe;break;case"name":f=oe;break;case"checked":ee=oe;break;case"defaultChecked":fe=oe;break;case"value":S=oe;break;case"defaultValue":R=oe;break;case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(o(137,s));break;default:oe!==je&&en(t,s,ae,oe,l,je)}}Mt(t,S,R,H,ee,fe,g,f);return;case"select":oe=S=R=ae=null;for(g in r)if(H=r[g],r.hasOwnProperty(g)&&H!=null)switch(g){case"value":break;case"multiple":oe=H;default:l.hasOwnProperty(g)||en(t,s,g,null,l,H)}for(f in l)if(g=l[f],H=r[f],l.hasOwnProperty(f)&&(g!=null||H!=null))switch(f){case"value":ae=g;break;case"defaultValue":R=g;break;case"multiple":S=g;default:g!==H&&en(t,s,f,g,l,H)}s=R,r=S,l=oe,ae!=null?Et(t,!!r,ae,!1):!!l!=!!r&&(s!=null?Et(t,!!r,s,!0):Et(t,!!r,r?[]:"",!1));return;case"textarea":oe=ae=null;for(R in r)if(f=r[R],r.hasOwnProperty(R)&&f!=null&&!l.hasOwnProperty(R))switch(R){case"value":break;case"children":break;default:en(t,s,R,null,l,f)}for(S in l)if(f=l[S],g=r[S],l.hasOwnProperty(S)&&(f!=null||g!=null))switch(S){case"value":ae=f;break;case"defaultValue":oe=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(o(91));break;default:f!==g&&en(t,s,S,f,l,g)}un(t,ae,oe);return;case"option":for(var Ye in r)if(ae=r[Ye],r.hasOwnProperty(Ye)&&ae!=null&&!l.hasOwnProperty(Ye))switch(Ye){case"selected":t.selected=!1;break;default:en(t,s,Ye,null,l,ae)}for(H in l)if(ae=l[H],oe=r[H],l.hasOwnProperty(H)&&ae!==oe&&(ae!=null||oe!=null))switch(H){case"selected":t.selected=ae&&typeof ae!="function"&&typeof ae!="symbol";break;default:en(t,s,H,ae,l,oe)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ft in r)ae=r[ft],r.hasOwnProperty(ft)&&ae!=null&&!l.hasOwnProperty(ft)&&en(t,s,ft,null,l,ae);for(ee in l)if(ae=l[ee],oe=r[ee],l.hasOwnProperty(ee)&&ae!==oe&&(ae!=null||oe!=null))switch(ee){case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(o(137,s));break;default:en(t,s,ee,ae,l,oe)}return;default:if(zn(s)){for(var tn in r)ae=r[tn],r.hasOwnProperty(tn)&&ae!==void 0&&!l.hasOwnProperty(tn)&&Yu(t,s,tn,void 0,l,ae);for(fe in l)ae=l[fe],oe=r[fe],!l.hasOwnProperty(fe)||ae===oe||ae===void 0&&oe===void 0||Yu(t,s,fe,ae,l,oe);return}}for(var W in r)ae=r[W],r.hasOwnProperty(W)&&ae!=null&&!l.hasOwnProperty(W)&&en(t,s,W,null,l,ae);for(je in l)ae=l[je],oe=r[je],!l.hasOwnProperty(je)||ae===oe||ae==null&&oe==null||en(t,s,je,ae,l,oe)}function qp(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Vb(){if(typeof performance.getEntriesByType=="function"){for(var t=0,s=0,r=performance.getEntriesByType("resource"),l=0;l<r.length;l++){var f=r[l],g=f.transferSize,S=f.initiatorType,R=f.duration;if(g&&R&&qp(S)){for(S=0,R=f.responseEnd,l+=1;l<r.length;l++){var H=r[l],ee=H.startTime;if(ee>R)break;var fe=H.transferSize,je=H.initiatorType;fe&&qp(je)&&(H=H.responseEnd,S+=fe*(H<R?1:(R-ee)/(H-ee)))}if(--l,s+=8*(g+S)/(f.duration/1e3),t++,10<t)break}}if(0<t)return s/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Ku=null,Wu=null;function bl(t){return t.nodeType===9?t:t.ownerDocument}function Vp(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Fp(t,s){if(t===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&s==="foreignObject"?0:t}function Xu(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Qu=null;function Fb(){var t=window.event;return t&&t.type==="popstate"?t===Qu?!1:(Qu=t,!0):(Qu=null,!1)}var Gp=typeof setTimeout=="function"?setTimeout:void 0,Gb=typeof clearTimeout=="function"?clearTimeout:void 0,Yp=typeof Promise=="function"?Promise:void 0,Yb=typeof queueMicrotask=="function"?queueMicrotask:typeof Yp<"u"?function(t){return Yp.resolve(null).then(t).catch(Kb)}:Gp;function Kb(t){setTimeout(function(){throw t})}function $a(t){return t==="head"}function Kp(t,s){var r=s,l=0;do{var f=r.nextSibling;if(t.removeChild(r),f&&f.nodeType===8)if(r=f.data,r==="/$"||r==="/&"){if(l===0){t.removeChild(f),Xr(s);return}l--}else if(r==="$"||r==="$?"||r==="$~"||r==="$!"||r==="&")l++;else if(r==="html")Xi(t.ownerDocument.documentElement);else if(r==="head"){r=t.ownerDocument.head,Xi(r);for(var g=r.firstChild;g;){var S=g.nextSibling,R=g.nodeName;g[nt]||R==="SCRIPT"||R==="STYLE"||R==="LINK"&&g.rel.toLowerCase()==="stylesheet"||r.removeChild(g),g=S}}else r==="body"&&Xi(t.ownerDocument.body);r=f}while(r);Xr(s)}function Wp(t,s){var r=t;t=0;do{var l=r.nextSibling;if(r.nodeType===1?s?(r._stashedDisplay=r.style.display,r.style.display="none"):(r.style.display=r._stashedDisplay||"",r.getAttribute("style")===""&&r.removeAttribute("style")):r.nodeType===3&&(s?(r._stashedText=r.nodeValue,r.nodeValue=""):r.nodeValue=r._stashedText||""),l&&l.nodeType===8)if(r=l.data,r==="/$"){if(t===0)break;t--}else r!=="$"&&r!=="$?"&&r!=="$~"&&r!=="$!"||t++;r=l}while(r)}function Ju(t){var s=t.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var r=s;switch(s=s.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":Ju(r),de(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}t.removeChild(r)}}function Wb(t,s,r,l){for(;t.nodeType===1;){var f=r;if(t.nodeName.toLowerCase()!==s.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[nt])switch(s){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(g=t.getAttribute("rel"),g==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(g!==f.rel||t.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||t.getAttribute("title")!==(f.title==null?null:f.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(g=t.getAttribute("src"),(g!==(f.src==null?null:f.src)||t.getAttribute("type")!==(f.type==null?null:f.type)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&g&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(s==="input"&&t.type==="hidden"){var g=f.name==null?null:""+f.name;if(f.type==="hidden"&&t.getAttribute("name")===g)return t}else return t;if(t=Ds(t.nextSibling),t===null)break}return null}function Xb(t,s,r){if(s==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!r||(t=Ds(t.nextSibling),t===null))return null;return t}function Xp(t,s){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!s||(t=Ds(t.nextSibling),t===null))return null;return t}function ed(t){return t.data==="$?"||t.data==="$~"}function td(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function Qb(t,s){var r=t.ownerDocument;if(t.data==="$~")t._reactRetry=s;else if(t.data!=="$?"||r.readyState!=="loading")s();else{var l=function(){s(),r.removeEventListener("DOMContentLoaded",l)};r.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function Ds(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return t}var nd=null;function Qp(t){t=t.nextSibling;for(var s=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"||r==="/&"){if(s===0)return Ds(t.nextSibling);s--}else r!=="$"&&r!=="$!"&&r!=="$?"&&r!=="$~"&&r!=="&"||s++}t=t.nextSibling}return null}function Jp(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"){if(s===0)return t;s--}else r!=="/$"&&r!=="/&"||s++}t=t.previousSibling}return null}function eg(t,s,r){switch(s=bl(r),t){case"html":if(t=s.documentElement,!t)throw Error(o(452));return t;case"head":if(t=s.head,!t)throw Error(o(453));return t;case"body":if(t=s.body,!t)throw Error(o(454));return t;default:throw Error(o(451))}}function Xi(t){for(var s=t.attributes;s.length;)t.removeAttributeNode(s[0]);de(t)}var Bs=new Map,tg=new Set;function Sl(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var va=F.d;F.d={f:Jb,r:e1,D:t1,C:n1,L:s1,m:a1,X:i1,S:r1,M:o1};function Jb(){var t=va.f(),s=fl();return t||s}function e1(t){var s=ct(t);s!==null&&s.tag===5&&s.type==="form"?xm(s):va.r(t)}var Yr=typeof document>"u"?null:document;function ng(t,s,r){var l=Yr;if(l&&typeof s=="string"&&s){var f=ht(s);f='link[rel="'+t+'"][href="'+f+'"]',typeof r=="string"&&(f+='[crossorigin="'+r+'"]'),tg.has(f)||(tg.add(f),t={rel:t,crossOrigin:r,href:s},l.querySelector(f)===null&&(s=l.createElement("link"),ns(s,"link",t),Ve(s),l.head.appendChild(s)))}}function t1(t){va.D(t),ng("dns-prefetch",t,null)}function n1(t,s){va.C(t,s),ng("preconnect",t,s)}function s1(t,s,r){va.L(t,s,r);var l=Yr;if(l&&t&&s){var f='link[rel="preload"][as="'+ht(s)+'"]';s==="image"&&r&&r.imageSrcSet?(f+='[imagesrcset="'+ht(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(f+='[imagesizes="'+ht(r.imageSizes)+'"]')):f+='[href="'+ht(t)+'"]';var g=f;switch(s){case"style":g=Kr(t);break;case"script":g=Wr(t)}Bs.has(g)||(t=b({rel:"preload",href:s==="image"&&r&&r.imageSrcSet?void 0:t,as:s},r),Bs.set(g,t),l.querySelector(f)!==null||s==="style"&&l.querySelector(Qi(g))||s==="script"&&l.querySelector(Ji(g))||(s=l.createElement("link"),ns(s,"link",t),Ve(s),l.head.appendChild(s)))}}function a1(t,s){va.m(t,s);var r=Yr;if(r&&t){var l=s&&typeof s.as=="string"?s.as:"script",f='link[rel="modulepreload"][as="'+ht(l)+'"][href="'+ht(t)+'"]',g=f;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=Wr(t)}if(!Bs.has(g)&&(t=b({rel:"modulepreload",href:t},s),Bs.set(g,t),r.querySelector(f)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(Ji(g)))return}l=r.createElement("link"),ns(l,"link",t),Ve(l),r.head.appendChild(l)}}}function r1(t,s,r){va.S(t,s,r);var l=Yr;if(l&&t){var f=dt(l).hoistableStyles,g=Kr(t);s=s||"default";var S=f.get(g);if(!S){var R={loading:0,preload:null};if(S=l.querySelector(Qi(g)))R.loading=5;else{t=b({rel:"stylesheet",href:t,"data-precedence":s},r),(r=Bs.get(g))&&sd(t,r);var H=S=l.createElement("link");Ve(H),ns(H,"link",t),H._p=new Promise(function(ee,fe){H.onload=ee,H.onerror=fe}),H.addEventListener("load",function(){R.loading|=1}),H.addEventListener("error",function(){R.loading|=2}),R.loading|=4,jl(S,s,l)}S={type:"stylesheet",instance:S,count:1,state:R},f.set(g,S)}}}function i1(t,s){va.X(t,s);var r=Yr;if(r&&t){var l=dt(r).hoistableScripts,f=Wr(t),g=l.get(f);g||(g=r.querySelector(Ji(f)),g||(t=b({src:t,async:!0},s),(s=Bs.get(f))&&ad(t,s),g=r.createElement("script"),Ve(g),ns(g,"link",t),r.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},l.set(f,g))}}function o1(t,s){va.M(t,s);var r=Yr;if(r&&t){var l=dt(r).hoistableScripts,f=Wr(t),g=l.get(f);g||(g=r.querySelector(Ji(f)),g||(t=b({src:t,async:!0,type:"module"},s),(s=Bs.get(f))&&ad(t,s),g=r.createElement("script"),Ve(g),ns(g,"link",t),r.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},l.set(f,g))}}function sg(t,s,r,l){var f=(f=He.current)?Sl(f):null;if(!f)throw Error(o(446));switch(t){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(s=Kr(r.href),r=dt(f).hoistableStyles,l=r.get(s),l||(l={type:"style",instance:null,count:0,state:null},r.set(s,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){t=Kr(r.href);var g=dt(f).hoistableStyles,S=g.get(t);if(S||(f=f.ownerDocument||f,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(t,S),(g=f.querySelector(Qi(t)))&&!g._p&&(S.instance=g,S.state.loading=5),Bs.has(t)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},Bs.set(t,r),g||l1(f,t,r,S.state))),s&&l===null)throw Error(o(528,""));return S}if(s&&l!==null)throw Error(o(529,""));return null;case"script":return s=r.async,r=r.src,typeof r=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Wr(r),r=dt(f).hoistableScripts,l=r.get(s),l||(l={type:"script",instance:null,count:0,state:null},r.set(s,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,t))}}function Kr(t){return'href="'+ht(t)+'"'}function Qi(t){return'link[rel="stylesheet"]['+t+"]"}function ag(t){return b({},t,{"data-precedence":t.precedence,precedence:null})}function l1(t,s,r,l){t.querySelector('link[rel="preload"][as="style"]['+s+"]")?l.loading=1:(s=t.createElement("link"),l.preload=s,s.addEventListener("load",function(){return l.loading|=1}),s.addEventListener("error",function(){return l.loading|=2}),ns(s,"link",r),Ve(s),t.head.appendChild(s))}function Wr(t){return'[src="'+ht(t)+'"]'}function Ji(t){return"script[async]"+t}function rg(t,s,r){if(s.count++,s.instance===null)switch(s.type){case"style":var l=t.querySelector('style[data-href~="'+ht(r.href)+'"]');if(l)return s.instance=l,Ve(l),l;var f=b({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),Ve(l),ns(l,"style",f),jl(l,r.precedence,t),s.instance=l;case"stylesheet":f=Kr(r.href);var g=t.querySelector(Qi(f));if(g)return s.state.loading|=4,s.instance=g,Ve(g),g;l=ag(r),(f=Bs.get(f))&&sd(l,f),g=(t.ownerDocument||t).createElement("link"),Ve(g);var S=g;return S._p=new Promise(function(R,H){S.onload=R,S.onerror=H}),ns(g,"link",l),s.state.loading|=4,jl(g,r.precedence,t),s.instance=g;case"script":return g=Wr(r.src),(f=t.querySelector(Ji(g)))?(s.instance=f,Ve(f),f):(l=r,(f=Bs.get(g))&&(l=b({},r),ad(l,f)),t=t.ownerDocument||t,f=t.createElement("script"),Ve(f),ns(f,"link",l),t.head.appendChild(f),s.instance=f);case"void":return null;default:throw Error(o(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(l=s.instance,s.state.loading|=4,jl(l,r.precedence,t));return s.instance}function jl(t,s,r){for(var l=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=l.length?l[l.length-1]:null,g=f,S=0;S<l.length;S++){var R=l[S];if(R.dataset.precedence===s)g=R;else if(g!==f)break}g?g.parentNode.insertBefore(t,g.nextSibling):(s=r.nodeType===9?r.head:r,s.insertBefore(t,s.firstChild))}function sd(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.title==null&&(t.title=s.title)}function ad(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.integrity==null&&(t.integrity=s.integrity)}var wl=null;function ig(t,s,r){if(wl===null){var l=new Map,f=wl=new Map;f.set(r,l)}else f=wl,l=f.get(r),l||(l=new Map,f.set(r,l));if(l.has(t))return l;for(l.set(t,null),r=r.getElementsByTagName(t),f=0;f<r.length;f++){var g=r[f];if(!(g[nt]||g[K]||t==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var S=g.getAttribute(s)||"";S=t+S;var R=l.get(S);R?R.push(g):l.set(S,[g])}}return l}function og(t,s,r){t=t.ownerDocument||t,t.head.insertBefore(r,s==="title"?t.querySelector("head > title"):null)}function c1(t,s,r){if(r===1||s.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return t=s.disabled,typeof s.precedence=="string"&&t==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function lg(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function u1(t,s,r,l){if(r.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var f=Kr(l.href),g=s.querySelector(Qi(f));if(g){s=g._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(t.count++,t=Nl.bind(t),s.then(t,t)),r.state.loading|=4,r.instance=g,Ve(g);return}g=s.ownerDocument||s,l=ag(l),(f=Bs.get(f))&&sd(l,f),g=g.createElement("link"),Ve(g);var S=g;S._p=new Promise(function(R,H){S.onload=R,S.onerror=H}),ns(g,"link",l),r.instance=g}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(r,s),(s=r.state.preload)&&(r.state.loading&3)===0&&(t.count++,r=Nl.bind(t),s.addEventListener("load",r),s.addEventListener("error",r))}}var rd=0;function d1(t,s){return t.stylesheets&&t.count===0&&_l(t,t.stylesheets),0<t.count||0<t.imgCount?function(r){var l=setTimeout(function(){if(t.stylesheets&&_l(t,t.stylesheets),t.unsuspend){var g=t.unsuspend;t.unsuspend=null,g()}},6e4+s);0<t.imgBytes&&rd===0&&(rd=62500*Vb());var f=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&_l(t,t.stylesheets),t.unsuspend)){var g=t.unsuspend;t.unsuspend=null,g()}},(t.imgBytes>rd?50:800)+s);return t.unsuspend=r,function(){t.unsuspend=null,clearTimeout(l),clearTimeout(f)}}:null}function Nl(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)_l(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var El=null;function _l(t,s){t.stylesheets=null,t.unsuspend!==null&&(t.count++,El=new Map,s.forEach(f1,t),El=null,Nl.call(t))}function f1(t,s){if(!(s.state.loading&4)){var r=El.get(t);if(r)var l=r.get(null);else{r=new Map,El.set(t,r);for(var f=t.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<f.length;g++){var S=f[g];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(r.set(S.dataset.precedence,S),l=S)}l&&r.set(null,l)}f=s.instance,S=f.getAttribute("data-precedence"),g=r.get(S)||l,g===l&&r.set(null,f),r.set(S,f),this.count++,l=Nl.bind(this),f.addEventListener("load",l),f.addEventListener("error",l),g?g.parentNode.insertBefore(f,g.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(f,t.firstChild)),s.state.loading|=4}}var eo={$$typeof:U,Provider:null,Consumer:null,_currentValue:G,_currentValue2:G,_threadCount:0};function h1(t,s,r,l,f,g,S,R,H){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=us(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=us(0),this.hiddenUpdates=us(null),this.identifierPrefix=l,this.onUncaughtError=f,this.onCaughtError=g,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=H,this.incompleteTransitions=new Map}function cg(t,s,r,l,f,g,S,R,H,ee,fe,je){return t=new h1(t,s,r,S,H,ee,fe,je,R),s=1,g===!0&&(s|=24),g=ws(3,null,null,s),t.current=g,g.stateNode=t,s=Bc(),s.refCount++,t.pooledCache=s,s.refCount++,g.memoizedState={element:l,isDehydrated:r,cache:s},Hc(g),t}function ug(t){return t?(t=Cr,t):Cr}function dg(t,s,r,l,f,g){f=ug(f),l.context===null?l.context=f:l.pendingContext=f,l=Ta(s),l.payload={element:r},g=g===void 0?null:g,g!==null&&(l.callback=g),r=ka(t,l,s),r!==null&&(vs(r,t,s),Mi(r,t,s))}function fg(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<s?r:s}}function id(t,s){fg(t,s),(t=t.alternate)&&fg(t,s)}function hg(t){if(t.tag===13||t.tag===31){var s=er(t,67108864);s!==null&&vs(s,t,67108864),id(t,67108864)}}function mg(t){if(t.tag===13||t.tag===31){var s=Ts();s=k(s);var r=er(t,s);r!==null&&vs(r,t,s),id(t,s)}}var Cl=!0;function m1(t,s,r,l){var f=L.T;L.T=null;var g=F.p;try{F.p=2,od(t,s,r,l)}finally{F.p=g,L.T=f}}function p1(t,s,r,l){var f=L.T;L.T=null;var g=F.p;try{F.p=8,od(t,s,r,l)}finally{F.p=g,L.T=f}}function od(t,s,r,l){if(Cl){var f=ld(l);if(f===null)Gu(t,s,l,Tl,r),gg(t,l);else if(v1(f,t,s,r,l))l.stopPropagation();else if(gg(t,l),s&4&&-1<g1.indexOf(t)){for(;f!==null;){var g=ct(f);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var S=kn(g.pendingLanes);if(S!==0){var R=g;for(R.pendingLanes|=2,R.entangledLanes|=2;S;){var H=1<<31-mt(S);R.entanglements[1]|=H,S&=~H}Js(g),(Zt&6)===0&&(ul=Ct()+500,Yi(0))}}break;case 31:case 13:R=er(g,2),R!==null&&vs(R,g,2),fl(),id(g,2)}if(g=ld(l),g===null&&Gu(t,s,l,Tl,r),g===f)break;f=g}f!==null&&l.stopPropagation()}else Gu(t,s,l,null,r)}}function ld(t){return t=uc(t),cd(t)}var Tl=null;function cd(t){if(Tl=null,t=$e(t),t!==null){var s=u(t);if(s===null)t=null;else{var r=s.tag;if(r===13){if(t=d(s),t!==null)return t;t=null}else if(r===31){if(t=m(s),t!==null)return t;t=null}else if(r===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null)}}return Tl=t,null}function pg(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Mn()){case cn:return 2;case st:return 8;case Ce:case rt:return 32;case Vt:return 268435456;default:return 32}default:return 32}}var ud=!1,Ia=null,Pa=null,Ha=null,to=new Map,no=new Map,Za=[],g1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function gg(t,s){switch(t){case"focusin":case"focusout":Ia=null;break;case"dragenter":case"dragleave":Pa=null;break;case"mouseover":case"mouseout":Ha=null;break;case"pointerover":case"pointerout":to.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":no.delete(s.pointerId)}}function so(t,s,r,l,f,g){return t===null||t.nativeEvent!==g?(t={blockedOn:s,domEventName:r,eventSystemFlags:l,nativeEvent:g,targetContainers:[f]},s!==null&&(s=ct(s),s!==null&&hg(s)),t):(t.eventSystemFlags|=l,s=t.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),t)}function v1(t,s,r,l,f){switch(s){case"focusin":return Ia=so(Ia,t,s,r,l,f),!0;case"dragenter":return Pa=so(Pa,t,s,r,l,f),!0;case"mouseover":return Ha=so(Ha,t,s,r,l,f),!0;case"pointerover":var g=f.pointerId;return to.set(g,so(to.get(g)||null,t,s,r,l,f)),!0;case"gotpointercapture":return g=f.pointerId,no.set(g,so(no.get(g)||null,t,s,r,l,f)),!0}return!1}function vg(t){var s=$e(t.target);if(s!==null){var r=u(s);if(r!==null){if(s=r.tag,s===13){if(s=d(r),s!==null){t.blockedOn=s,M(t.priority,function(){mg(r)});return}}else if(s===31){if(s=m(r),s!==null){t.blockedOn=s,M(t.priority,function(){mg(r)});return}}else if(s===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function kl(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var r=ld(t.nativeEvent);if(r===null){r=t.nativeEvent;var l=new r.constructor(r.type,r);cc=l,r.target.dispatchEvent(l),cc=null}else return s=ct(r),s!==null&&hg(s),t.blockedOn=r,!1;s.shift()}return!0}function xg(t,s,r){kl(t)&&r.delete(s)}function x1(){ud=!1,Ia!==null&&kl(Ia)&&(Ia=null),Pa!==null&&kl(Pa)&&(Pa=null),Ha!==null&&kl(Ha)&&(Ha=null),to.forEach(xg),no.forEach(xg)}function Rl(t,s){t.blockedOn===s&&(t.blockedOn=null,ud||(ud=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,x1)))}var Al=null;function yg(t){Al!==t&&(Al=t,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Al===t&&(Al=null);for(var s=0;s<t.length;s+=3){var r=t[s],l=t[s+1],f=t[s+2];if(typeof l!="function"){if(cd(l||r)===null)continue;break}var g=ct(r);g!==null&&(t.splice(s,3),s-=3,lu(g,{pending:!0,data:f,method:r.method,action:l},l,f))}}))}function Xr(t){function s(H){return Rl(H,t)}Ia!==null&&Rl(Ia,t),Pa!==null&&Rl(Pa,t),Ha!==null&&Rl(Ha,t),to.forEach(s),no.forEach(s);for(var r=0;r<Za.length;r++){var l=Za[r];l.blockedOn===t&&(l.blockedOn=null)}for(;0<Za.length&&(r=Za[0],r.blockedOn===null);)vg(r),r.blockedOn===null&&Za.shift();if(r=(t.ownerDocument||t).$$reactFormReplay,r!=null)for(l=0;l<r.length;l+=3){var f=r[l],g=r[l+1],S=f[ce]||null;if(typeof g=="function")S||yg(r);else if(S){var R=null;if(g&&g.hasAttribute("formAction")){if(f=g,S=g[ce]||null)R=S.formAction;else if(cd(f)!==null)continue}else R=S.action;typeof R=="function"?r[l+1]=R:(r.splice(l,3),l-=3),yg(r)}}}function bg(){function t(g){g.canIntercept&&g.info==="react-transition"&&g.intercept({handler:function(){return new Promise(function(S){return f=S})},focusReset:"manual",scroll:"manual"})}function s(){f!==null&&(f(),f=null),l||setTimeout(r,20)}function r(){if(!l&&!navigation.transition){var g=navigation.currentEntry;g&&g.url!=null&&navigation.navigate(g.url,{state:g.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,f=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(r,100),function(){l=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),f!==null&&(f(),f=null)}}}function dd(t){this._internalRoot=t}Ml.prototype.render=dd.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(o(409));var r=s.current,l=Ts();dg(r,l,t,s,null,null)},Ml.prototype.unmount=dd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;dg(t.current,2,null,t,null,null),fl(),s[ke]=null}};function Ml(t){this._internalRoot=t}Ml.prototype.unstable_scheduleHydration=function(t){if(t){var s=y();t={blockedOn:null,target:t,priority:s};for(var r=0;r<Za.length&&s!==0&&s<Za[r].priority;r++);Za.splice(r,0,t),r===0&&vg(t)}};var Sg=n.version;if(Sg!=="19.2.3")throw Error(o(527,Sg,"19.2.3"));F.findDOMNode=function(t){var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(o(188)):(t=Object.keys(t).join(","),Error(o(268,t)));return t=v(s),t=t!==null?x(t):null,t=t===null?null:t.stateNode,t};var y1={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:L,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ol=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ol.isDisabled&&Ol.supportsFiber)try{Rt=Ol.inject(y1),At=Ol}catch{}}return ro.createRoot=function(t,s){if(!c(t))throw Error(o(299));var r=!1,l="",f=Tm,g=km,S=Rm;return s!=null&&(s.unstable_strictMode===!0&&(r=!0),s.identifierPrefix!==void 0&&(l=s.identifierPrefix),s.onUncaughtError!==void 0&&(f=s.onUncaughtError),s.onCaughtError!==void 0&&(g=s.onCaughtError),s.onRecoverableError!==void 0&&(S=s.onRecoverableError)),s=cg(t,1,!1,null,null,r,l,null,f,g,S,bg),t[ke]=s.current,Fu(t),new dd(s)},ro.hydrateRoot=function(t,s,r){if(!c(t))throw Error(o(299));var l=!1,f="",g=Tm,S=km,R=Rm,H=null;return r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(f=r.identifierPrefix),r.onUncaughtError!==void 0&&(g=r.onUncaughtError),r.onCaughtError!==void 0&&(S=r.onCaughtError),r.onRecoverableError!==void 0&&(R=r.onRecoverableError),r.formState!==void 0&&(H=r.formState)),s=cg(t,1,!0,s,r??null,l,f,H,g,S,R,bg),s.context=ug(null),r=s.current,l=Ts(),l=k(l),f=Ta(l),f.callback=null,ka(r,f,l),r=l,s.current.lanes=r,ds(s,r),Js(s),t[ke]=s.current,Fu(t),new Ml(s)},ro.version="19.2.3",ro}var Ag;function M1(){if(Ag)return md.exports;Ag=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}return e(),md.exports=A1(),md.exports}var O1=M1();/**
 * react-router v7.12.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Mg="popstate";function z1(e={}){function n(o,c){let{pathname:u,search:d,hash:m}=o.location;return qd("",{pathname:u,search:d,hash:m},c.state&&c.state.usr||null,c.state&&c.state.key||"default")}function a(o,c){return typeof c=="string"?c:mo(c)}return L1(n,a,null,e)}function hn(e,n){if(e===!1||e===null||typeof e>"u")throw new Error(n)}function ks(e,n){if(!e){typeof console<"u"&&console.warn(n);try{throw new Error(n)}catch{}}}function U1(){return Math.random().toString(36).substring(2,10)}function Og(e,n){return{usr:e.state,key:e.key,idx:n}}function qd(e,n,a=null,o){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof n=="string"?li(n):n,state:a,key:n&&n.key||o||U1()}}function mo({pathname:e="/",search:n="",hash:a=""}){return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),a&&a!=="#"&&(e+=a.charAt(0)==="#"?a:"#"+a),e}function li(e){let n={};if(e){let a=e.indexOf("#");a>=0&&(n.hash=e.substring(a),e=e.substring(0,a));let o=e.indexOf("?");o>=0&&(n.search=e.substring(o),e=e.substring(0,o)),e&&(n.pathname=e)}return n}function L1(e,n,a,o={}){let{window:c=document.defaultView,v5Compat:u=!1}=o,d=c.history,m="POP",p=null,v=x();v==null&&(v=0,d.replaceState({...d.state,idx:v},""));function x(){return(d.state||{idx:null}).idx}function b(){m="POP";let N=x(),z=N==null?null:N-v;v=N,p&&p({action:m,location:E.location,delta:z})}function w(N,z){m="PUSH";let O=qd(E.location,N,z);v=x()+1;let U=Og(O,v),P=E.createHref(O);try{d.pushState(U,"",P)}catch(A){if(A instanceof DOMException&&A.name==="DataCloneError")throw A;c.location.assign(P)}u&&p&&p({action:m,location:E.location,delta:1})}function _(N,z){m="REPLACE";let O=qd(E.location,N,z);v=x();let U=Og(O,v),P=E.createHref(O);d.replaceState(U,"",P),u&&p&&p({action:m,location:E.location,delta:0})}function C(N){return D1(N)}let E={get action(){return m},get location(){return e(c,d)},listen(N){if(p)throw new Error("A history only accepts one active listener");return c.addEventListener(Mg,b),p=N,()=>{c.removeEventListener(Mg,b),p=null}},createHref(N){return n(c,N)},createURL:C,encodeLocation(N){let z=C(N);return{pathname:z.pathname,search:z.search,hash:z.hash}},push:w,replace:_,go(N){return d.go(N)}};return E}function D1(e,n=!1){let a="http://localhost";typeof window<"u"&&(a=window.location.origin!=="null"?window.location.origin:window.location.href),hn(a,"No window.location.(origin|href) available to create URL");let o=typeof e=="string"?e:mo(e);return o=o.replace(/ $/,"%20"),!n&&o.startsWith("//")&&(o=a+o),new URL(o,a)}function a0(e,n,a="/"){return B1(e,n,a,!1)}function B1(e,n,a,o){let c=typeof n=="string"?li(n):n,u=Sa(c.pathname||"/",a);if(u==null)return null;let d=r0(e);$1(d);let m=null;for(let p=0;m==null&&p<d.length;++p){let v=W1(u);m=Y1(d[p],v,o)}return m}function r0(e,n=[],a=[],o="",c=!1){let u=(d,m,p=c,v)=>{let x={relativePath:v===void 0?d.path||"":v,caseSensitive:d.caseSensitive===!0,childrenIndex:m,route:d};if(x.relativePath.startsWith("/")){if(!x.relativePath.startsWith(o)&&p)return;hn(x.relativePath.startsWith(o),`Absolute route path "${x.relativePath}" nested under path "${o}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),x.relativePath=x.relativePath.slice(o.length)}let b=ba([o,x.relativePath]),w=a.concat(x);d.children&&d.children.length>0&&(hn(d.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${b}".`),r0(d.children,n,w,b,p)),!(d.path==null&&!d.index)&&n.push({path:b,score:F1(b,d.index),routesMeta:w})};return e.forEach((d,m)=>{var p;if(d.path===""||!((p=d.path)!=null&&p.includes("?")))u(d,m);else for(let v of i0(d.path))u(d,m,!0,v)}),n}function i0(e){let n=e.split("/");if(n.length===0)return[];let[a,...o]=n,c=a.endsWith("?"),u=a.replace(/\?$/,"");if(o.length===0)return c?[u,""]:[u];let d=i0(o.join("/")),m=[];return m.push(...d.map(p=>p===""?u:[u,p].join("/"))),c&&m.push(...d),m.map(p=>e.startsWith("/")&&p===""?"/":p)}function $1(e){e.sort((n,a)=>n.score!==a.score?a.score-n.score:G1(n.routesMeta.map(o=>o.childrenIndex),a.routesMeta.map(o=>o.childrenIndex)))}var I1=/^:[\w-]+$/,P1=3,H1=2,Z1=1,q1=10,V1=-2,zg=e=>e==="*";function F1(e,n){let a=e.split("/"),o=a.length;return a.some(zg)&&(o+=V1),n&&(o+=H1),a.filter(c=>!zg(c)).reduce((c,u)=>c+(I1.test(u)?P1:u===""?Z1:q1),o)}function G1(e,n){return e.length===n.length&&e.slice(0,-1).every((o,c)=>o===n[c])?e[e.length-1]-n[n.length-1]:0}function Y1(e,n,a=!1){let{routesMeta:o}=e,c={},u="/",d=[];for(let m=0;m<o.length;++m){let p=o[m],v=m===o.length-1,x=u==="/"?n:n.slice(u.length)||"/",b=Yl({path:p.relativePath,caseSensitive:p.caseSensitive,end:v},x),w=p.route;if(!b&&v&&a&&!o[o.length-1].route.index&&(b=Yl({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},x)),!b)return null;Object.assign(c,b.params),d.push({params:c,pathname:ba([u,b.pathname]),pathnameBase:eS(ba([u,b.pathnameBase])),route:w}),b.pathnameBase!=="/"&&(u=ba([u,b.pathnameBase]))}return d}function Yl(e,n){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[a,o]=K1(e.path,e.caseSensitive,e.end),c=n.match(a);if(!c)return null;let u=c[0],d=u.replace(/(.)\/+$/,"$1"),m=c.slice(1);return{params:o.reduce((v,{paramName:x,isOptional:b},w)=>{if(x==="*"){let C=m[w]||"";d=u.slice(0,u.length-C.length).replace(/(.)\/+$/,"$1")}const _=m[w];return b&&!_?v[x]=void 0:v[x]=(_||"").replace(/%2F/g,"/"),v},{}),pathname:u,pathnameBase:d,pattern:e}}function K1(e,n=!1,a=!0){ks(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let o=[],c="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,m,p)=>(o.push({paramName:m,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(o.push({paramName:"*"}),c+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):a?c+="\\/*$":e!==""&&e!=="/"&&(c+="(?:(?=\\/|$))"),[new RegExp(c,n?void 0:"i"),o]}function W1(e){try{return e.split("/").map(n=>decodeURIComponent(n).replace(/\//g,"%2F")).join("/")}catch(n){return ks(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${n}).`),e}}function Sa(e,n){if(n==="/")return e;if(!e.toLowerCase().startsWith(n.toLowerCase()))return null;let a=n.endsWith("/")?n.length-1:n.length,o=e.charAt(a);return o&&o!=="/"?null:e.slice(a)||"/"}var o0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,X1=e=>o0.test(e);function Q1(e,n="/"){let{pathname:a,search:o="",hash:c=""}=typeof e=="string"?li(e):e,u;if(a)if(X1(a))u=a;else{if(a.includes("//")){let d=a;a=a.replace(/\/\/+/g,"/"),ks(!1,`Pathnames cannot have embedded double slashes - normalizing ${d} -> ${a}`)}a.startsWith("/")?u=Ug(a.substring(1),"/"):u=Ug(a,n)}else u=n;return{pathname:u,search:tS(o),hash:nS(c)}}function Ug(e,n){let a=n.replace(/\/+$/,"").split("/");return e.split("/").forEach(c=>{c===".."?a.length>1&&a.pop():c!=="."&&a.push(c)}),a.length>1?a.join("/"):"/"}function xd(e,n,a,o){return`Cannot include a '${e}' character in a manually specified \`to.${n}\` field [${JSON.stringify(o)}].  Please separate it out to the \`to.${a}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function J1(e){return e.filter((n,a)=>a===0||n.route.path&&n.route.path.length>0)}function uf(e){let n=J1(e);return n.map((a,o)=>o===n.length-1?a.pathname:a.pathnameBase)}function df(e,n,a,o=!1){let c;typeof e=="string"?c=li(e):(c={...e},hn(!c.pathname||!c.pathname.includes("?"),xd("?","pathname","search",c)),hn(!c.pathname||!c.pathname.includes("#"),xd("#","pathname","hash",c)),hn(!c.search||!c.search.includes("#"),xd("#","search","hash",c)));let u=e===""||c.pathname==="",d=u?"/":c.pathname,m;if(d==null)m=a;else{let b=n.length-1;if(!o&&d.startsWith("..")){let w=d.split("/");for(;w[0]==="..";)w.shift(),b-=1;c.pathname=w.join("/")}m=b>=0?n[b]:"/"}let p=Q1(c,m),v=d&&d!=="/"&&d.endsWith("/"),x=(u||d===".")&&a.endsWith("/");return!p.pathname.endsWith("/")&&(v||x)&&(p.pathname+="/"),p}var ba=e=>e.join("/").replace(/\/\/+/g,"/"),eS=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),tS=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,nS=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,sS=class{constructor(e,n,a,o=!1){this.status=e,this.statusText=n||"",this.internal=o,a instanceof Error?(this.data=a.toString(),this.error=a):this.data=a}};function aS(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}function rS(e){return e.map(n=>n.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var l0=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function c0(e,n){let a=e;if(typeof a!="string"||!o0.test(a))return{absoluteURL:void 0,isExternal:!1,to:a};let o=a,c=!1;if(l0)try{let u=new URL(window.location.href),d=a.startsWith("//")?new URL(u.protocol+a):new URL(a),m=Sa(d.pathname,n);d.origin===u.origin&&m!=null?a=m+d.search+d.hash:c=!0}catch{ks(!1,`<Link to="${a}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:o,isExternal:c,to:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var u0=["POST","PUT","PATCH","DELETE"];new Set(u0);var iS=["GET",...u0];new Set(iS);var ci=h.createContext(null);ci.displayName="DataRouter";var ec=h.createContext(null);ec.displayName="DataRouterState";var oS=h.createContext(!1),d0=h.createContext({isTransitioning:!1});d0.displayName="ViewTransition";var lS=h.createContext(new Map);lS.displayName="Fetchers";var cS=h.createContext(null);cS.displayName="Await";var Rs=h.createContext(null);Rs.displayName="Navigation";var bo=h.createContext(null);bo.displayName="Location";var Ps=h.createContext({outlet:null,matches:[],isDataRoute:!1});Ps.displayName="Route";var ff=h.createContext(null);ff.displayName="RouteError";var f0="REACT_ROUTER_ERROR",uS="REDIRECT",dS="ROUTE_ERROR_RESPONSE";function fS(e){if(e.startsWith(`${f0}:${uS}:{`))try{let n=JSON.parse(e.slice(28));if(typeof n=="object"&&n&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.location=="string"&&typeof n.reloadDocument=="boolean"&&typeof n.replace=="boolean")return n}catch{}}function hS(e){if(e.startsWith(`${f0}:${dS}:{`))try{let n=JSON.parse(e.slice(40));if(typeof n=="object"&&n&&typeof n.status=="number"&&typeof n.statusText=="string")return new sS(n.status,n.statusText,n.data)}catch{}}function mS(e,{relative:n}={}){hn(ui(),"useHref() may be used only in the context of a <Router> component.");let{basename:a,navigator:o}=h.useContext(Rs),{hash:c,pathname:u,search:d}=So(e,{relative:n}),m=u;return a!=="/"&&(m=u==="/"?a:ba([a,u])),o.createHref({pathname:m,search:d,hash:c})}function ui(){return h.useContext(bo)!=null}function Hs(){return hn(ui(),"useLocation() may be used only in the context of a <Router> component."),h.useContext(bo).location}var h0="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function m0(e){h.useContext(Rs).static||h.useLayoutEffect(e)}function ea(){let{isDataRoute:e}=h.useContext(Ps);return e?kS():pS()}function pS(){hn(ui(),"useNavigate() may be used only in the context of a <Router> component.");let e=h.useContext(ci),{basename:n,navigator:a}=h.useContext(Rs),{matches:o}=h.useContext(Ps),{pathname:c}=Hs(),u=JSON.stringify(uf(o)),d=h.useRef(!1);return m0(()=>{d.current=!0}),h.useCallback((p,v={})=>{if(ks(d.current,h0),!d.current)return;if(typeof p=="number"){a.go(p);return}let x=df(p,JSON.parse(u),c,v.relative==="path");e==null&&n!=="/"&&(x.pathname=x.pathname==="/"?n:ba([n,x.pathname])),(v.replace?a.replace:a.push)(x,v.state,v)},[n,a,u,c,e])}var p0=h.createContext(null);function gS(){return h.useContext(p0)}function vS(e){let n=h.useContext(Ps).outlet;return h.useMemo(()=>n&&h.createElement(p0.Provider,{value:e},n),[n,e])}function hf(){let{matches:e}=h.useContext(Ps),n=e[e.length-1];return n?n.params:{}}function So(e,{relative:n}={}){let{matches:a}=h.useContext(Ps),{pathname:o}=Hs(),c=JSON.stringify(uf(a));return h.useMemo(()=>df(e,JSON.parse(c),o,n==="path"),[e,c,o,n])}function xS(e,n){return g0(e,n)}function g0(e,n,a,o,c){var O;hn(ui(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:u}=h.useContext(Rs),{matches:d}=h.useContext(Ps),m=d[d.length-1],p=m?m.params:{},v=m?m.pathname:"/",x=m?m.pathnameBase:"/",b=m&&m.route;{let U=b&&b.path||"";x0(v,!b||U.endsWith("*")||U.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${v}" (under <Route path="${U}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${U}"> to <Route path="${U==="/"?"*":`${U}/*`}">.`)}let w=Hs(),_;if(n){let U=typeof n=="string"?li(n):n;hn(x==="/"||((O=U.pathname)==null?void 0:O.startsWith(x)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${x}" but pathname "${U.pathname}" was given in the \`location\` prop.`),_=U}else _=w;let C=_.pathname||"/",E=C;if(x!=="/"){let U=x.replace(/^\//,"").split("/");E="/"+C.replace(/^\//,"").split("/").slice(U.length).join("/")}let N=a0(e,{pathname:E});ks(b||N!=null,`No routes matched location "${_.pathname}${_.search}${_.hash}" `),ks(N==null||N[N.length-1].route.element!==void 0||N[N.length-1].route.Component!==void 0||N[N.length-1].route.lazy!==void 0,`Matched leaf route at location "${_.pathname}${_.search}${_.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let z=wS(N&&N.map(U=>Object.assign({},U,{params:Object.assign({},p,U.params),pathname:ba([x,u.encodeLocation?u.encodeLocation(U.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:U.pathname]),pathnameBase:U.pathnameBase==="/"?x:ba([x,u.encodeLocation?u.encodeLocation(U.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:U.pathnameBase])})),d,a,o,c);return n&&z?h.createElement(bo.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",..._},navigationType:"POP"}},z):z}function yS(){let e=TS(),n=aS(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),a=e instanceof Error?e.stack:null,o="rgba(200,200,200, 0.5)",c={padding:"0.5rem",backgroundColor:o},u={padding:"2px 4px",backgroundColor:o},d=null;return console.error("Error handled by React Router default ErrorBoundary:",e),d=h.createElement(h.Fragment,null,h.createElement("p",null," Hey developer "),h.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",h.createElement("code",{style:u},"ErrorBoundary")," or"," ",h.createElement("code",{style:u},"errorElement")," prop on your route.")),h.createElement(h.Fragment,null,h.createElement("h2",null,"Unexpected Application Error!"),h.createElement("h3",{style:{fontStyle:"italic"}},n),a?h.createElement("pre",{style:c},a):null,d)}var bS=h.createElement(yS,null),v0=class extends h.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){this.props.onError?this.props.onError(e,n):console.error("React Router caught the following error during render",e)}render(){let e=this.state.error;if(this.context&&typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){const a=hS(e.digest);a&&(e=a)}let n=e!==void 0?h.createElement(Ps.Provider,{value:this.props.routeContext},h.createElement(ff.Provider,{value:e,children:this.props.component})):this.props.children;return this.context?h.createElement(SS,{error:e},n):n}};v0.contextType=oS;var yd=new WeakMap;function SS({children:e,error:n}){let{basename:a}=h.useContext(Rs);if(typeof n=="object"&&n&&"digest"in n&&typeof n.digest=="string"){let o=fS(n.digest);if(o){let c=yd.get(n);if(c)throw c;let u=c0(o.location,a);if(l0&&!yd.get(n))if(u.isExternal||o.reloadDocument)window.location.href=u.absoluteURL||u.to;else{const d=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(u.to,{replace:o.replace}));throw yd.set(n,d),d}return h.createElement("meta",{httpEquiv:"refresh",content:`0;url=${u.absoluteURL||u.to}`})}}return e}function jS({routeContext:e,match:n,children:a}){let o=h.useContext(ci);return o&&o.static&&o.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=n.route.id),h.createElement(Ps.Provider,{value:e},a)}function wS(e,n=[],a=null,o=null,c=null){if(e==null){if(!a)return null;if(a.errors)e=a.matches;else if(n.length===0&&!a.initialized&&a.matches.length>0)e=a.matches;else return null}let u=e,d=a==null?void 0:a.errors;if(d!=null){let x=u.findIndex(b=>b.route.id&&(d==null?void 0:d[b.route.id])!==void 0);hn(x>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(d).join(",")}`),u=u.slice(0,Math.min(u.length,x+1))}let m=!1,p=-1;if(a)for(let x=0;x<u.length;x++){let b=u[x];if((b.route.HydrateFallback||b.route.hydrateFallbackElement)&&(p=x),b.route.id){let{loaderData:w,errors:_}=a,C=b.route.loader&&!w.hasOwnProperty(b.route.id)&&(!_||_[b.route.id]===void 0);if(b.route.lazy||C){m=!0,p>=0?u=u.slice(0,p+1):u=[u[0]];break}}}let v=a&&o?(x,b)=>{var w,_;o(x,{location:a.location,params:((_=(w=a.matches)==null?void 0:w[0])==null?void 0:_.params)??{},unstable_pattern:rS(a.matches),errorInfo:b})}:void 0;return u.reduceRight((x,b,w)=>{let _,C=!1,E=null,N=null;a&&(_=d&&b.route.id?d[b.route.id]:void 0,E=b.route.errorElement||bS,m&&(p<0&&w===0?(x0("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),C=!0,N=null):p===w&&(C=!0,N=b.route.hydrateFallbackElement||null)));let z=n.concat(u.slice(0,w+1)),O=()=>{let U;return _?U=E:C?U=N:b.route.Component?U=h.createElement(b.route.Component,null):b.route.element?U=b.route.element:U=x,h.createElement(jS,{match:b,routeContext:{outlet:x,matches:z,isDataRoute:a!=null},children:U})};return a&&(b.route.ErrorBoundary||b.route.errorElement||w===0)?h.createElement(v0,{location:a.location,revalidation:a.revalidation,component:E,error:_,children:O(),routeContext:{outlet:null,matches:z,isDataRoute:!0},onError:v}):O()},null)}function mf(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function NS(e){let n=h.useContext(ci);return hn(n,mf(e)),n}function ES(e){let n=h.useContext(ec);return hn(n,mf(e)),n}function _S(e){let n=h.useContext(Ps);return hn(n,mf(e)),n}function pf(e){let n=_S(e),a=n.matches[n.matches.length-1];return hn(a.route.id,`${e} can only be used on routes that contain a unique "id"`),a.route.id}function CS(){return pf("useRouteId")}function TS(){var o;let e=h.useContext(ff),n=ES("useRouteError"),a=pf("useRouteError");return e!==void 0?e:(o=n.errors)==null?void 0:o[a]}function kS(){let{router:e}=NS("useNavigate"),n=pf("useNavigate"),a=h.useRef(!1);return m0(()=>{a.current=!0}),h.useCallback(async(c,u={})=>{ks(a.current,h0),a.current&&(typeof c=="number"?await e.navigate(c):await e.navigate(c,{fromRouteId:n,...u}))},[e,n])}var Lg={};function x0(e,n,a){!n&&!Lg[e]&&(Lg[e]=!0,ks(!1,a))}h.memo(RS);function RS({routes:e,future:n,state:a,onError:o}){return g0(e,void 0,a,o,n)}function Dg({to:e,replace:n,state:a,relative:o}){hn(ui(),"<Navigate> may be used only in the context of a <Router> component.");let{static:c}=h.useContext(Rs);ks(!c,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:u}=h.useContext(Ps),{pathname:d}=Hs(),m=ea(),p=df(e,uf(u),d,o==="path"),v=JSON.stringify(p);return h.useEffect(()=>{m(JSON.parse(v),{replace:n,state:a,relative:o})},[m,v,o,n,a]),null}function AS(e){return vS(e.context)}function xs(e){hn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function MS({basename:e="/",children:n=null,location:a,navigationType:o="POP",navigator:c,static:u=!1,unstable_useTransitions:d}){hn(!ui(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let m=e.replace(/^\/*/,"/"),p=h.useMemo(()=>({basename:m,navigator:c,static:u,unstable_useTransitions:d,future:{}}),[m,c,u,d]);typeof a=="string"&&(a=li(a));let{pathname:v="/",search:x="",hash:b="",state:w=null,key:_="default"}=a,C=h.useMemo(()=>{let E=Sa(v,m);return E==null?null:{location:{pathname:E,search:x,hash:b,state:w,key:_},navigationType:o}},[m,v,x,b,w,_,o]);return ks(C!=null,`<Router basename="${m}"> is not able to match the URL "${v}${x}${b}" because it does not start with the basename, so the <Router> won't render anything.`),C==null?null:h.createElement(Rs.Provider,{value:p},h.createElement(bo.Provider,{children:n,value:C}))}function OS({children:e,location:n}){return xS(Vd(e),n)}function Vd(e,n=[]){let a=[];return h.Children.forEach(e,(o,c)=>{if(!h.isValidElement(o))return;let u=[...n,c];if(o.type===h.Fragment){a.push.apply(a,Vd(o.props.children,u));return}hn(o.type===xs,`[${typeof o.type=="string"?o.type:o.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),hn(!o.props.index||!o.props.children,"An index route cannot have child routes.");let d={id:o.props.id||u.join("-"),caseSensitive:o.props.caseSensitive,element:o.props.element,Component:o.props.Component,index:o.props.index,path:o.props.path,middleware:o.props.middleware,loader:o.props.loader,action:o.props.action,hydrateFallbackElement:o.props.hydrateFallbackElement,HydrateFallback:o.props.HydrateFallback,errorElement:o.props.errorElement,ErrorBoundary:o.props.ErrorBoundary,hasErrorBoundary:o.props.hasErrorBoundary===!0||o.props.ErrorBoundary!=null||o.props.errorElement!=null,shouldRevalidate:o.props.shouldRevalidate,handle:o.props.handle,lazy:o.props.lazy};o.props.children&&(d.children=Vd(o.props.children,u)),a.push(d)}),a}var Vl="get",Fl="application/x-www-form-urlencoded";function tc(e){return typeof HTMLElement<"u"&&e instanceof HTMLElement}function zS(e){return tc(e)&&e.tagName.toLowerCase()==="button"}function US(e){return tc(e)&&e.tagName.toLowerCase()==="form"}function LS(e){return tc(e)&&e.tagName.toLowerCase()==="input"}function DS(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function BS(e,n){return e.button===0&&(!n||n==="_self")&&!DS(e)}function Fd(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((n,a)=>{let o=e[a];return n.concat(Array.isArray(o)?o.map(c=>[a,c]):[[a,o]])},[]))}function $S(e,n){let a=Fd(e);return n&&n.forEach((o,c)=>{a.has(c)||n.getAll(c).forEach(u=>{a.append(c,u)})}),a}var zl=null;function IS(){if(zl===null)try{new FormData(document.createElement("form"),0),zl=!1}catch{zl=!0}return zl}var PS=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function bd(e){return e!=null&&!PS.has(e)?(ks(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Fl}"`),null):e}function HS(e,n){let a,o,c,u,d;if(US(e)){let m=e.getAttribute("action");o=m?Sa(m,n):null,a=e.getAttribute("method")||Vl,c=bd(e.getAttribute("enctype"))||Fl,u=new FormData(e)}else if(zS(e)||LS(e)&&(e.type==="submit"||e.type==="image")){let m=e.form;if(m==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=e.getAttribute("formaction")||m.getAttribute("action");if(o=p?Sa(p,n):null,a=e.getAttribute("formmethod")||m.getAttribute("method")||Vl,c=bd(e.getAttribute("formenctype"))||bd(m.getAttribute("enctype"))||Fl,u=new FormData(m,e),!IS()){let{name:v,type:x,value:b}=e;if(x==="image"){let w=v?`${v}.`:"";u.append(`${w}x`,"0"),u.append(`${w}y`,"0")}else v&&u.append(v,b)}}else{if(tc(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');a=Vl,o=null,c=Fl,d=e}return u&&c==="text/plain"&&(d=u,u=void 0),{action:o,method:a.toLowerCase(),encType:c,formData:u,body:d}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function gf(e,n){if(e===!1||e===null||typeof e>"u")throw new Error(n)}function ZS(e,n,a,o){let c=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return a?c.pathname.endsWith("/")?c.pathname=`${c.pathname}_.${o}`:c.pathname=`${c.pathname}.${o}`:c.pathname==="/"?c.pathname=`_root.${o}`:n&&Sa(c.pathname,n)==="/"?c.pathname=`${n.replace(/\/$/,"")}/_root.${o}`:c.pathname=`${c.pathname.replace(/\/$/,"")}.${o}`,c}async function qS(e,n){if(e.id in n)return n[e.id];try{let a=await import(e.module);return n[e.id]=a,a}catch(a){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(a),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function VS(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function FS(e,n,a){let o=await Promise.all(e.map(async c=>{let u=n.routes[c.route.id];if(u){let d=await qS(u,a);return d.links?d.links():[]}return[]}));return WS(o.flat(1).filter(VS).filter(c=>c.rel==="stylesheet"||c.rel==="preload").map(c=>c.rel==="stylesheet"?{...c,rel:"prefetch",as:"style"}:{...c,rel:"prefetch"}))}function Bg(e,n,a,o,c,u){let d=(p,v)=>a[v]?p.route.id!==a[v].route.id:!0,m=(p,v)=>{var x;return a[v].pathname!==p.pathname||((x=a[v].route.path)==null?void 0:x.endsWith("*"))&&a[v].params["*"]!==p.params["*"]};return u==="assets"?n.filter((p,v)=>d(p,v)||m(p,v)):u==="data"?n.filter((p,v)=>{var b;let x=o.routes[p.route.id];if(!x||!x.hasLoader)return!1;if(d(p,v)||m(p,v))return!0;if(p.route.shouldRevalidate){let w=p.route.shouldRevalidate({currentUrl:new URL(c.pathname+c.search+c.hash,window.origin),currentParams:((b=a[0])==null?void 0:b.params)||{},nextUrl:new URL(e,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof w=="boolean")return w}return!0}):[]}function GS(e,n,{includeHydrateFallback:a}={}){return YS(e.map(o=>{let c=n.routes[o.route.id];if(!c)return[];let u=[c.module];return c.clientActionModule&&(u=u.concat(c.clientActionModule)),c.clientLoaderModule&&(u=u.concat(c.clientLoaderModule)),a&&c.hydrateFallbackModule&&(u=u.concat(c.hydrateFallbackModule)),c.imports&&(u=u.concat(c.imports)),u}).flat(1))}function YS(e){return[...new Set(e)]}function KS(e){let n={},a=Object.keys(e).sort();for(let o of a)n[o]=e[o];return n}function WS(e,n){let a=new Set;return new Set(n),e.reduce((o,c)=>{let u=JSON.stringify(KS(c));return a.has(u)||(a.add(u),o.push({key:u,link:c})),o},[])}function y0(){let e=h.useContext(ci);return gf(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function XS(){let e=h.useContext(ec);return gf(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var vf=h.createContext(void 0);vf.displayName="FrameworkContext";function b0(){let e=h.useContext(vf);return gf(e,"You must render this element inside a <HydratedRouter> element"),e}function QS(e,n){let a=h.useContext(vf),[o,c]=h.useState(!1),[u,d]=h.useState(!1),{onFocus:m,onBlur:p,onMouseEnter:v,onMouseLeave:x,onTouchStart:b}=n,w=h.useRef(null);h.useEffect(()=>{if(e==="render"&&d(!0),e==="viewport"){let E=z=>{z.forEach(O=>{d(O.isIntersecting)})},N=new IntersectionObserver(E,{threshold:.5});return w.current&&N.observe(w.current),()=>{N.disconnect()}}},[e]),h.useEffect(()=>{if(o){let E=setTimeout(()=>{d(!0)},100);return()=>{clearTimeout(E)}}},[o]);let _=()=>{c(!0)},C=()=>{c(!1),d(!1)};return a?e!=="intent"?[u,w,{}]:[u,w,{onFocus:io(m,_),onBlur:io(p,C),onMouseEnter:io(v,_),onMouseLeave:io(x,C),onTouchStart:io(b,_)}]:[!1,w,{}]}function io(e,n){return a=>{e&&e(a),a.defaultPrevented||n(a)}}function JS({page:e,...n}){let{router:a}=y0(),o=h.useMemo(()=>a0(a.routes,e,a.basename),[a.routes,e,a.basename]);return o?h.createElement(tj,{page:e,matches:o,...n}):null}function ej(e){let{manifest:n,routeModules:a}=b0(),[o,c]=h.useState([]);return h.useEffect(()=>{let u=!1;return FS(e,n,a).then(d=>{u||c(d)}),()=>{u=!0}},[e,n,a]),o}function tj({page:e,matches:n,...a}){let o=Hs(),{future:c,manifest:u,routeModules:d}=b0(),{basename:m}=y0(),{loaderData:p,matches:v}=XS(),x=h.useMemo(()=>Bg(e,n,v,u,o,"data"),[e,n,v,u,o]),b=h.useMemo(()=>Bg(e,n,v,u,o,"assets"),[e,n,v,u,o]),w=h.useMemo(()=>{if(e===o.pathname+o.search+o.hash)return[];let E=new Set,N=!1;if(n.forEach(O=>{var P;let U=u.routes[O.route.id];!U||!U.hasLoader||(!x.some(A=>A.route.id===O.route.id)&&O.route.id in p&&((P=d[O.route.id])!=null&&P.shouldRevalidate)||U.hasClientLoader?N=!0:E.add(O.route.id))}),E.size===0)return[];let z=ZS(e,m,c.unstable_trailingSlashAwareDataRequests,"data");return N&&E.size>0&&z.searchParams.set("_routes",n.filter(O=>E.has(O.route.id)).map(O=>O.route.id).join(",")),[z.pathname+z.search]},[m,c.unstable_trailingSlashAwareDataRequests,p,o,u,x,n,e,d]),_=h.useMemo(()=>GS(b,u),[b,u]),C=ej(b);return h.createElement(h.Fragment,null,w.map(E=>h.createElement("link",{key:E,rel:"prefetch",as:"fetch",href:E,...a})),_.map(E=>h.createElement("link",{key:E,rel:"modulepreload",href:E,...a})),C.map(({key:E,link:N})=>h.createElement("link",{key:E,nonce:a.nonce,...N})))}function nj(...e){return n=>{e.forEach(a=>{typeof a=="function"?a(n):a!=null&&(a.current=n)})}}var sj=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{sj&&(window.__reactRouterVersion="7.12.0")}catch{}function aj({basename:e,children:n,unstable_useTransitions:a,window:o}){let c=h.useRef();c.current==null&&(c.current=z1({window:o,v5Compat:!0}));let u=c.current,[d,m]=h.useState({action:u.action,location:u.location}),p=h.useCallback(v=>{a===!1?m(v):h.startTransition(()=>m(v))},[a]);return h.useLayoutEffect(()=>u.listen(p),[u,p]),h.createElement(MS,{basename:e,children:n,location:d.location,navigationType:d.action,navigator:u,unstable_useTransitions:a})}var S0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,$s=h.forwardRef(function({onClick:n,discover:a="render",prefetch:o="none",relative:c,reloadDocument:u,replace:d,state:m,target:p,to:v,preventScrollReset:x,viewTransition:b,unstable_defaultShouldRevalidate:w,..._},C){let{basename:E,unstable_useTransitions:N}=h.useContext(Rs),z=typeof v=="string"&&S0.test(v),O=c0(v,E);v=O.to;let U=mS(v,{relative:c}),[P,A,D]=QS(o,_),I=lj(v,{replace:d,state:m,target:p,preventScrollReset:x,relative:c,viewTransition:b,unstable_defaultShouldRevalidate:w,unstable_useTransitions:N});function Z(_e){n&&n(_e),_e.defaultPrevented||I(_e)}let re=h.createElement("a",{..._,...D,href:O.absoluteURL||U,onClick:O.isExternal||u?n:Z,ref:nj(C,A),target:p,"data-discover":!z&&a==="render"?"true":void 0});return P&&!z?h.createElement(h.Fragment,null,re,h.createElement(JS,{page:U})):re});$s.displayName="Link";var rj=h.forwardRef(function({"aria-current":n="page",caseSensitive:a=!1,className:o="",end:c=!1,style:u,to:d,viewTransition:m,children:p,...v},x){let b=So(d,{relative:v.relative}),w=Hs(),_=h.useContext(ec),{navigator:C,basename:E}=h.useContext(Rs),N=_!=null&&hj(b)&&m===!0,z=C.encodeLocation?C.encodeLocation(b).pathname:b.pathname,O=w.pathname,U=_&&_.navigation&&_.navigation.location?_.navigation.location.pathname:null;a||(O=O.toLowerCase(),U=U?U.toLowerCase():null,z=z.toLowerCase()),U&&E&&(U=Sa(U,E)||U);const P=z!=="/"&&z.endsWith("/")?z.length-1:z.length;let A=O===z||!c&&O.startsWith(z)&&O.charAt(P)==="/",D=U!=null&&(U===z||!c&&U.startsWith(z)&&U.charAt(z.length)==="/"),I={isActive:A,isPending:D,isTransitioning:N},Z=A?n:void 0,re;typeof o=="function"?re=o(I):re=[o,A?"active":null,D?"pending":null,N?"transitioning":null].filter(Boolean).join(" ");let _e=typeof u=="function"?u(I):u;return h.createElement($s,{...v,"aria-current":Z,className:re,ref:x,style:_e,to:d,viewTransition:m},typeof p=="function"?p(I):p)});rj.displayName="NavLink";var ij=h.forwardRef(({discover:e="render",fetcherKey:n,navigate:a,reloadDocument:o,replace:c,state:u,method:d=Vl,action:m,onSubmit:p,relative:v,preventScrollReset:x,viewTransition:b,unstable_defaultShouldRevalidate:w,..._},C)=>{let{unstable_useTransitions:E}=h.useContext(Rs),N=dj(),z=fj(m,{relative:v}),O=d.toLowerCase()==="get"?"get":"post",U=typeof m=="string"&&S0.test(m),P=A=>{if(p&&p(A),A.defaultPrevented)return;A.preventDefault();let D=A.nativeEvent.submitter,I=(D==null?void 0:D.getAttribute("formmethod"))||d,Z=()=>N(D||A.currentTarget,{fetcherKey:n,method:I,navigate:a,replace:c,state:u,relative:v,preventScrollReset:x,viewTransition:b,unstable_defaultShouldRevalidate:w});E&&a!==!1?h.startTransition(()=>Z()):Z()};return h.createElement("form",{ref:C,method:O,action:z,onSubmit:o?p:P,..._,"data-discover":!U&&e==="render"?"true":void 0})});ij.displayName="Form";function oj(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function j0(e){let n=h.useContext(ci);return hn(n,oj(e)),n}function lj(e,{target:n,replace:a,state:o,preventScrollReset:c,relative:u,viewTransition:d,unstable_defaultShouldRevalidate:m,unstable_useTransitions:p}={}){let v=ea(),x=Hs(),b=So(e,{relative:u});return h.useCallback(w=>{if(BS(w,n)){w.preventDefault();let _=a!==void 0?a:mo(x)===mo(b),C=()=>v(e,{replace:_,state:o,preventScrollReset:c,relative:u,viewTransition:d,unstable_defaultShouldRevalidate:m});p?h.startTransition(()=>C()):C()}},[x,v,b,a,o,n,e,c,u,d,m,p])}function nc(e){ks(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let n=h.useRef(Fd(e)),a=h.useRef(!1),o=Hs(),c=h.useMemo(()=>$S(o.search,a.current?null:n.current),[o.search]),u=ea(),d=h.useCallback((m,p)=>{const v=Fd(typeof m=="function"?m(new URLSearchParams(c)):m);a.current=!0,u("?"+v,p)},[u,c]);return[c,d]}var cj=0,uj=()=>`__${String(++cj)}__`;function dj(){let{router:e}=j0("useSubmit"),{basename:n}=h.useContext(Rs),a=CS(),o=e.fetch,c=e.navigate;return h.useCallback(async(u,d={})=>{let{action:m,method:p,encType:v,formData:x,body:b}=HS(u,n);if(d.navigate===!1){let w=d.fetcherKey||uj();await o(w,a,d.action||m,{unstable_defaultShouldRevalidate:d.unstable_defaultShouldRevalidate,preventScrollReset:d.preventScrollReset,formData:x,body:b,formMethod:d.method||p,formEncType:d.encType||v,flushSync:d.flushSync})}else await c(d.action||m,{unstable_defaultShouldRevalidate:d.unstable_defaultShouldRevalidate,preventScrollReset:d.preventScrollReset,formData:x,body:b,formMethod:d.method||p,formEncType:d.encType||v,replace:d.replace,state:d.state,fromRouteId:a,flushSync:d.flushSync,viewTransition:d.viewTransition})},[o,c,n,a])}function fj(e,{relative:n}={}){let{basename:a}=h.useContext(Rs),o=h.useContext(Ps);hn(o,"useFormAction must be used inside a RouteContext");let[c]=o.matches.slice(-1),u={...So(e||".",{relative:n})},d=Hs();if(e==null){u.search=d.search;let m=new URLSearchParams(u.search),p=m.getAll("index");if(p.some(x=>x==="")){m.delete("index"),p.filter(b=>b).forEach(b=>m.append("index",b));let x=m.toString();u.search=x?`?${x}`:""}}return(!e||e===".")&&c.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),a!=="/"&&(u.pathname=u.pathname==="/"?a:ba([a,u.pathname])),mo(u)}function hj(e,{relative:n}={}){let a=h.useContext(d0);hn(a!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:o}=j0("useViewTransitionState"),c=So(e,{relative:n});if(!a.isTransitioning)return!1;let u=Sa(a.currentLocation.pathname,o)||a.currentLocation.pathname,d=Sa(a.nextLocation.pathname,o)||a.nextLocation.pathname;return Yl(c.pathname,d)!=null||Yl(c.pathname,u)!=null}var di=s0();const mj=500;function Sd(e,n){try{n?localStorage.setItem(e,n):localStorage.removeItem(e)}catch{}}function xf(e){const[n,a]=h.useState(()=>{try{return localStorage.getItem(e)??""}catch{return""}}),o=h.useRef(null),c=h.useRef(e),u=h.useRef(null);h.useEffect(()=>{c.current=e},[e]),h.useEffect(()=>{try{const w=localStorage.getItem(e);a(w??"")}catch{a("")}},[e]);const d=h.useCallback(()=>{o.current&&(clearTimeout(o.current),o.current=null),u.current!==null&&(Sd(c.current,u.current),u.current=null)},[]);h.useEffect(()=>{const w=()=>{d()};return window.addEventListener("beforeunload",w),()=>{window.removeEventListener("beforeunload",w)}},[d]);const m=h.useCallback(w=>{a(w),u.current=w,o.current&&clearTimeout(o.current),o.current=setTimeout(()=>{Sd(c.current,w),u.current=null},mj)},[]),p=h.useCallback(()=>{a(""),u.current=null,o.current&&(clearTimeout(o.current),o.current=null)},[]),v=h.useCallback(()=>{a(""),u.current=null,o.current&&(clearTimeout(o.current),o.current=null);try{localStorage.removeItem(c.current)}catch{}},[]),x=h.useCallback(()=>{try{const w=localStorage.getItem(c.current);w&&a(w)}catch{}},[]);h.useEffect(()=>()=>{u.current!==null&&Sd(c.current,u.current),o.current&&clearTimeout(o.current)},[]);const b=h.useMemo(()=>({clearInput:p,clearDraft:v,restoreFromStorage:x}),[p,v,x]);return[n,m,b]}const w0="yep-anywhere-sidebar-width",uo=280,N0=560,pj=56,gj=600,E0=1100;function _0(e,n,a){return Math.min(Math.max(e,n),a)}function C0(){if(typeof window>"u")return uo;const e=localStorage.getItem(w0);if(e===null)return uo;const n=Number.parseInt(e,10);return Number.isNaN(n)?uo:_0(n,uo,N0)}function vj(e){localStorage.setItem(w0,String(e))}function xj(){const[e,n]=h.useState(C0),[a,o]=h.useState(!1),c=h.useCallback(m=>{const p=_0(m,uo,N0);n(p),vj(p)},[]),u=h.useCallback(m=>m>=E0,[]),d=h.useCallback(m=>m>=e+gj,[e]);return{width:e,setWidth:c,isResizing:a,setIsResizing:o,canShowDesktop:u,canShowExpanded:d}}function yj(){return C0()}function T0(){const[e,n]=h.useState(()=>typeof window>"u"?1200:window.innerWidth);return h.useEffect(()=>{const a=()=>{n(window.innerWidth)};return window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[]),e}const bj=830,Sj=100,jd=24,jj=80;function wj(e,n){const a=e-n,o=Math.min(a,bj);return(a-o)/2}function Nj(){const e=T0();return h.useMemo(()=>{if(e<E0)return null;const n=yj(),o=e<n+600?pj:n,c=wj(e,o),u=Sj+jd*2;if(c<u)return null;const d=jd,m=Math.min(c-jd*2,300);return{visible:!0,right:d,bottom:jj,maxWidth:m}},[e])}const k0="yep-anywhere-recent-project";function $g(){return typeof window>"u"?null:sessionStorage.getItem(k0)}function Ej(e){typeof window>"u"||sessionStorage.setItem(k0,e)}const R0="yep-anywhere-model",A0="yep-anywhere-thinking-level",M0="yep-anywhere-thinking-enabled",O0="yep-anywhere-voice-input-enabled",Gd=[{value:"default",label:"Default"},{value:"sonnet",label:"Sonnet"},{value:"opus",label:"Opus"},{value:"haiku",label:"Haiku"}],_j=[{value:"light",label:"Light",tokens:4096,description:"4K tokens"},{value:"medium",label:"Medium",tokens:16e3,description:"16K tokens"},{value:"thorough",label:"Thorough",tokens:32e3,description:"32K tokens"}];function z0(){const e=localStorage.getItem(R0);return e&&["default","sonnet","opus","haiku"].includes(e)?e:"default"}function Cj(e){localStorage.setItem(R0,e)}function U0(){const e=localStorage.getItem(A0);return e&&["light","medium","thorough"].includes(e)?e:"medium"}function Tj(e){localStorage.setItem(A0,e)}function L0(){return localStorage.getItem(M0)==="true"}function Ig(e){localStorage.setItem(M0,e?"true":"false")}function kj(){return localStorage.getItem(O0)!=="false"}function Pg(e){localStorage.setItem(O0,e?"true":"false")}function sc(){const[e,n]=h.useState(z0),[a,o]=h.useState(U0),[c,u]=h.useState(L0),[d,m]=h.useState(kj),p=h.useCallback(C=>{n(C),Cj(C)},[]),v=h.useCallback(C=>{o(C),Tj(C)},[]),x=h.useCallback(C=>{u(C),Ig(C)},[]),b=h.useCallback(()=>{const C=!c;u(C),Ig(C)},[c]),w=h.useCallback(C=>{m(C),Pg(C)},[]),_=h.useCallback(()=>{const C=!d;m(C),Pg(C)},[d]);return{model:e,setModel:p,thinkingLevel:a,setThinkingLevel:v,thinkingEnabled:c,setThinkingEnabled:x,toggleThinking:b,voiceInputEnabled:d,setVoiceInputEnabled:w,toggleVoiceInput:_}}function Yd(){return z0()}function Kd(){return L0()?U0():"off"}function Rj(e,n){return!e||e===n?"":e.startsWith(n)?e.slice(n.length):e}function Hg(){return typeof window>"u"?null:window.SpeechRecognition??window.webkitSpeechRecognition??null}function Aj(e={}){const{lang:n,onResult:a,onInterimResult:o,onEnd:c,onError:u}=e,[d]=h.useState(()=>!!Hg()),[m,p]=h.useState(!1),[v,x]=h.useState(""),[b,w]=h.useState(null),_=h.useRef(null),C=h.useRef(!1),E=h.useRef(""),N=h.useRef(a),z=h.useRef(o),O=h.useRef(c),U=h.useRef(u);h.useEffect(()=>{N.current=a,z.current=o,O.current=c,U.current=u},[a,o,c,u]),h.useEffect(()=>()=>{_.current&&(_.current.abort(),_.current=null)},[]);const P=h.useCallback(()=>{var re;const I=Hg();if(!I){w("Speech recognition not supported");return}_.current&&_.current.abort(),w(null),x(""),C.current=!1,E.current="";const Z=new I;_.current=Z,Z.continuous=!0,Z.interimResults=!0,n&&(Z.lang=n),Z.onstart=()=>{p(!0)},Z.onresult=_e=>{var L,F,G;let Te="",se="";for(let we=0;we<_e.results.length;we++){const Me=_e.results[we];if(Me){const B=((L=Me[0])==null?void 0:L.transcript)??"";Me.isFinal?se=B:Te+=B}}const le=Rj(se,E.current);le&&(E.current=se);const me=Te.trim();me?(x(me),(F=z.current)==null||F.call(z,me)):Te&&!me&&x("");const Re=le.trim();Re&&(x(""),(G=N.current)==null||G.call(N,Re))},Z.onerror=_e=>{var se;if(_e.error==="aborted")return;let Te="Speech recognition error";switch(_e.error){case"no-speech":Te="No speech detected";break;case"audio-capture":Te="No microphone found";break;case"not-allowed":Te="Microphone permission denied";break;case"network":Te="Network error during recognition";break;default:Te=`Error: ${_e.error}`}w(Te),(se=U.current)==null||se.call(U,Te),p(!1)},Z.onend=()=>{var _e,Te;if(p(!1),x(""),!C.current&&_.current===Z)try{Z.start()}catch{(_e=O.current)==null||_e.call(O)}else(Te=O.current)==null||Te.call(O)};try{Z.start()}catch{w("Failed to start speech recognition"),(re=U.current)==null||re.call(U,"Failed to start speech recognition")}},[n]),A=h.useCallback(()=>{C.current=!0,_.current&&(_.current.stop(),_.current=null),p(!1),x("")},[]),D=h.useCallback(()=>{m?A():P()},[m,P,A]);return{isSupported:d,isListening:m,interimTranscript:v,startListening:P,stopListening:A,toggleListening:D,error:b}}const yf=h.forwardRef(function({onTranscript:n,onInterimTranscript:a,onListeningStart:o,disabled:c,className:u=""},d){const{voiceInputEnabled:m}=sc(),p=h.useCallback(O=>{n(O)},[n]),v=h.useCallback(O=>{a==null||a(O)},[a]),{isSupported:x,isListening:b,toggleListening:w,stopListening:_,error:C,interimTranscript:E}=Aj({onResult:p,onInterimResult:v}),N=x&&m;h.useImperativeHandle(d,()=>({stopAndFinalize:()=>{const O=E;return b&&_(),O},toggle:w,isListening:b,isAvailable:N}),[E,b,_,w,N]),h.useEffect(()=>{!b&&E&&(a==null||a(""))},[b,E,a]);const z=h.useCallback(()=>{const O=b;w(),O||o==null||o()},[b,w,o]);return N?i.jsx("button",{type:"button",className:`voice-input-button ${b?"listening":""} ${u}`,onClick:z,disabled:c,title:C||(b?"Stop voice input (Ctrl+Space)":"Start voice input (Ctrl+Space)"),"aria-label":b?"Stop voice input":"Start voice input","aria-pressed":b,children:b?i.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",className:"voice-input-recording",children:[i.jsx("rect",{x:"4",y:"8",width:"3",height:"8",rx:"1",className:"bar bar-1"}),i.jsx("rect",{x:"10.5",y:"5",width:"3",height:"14",rx:"1",className:"bar bar-2"}),i.jsx("rect",{x:"17",y:"8",width:"3",height:"8",rx:"1",className:"bar bar-3"})]}):i.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[i.jsx("path",{d:"M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"}),i.jsx("path",{d:"M19 10v2a7 7 0 0 1-14 0v-2"}),i.jsx("line",{x1:"12",y1:"19",x2:"12",y2:"23"}),i.jsx("line",{x1:"8",y1:"23",x2:"16",y2:"23"})]})}):null}),Mj="fab-draft",bf="fab-prefill";function Oj(){return typeof window>"u"?null:sessionStorage.getItem(bf)}function zj(){typeof window>"u"||sessionStorage.removeItem(bf)}function Uj(e){typeof window>"u"||sessionStorage.setItem(bf,e)}function Lj(){const e=ea(),n=Hs(),a=Nj(),[o,c]=h.useState(!1),[u,d,m]=xf(Mj),[p,v]=h.useState(""),x=h.useRef(null),b=h.useRef(null),w=Dj(n.pathname);h.useEffect(()=>{w&&Ej(w)},[w]),h.useEffect(()=>{var I;o&&((I=x.current)==null||I.focus())},[o]),h.useEffect(()=>{if(!o)return;const I=Z=>{b.current&&!b.current.contains(Z.target)&&c(!1)};return document.addEventListener("mousedown",I),()=>document.removeEventListener("mousedown",I)},[o]);const _=h.useCallback(()=>{const I=u.trim();if(!I)return;const Z=w??$g();Z&&(Uj(I),m.clearDraft(),c(!1),e(`/new-session?projectId=${encodeURIComponent(Z)}`))},[u,w,e,m]),C=h.useCallback(I=>{I.key==="Enter"&&!I.shiftKey?(I.preventDefault(),_()):I.key==="Escape"&&c(!1)},[_]),E=h.useCallback(()=>{if(!(w??$g())){e("/projects");return}c(!0)},[w,e]),N=h.useCallback(I=>{const Z=u.trimEnd();d(Z?`${Z} ${I}`:I),v("")},[u,d]),z=h.useCallback(I=>{v(I)},[]),O=p?u+(u.trimEnd()?" ":"")+p:u,U=!a||n.pathname==="/new-session",{right:P,bottom:A,maxWidth:D}=a??{right:24,bottom:80,maxWidth:200};return i.jsxs("div",{ref:b,className:`fab-container ${o?"fab-expanded":"fab-collapsed"}`,style:{right:`${P}px`,bottom:`${A}px`,width:`${D}px`,display:U?"none":void 0},children:[o&&i.jsxs("div",{className:"fab-input-panel",children:[i.jsx("textarea",{ref:x,value:O,onChange:I=>{v(""),d(I.target.value)},onKeyDown:C,placeholder:"Start a new session...",className:"fab-textarea",rows:3}),i.jsxs("div",{className:"fab-input-toolbar",children:[i.jsx(yf,{onTranscript:N,onInterimTranscript:z,className:"toolbar-button"}),i.jsx("button",{type:"button",className:"fab-submit",onClick:_,disabled:!u.trim(),"aria-label":"Go to new session",children:""})]})]}),i.jsx("button",{type:"button",className:`fab-button ${o?"fab-button-active":""}`,onClick:o?()=>c(!1):E,"aria-label":o?"Close":"New session",children:i.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",className:o?"fab-icon-rotated":"",children:[i.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),i.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})})]})}function Dj(e){const n=e.match(/^\/projects\/([^/]+)/);return n!=null&&n[1]?decodeURIComponent(n[1]):null}const D0="yep-anywhere-developer-mode",Ul={holdModeEnabled:!1,websocketTransportEnabled:!1};function Bj(){if(typeof localStorage>"u"||typeof localStorage.getItem!="function")return Ul;const e=localStorage.getItem(D0);if(!e)return Ul;try{return{...Ul,...JSON.parse(e)}}catch{return Ul}}function $j(e){typeof localStorage>"u"||typeof localStorage.setItem!="function"||localStorage.setItem(D0,JSON.stringify(e))}let po=Bj();const Wd=new Set;function Ij(e){return Wd.add(e),()=>Wd.delete(e)}function Pj(){return po}function Zg(e){po=e,$j(e);for(const n of Wd)n()}function Sf(){const e=h.useSyncExternalStore(Ij,Pj),n=h.useCallback(o=>{Zg({...po,holdModeEnabled:o})},[]),a=h.useCallback(o=>{Zg({...po,websocketTransportEnabled:o})},[]);return{holdModeEnabled:e.holdModeEnabled,setHoldModeEnabled:n,websocketTransportEnabled:e.websocketTransportEnabled,setWebsocketTransportEnabled:a}}function jf(){return po.websocketTransportEnabled}const B0=64*1024;class hr extends Error{constructor(n,a){super(n),this.code=a,this.name="UploadError"}}async function Hj(e,n,a,o={},c=u=>new WebSocket(u)){const{onProgress:u,signal:d}=o;return console.log("[Upload] Starting upload to:",e),new Promise((m,p)=>{if(d!=null&&d.aborted){p(new hr("Upload aborted","ABORTED"));return}console.log("[Upload] Creating WebSocket connection...");const v=c(e);let x=!1,b=!1;const w=()=>{if(b)return;x=!0;const O={type:"cancel"};try{v.send(JSON.stringify(O))}catch{}v.close(1e3,"Aborted by user"),p(new hr("Upload aborted","ABORTED"))};d==null||d.addEventListener("abort",w);const _=()=>{d==null||d.removeEventListener("abort",w)},C=O=>{try{const U=JSON.parse(O.data);switch(U.type){case"progress":{u==null||u(U.bytesReceived);break}case"complete":{b=!0,_(),v.close(1e3,"Upload complete"),m(U.file);break}case"error":{b=!0,_(),v.close(1e3,"Error received"),p(new hr(U.message,U.code));break}}}catch{}},E=O=>{console.error("[Upload] WebSocket error:",O),!b&&(b=!0,_(),p(new hr("WebSocket error","WS_ERROR")))},N=O=>{console.log("[Upload] WebSocket closed:",O.code,O.reason),!b&&(_(),x||(b=!0,p(new hr(O.reason||"Connection closed unexpectedly","WS_CLOSED"))))},z=async()=>{console.log("[Upload] WebSocket connection opened");try{const O={type:"start",name:n.name,size:n.size,mimeType:n.mimeType};v.send(JSON.stringify(O));for await(const U of a){if(x)break;v.send(U)}if(!x){const U={type:"end"};v.send(JSON.stringify(U))}}catch(O){if(b)return;b=!0,_(),v.close(1e3,"Error during upload"),p(O instanceof hr?O:new hr(O instanceof Error?O.message:"Upload failed","UPLOAD_ERROR"))}};v.addEventListener("open",z),v.addEventListener("message",C),v.addEventListener("error",E),v.addEventListener("close",N)})}async function*Zj(e,n=B0){let a=0;for(;a<e.size;){const c=await e.slice(a,a+n).arrayBuffer();yield new Uint8Array(c),a+=n}}function qj(e,n,a){const o=window.location.protocol==="https:"?"wss:":"ws:",c=window.location.host;return`${o}//${c}/api/projects/${e}/sessions/${n}/upload/ws`}async function Vj(e,n,a,o={}){const{chunkSize:c=B0,...u}=o,d=qj(e,n),m={name:a.name,size:a.size,mimeType:a.type||"application/octet-stream"},p=Zj(a,c);return Hj(d,m,p,u)}const wd="/api",Fj=["connected","message","status","mode-change","error","complete","heartbeat","markdown-augment","pending","edit-augment","session-id-changed","stream_event"],Gj=["file-change","session-status-changed","session-created","session-updated","session-seen","process-state-changed","session-metadata-changed","source-change","backend-reloaded","worker-activity-changed"];class $0{constructor(){Qe(this,"mode","direct")}async fetch(n,a){const o=await fetch(`${wd}${n}`,{...a,credentials:"include",headers:{"Content-Type":"application/json","X-Yep-Anywhere":"true",...a==null?void 0:a.headers}});if(!o.ok){const c=o.headers.get("X-Setup-Required")==="true",u=new Error(`API error: ${o.status} ${o.statusText}`);throw u.status=o.status,c&&(u.setupRequired=!0),u}return o.json()}subscribeSession(n,a,o){const c=`${wd}/sessions/${n}/stream`,u=o?`${c}?lastEventId=${o}`:c;return this.createEventSourceSubscription(u,a,Fj)}subscribeActivity(n){const a=`${wd}/activity/events`;return this.createEventSourceSubscription(a,n,Gj)}async upload(n,a,o,c){return Vj(n,a,o,c)}createEventSourceSubscription(n,a,o){const c=new EventSource(n),u=new Map;for(const d of o){const m=p=>{try{const v=JSON.parse(p.data);a.onEvent(d,p.lastEventId||void 0,v)}catch{a.onEvent(d,p.lastEventId||void 0,p.data)}};u.set(d,m),c.addEventListener(d,m)}return c.onopen=()=>{var d;(d=a.onOpen)==null||d.call(a)},c.onerror=()=>{var d;(d=a.onError)==null||d.call(a,new Error("EventSource error"))},{close:()=>{var d;for(const[m,p]of u)c.removeEventListener(m,p);c.close(),(d=a.onClose)==null||d.call(a)}}}}const I0=new $0;function Ll(){return crypto.randomUUID()}const Yj=64*1024;class P0{constructor(){Qe(this,"mode","direct");Qe(this,"ws",null);Qe(this,"pendingRequests",new Map);Qe(this,"pendingUploads",new Map);Qe(this,"subscriptions",new Map);Qe(this,"connectionPromise",null);Qe(this,"reconnectAttempts",0);Qe(this,"maxReconnectAttempts",3);Qe(this,"reconnectDelay",1e3)}getWsUrl(){return`${window.location.protocol==="https:"?"wss:":"ws:"}//${window.location.host}/api/ws`}async ensureConnected(){var n;if(((n=this.ws)==null?void 0:n.readyState)!==WebSocket.OPEN){if(this.connectionPromise)return this.connectionPromise;this.connectionPromise=this.connect();try{await this.connectionPromise}finally{this.connectionPromise=null}}}connect(){return new Promise((n,a)=>{const o=this.getWsUrl();console.log("[WebSocketConnection] Connecting to",o);const c=new WebSocket(o);c.onopen=()=>{console.log("[WebSocketConnection] Connected"),this.ws=c,this.reconnectAttempts=0,n()},c.onerror=d=>{console.error("[WebSocketConnection] Error:",d)},c.onclose=d=>{var m,p;console.log("[WebSocketConnection] Closed:",d.code,d.reason),this.ws=null;for(const[v,x]of this.pendingRequests)clearTimeout(x.timeout),x.reject(new Error("WebSocket connection closed")),this.pendingRequests.delete(v);for(const[v,x]of this.pendingUploads)x.reject(new Error("WebSocket connection closed")),this.pendingUploads.delete(v);for(const[v,x]of this.subscriptions)(m=x.onError)==null||m.call(x,new Error("WebSocket connection closed")),(p=x.onClose)==null||p.call(x);this.subscriptions.clear()},c.onmessage=d=>{this.handleMessage(d.data)};const u=setTimeout(()=>{c.readyState!==WebSocket.OPEN&&(c.close(),a(new Error("WebSocket connection timeout")))},1e4);c.onopen=()=>{clearTimeout(u),this.ws=c,this.reconnectAttempts=0,n()}})}handleMessage(n){if(typeof n!="string"){console.warn("[WebSocketConnection] Ignoring non-string message");return}let a;try{a=JSON.parse(n)}catch{console.warn("[WebSocketConnection] Failed to parse message:",n);return}switch(a.type){case"response":this.handleResponse(a);break;case"event":this.handleEvent(a);break;case"upload_progress":this.handleUploadProgress(a);break;case"upload_complete":this.handleUploadComplete(a);break;case"upload_error":this.handleUploadError(a);break;default:console.warn("[WebSocketConnection] Unknown message type:",a.type)}}handleEvent(n){var o;const a=this.subscriptions.get(n.subscriptionId);if(!a){console.warn("[WebSocketConnection] Received event for unknown subscription:",n.subscriptionId);return}n.eventType==="connected"&&((o=a.onOpen)==null||o.call(a)),a.onEvent(n.eventType,n.eventId,n.data)}handleResponse(n){const a=this.pendingRequests.get(n.id);if(!a){console.warn("[WebSocketConnection] Received response for unknown request:",n.id);return}clearTimeout(a.timeout),this.pendingRequests.delete(n.id),a.resolve(n)}handleUploadProgress(n){const a=this.pendingUploads.get(n.uploadId);a!=null&&a.onProgress&&a.onProgress(n.bytesReceived)}handleUploadComplete(n){const a=this.pendingUploads.get(n.uploadId);a&&(this.pendingUploads.delete(n.uploadId),a.resolve(n.file))}handleUploadError(n){const a=this.pendingUploads.get(n.uploadId);a&&(this.pendingUploads.delete(n.uploadId),a.reject(new Error(n.error)))}send(n){if(!this.ws||this.ws.readyState!==WebSocket.OPEN)throw new Error("WebSocket not connected");this.ws.send(JSON.stringify(n))}async fetch(n,a){await this.ensureConnected();const o=Ll(),c=(a==null?void 0:a.method)??"GET";let u;if(a!=null&&a.body)if(typeof a.body=="string")try{u=JSON.parse(a.body)}catch{u=a.body}else u=a.body;const d={};if(a!=null&&a.headers)if(a.headers instanceof Headers)a.headers.forEach((p,v)=>{d[v]=p});else if(Array.isArray(a.headers))for(const[p,v]of a.headers)d[p]=v;else Object.assign(d,a.headers);d["Content-Type"]="application/json",d["X-Yep-Anywhere"]="true";const m={type:"request",id:o,method:c,path:n.startsWith("/api")?n:`/api${n}`,headers:d,body:u};return new Promise((p,v)=>{const x=setTimeout(()=>{this.pendingRequests.delete(o),v(new Error("Request timeout"))},3e4);this.pendingRequests.set(o,{resolve:b=>{var w;if(b.status>=400){const _=new Error(`API error: ${b.status}`);_.status=b.status,((w=b.headers)==null?void 0:w["X-Setup-Required"])==="true"&&(_.setupRequired=!0),v(_)}else p(b.body)},reject:v,timeout:x});try{this.send(m)}catch(b){clearTimeout(x),this.pendingRequests.delete(o),v(b)}})}subscribeSession(n,a,o){const c=Ll();return this.subscriptions.set(c,a),this.ensureConnected().then(()=>{const u={type:"subscribe",subscriptionId:c,channel:"session",sessionId:n,lastEventId:o};this.send(u)}).catch(u=>{var d;(d=a.onError)==null||d.call(a,u),this.subscriptions.delete(c)}),{close:()=>{var u,d;if(this.subscriptions.delete(c),((u=this.ws)==null?void 0:u.readyState)===WebSocket.OPEN){const m={type:"unsubscribe",subscriptionId:c};try{this.send(m)}catch{}}(d=a.onClose)==null||d.call(a)}}}subscribeActivity(n){const a=Ll();return this.subscriptions.set(a,n),this.ensureConnected().then(()=>{const o={type:"subscribe",subscriptionId:a,channel:"activity"};this.send(o)}).catch(o=>{var c;(c=n.onError)==null||c.call(n,o),this.subscriptions.delete(a)}),{close:()=>{var o,c;if(this.subscriptions.delete(a),((o=this.ws)==null?void 0:o.readyState)===WebSocket.OPEN){const u={type:"unsubscribe",subscriptionId:a};try{this.send(u)}catch{}}(c=n.onClose)==null||c.call(n)}}}async upload(n,a,o,c){var p;await this.ensureConnected();const u=Ll(),d=(c==null?void 0:c.chunkSize)??Yj,m=new Promise((v,x)=>{this.pendingUploads.set(u,{resolve:v,reject:x,onProgress:c==null?void 0:c.onProgress}),c!=null&&c.signal&&c.signal.addEventListener("abort",()=>{this.pendingUploads.delete(u),x(new Error("Upload aborted"))})});try{const v={type:"upload_start",uploadId:u,projectId:n,sessionId:a,filename:o.name,size:o.size,mimeType:o.type||"application/octet-stream"};this.send(v);let x=0;const b=o.stream().getReader();for(;;){if((p=c==null?void 0:c.signal)!=null&&p.aborted)throw b.cancel(),new Error("Upload aborted");const{done:_,value:C}=await b.read();if(_)break;let E=0;for(;E<C.length;){const N=Math.min(E+d,C.length),z=C.slice(E,N),O=btoa(Array.from(z).map(P=>String.fromCharCode(P)).join("")),U={type:"upload_chunk",uploadId:u,offset:x,data:O};this.send(U),x+=z.length,E=N}}const w={type:"upload_end",uploadId:u};return this.send(w),await m}catch(v){throw this.pendingUploads.delete(u),v}}close(){var n;for(const[a,o]of this.subscriptions)(n=o.onClose)==null||n.call(o);this.subscriptions.clear();for(const[a,o]of this.pendingRequests)clearTimeout(o.timeout),o.reject(new Error("Connection closed"));this.pendingRequests.clear();for(const[a,o]of this.pendingUploads)o.reject(new Error("Connection closed"));this.pendingUploads.clear(),this.ws&&(this.ws.close(),this.ws=null)}}let Nd=null;function jo(){return Nd||(Nd=new P0),Nd}const Kj=/<ide_(opened_file|selection)>[\s\S]*?<\/ide_\1>/g,Wj=/<ide_opened_file>([\s\S]*?)<\/ide_opened_file>/g;function Xj(e){return e.replace(Kj,"").trim()}function Qj(e){const n=e.match(/(?:user opened the file|opened the file)\s+(.+?)\s+in the IDE/i);return(n==null?void 0:n[1])??null}function Jj(e){const n=[];for(const a of e.matchAll(Wj)){const o=a[1];if(o){const c=Qj(o);c&&n.push(c)}}return n}function e2(e){const n=e.split("/");return n[n.length-1]||e}const t2=["claude","codex","codex-oss","gemini","opencode"],n2="claude",s2="opus";function qg(e){return e==="default"||!e?s2:e}function Xd(e){return e.uuid??e.id??""}function a2(e){const n=new Set;for(const a of e){if(a.parentUuid&&!n.has(a.parentUuid))return!0;n.add(Xd(a))}return!1}function r2(e){if(e.length<=1||!a2(e))return e;const n=new Map;for(const u of e){const d=u.parentUuid??null,m=n.get(d)??[];m.push(u),n.set(d,m)}const a=[],o=new Set;function c(u){for(const d of n.get(u)??[]){const m=Xd(d);o.has(m)||(o.add(m),a.push(d),c(m))}}c(null);for(const u of e)o.has(Xd(u))||a.push(u);return a}function ya(e){return e?e.customTitle??e.title??"Untitled":"Untitled"}function xe(e,n,a){function o(m,p){if(m._zod||Object.defineProperty(m,"_zod",{value:{def:p,constr:d,traits:new Set},enumerable:!1}),m._zod.traits.has(e))return;m._zod.traits.add(e),n(m,p);const v=d.prototype,x=Object.keys(v);for(let b=0;b<x.length;b++){const w=x[b];w in m||(m[w]=v[w].bind(m))}}const c=(a==null?void 0:a.Parent)??Object;class u extends c{}Object.defineProperty(u,"name",{value:e});function d(m){var p;const v=a!=null&&a.Parent?new u:this;o(v,m),(p=v._zod).deferred??(p.deferred=[]);for(const x of v._zod.deferred)x();return v}return Object.defineProperty(d,"init",{value:o}),Object.defineProperty(d,Symbol.hasInstance,{value:m=>{var p,v;return a!=null&&a.Parent&&m instanceof a.Parent?!0:(v=(p=m==null?void 0:m._zod)==null?void 0:p.traits)==null?void 0:v.has(e)}}),Object.defineProperty(d,"name",{value:e}),d}class ni extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class H0 extends Error{constructor(n){super(`Encountered unidirectional transform during encode: ${n}`),this.name="ZodEncodeError"}}const Z0={};function Va(e){return Z0}function q0(e){const n=Object.values(e).filter(o=>typeof o=="number");return Object.entries(e).filter(([o,c])=>n.indexOf(+o)===-1).map(([o,c])=>c)}function Qd(e,n){return typeof n=="bigint"?n.toString():n}function ac(e){return{get value(){{const n=e();return Object.defineProperty(this,"value",{value:n}),n}}}}function wf(e){return e==null}function Nf(e){const n=e.startsWith("^")?1:0,a=e.endsWith("$")?e.length-1:e.length;return e.slice(n,a)}function i2(e,n){const a=(e.toString().split(".")[1]||"").length,o=n.toString();let c=(o.split(".")[1]||"").length;if(c===0&&/\d?e-\d?/.test(o)){const p=o.match(/\d?e-(\d?)/);p!=null&&p[1]&&(c=Number.parseInt(p[1]))}const u=a>c?a:c,d=Number.parseInt(e.toFixed(u).replace(".","")),m=Number.parseInt(n.toFixed(u).replace(".",""));return d%m/10**u}const Vg=Symbol("evaluating");function Ft(e,n,a){let o;Object.defineProperty(e,n,{get(){if(o!==Vg)return o===void 0&&(o=Vg,o=a()),o},set(c){Object.defineProperty(e,n,{value:c})},configurable:!0})}function yr(e,n,a){Object.defineProperty(e,n,{value:a,writable:!0,enumerable:!0,configurable:!0})}function Ya(...e){const n={};for(const a of e){const o=Object.getOwnPropertyDescriptors(a);Object.assign(n,o)}return Object.defineProperties({},n)}function Fg(e){return JSON.stringify(e)}function o2(e){return e.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}const V0="captureStackTrace"in Error?Error.captureStackTrace:(...e)=>{};function go(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}const l2=ac(()=>{var e;if(typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)!=null&&e.includes("Cloudflare")))return!1;try{const n=Function;return new n(""),!0}catch{return!1}});function ri(e){if(go(e)===!1)return!1;const n=e.constructor;if(n===void 0||typeof n!="function")return!0;const a=n.prototype;return!(go(a)===!1||Object.prototype.hasOwnProperty.call(a,"isPrototypeOf")===!1)}function F0(e){return ri(e)?{...e}:Array.isArray(e)?[...e]:e}const c2=new Set(["string","number","symbol"]);function ii(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Ka(e,n,a){const o=new e._zod.constr(n??e._zod.def);return(!n||a!=null&&a.parent)&&(o._zod.parent=e),o}function at(e){const n=e;if(!n)return{};if(typeof n=="string")return{error:()=>n};if((n==null?void 0:n.message)!==void 0){if((n==null?void 0:n.error)!==void 0)throw new Error("Cannot specify both `message` and `error` params");n.error=n.message}return delete n.message,typeof n.error=="string"?{...n,error:()=>n.error}:n}function u2(e){return Object.keys(e).filter(n=>e[n]._zod.optin==="optional"&&e[n]._zod.optout==="optional")}const d2={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function f2(e,n){const a=e._zod.def,o=a.checks;if(o&&o.length>0)throw new Error(".pick() cannot be used on object schemas containing refinements");const u=Ya(e._zod.def,{get shape(){const d={};for(const m in n){if(!(m in a.shape))throw new Error(`Unrecognized key: "${m}"`);n[m]&&(d[m]=a.shape[m])}return yr(this,"shape",d),d},checks:[]});return Ka(e,u)}function h2(e,n){const a=e._zod.def,o=a.checks;if(o&&o.length>0)throw new Error(".omit() cannot be used on object schemas containing refinements");const u=Ya(e._zod.def,{get shape(){const d={...e._zod.def.shape};for(const m in n){if(!(m in a.shape))throw new Error(`Unrecognized key: "${m}"`);n[m]&&delete d[m]}return yr(this,"shape",d),d},checks:[]});return Ka(e,u)}function m2(e,n){if(!ri(n))throw new Error("Invalid input to extend: expected a plain object");const a=e._zod.def.checks;if(a&&a.length>0){const u=e._zod.def.shape;for(const d in n)if(Object.getOwnPropertyDescriptor(u,d)!==void 0)throw new Error("Cannot overwrite keys on object schemas containing refinements. Use `.safeExtend()` instead.")}const c=Ya(e._zod.def,{get shape(){const u={...e._zod.def.shape,...n};return yr(this,"shape",u),u}});return Ka(e,c)}function p2(e,n){if(!ri(n))throw new Error("Invalid input to safeExtend: expected a plain object");const a=Ya(e._zod.def,{get shape(){const o={...e._zod.def.shape,...n};return yr(this,"shape",o),o}});return Ka(e,a)}function g2(e,n){const a=Ya(e._zod.def,{get shape(){const o={...e._zod.def.shape,...n._zod.def.shape};return yr(this,"shape",o),o},get catchall(){return n._zod.def.catchall},checks:[]});return Ka(e,a)}function v2(e,n,a){const c=n._zod.def.checks;if(c&&c.length>0)throw new Error(".partial() cannot be used on object schemas containing refinements");const d=Ya(n._zod.def,{get shape(){const m=n._zod.def.shape,p={...m};if(a)for(const v in a){if(!(v in m))throw new Error(`Unrecognized key: "${v}"`);a[v]&&(p[v]=e?new e({type:"optional",innerType:m[v]}):m[v])}else for(const v in m)p[v]=e?new e({type:"optional",innerType:m[v]}):m[v];return yr(this,"shape",p),p},checks:[]});return Ka(n,d)}function x2(e,n,a){const o=Ya(n._zod.def,{get shape(){const c=n._zod.def.shape,u={...c};if(a)for(const d in a){if(!(d in u))throw new Error(`Unrecognized key: "${d}"`);a[d]&&(u[d]=new e({type:"nonoptional",innerType:c[d]}))}else for(const d in c)u[d]=new e({type:"nonoptional",innerType:c[d]});return yr(this,"shape",u),u}});return Ka(n,o)}function ei(e,n=0){var a;if(e.aborted===!0)return!0;for(let o=n;o<e.issues.length;o++)if(((a=e.issues[o])==null?void 0:a.continue)!==!0)return!0;return!1}function ti(e,n){return n.map(a=>{var o;return(o=a).path??(o.path=[]),a.path.unshift(e),a})}function Dl(e){return typeof e=="string"?e:e==null?void 0:e.message}function Fa(e,n,a){var c,u,d,m,p,v;const o={...e,path:e.path??[]};if(!e.message){const x=Dl((d=(u=(c=e.inst)==null?void 0:c._zod.def)==null?void 0:u.error)==null?void 0:d.call(u,e))??Dl((m=n==null?void 0:n.error)==null?void 0:m.call(n,e))??Dl((p=a.customError)==null?void 0:p.call(a,e))??Dl((v=a.localeError)==null?void 0:v.call(a,e))??"Invalid input";o.message=x}return delete o.inst,delete o.continue,n!=null&&n.reportInput||delete o.input,o}function Ef(e){return Array.isArray(e)?"array":typeof e=="string"?"string":"unknown"}function vo(...e){const[n,a,o]=e;return typeof n=="string"?{message:n,code:"custom",input:a,inst:o}:{...n}}const G0=(e,n)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:n,enumerable:!1}),e.message=JSON.stringify(n,Qd,2),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},Y0=xe("$ZodError",G0),K0=xe("$ZodError",G0,{Parent:Error});function y2(e,n=a=>a.message){const a={},o=[];for(const c of e.issues)c.path.length>0?(a[c.path[0]]=a[c.path[0]]||[],a[c.path[0]].push(n(c))):o.push(n(c));return{formErrors:o,fieldErrors:a}}function b2(e,n=a=>a.message){const a={_errors:[]},o=c=>{for(const u of c.issues)if(u.code==="invalid_union"&&u.errors.length)u.errors.map(d=>o({issues:d}));else if(u.code==="invalid_key")o({issues:u.issues});else if(u.code==="invalid_element")o({issues:u.issues});else if(u.path.length===0)a._errors.push(n(u));else{let d=a,m=0;for(;m<u.path.length;){const p=u.path[m];m===u.path.length-1?(d[p]=d[p]||{_errors:[]},d[p]._errors.push(n(u))):d[p]=d[p]||{_errors:[]},d=d[p],m++}}};return o(e),a}const _f=e=>(n,a,o,c)=>{const u=o?Object.assign(o,{async:!1}):{async:!1},d=n._zod.run({value:a,issues:[]},u);if(d instanceof Promise)throw new ni;if(d.issues.length){const m=new((c==null?void 0:c.Err)??e)(d.issues.map(p=>Fa(p,u,Va())));throw V0(m,c==null?void 0:c.callee),m}return d.value},Cf=e=>async(n,a,o,c)=>{const u=o?Object.assign(o,{async:!0}):{async:!0};let d=n._zod.run({value:a,issues:[]},u);if(d instanceof Promise&&(d=await d),d.issues.length){const m=new((c==null?void 0:c.Err)??e)(d.issues.map(p=>Fa(p,u,Va())));throw V0(m,c==null?void 0:c.callee),m}return d.value},rc=e=>(n,a,o)=>{const c=o?{...o,async:!1}:{async:!1},u=n._zod.run({value:a,issues:[]},c);if(u instanceof Promise)throw new ni;return u.issues.length?{success:!1,error:new(e??Y0)(u.issues.map(d=>Fa(d,c,Va())))}:{success:!0,data:u.value}},S2=rc(K0),ic=e=>async(n,a,o)=>{const c=o?Object.assign(o,{async:!0}):{async:!0};let u=n._zod.run({value:a,issues:[]},c);return u instanceof Promise&&(u=await u),u.issues.length?{success:!1,error:new e(u.issues.map(d=>Fa(d,c,Va())))}:{success:!0,data:u.value}},j2=ic(K0),w2=e=>(n,a,o)=>{const c=o?Object.assign(o,{direction:"backward"}):{direction:"backward"};return _f(e)(n,a,c)},N2=e=>(n,a,o)=>_f(e)(n,a,o),E2=e=>async(n,a,o)=>{const c=o?Object.assign(o,{direction:"backward"}):{direction:"backward"};return Cf(e)(n,a,c)},_2=e=>async(n,a,o)=>Cf(e)(n,a,o),C2=e=>(n,a,o)=>{const c=o?Object.assign(o,{direction:"backward"}):{direction:"backward"};return rc(e)(n,a,c)},T2=e=>(n,a,o)=>rc(e)(n,a,o),k2=e=>async(n,a,o)=>{const c=o?Object.assign(o,{direction:"backward"}):{direction:"backward"};return ic(e)(n,a,c)},R2=e=>async(n,a,o)=>ic(e)(n,a,o),A2=/^[cC][^\s-]{8,}$/,M2=/^[0-9a-z]+$/,O2=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,z2=/^[0-9a-vA-V]{20}$/,U2=/^[A-Za-z0-9]{27}$/,L2=/^[a-zA-Z0-9_-]{21}$/,D2=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,B2=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,Gg=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,$2=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,I2="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function P2(){return new RegExp(I2,"u")}const H2=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Z2=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,q2=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,V2=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,F2=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,W0=/^[A-Za-z0-9_-]*$/,G2=/^\+[1-9]\d{6,14}$/,X0="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",Y2=new RegExp(`^${X0}$`);function Q0(e){const n="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof e.precision=="number"?e.precision===-1?`${n}`:e.precision===0?`${n}:[0-5]\\d`:`${n}:[0-5]\\d\\.\\d{${e.precision}}`:`${n}(?::[0-5]\\d(?:\\.\\d+)?)?`}function K2(e){return new RegExp(`^${Q0(e)}$`)}function W2(e){const n=Q0({precision:e.precision}),a=["Z"];e.local&&a.push(""),e.offset&&a.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const o=`${n}(?:${a.join("|")})`;return new RegExp(`^${X0}T(?:${o})$`)}const X2=e=>{const n=e?`[\\s\\S]{${(e==null?void 0:e.minimum)??0},${(e==null?void 0:e.maximum)??""}}`:"[\\s\\S]*";return new RegExp(`^${n}$`)},Q2=/^-?\d+$/,J0=/^-?\d+(?:\.\d+)?$/,J2=/^(?:true|false)$/i,ew=/^[^A-Z]*$/,tw=/^[^a-z]*$/,Ss=xe("$ZodCheck",(e,n)=>{var a;e._zod??(e._zod={}),e._zod.def=n,(a=e._zod).onattach??(a.onattach=[])}),ex={number:"number",bigint:"bigint",object:"date"},tx=xe("$ZodCheckLessThan",(e,n)=>{Ss.init(e,n);const a=ex[typeof n.value];e._zod.onattach.push(o=>{const c=o._zod.bag,u=(n.inclusive?c.maximum:c.exclusiveMaximum)??Number.POSITIVE_INFINITY;n.value<u&&(n.inclusive?c.maximum=n.value:c.exclusiveMaximum=n.value)}),e._zod.check=o=>{(n.inclusive?o.value<=n.value:o.value<n.value)||o.issues.push({origin:a,code:"too_big",maximum:typeof n.value=="object"?n.value.getTime():n.value,input:o.value,inclusive:n.inclusive,inst:e,continue:!n.abort})}}),nx=xe("$ZodCheckGreaterThan",(e,n)=>{Ss.init(e,n);const a=ex[typeof n.value];e._zod.onattach.push(o=>{const c=o._zod.bag,u=(n.inclusive?c.minimum:c.exclusiveMinimum)??Number.NEGATIVE_INFINITY;n.value>u&&(n.inclusive?c.minimum=n.value:c.exclusiveMinimum=n.value)}),e._zod.check=o=>{(n.inclusive?o.value>=n.value:o.value>n.value)||o.issues.push({origin:a,code:"too_small",minimum:typeof n.value=="object"?n.value.getTime():n.value,input:o.value,inclusive:n.inclusive,inst:e,continue:!n.abort})}}),nw=xe("$ZodCheckMultipleOf",(e,n)=>{Ss.init(e,n),e._zod.onattach.push(a=>{var o;(o=a._zod.bag).multipleOf??(o.multipleOf=n.value)}),e._zod.check=a=>{if(typeof a.value!=typeof n.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof a.value=="bigint"?a.value%n.value===BigInt(0):i2(a.value,n.value)===0)||a.issues.push({origin:typeof a.value,code:"not_multiple_of",divisor:n.value,input:a.value,inst:e,continue:!n.abort})}}),sw=xe("$ZodCheckNumberFormat",(e,n)=>{var d;Ss.init(e,n),n.format=n.format||"float64";const a=(d=n.format)==null?void 0:d.includes("int"),o=a?"int":"number",[c,u]=d2[n.format];e._zod.onattach.push(m=>{const p=m._zod.bag;p.format=n.format,p.minimum=c,p.maximum=u,a&&(p.pattern=Q2)}),e._zod.check=m=>{const p=m.value;if(a){if(!Number.isInteger(p)){m.issues.push({expected:o,format:n.format,code:"invalid_type",continue:!1,input:p,inst:e});return}if(!Number.isSafeInteger(p)){p>0?m.issues.push({input:p,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:o,inclusive:!0,continue:!n.abort}):m.issues.push({input:p,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:o,inclusive:!0,continue:!n.abort});return}}p<c&&m.issues.push({origin:"number",input:p,code:"too_small",minimum:c,inclusive:!0,inst:e,continue:!n.abort}),p>u&&m.issues.push({origin:"number",input:p,code:"too_big",maximum:u,inclusive:!0,inst:e,continue:!n.abort})}}),aw=xe("$ZodCheckMaxLength",(e,n)=>{var a;Ss.init(e,n),(a=e._zod.def).when??(a.when=o=>{const c=o.value;return!wf(c)&&c.length!==void 0}),e._zod.onattach.push(o=>{const c=o._zod.bag.maximum??Number.POSITIVE_INFINITY;n.maximum<c&&(o._zod.bag.maximum=n.maximum)}),e._zod.check=o=>{const c=o.value;if(c.length<=n.maximum)return;const d=Ef(c);o.issues.push({origin:d,code:"too_big",maximum:n.maximum,inclusive:!0,input:c,inst:e,continue:!n.abort})}}),rw=xe("$ZodCheckMinLength",(e,n)=>{var a;Ss.init(e,n),(a=e._zod.def).when??(a.when=o=>{const c=o.value;return!wf(c)&&c.length!==void 0}),e._zod.onattach.push(o=>{const c=o._zod.bag.minimum??Number.NEGATIVE_INFINITY;n.minimum>c&&(o._zod.bag.minimum=n.minimum)}),e._zod.check=o=>{const c=o.value;if(c.length>=n.minimum)return;const d=Ef(c);o.issues.push({origin:d,code:"too_small",minimum:n.minimum,inclusive:!0,input:c,inst:e,continue:!n.abort})}}),iw=xe("$ZodCheckLengthEquals",(e,n)=>{var a;Ss.init(e,n),(a=e._zod.def).when??(a.when=o=>{const c=o.value;return!wf(c)&&c.length!==void 0}),e._zod.onattach.push(o=>{const c=o._zod.bag;c.minimum=n.length,c.maximum=n.length,c.length=n.length}),e._zod.check=o=>{const c=o.value,u=c.length;if(u===n.length)return;const d=Ef(c),m=u>n.length;o.issues.push({origin:d,...m?{code:"too_big",maximum:n.length}:{code:"too_small",minimum:n.length},inclusive:!0,exact:!0,input:o.value,inst:e,continue:!n.abort})}}),oc=xe("$ZodCheckStringFormat",(e,n)=>{var a,o;Ss.init(e,n),e._zod.onattach.push(c=>{const u=c._zod.bag;u.format=n.format,n.pattern&&(u.patterns??(u.patterns=new Set),u.patterns.add(n.pattern))}),n.pattern?(a=e._zod).check??(a.check=c=>{n.pattern.lastIndex=0,!n.pattern.test(c.value)&&c.issues.push({origin:"string",code:"invalid_format",format:n.format,input:c.value,...n.pattern?{pattern:n.pattern.toString()}:{},inst:e,continue:!n.abort})}):(o=e._zod).check??(o.check=()=>{})}),ow=xe("$ZodCheckRegex",(e,n)=>{oc.init(e,n),e._zod.check=a=>{n.pattern.lastIndex=0,!n.pattern.test(a.value)&&a.issues.push({origin:"string",code:"invalid_format",format:"regex",input:a.value,pattern:n.pattern.toString(),inst:e,continue:!n.abort})}}),lw=xe("$ZodCheckLowerCase",(e,n)=>{n.pattern??(n.pattern=ew),oc.init(e,n)}),cw=xe("$ZodCheckUpperCase",(e,n)=>{n.pattern??(n.pattern=tw),oc.init(e,n)}),uw=xe("$ZodCheckIncludes",(e,n)=>{Ss.init(e,n);const a=ii(n.includes),o=new RegExp(typeof n.position=="number"?`^.{${n.position}}${a}`:a);n.pattern=o,e._zod.onattach.push(c=>{const u=c._zod.bag;u.patterns??(u.patterns=new Set),u.patterns.add(o)}),e._zod.check=c=>{c.value.includes(n.includes,n.position)||c.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:n.includes,input:c.value,inst:e,continue:!n.abort})}}),dw=xe("$ZodCheckStartsWith",(e,n)=>{Ss.init(e,n);const a=new RegExp(`^${ii(n.prefix)}.*`);n.pattern??(n.pattern=a),e._zod.onattach.push(o=>{const c=o._zod.bag;c.patterns??(c.patterns=new Set),c.patterns.add(a)}),e._zod.check=o=>{o.value.startsWith(n.prefix)||o.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:n.prefix,input:o.value,inst:e,continue:!n.abort})}}),fw=xe("$ZodCheckEndsWith",(e,n)=>{Ss.init(e,n);const a=new RegExp(`.*${ii(n.suffix)}$`);n.pattern??(n.pattern=a),e._zod.onattach.push(o=>{const c=o._zod.bag;c.patterns??(c.patterns=new Set),c.patterns.add(a)}),e._zod.check=o=>{o.value.endsWith(n.suffix)||o.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:n.suffix,input:o.value,inst:e,continue:!n.abort})}}),hw=xe("$ZodCheckOverwrite",(e,n)=>{Ss.init(e,n),e._zod.check=a=>{a.value=n.tx(a.value)}});class mw{constructor(n=[]){this.content=[],this.indent=0,this&&(this.args=n)}indented(n){this.indent+=1,n(this),this.indent-=1}write(n){if(typeof n=="function"){n(this,{execution:"sync"}),n(this,{execution:"async"});return}const o=n.split(`
`).filter(d=>d),c=Math.min(...o.map(d=>d.length-d.trimStart().length)),u=o.map(d=>d.slice(c)).map(d=>" ".repeat(this.indent*2)+d);for(const d of u)this.content.push(d)}compile(){const n=Function,a=this==null?void 0:this.args,c=[...((this==null?void 0:this.content)??[""]).map(u=>`  ${u}`)];return new n(...a,c.join(`
`))}}const pw={major:4,minor:3,patch:5},vn=xe("$ZodType",(e,n)=>{var c;var a;e??(e={}),e._zod.def=n,e._zod.bag=e._zod.bag||{},e._zod.version=pw;const o=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&o.unshift(e);for(const u of o)for(const d of u._zod.onattach)d(e);if(o.length===0)(a=e._zod).deferred??(a.deferred=[]),(c=e._zod.deferred)==null||c.push(()=>{e._zod.run=e._zod.parse});else{const u=(m,p,v)=>{let x=ei(m),b;for(const w of p){if(w._zod.def.when){if(!w._zod.def.when(m))continue}else if(x)continue;const _=m.issues.length,C=w._zod.check(m);if(C instanceof Promise&&(v==null?void 0:v.async)===!1)throw new ni;if(b||C instanceof Promise)b=(b??Promise.resolve()).then(async()=>{await C,m.issues.length!==_&&(x||(x=ei(m,_)))});else{if(m.issues.length===_)continue;x||(x=ei(m,_))}}return b?b.then(()=>m):m},d=(m,p,v)=>{if(ei(m))return m.aborted=!0,m;const x=u(p,o,v);if(x instanceof Promise){if(v.async===!1)throw new ni;return x.then(b=>e._zod.parse(b,v))}return e._zod.parse(x,v)};e._zod.run=(m,p)=>{if(p.skipChecks)return e._zod.parse(m,p);if(p.direction==="backward"){const x=e._zod.parse({value:m.value,issues:[]},{...p,skipChecks:!0});return x instanceof Promise?x.then(b=>d(b,m,p)):d(x,m,p)}const v=e._zod.parse(m,p);if(v instanceof Promise){if(p.async===!1)throw new ni;return v.then(x=>u(x,o,p))}return u(v,o,p)}}Ft(e,"~standard",()=>({validate:u=>{var d;try{const m=S2(e,u);return m.success?{value:m.data}:{issues:(d=m.error)==null?void 0:d.issues}}catch{return j2(e,u).then(p=>{var v;return p.success?{value:p.data}:{issues:(v=p.error)==null?void 0:v.issues}})}},vendor:"zod",version:1}))}),Tf=xe("$ZodString",(e,n)=>{var a;vn.init(e,n),e._zod.pattern=[...((a=e==null?void 0:e._zod.bag)==null?void 0:a.patterns)??[]].pop()??X2(e._zod.bag),e._zod.parse=(o,c)=>{if(n.coerce)try{o.value=String(o.value)}catch{}return typeof o.value=="string"||o.issues.push({expected:"string",code:"invalid_type",input:o.value,inst:e}),o}}),mn=xe("$ZodStringFormat",(e,n)=>{oc.init(e,n),Tf.init(e,n)}),gw=xe("$ZodGUID",(e,n)=>{n.pattern??(n.pattern=B2),mn.init(e,n)}),vw=xe("$ZodUUID",(e,n)=>{if(n.version){const o={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[n.version];if(o===void 0)throw new Error(`Invalid UUID version: "${n.version}"`);n.pattern??(n.pattern=Gg(o))}else n.pattern??(n.pattern=Gg());mn.init(e,n)}),xw=xe("$ZodEmail",(e,n)=>{n.pattern??(n.pattern=$2),mn.init(e,n)}),yw=xe("$ZodURL",(e,n)=>{mn.init(e,n),e._zod.check=a=>{try{const o=a.value.trim(),c=new URL(o);n.hostname&&(n.hostname.lastIndex=0,n.hostname.test(c.hostname)||a.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:n.hostname.source,input:a.value,inst:e,continue:!n.abort})),n.protocol&&(n.protocol.lastIndex=0,n.protocol.test(c.protocol.endsWith(":")?c.protocol.slice(0,-1):c.protocol)||a.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:n.protocol.source,input:a.value,inst:e,continue:!n.abort})),n.normalize?a.value=c.href:a.value=o;return}catch{a.issues.push({code:"invalid_format",format:"url",input:a.value,inst:e,continue:!n.abort})}}}),bw=xe("$ZodEmoji",(e,n)=>{n.pattern??(n.pattern=P2()),mn.init(e,n)}),Sw=xe("$ZodNanoID",(e,n)=>{n.pattern??(n.pattern=L2),mn.init(e,n)}),jw=xe("$ZodCUID",(e,n)=>{n.pattern??(n.pattern=A2),mn.init(e,n)}),ww=xe("$ZodCUID2",(e,n)=>{n.pattern??(n.pattern=M2),mn.init(e,n)}),Nw=xe("$ZodULID",(e,n)=>{n.pattern??(n.pattern=O2),mn.init(e,n)}),Ew=xe("$ZodXID",(e,n)=>{n.pattern??(n.pattern=z2),mn.init(e,n)}),_w=xe("$ZodKSUID",(e,n)=>{n.pattern??(n.pattern=U2),mn.init(e,n)}),Cw=xe("$ZodISODateTime",(e,n)=>{n.pattern??(n.pattern=W2(n)),mn.init(e,n)}),Tw=xe("$ZodISODate",(e,n)=>{n.pattern??(n.pattern=Y2),mn.init(e,n)}),kw=xe("$ZodISOTime",(e,n)=>{n.pattern??(n.pattern=K2(n)),mn.init(e,n)}),Rw=xe("$ZodISODuration",(e,n)=>{n.pattern??(n.pattern=D2),mn.init(e,n)}),Aw=xe("$ZodIPv4",(e,n)=>{n.pattern??(n.pattern=H2),mn.init(e,n),e._zod.bag.format="ipv4"}),Mw=xe("$ZodIPv6",(e,n)=>{n.pattern??(n.pattern=Z2),mn.init(e,n),e._zod.bag.format="ipv6",e._zod.check=a=>{try{new URL(`http://[${a.value}]`)}catch{a.issues.push({code:"invalid_format",format:"ipv6",input:a.value,inst:e,continue:!n.abort})}}}),Ow=xe("$ZodCIDRv4",(e,n)=>{n.pattern??(n.pattern=q2),mn.init(e,n)}),zw=xe("$ZodCIDRv6",(e,n)=>{n.pattern??(n.pattern=V2),mn.init(e,n),e._zod.check=a=>{const o=a.value.split("/");try{if(o.length!==2)throw new Error;const[c,u]=o;if(!u)throw new Error;const d=Number(u);if(`${d}`!==u)throw new Error;if(d<0||d>128)throw new Error;new URL(`http://[${c}]`)}catch{a.issues.push({code:"invalid_format",format:"cidrv6",input:a.value,inst:e,continue:!n.abort})}}});function sx(e){if(e==="")return!0;if(e.length%4!==0)return!1;try{return atob(e),!0}catch{return!1}}const Uw=xe("$ZodBase64",(e,n)=>{n.pattern??(n.pattern=F2),mn.init(e,n),e._zod.bag.contentEncoding="base64",e._zod.check=a=>{sx(a.value)||a.issues.push({code:"invalid_format",format:"base64",input:a.value,inst:e,continue:!n.abort})}});function Lw(e){if(!W0.test(e))return!1;const n=e.replace(/[-_]/g,o=>o==="-"?"+":"/"),a=n.padEnd(Math.ceil(n.length/4)*4,"=");return sx(a)}const Dw=xe("$ZodBase64URL",(e,n)=>{n.pattern??(n.pattern=W0),mn.init(e,n),e._zod.bag.contentEncoding="base64url",e._zod.check=a=>{Lw(a.value)||a.issues.push({code:"invalid_format",format:"base64url",input:a.value,inst:e,continue:!n.abort})}}),Bw=xe("$ZodE164",(e,n)=>{n.pattern??(n.pattern=G2),mn.init(e,n)});function $w(e,n=null){try{const a=e.split(".");if(a.length!==3)return!1;const[o]=a;if(!o)return!1;const c=JSON.parse(atob(o));return!("typ"in c&&(c==null?void 0:c.typ)!=="JWT"||!c.alg||n&&(!("alg"in c)||c.alg!==n))}catch{return!1}}const Iw=xe("$ZodJWT",(e,n)=>{mn.init(e,n),e._zod.check=a=>{$w(a.value,n.alg)||a.issues.push({code:"invalid_format",format:"jwt",input:a.value,inst:e,continue:!n.abort})}}),ax=xe("$ZodNumber",(e,n)=>{vn.init(e,n),e._zod.pattern=e._zod.bag.pattern??J0,e._zod.parse=(a,o)=>{if(n.coerce)try{a.value=Number(a.value)}catch{}const c=a.value;if(typeof c=="number"&&!Number.isNaN(c)&&Number.isFinite(c))return a;const u=typeof c=="number"?Number.isNaN(c)?"NaN":Number.isFinite(c)?void 0:"Infinity":void 0;return a.issues.push({expected:"number",code:"invalid_type",input:c,inst:e,...u?{received:u}:{}}),a}}),Pw=xe("$ZodNumberFormat",(e,n)=>{sw.init(e,n),ax.init(e,n)}),Hw=xe("$ZodBoolean",(e,n)=>{vn.init(e,n),e._zod.pattern=J2,e._zod.parse=(a,o)=>{if(n.coerce)try{a.value=!!a.value}catch{}const c=a.value;return typeof c=="boolean"||a.issues.push({expected:"boolean",code:"invalid_type",input:c,inst:e}),a}}),Zw=xe("$ZodUnknown",(e,n)=>{vn.init(e,n),e._zod.parse=a=>a}),qw=xe("$ZodNever",(e,n)=>{vn.init(e,n),e._zod.parse=(a,o)=>(a.issues.push({expected:"never",code:"invalid_type",input:a.value,inst:e}),a)});function Yg(e,n,a){e.issues.length&&n.issues.push(...ti(a,e.issues)),n.value[a]=e.value}const Vw=xe("$ZodArray",(e,n)=>{vn.init(e,n),e._zod.parse=(a,o)=>{const c=a.value;if(!Array.isArray(c))return a.issues.push({expected:"array",code:"invalid_type",input:c,inst:e}),a;a.value=Array(c.length);const u=[];for(let d=0;d<c.length;d++){const m=c[d],p=n.element._zod.run({value:m,issues:[]},o);p instanceof Promise?u.push(p.then(v=>Yg(v,a,d))):Yg(p,a,d)}return u.length?Promise.all(u).then(()=>a):a}});function Kl(e,n,a,o,c){if(e.issues.length){if(c&&!(a in o))return;n.issues.push(...ti(a,e.issues))}e.value===void 0?a in o&&(n.value[a]=void 0):n.value[a]=e.value}function rx(e){var o,c,u,d;const n=Object.keys(e.shape);for(const m of n)if(!((d=(u=(c=(o=e.shape)==null?void 0:o[m])==null?void 0:c._zod)==null?void 0:u.traits)!=null&&d.has("$ZodType")))throw new Error(`Invalid element at key "${m}": expected a Zod schema`);const a=u2(e.shape);return{...e,keys:n,keySet:new Set(n),numKeys:n.length,optionalKeys:new Set(a)}}function ix(e,n,a,o,c,u){const d=[],m=c.keySet,p=c.catchall._zod,v=p.def.type,x=p.optout==="optional";for(const b in n){if(m.has(b))continue;if(v==="never"){d.push(b);continue}const w=p.run({value:n[b],issues:[]},o);w instanceof Promise?e.push(w.then(_=>Kl(_,a,b,n,x))):Kl(w,a,b,n,x)}return d.length&&a.issues.push({code:"unrecognized_keys",keys:d,input:n,inst:u}),e.length?Promise.all(e).then(()=>a):a}const Fw=xe("$ZodObject",(e,n)=>{vn.init(e,n);const a=Object.getOwnPropertyDescriptor(n,"shape");if(!(a!=null&&a.get)){const m=n.shape;Object.defineProperty(n,"shape",{get:()=>{const p={...m};return Object.defineProperty(n,"shape",{value:p}),p}})}const o=ac(()=>rx(n));Ft(e._zod,"propValues",()=>{const m=n.shape,p={};for(const v in m){const x=m[v]._zod;if(x.values){p[v]??(p[v]=new Set);for(const b of x.values)p[v].add(b)}}return p});const c=go,u=n.catchall;let d;e._zod.parse=(m,p)=>{d??(d=o.value);const v=m.value;if(!c(v))return m.issues.push({expected:"object",code:"invalid_type",input:v,inst:e}),m;m.value={};const x=[],b=d.shape;for(const w of d.keys){const _=b[w],C=_._zod.optout==="optional",E=_._zod.run({value:v[w],issues:[]},p);E instanceof Promise?x.push(E.then(N=>Kl(N,m,w,v,C))):Kl(E,m,w,v,C)}return u?ix(x,v,m,p,o.value,e):x.length?Promise.all(x).then(()=>m):m}}),Gw=xe("$ZodObjectJIT",(e,n)=>{Fw.init(e,n);const a=e._zod.parse,o=ac(()=>rx(n)),c=w=>{var U;const _=new mw(["shape","payload","ctx"]),C=o.value,E=P=>{const A=Fg(P);return`shape[${A}]._zod.run({ value: input[${A}], issues: [] }, ctx)`};_.write("const input = payload.value;");const N=Object.create(null);let z=0;for(const P of C.keys)N[P]=`key_${z++}`;_.write("const newResult = {};");for(const P of C.keys){const A=N[P],D=Fg(P),I=w[P],Z=((U=I==null?void 0:I._zod)==null?void 0:U.optout)==="optional";_.write(`const ${A} = ${E(P)};`),Z?_.write(`
        if (${A}.issues.length) {
          if (${D} in input) {
            payload.issues = payload.issues.concat(${A}.issues.map(iss => ({
              ...iss,
              path: iss.path ? [${D}, ...iss.path] : [${D}]
            })));
          }
        }
        
        if (${A}.value === undefined) {
          if (${D} in input) {
            newResult[${D}] = undefined;
          }
        } else {
          newResult[${D}] = ${A}.value;
        }
        
      `):_.write(`
        if (${A}.issues.length) {
          payload.issues = payload.issues.concat(${A}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${D}, ...iss.path] : [${D}]
          })));
        }
        
        if (${A}.value === undefined) {
          if (${D} in input) {
            newResult[${D}] = undefined;
          }
        } else {
          newResult[${D}] = ${A}.value;
        }
        
      `)}_.write("payload.value = newResult;"),_.write("return payload;");const O=_.compile();return(P,A)=>O(w,P,A)};let u;const d=go,m=!Z0.jitless,v=m&&l2.value,x=n.catchall;let b;e._zod.parse=(w,_)=>{b??(b=o.value);const C=w.value;return d(C)?m&&v&&(_==null?void 0:_.async)===!1&&_.jitless!==!0?(u||(u=c(n.shape)),w=u(w,_),x?ix([],C,w,_,b,e):w):a(w,_):(w.issues.push({expected:"object",code:"invalid_type",input:C,inst:e}),w)}});function Kg(e,n,a,o){for(const u of e)if(u.issues.length===0)return n.value=u.value,n;const c=e.filter(u=>!ei(u));return c.length===1?(n.value=c[0].value,c[0]):(n.issues.push({code:"invalid_union",input:n.value,inst:a,errors:e.map(u=>u.issues.map(d=>Fa(d,o,Va())))}),n)}const ox=xe("$ZodUnion",(e,n)=>{vn.init(e,n),Ft(e._zod,"optin",()=>n.options.some(c=>c._zod.optin==="optional")?"optional":void 0),Ft(e._zod,"optout",()=>n.options.some(c=>c._zod.optout==="optional")?"optional":void 0),Ft(e._zod,"values",()=>{if(n.options.every(c=>c._zod.values))return new Set(n.options.flatMap(c=>Array.from(c._zod.values)))}),Ft(e._zod,"pattern",()=>{if(n.options.every(c=>c._zod.pattern)){const c=n.options.map(u=>u._zod.pattern);return new RegExp(`^(${c.map(u=>Nf(u.source)).join("|")})$`)}});const a=n.options.length===1,o=n.options[0]._zod.run;e._zod.parse=(c,u)=>{if(a)return o(c,u);let d=!1;const m=[];for(const p of n.options){const v=p._zod.run({value:c.value,issues:[]},u);if(v instanceof Promise)m.push(v),d=!0;else{if(v.issues.length===0)return v;m.push(v)}}return d?Promise.all(m).then(p=>Kg(p,c,e,u)):Kg(m,c,e,u)}}),Yw=xe("$ZodDiscriminatedUnion",(e,n)=>{n.inclusive=!1,ox.init(e,n);const a=e._zod.parse;Ft(e._zod,"propValues",()=>{const c={};for(const u of n.options){const d=u._zod.propValues;if(!d||Object.keys(d).length===0)throw new Error(`Invalid discriminated union option at index "${n.options.indexOf(u)}"`);for(const[m,p]of Object.entries(d)){c[m]||(c[m]=new Set);for(const v of p)c[m].add(v)}}return c});const o=ac(()=>{var d;const c=n.options,u=new Map;for(const m of c){const p=(d=m._zod.propValues)==null?void 0:d[n.discriminator];if(!p||p.size===0)throw new Error(`Invalid discriminated union option at index "${n.options.indexOf(m)}"`);for(const v of p){if(u.has(v))throw new Error(`Duplicate discriminator value "${String(v)}"`);u.set(v,m)}}return u});e._zod.parse=(c,u)=>{const d=c.value;if(!go(d))return c.issues.push({code:"invalid_type",expected:"object",input:d,inst:e}),c;const m=o.value.get(d==null?void 0:d[n.discriminator]);return m?m._zod.run(c,u):n.unionFallback?a(c,u):(c.issues.push({code:"invalid_union",errors:[],note:"No matching discriminator",discriminator:n.discriminator,input:d,path:[n.discriminator],inst:e}),c)}}),Kw=xe("$ZodIntersection",(e,n)=>{vn.init(e,n),e._zod.parse=(a,o)=>{const c=a.value,u=n.left._zod.run({value:c,issues:[]},o),d=n.right._zod.run({value:c,issues:[]},o);return u instanceof Promise||d instanceof Promise?Promise.all([u,d]).then(([p,v])=>Wg(a,p,v)):Wg(a,u,d)}});function Jd(e,n){if(e===n)return{valid:!0,data:e};if(e instanceof Date&&n instanceof Date&&+e==+n)return{valid:!0,data:e};if(ri(e)&&ri(n)){const a=Object.keys(n),o=Object.keys(e).filter(u=>a.indexOf(u)!==-1),c={...e,...n};for(const u of o){const d=Jd(e[u],n[u]);if(!d.valid)return{valid:!1,mergeErrorPath:[u,...d.mergeErrorPath]};c[u]=d.data}return{valid:!0,data:c}}if(Array.isArray(e)&&Array.isArray(n)){if(e.length!==n.length)return{valid:!1,mergeErrorPath:[]};const a=[];for(let o=0;o<e.length;o++){const c=e[o],u=n[o],d=Jd(c,u);if(!d.valid)return{valid:!1,mergeErrorPath:[o,...d.mergeErrorPath]};a.push(d.data)}return{valid:!0,data:a}}return{valid:!1,mergeErrorPath:[]}}function Wg(e,n,a){const o=new Map;let c;for(const m of n.issues)if(m.code==="unrecognized_keys"){c??(c=m);for(const p of m.keys)o.has(p)||o.set(p,{}),o.get(p).l=!0}else e.issues.push(m);for(const m of a.issues)if(m.code==="unrecognized_keys")for(const p of m.keys)o.has(p)||o.set(p,{}),o.get(p).r=!0;else e.issues.push(m);const u=[...o].filter(([,m])=>m.l&&m.r).map(([m])=>m);if(u.length&&c&&e.issues.push({...c,keys:u}),ei(e))return e;const d=Jd(n.value,a.value);if(!d.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(d.mergeErrorPath)}`);return e.value=d.data,e}const Ww=xe("$ZodRecord",(e,n)=>{vn.init(e,n),e._zod.parse=(a,o)=>{const c=a.value;if(!ri(c))return a.issues.push({expected:"record",code:"invalid_type",input:c,inst:e}),a;const u=[],d=n.keyType._zod.values;if(d){a.value={};const m=new Set;for(const v of d)if(typeof v=="string"||typeof v=="number"||typeof v=="symbol"){m.add(typeof v=="number"?v.toString():v);const x=n.valueType._zod.run({value:c[v],issues:[]},o);x instanceof Promise?u.push(x.then(b=>{b.issues.length&&a.issues.push(...ti(v,b.issues)),a.value[v]=b.value})):(x.issues.length&&a.issues.push(...ti(v,x.issues)),a.value[v]=x.value)}let p;for(const v in c)m.has(v)||(p=p??[],p.push(v));p&&p.length>0&&a.issues.push({code:"unrecognized_keys",input:c,inst:e,keys:p})}else{a.value={};for(const m of Reflect.ownKeys(c)){if(m==="__proto__")continue;let p=n.keyType._zod.run({value:m,issues:[]},o);if(p instanceof Promise)throw new Error("Async schemas not supported in object keys currently");if(typeof m=="string"&&J0.test(m)&&p.issues.length&&p.issues.some(b=>b.code==="invalid_type"&&b.expected==="number")){const b=n.keyType._zod.run({value:Number(m),issues:[]},o);if(b instanceof Promise)throw new Error("Async schemas not supported in object keys currently");b.issues.length===0&&(p=b)}if(p.issues.length){n.mode==="loose"?a.value[m]=c[m]:a.issues.push({code:"invalid_key",origin:"record",issues:p.issues.map(b=>Fa(b,o,Va())),input:m,path:[m],inst:e});continue}const x=n.valueType._zod.run({value:c[m],issues:[]},o);x instanceof Promise?u.push(x.then(b=>{b.issues.length&&a.issues.push(...ti(m,b.issues)),a.value[p.value]=b.value})):(x.issues.length&&a.issues.push(...ti(m,x.issues)),a.value[p.value]=x.value)}}return u.length?Promise.all(u).then(()=>a):a}}),Xw=xe("$ZodEnum",(e,n)=>{vn.init(e,n);const a=q0(n.entries),o=new Set(a);e._zod.values=o,e._zod.pattern=new RegExp(`^(${a.filter(c=>c2.has(typeof c)).map(c=>typeof c=="string"?ii(c):c.toString()).join("|")})$`),e._zod.parse=(c,u)=>{const d=c.value;return o.has(d)||c.issues.push({code:"invalid_value",values:a,input:d,inst:e}),c}}),Qw=xe("$ZodLiteral",(e,n)=>{if(vn.init(e,n),n.values.length===0)throw new Error("Cannot create literal schema with no valid values");const a=new Set(n.values);e._zod.values=a,e._zod.pattern=new RegExp(`^(${n.values.map(o=>typeof o=="string"?ii(o):o?ii(o.toString()):String(o)).join("|")})$`),e._zod.parse=(o,c)=>{const u=o.value;return a.has(u)||o.issues.push({code:"invalid_value",values:n.values,input:u,inst:e}),o}}),Jw=xe("$ZodTransform",(e,n)=>{vn.init(e,n),e._zod.parse=(a,o)=>{if(o.direction==="backward")throw new H0(e.constructor.name);const c=n.transform(a.value,a);if(o.async)return(c instanceof Promise?c:Promise.resolve(c)).then(d=>(a.value=d,a));if(c instanceof Promise)throw new ni;return a.value=c,a}});function Xg(e,n){return e.issues.length&&n===void 0?{issues:[],value:void 0}:e}const lx=xe("$ZodOptional",(e,n)=>{vn.init(e,n),e._zod.optin="optional",e._zod.optout="optional",Ft(e._zod,"values",()=>n.innerType._zod.values?new Set([...n.innerType._zod.values,void 0]):void 0),Ft(e._zod,"pattern",()=>{const a=n.innerType._zod.pattern;return a?new RegExp(`^(${Nf(a.source)})?$`):void 0}),e._zod.parse=(a,o)=>{if(n.innerType._zod.optin==="optional"){const c=n.innerType._zod.run(a,o);return c instanceof Promise?c.then(u=>Xg(u,a.value)):Xg(c,a.value)}return a.value===void 0?a:n.innerType._zod.run(a,o)}}),eN=xe("$ZodExactOptional",(e,n)=>{lx.init(e,n),Ft(e._zod,"values",()=>n.innerType._zod.values),Ft(e._zod,"pattern",()=>n.innerType._zod.pattern),e._zod.parse=(a,o)=>n.innerType._zod.run(a,o)}),tN=xe("$ZodNullable",(e,n)=>{vn.init(e,n),Ft(e._zod,"optin",()=>n.innerType._zod.optin),Ft(e._zod,"optout",()=>n.innerType._zod.optout),Ft(e._zod,"pattern",()=>{const a=n.innerType._zod.pattern;return a?new RegExp(`^(${Nf(a.source)}|null)$`):void 0}),Ft(e._zod,"values",()=>n.innerType._zod.values?new Set([...n.innerType._zod.values,null]):void 0),e._zod.parse=(a,o)=>a.value===null?a:n.innerType._zod.run(a,o)}),nN=xe("$ZodDefault",(e,n)=>{vn.init(e,n),e._zod.optin="optional",Ft(e._zod,"values",()=>n.innerType._zod.values),e._zod.parse=(a,o)=>{if(o.direction==="backward")return n.innerType._zod.run(a,o);if(a.value===void 0)return a.value=n.defaultValue,a;const c=n.innerType._zod.run(a,o);return c instanceof Promise?c.then(u=>Qg(u,n)):Qg(c,n)}});function Qg(e,n){return e.value===void 0&&(e.value=n.defaultValue),e}const sN=xe("$ZodPrefault",(e,n)=>{vn.init(e,n),e._zod.optin="optional",Ft(e._zod,"values",()=>n.innerType._zod.values),e._zod.parse=(a,o)=>(o.direction==="backward"||a.value===void 0&&(a.value=n.defaultValue),n.innerType._zod.run(a,o))}),aN=xe("$ZodNonOptional",(e,n)=>{vn.init(e,n),Ft(e._zod,"values",()=>{const a=n.innerType._zod.values;return a?new Set([...a].filter(o=>o!==void 0)):void 0}),e._zod.parse=(a,o)=>{const c=n.innerType._zod.run(a,o);return c instanceof Promise?c.then(u=>Jg(u,e)):Jg(c,e)}});function Jg(e,n){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:n}),e}const rN=xe("$ZodCatch",(e,n)=>{vn.init(e,n),Ft(e._zod,"optin",()=>n.innerType._zod.optin),Ft(e._zod,"optout",()=>n.innerType._zod.optout),Ft(e._zod,"values",()=>n.innerType._zod.values),e._zod.parse=(a,o)=>{if(o.direction==="backward")return n.innerType._zod.run(a,o);const c=n.innerType._zod.run(a,o);return c instanceof Promise?c.then(u=>(a.value=u.value,u.issues.length&&(a.value=n.catchValue({...a,error:{issues:u.issues.map(d=>Fa(d,o,Va()))},input:a.value}),a.issues=[]),a)):(a.value=c.value,c.issues.length&&(a.value=n.catchValue({...a,error:{issues:c.issues.map(u=>Fa(u,o,Va()))},input:a.value}),a.issues=[]),a)}}),iN=xe("$ZodPipe",(e,n)=>{vn.init(e,n),Ft(e._zod,"values",()=>n.in._zod.values),Ft(e._zod,"optin",()=>n.in._zod.optin),Ft(e._zod,"optout",()=>n.out._zod.optout),Ft(e._zod,"propValues",()=>n.in._zod.propValues),e._zod.parse=(a,o)=>{if(o.direction==="backward"){const u=n.out._zod.run(a,o);return u instanceof Promise?u.then(d=>Bl(d,n.in,o)):Bl(u,n.in,o)}const c=n.in._zod.run(a,o);return c instanceof Promise?c.then(u=>Bl(u,n.out,o)):Bl(c,n.out,o)}});function Bl(e,n,a){return e.issues.length?(e.aborted=!0,e):n._zod.run({value:e.value,issues:e.issues},a)}const oN=xe("$ZodReadonly",(e,n)=>{vn.init(e,n),Ft(e._zod,"propValues",()=>n.innerType._zod.propValues),Ft(e._zod,"values",()=>n.innerType._zod.values),Ft(e._zod,"optin",()=>{var a,o;return(o=(a=n.innerType)==null?void 0:a._zod)==null?void 0:o.optin}),Ft(e._zod,"optout",()=>{var a,o;return(o=(a=n.innerType)==null?void 0:a._zod)==null?void 0:o.optout}),e._zod.parse=(a,o)=>{if(o.direction==="backward")return n.innerType._zod.run(a,o);const c=n.innerType._zod.run(a,o);return c instanceof Promise?c.then(ev):ev(c)}});function ev(e){return e.value=Object.freeze(e.value),e}const lN=xe("$ZodCustom",(e,n)=>{Ss.init(e,n),vn.init(e,n),e._zod.parse=(a,o)=>a,e._zod.check=a=>{const o=a.value,c=n.fn(o);if(c instanceof Promise)return c.then(u=>tv(u,a,o,e));tv(c,a,o,e)}});function tv(e,n,a,o){if(!e){const c={code:"custom",input:a,inst:o,path:[...o._zod.def.path??[]],continue:!o._zod.def.abort};o._zod.def.params&&(c.params=o._zod.def.params),n.issues.push(vo(c))}}var nv;class cN{constructor(){this._map=new WeakMap,this._idmap=new Map}add(n,...a){const o=a[0];return this._map.set(n,o),o&&typeof o=="object"&&"id"in o&&this._idmap.set(o.id,n),this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(n){const a=this._map.get(n);return a&&typeof a=="object"&&"id"in a&&this._idmap.delete(a.id),this._map.delete(n),this}get(n){const a=n._zod.parent;if(a){const o={...this.get(a)??{}};delete o.id;const c={...o,...this._map.get(n)};return Object.keys(c).length?c:void 0}return this._map.get(n)}has(n){return this._map.has(n)}}function uN(){return new cN}(nv=globalThis).__zod_globalRegistry??(nv.__zod_globalRegistry=uN());const fo=globalThis.__zod_globalRegistry;function dN(e,n){return new e({type:"string",...at(n)})}function fN(e,n){return new e({type:"string",format:"email",check:"string_format",abort:!1,...at(n)})}function sv(e,n){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...at(n)})}function hN(e,n){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...at(n)})}function mN(e,n){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...at(n)})}function pN(e,n){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...at(n)})}function gN(e,n){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...at(n)})}function vN(e,n){return new e({type:"string",format:"url",check:"string_format",abort:!1,...at(n)})}function xN(e,n){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...at(n)})}function yN(e,n){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...at(n)})}function bN(e,n){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...at(n)})}function SN(e,n){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...at(n)})}function jN(e,n){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...at(n)})}function wN(e,n){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...at(n)})}function NN(e,n){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...at(n)})}function EN(e,n){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...at(n)})}function _N(e,n){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...at(n)})}function CN(e,n){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...at(n)})}function TN(e,n){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...at(n)})}function kN(e,n){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...at(n)})}function RN(e,n){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...at(n)})}function AN(e,n){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...at(n)})}function MN(e,n){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...at(n)})}function ON(e,n){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...at(n)})}function zN(e,n){return new e({type:"string",format:"date",check:"string_format",...at(n)})}function UN(e,n){return new e({type:"string",format:"time",check:"string_format",precision:null,...at(n)})}function LN(e,n){return new e({type:"string",format:"duration",check:"string_format",...at(n)})}function DN(e,n){return new e({type:"number",checks:[],...at(n)})}function BN(e,n){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",...at(n)})}function $N(e,n){return new e({type:"boolean",...at(n)})}function IN(e){return new e({type:"unknown"})}function PN(e,n){return new e({type:"never",...at(n)})}function av(e,n){return new tx({check:"less_than",...at(n),value:e,inclusive:!1})}function Ed(e,n){return new tx({check:"less_than",...at(n),value:e,inclusive:!0})}function rv(e,n){return new nx({check:"greater_than",...at(n),value:e,inclusive:!1})}function _d(e,n){return new nx({check:"greater_than",...at(n),value:e,inclusive:!0})}function iv(e,n){return new nw({check:"multiple_of",...at(n),value:e})}function cx(e,n){return new aw({check:"max_length",...at(n),maximum:e})}function Wl(e,n){return new rw({check:"min_length",...at(n),minimum:e})}function ux(e,n){return new iw({check:"length_equals",...at(n),length:e})}function HN(e,n){return new ow({check:"string_format",format:"regex",...at(n),pattern:e})}function ZN(e){return new lw({check:"string_format",format:"lowercase",...at(e)})}function qN(e){return new cw({check:"string_format",format:"uppercase",...at(e)})}function VN(e,n){return new uw({check:"string_format",format:"includes",...at(n),includes:e})}function FN(e,n){return new dw({check:"string_format",format:"starts_with",...at(n),prefix:e})}function GN(e,n){return new fw({check:"string_format",format:"ends_with",...at(n),suffix:e})}function fi(e){return new hw({check:"overwrite",tx:e})}function YN(e){return fi(n=>n.normalize(e))}function KN(){return fi(e=>e.trim())}function WN(){return fi(e=>e.toLowerCase())}function XN(){return fi(e=>e.toUpperCase())}function QN(){return fi(e=>o2(e))}function JN(e,n,a){return new e({type:"array",element:n,...at(a)})}function eE(e,n,a){return new e({type:"custom",check:"custom",fn:n,...at(a)})}function tE(e){const n=nE(a=>(a.addIssue=o=>{if(typeof o=="string")a.issues.push(vo(o,a.value,n._zod.def));else{const c=o;c.fatal&&(c.continue=!1),c.code??(c.code="custom"),c.input??(c.input=a.value),c.inst??(c.inst=n),c.continue??(c.continue=!n._zod.def.abort),a.issues.push(vo(c))}},e(a.value,a)));return n}function nE(e,n){const a=new Ss({check:"custom",...at(n)});return a._zod.check=e,a}function dx(e){let n=(e==null?void 0:e.target)??"draft-2020-12";return n==="draft-4"&&(n="draft-04"),n==="draft-7"&&(n="draft-07"),{processors:e.processors??{},metadataRegistry:(e==null?void 0:e.metadata)??fo,target:n,unrepresentable:(e==null?void 0:e.unrepresentable)??"throw",override:(e==null?void 0:e.override)??(()=>{}),io:(e==null?void 0:e.io)??"output",counter:0,seen:new Map,cycles:(e==null?void 0:e.cycles)??"ref",reused:(e==null?void 0:e.reused)??"inline",external:(e==null?void 0:e.external)??void 0}}function $n(e,n,a={path:[],schemaPath:[]}){var x,b;var o;const c=e._zod.def,u=n.seen.get(e);if(u)return u.count++,a.schemaPath.includes(e)&&(u.cycle=a.path),u.schema;const d={schema:{},count:1,cycle:void 0,path:a.path};n.seen.set(e,d);const m=(b=(x=e._zod).toJSONSchema)==null?void 0:b.call(x);if(m)d.schema=m;else{const w={...a,schemaPath:[...a.schemaPath,e],path:a.path};if(e._zod.processJSONSchema)e._zod.processJSONSchema(n,d.schema,w);else{const C=d.schema,E=n.processors[c.type];if(!E)throw new Error(`[toJSONSchema]: Non-representable type encountered: ${c.type}`);E(e,n,C,w)}const _=e._zod.parent;_&&(d.ref||(d.ref=_),$n(_,n,w),n.seen.get(_).isParent=!0)}const p=n.metadataRegistry.get(e);return p&&Object.assign(d.schema,p),n.io==="input"&&ls(e)&&(delete d.schema.examples,delete d.schema.default),n.io==="input"&&d.schema._prefault&&((o=d.schema).default??(o.default=d.schema._prefault)),delete d.schema._prefault,n.seen.get(e).schema}function fx(e,n){var d,m,p,v;const a=e.seen.get(n);if(!a)throw new Error("Unprocessed schema. This is a bug in Zod.");const o=new Map;for(const x of e.seen.entries()){const b=(d=e.metadataRegistry.get(x[0]))==null?void 0:d.id;if(b){const w=o.get(b);if(w&&w!==x[0])throw new Error(`Duplicate schema id "${b}" detected during JSON Schema conversion. Two different schemas cannot share the same id when converted together.`);o.set(b,x[0])}}const c=x=>{var E;const b=e.target==="draft-2020-12"?"$defs":"definitions";if(e.external){const N=(E=e.external.registry.get(x[0]))==null?void 0:E.id,z=e.external.uri??(U=>U);if(N)return{ref:z(N)};const O=x[1].defId??x[1].schema.id??`schema${e.counter++}`;return x[1].defId=O,{defId:O,ref:`${z("__shared")}#/${b}/${O}`}}if(x[1]===a)return{ref:"#"};const _=`#/${b}/`,C=x[1].schema.id??`__schema${e.counter++}`;return{defId:C,ref:_+C}},u=x=>{if(x[1].schema.$ref)return;const b=x[1],{ref:w,defId:_}=c(x);b.def={...b.schema},_&&(b.defId=_);const C=b.schema;for(const E in C)delete C[E];C.$ref=w};if(e.cycles==="throw")for(const x of e.seen.entries()){const b=x[1];if(b.cycle)throw new Error(`Cycle detected: #/${(m=b.cycle)==null?void 0:m.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(const x of e.seen.entries()){const b=x[1];if(n===x[0]){u(x);continue}if(e.external){const _=(p=e.external.registry.get(x[0]))==null?void 0:p.id;if(n!==x[0]&&_){u(x);continue}}if((v=e.metadataRegistry.get(x[0]))==null?void 0:v.id){u(x);continue}if(b.cycle){u(x);continue}if(b.count>1&&e.reused==="ref"){u(x);continue}}}function hx(e,n){var d,m,p;const a=e.seen.get(n);if(!a)throw new Error("Unprocessed schema. This is a bug in Zod.");const o=v=>{const x=e.seen.get(v);if(x.ref===null)return;const b=x.def??x.schema,w={...b},_=x.ref;if(x.ref=null,_){o(_);const E=e.seen.get(_),N=E.schema;if(N.$ref&&(e.target==="draft-07"||e.target==="draft-04"||e.target==="openapi-3.0")?(b.allOf=b.allOf??[],b.allOf.push(N)):Object.assign(b,N),Object.assign(b,w),v._zod.parent===_)for(const O in b)O==="$ref"||O==="allOf"||O in w||delete b[O];if(N.$ref)for(const O in b)O==="$ref"||O==="allOf"||O in E.def&&JSON.stringify(b[O])===JSON.stringify(E.def[O])&&delete b[O]}const C=v._zod.parent;if(C&&C!==_){o(C);const E=e.seen.get(C);if(E!=null&&E.schema.$ref&&(b.$ref=E.schema.$ref,E.def))for(const N in b)N==="$ref"||N==="allOf"||N in E.def&&JSON.stringify(b[N])===JSON.stringify(E.def[N])&&delete b[N]}e.override({zodSchema:v,jsonSchema:b,path:x.path??[]})};for(const v of[...e.seen.entries()].reverse())o(v[0]);const c={};if(e.target==="draft-2020-12"?c.$schema="https://json-schema.org/draft/2020-12/schema":e.target==="draft-07"?c.$schema="http://json-schema.org/draft-07/schema#":e.target==="draft-04"?c.$schema="http://json-schema.org/draft-04/schema#":e.target,(d=e.external)!=null&&d.uri){const v=(m=e.external.registry.get(n))==null?void 0:m.id;if(!v)throw new Error("Schema is missing an `id` property");c.$id=e.external.uri(v)}Object.assign(c,a.def??a.schema);const u=((p=e.external)==null?void 0:p.defs)??{};for(const v of e.seen.entries()){const x=v[1];x.def&&x.defId&&(u[x.defId]=x.def)}e.external||Object.keys(u).length>0&&(e.target==="draft-2020-12"?c.$defs=u:c.definitions=u);try{const v=JSON.parse(JSON.stringify(c));return Object.defineProperty(v,"~standard",{value:{...n["~standard"],jsonSchema:{input:Xl(n,"input",e.processors),output:Xl(n,"output",e.processors)}},enumerable:!1,writable:!1}),v}catch{throw new Error("Error converting schema to JSON.")}}function ls(e,n){const a=n??{seen:new Set};if(a.seen.has(e))return!1;a.seen.add(e);const o=e._zod.def;if(o.type==="transform")return!0;if(o.type==="array")return ls(o.element,a);if(o.type==="set")return ls(o.valueType,a);if(o.type==="lazy")return ls(o.getter(),a);if(o.type==="promise"||o.type==="optional"||o.type==="nonoptional"||o.type==="nullable"||o.type==="readonly"||o.type==="default"||o.type==="prefault")return ls(o.innerType,a);if(o.type==="intersection")return ls(o.left,a)||ls(o.right,a);if(o.type==="record"||o.type==="map")return ls(o.keyType,a)||ls(o.valueType,a);if(o.type==="pipe")return ls(o.in,a)||ls(o.out,a);if(o.type==="object"){for(const c in o.shape)if(ls(o.shape[c],a))return!0;return!1}if(o.type==="union"){for(const c of o.options)if(ls(c,a))return!0;return!1}if(o.type==="tuple"){for(const c of o.items)if(ls(c,a))return!0;return!!(o.rest&&ls(o.rest,a))}return!1}const sE=(e,n={})=>a=>{const o=dx({...a,processors:n});return $n(e,o),fx(o,e),hx(o,e)},Xl=(e,n,a={})=>o=>{const{libraryOptions:c,target:u}=o??{},d=dx({...c??{},target:u,io:n,processors:a});return $n(e,d),fx(d,e),hx(d,e)},aE={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},rE=(e,n,a,o)=>{const c=a;c.type="string";const{minimum:u,maximum:d,format:m,patterns:p,contentEncoding:v}=e._zod.bag;if(typeof u=="number"&&(c.minLength=u),typeof d=="number"&&(c.maxLength=d),m&&(c.format=aE[m]??m,c.format===""&&delete c.format,m==="time"&&delete c.format),v&&(c.contentEncoding=v),p&&p.size>0){const x=[...p];x.length===1?c.pattern=x[0].source:x.length>1&&(c.allOf=[...x.map(b=>({...n.target==="draft-07"||n.target==="draft-04"||n.target==="openapi-3.0"?{type:"string"}:{},pattern:b.source}))])}},iE=(e,n,a,o)=>{const c=a,{minimum:u,maximum:d,format:m,multipleOf:p,exclusiveMaximum:v,exclusiveMinimum:x}=e._zod.bag;typeof m=="string"&&m.includes("int")?c.type="integer":c.type="number",typeof x=="number"&&(n.target==="draft-04"||n.target==="openapi-3.0"?(c.minimum=x,c.exclusiveMinimum=!0):c.exclusiveMinimum=x),typeof u=="number"&&(c.minimum=u,typeof x=="number"&&n.target!=="draft-04"&&(x>=u?delete c.minimum:delete c.exclusiveMinimum)),typeof v=="number"&&(n.target==="draft-04"||n.target==="openapi-3.0"?(c.maximum=v,c.exclusiveMaximum=!0):c.exclusiveMaximum=v),typeof d=="number"&&(c.maximum=d,typeof v=="number"&&n.target!=="draft-04"&&(v<=d?delete c.maximum:delete c.exclusiveMaximum)),typeof p=="number"&&(c.multipleOf=p)},oE=(e,n,a,o)=>{a.type="boolean"},lE=(e,n,a,o)=>{a.not={}},cE=(e,n,a,o)=>{},uE=(e,n,a,o)=>{const c=e._zod.def,u=q0(c.entries);u.every(d=>typeof d=="number")&&(a.type="number"),u.every(d=>typeof d=="string")&&(a.type="string"),a.enum=u},dE=(e,n,a,o)=>{const c=e._zod.def,u=[];for(const d of c.values)if(d===void 0){if(n.unrepresentable==="throw")throw new Error("Literal `undefined` cannot be represented in JSON Schema")}else if(typeof d=="bigint"){if(n.unrepresentable==="throw")throw new Error("BigInt literals cannot be represented in JSON Schema");u.push(Number(d))}else u.push(d);if(u.length!==0)if(u.length===1){const d=u[0];a.type=d===null?"null":typeof d,n.target==="draft-04"||n.target==="openapi-3.0"?a.enum=[d]:a.const=d}else u.every(d=>typeof d=="number")&&(a.type="number"),u.every(d=>typeof d=="string")&&(a.type="string"),u.every(d=>typeof d=="boolean")&&(a.type="boolean"),u.every(d=>d===null)&&(a.type="null"),a.enum=u},fE=(e,n,a,o)=>{if(n.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema")},hE=(e,n,a,o)=>{if(n.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema")},mE=(e,n,a,o)=>{const c=a,u=e._zod.def,{minimum:d,maximum:m}=e._zod.bag;typeof d=="number"&&(c.minItems=d),typeof m=="number"&&(c.maxItems=m),c.type="array",c.items=$n(u.element,n,{...o,path:[...o.path,"items"]})},pE=(e,n,a,o)=>{var v;const c=a,u=e._zod.def;c.type="object",c.properties={};const d=u.shape;for(const x in d)c.properties[x]=$n(d[x],n,{...o,path:[...o.path,"properties",x]});const m=new Set(Object.keys(d)),p=new Set([...m].filter(x=>{const b=u.shape[x]._zod;return n.io==="input"?b.optin===void 0:b.optout===void 0}));p.size>0&&(c.required=Array.from(p)),((v=u.catchall)==null?void 0:v._zod.def.type)==="never"?c.additionalProperties=!1:u.catchall?u.catchall&&(c.additionalProperties=$n(u.catchall,n,{...o,path:[...o.path,"additionalProperties"]})):n.io==="output"&&(c.additionalProperties=!1)},gE=(e,n,a,o)=>{const c=e._zod.def,u=c.inclusive===!1,d=c.options.map((m,p)=>$n(m,n,{...o,path:[...o.path,u?"oneOf":"anyOf",p]}));u?a.oneOf=d:a.anyOf=d},vE=(e,n,a,o)=>{const c=e._zod.def,u=$n(c.left,n,{...o,path:[...o.path,"allOf",0]}),d=$n(c.right,n,{...o,path:[...o.path,"allOf",1]}),m=v=>"allOf"in v&&Object.keys(v).length===1,p=[...m(u)?u.allOf:[u],...m(d)?d.allOf:[d]];a.allOf=p},xE=(e,n,a,o)=>{const c=a,u=e._zod.def;c.type="object";const d=u.keyType,m=d._zod.bag,p=m==null?void 0:m.patterns;if(u.mode==="loose"&&p&&p.size>0){const x=$n(u.valueType,n,{...o,path:[...o.path,"patternProperties","*"]});c.patternProperties={};for(const b of p)c.patternProperties[b.source]=x}else(n.target==="draft-07"||n.target==="draft-2020-12")&&(c.propertyNames=$n(u.keyType,n,{...o,path:[...o.path,"propertyNames"]})),c.additionalProperties=$n(u.valueType,n,{...o,path:[...o.path,"additionalProperties"]});const v=d._zod.values;if(v){const x=[...v].filter(b=>typeof b=="string"||typeof b=="number");x.length>0&&(c.required=x)}},yE=(e,n,a,o)=>{const c=e._zod.def,u=$n(c.innerType,n,o),d=n.seen.get(e);n.target==="openapi-3.0"?(d.ref=c.innerType,a.nullable=!0):a.anyOf=[u,{type:"null"}]},bE=(e,n,a,o)=>{const c=e._zod.def;$n(c.innerType,n,o);const u=n.seen.get(e);u.ref=c.innerType},SE=(e,n,a,o)=>{const c=e._zod.def;$n(c.innerType,n,o);const u=n.seen.get(e);u.ref=c.innerType,a.default=JSON.parse(JSON.stringify(c.defaultValue))},jE=(e,n,a,o)=>{const c=e._zod.def;$n(c.innerType,n,o);const u=n.seen.get(e);u.ref=c.innerType,n.io==="input"&&(a._prefault=JSON.parse(JSON.stringify(c.defaultValue)))},wE=(e,n,a,o)=>{const c=e._zod.def;$n(c.innerType,n,o);const u=n.seen.get(e);u.ref=c.innerType;let d;try{d=c.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}a.default=d},NE=(e,n,a,o)=>{const c=e._zod.def,u=n.io==="input"?c.in._zod.def.type==="transform"?c.out:c.in:c.out;$n(u,n,o);const d=n.seen.get(e);d.ref=u},EE=(e,n,a,o)=>{const c=e._zod.def;$n(c.innerType,n,o);const u=n.seen.get(e);u.ref=c.innerType,a.readOnly=!0},mx=(e,n,a,o)=>{const c=e._zod.def;$n(c.innerType,n,o);const u=n.seen.get(e);u.ref=c.innerType},_E=xe("ZodISODateTime",(e,n)=>{Cw.init(e,n),yn.init(e,n)});function CE(e){return ON(_E,e)}const TE=xe("ZodISODate",(e,n)=>{Tw.init(e,n),yn.init(e,n)});function kE(e){return zN(TE,e)}const RE=xe("ZodISOTime",(e,n)=>{kw.init(e,n),yn.init(e,n)});function AE(e){return UN(RE,e)}const ME=xe("ZodISODuration",(e,n)=>{Rw.init(e,n),yn.init(e,n)});function OE(e){return LN(ME,e)}const zE=(e,n)=>{Y0.init(e,n),e.name="ZodError",Object.defineProperties(e,{format:{value:a=>b2(e,a)},flatten:{value:a=>y2(e,a)},addIssue:{value:a=>{e.issues.push(a),e.message=JSON.stringify(e.issues,Qd,2)}},addIssues:{value:a=>{e.issues.push(...a),e.message=JSON.stringify(e.issues,Qd,2)}},isEmpty:{get(){return e.issues.length===0}}})},Zs=xe("ZodError",zE,{Parent:Error}),UE=_f(Zs),LE=Cf(Zs),DE=rc(Zs),BE=ic(Zs),$E=w2(Zs),IE=N2(Zs),PE=E2(Zs),HE=_2(Zs),ZE=C2(Zs),qE=T2(Zs),VE=k2(Zs),FE=R2(Zs),xn=xe("ZodType",(e,n)=>(vn.init(e,n),Object.assign(e["~standard"],{jsonSchema:{input:Xl(e,"input"),output:Xl(e,"output")}}),e.toJSONSchema=sE(e,{}),e.def=n,e.type=n.type,Object.defineProperty(e,"_def",{value:n}),e.check=(...a)=>e.clone(Ya(n,{checks:[...n.checks??[],...a.map(o=>typeof o=="function"?{_zod:{check:o,def:{check:"custom"},onattach:[]}}:o)]}),{parent:!0}),e.with=e.check,e.clone=(a,o)=>Ka(e,a,o),e.brand=()=>e,e.register=((a,o)=>(a.add(e,o),e)),e.parse=(a,o)=>UE(e,a,o,{callee:e.parse}),e.safeParse=(a,o)=>DE(e,a,o),e.parseAsync=async(a,o)=>LE(e,a,o,{callee:e.parseAsync}),e.safeParseAsync=async(a,o)=>BE(e,a,o),e.spa=e.safeParseAsync,e.encode=(a,o)=>$E(e,a,o),e.decode=(a,o)=>IE(e,a,o),e.encodeAsync=async(a,o)=>PE(e,a,o),e.decodeAsync=async(a,o)=>HE(e,a,o),e.safeEncode=(a,o)=>ZE(e,a,o),e.safeDecode=(a,o)=>qE(e,a,o),e.safeEncodeAsync=async(a,o)=>VE(e,a,o),e.safeDecodeAsync=async(a,o)=>FE(e,a,o),e.refine=(a,o)=>e.check($_(a,o)),e.superRefine=a=>e.check(I_(a)),e.overwrite=a=>e.check(fi(a)),e.optional=()=>cv(e),e.exactOptional=()=>__(e),e.nullable=()=>uv(e),e.nullish=()=>cv(uv(e)),e.nonoptional=a=>M_(e,a),e.array=()=>gn(e),e.or=a=>wo([e,a]),e.and=a=>b_(e,a),e.transform=a=>dv(e,N_(a)),e.default=a=>k_(e,a),e.prefault=a=>A_(e,a),e.catch=a=>z_(e,a),e.pipe=a=>dv(e,a),e.readonly=()=>D_(e),e.describe=a=>{const o=e.clone();return fo.add(o,{description:a}),o},Object.defineProperty(e,"description",{get(){var a;return(a=fo.get(e))==null?void 0:a.description},configurable:!0}),e.meta=(...a)=>{if(a.length===0)return fo.get(e);const o=e.clone();return fo.add(o,a[0]),o},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e.apply=a=>a(e),e)),px=xe("_ZodString",(e,n)=>{Tf.init(e,n),xn.init(e,n),e._zod.processJSONSchema=(o,c,u)=>rE(e,o,c);const a=e._zod.bag;e.format=a.format??null,e.minLength=a.minimum??null,e.maxLength=a.maximum??null,e.regex=(...o)=>e.check(HN(...o)),e.includes=(...o)=>e.check(VN(...o)),e.startsWith=(...o)=>e.check(FN(...o)),e.endsWith=(...o)=>e.check(GN(...o)),e.min=(...o)=>e.check(Wl(...o)),e.max=(...o)=>e.check(cx(...o)),e.length=(...o)=>e.check(ux(...o)),e.nonempty=(...o)=>e.check(Wl(1,...o)),e.lowercase=o=>e.check(ZN(o)),e.uppercase=o=>e.check(qN(o)),e.trim=()=>e.check(KN()),e.normalize=(...o)=>e.check(YN(...o)),e.toLowerCase=()=>e.check(WN()),e.toUpperCase=()=>e.check(XN()),e.slugify=()=>e.check(QN())}),GE=xe("ZodString",(e,n)=>{Tf.init(e,n),px.init(e,n),e.email=a=>e.check(fN(YE,a)),e.url=a=>e.check(vN(KE,a)),e.jwt=a=>e.check(MN(u_,a)),e.emoji=a=>e.check(xN(WE,a)),e.guid=a=>e.check(sv(ov,a)),e.uuid=a=>e.check(hN($l,a)),e.uuidv4=a=>e.check(mN($l,a)),e.uuidv6=a=>e.check(pN($l,a)),e.uuidv7=a=>e.check(gN($l,a)),e.nanoid=a=>e.check(yN(XE,a)),e.guid=a=>e.check(sv(ov,a)),e.cuid=a=>e.check(bN(QE,a)),e.cuid2=a=>e.check(SN(JE,a)),e.ulid=a=>e.check(jN(e_,a)),e.base64=a=>e.check(kN(o_,a)),e.base64url=a=>e.check(RN(l_,a)),e.xid=a=>e.check(wN(t_,a)),e.ksuid=a=>e.check(NN(n_,a)),e.ipv4=a=>e.check(EN(s_,a)),e.ipv6=a=>e.check(_N(a_,a)),e.cidrv4=a=>e.check(CN(r_,a)),e.cidrv6=a=>e.check(TN(i_,a)),e.e164=a=>e.check(AN(c_,a)),e.datetime=a=>e.check(CE(a)),e.date=a=>e.check(kE(a)),e.time=a=>e.check(AE(a)),e.duration=a=>e.check(OE(a))});function Q(e){return dN(GE,e)}const yn=xe("ZodStringFormat",(e,n)=>{mn.init(e,n),px.init(e,n)}),YE=xe("ZodEmail",(e,n)=>{xw.init(e,n),yn.init(e,n)}),ov=xe("ZodGUID",(e,n)=>{gw.init(e,n),yn.init(e,n)}),$l=xe("ZodUUID",(e,n)=>{vw.init(e,n),yn.init(e,n)}),KE=xe("ZodURL",(e,n)=>{yw.init(e,n),yn.init(e,n)}),WE=xe("ZodEmoji",(e,n)=>{bw.init(e,n),yn.init(e,n)}),XE=xe("ZodNanoID",(e,n)=>{Sw.init(e,n),yn.init(e,n)}),QE=xe("ZodCUID",(e,n)=>{jw.init(e,n),yn.init(e,n)}),JE=xe("ZodCUID2",(e,n)=>{ww.init(e,n),yn.init(e,n)}),e_=xe("ZodULID",(e,n)=>{Nw.init(e,n),yn.init(e,n)}),t_=xe("ZodXID",(e,n)=>{Ew.init(e,n),yn.init(e,n)}),n_=xe("ZodKSUID",(e,n)=>{_w.init(e,n),yn.init(e,n)}),s_=xe("ZodIPv4",(e,n)=>{Aw.init(e,n),yn.init(e,n)}),a_=xe("ZodIPv6",(e,n)=>{Mw.init(e,n),yn.init(e,n)}),r_=xe("ZodCIDRv4",(e,n)=>{Ow.init(e,n),yn.init(e,n)}),i_=xe("ZodCIDRv6",(e,n)=>{zw.init(e,n),yn.init(e,n)}),o_=xe("ZodBase64",(e,n)=>{Uw.init(e,n),yn.init(e,n)}),l_=xe("ZodBase64URL",(e,n)=>{Dw.init(e,n),yn.init(e,n)}),c_=xe("ZodE164",(e,n)=>{Bw.init(e,n),yn.init(e,n)}),u_=xe("ZodJWT",(e,n)=>{Iw.init(e,n),yn.init(e,n)}),gx=xe("ZodNumber",(e,n)=>{ax.init(e,n),xn.init(e,n),e._zod.processJSONSchema=(o,c,u)=>iE(e,o,c),e.gt=(o,c)=>e.check(rv(o,c)),e.gte=(o,c)=>e.check(_d(o,c)),e.min=(o,c)=>e.check(_d(o,c)),e.lt=(o,c)=>e.check(av(o,c)),e.lte=(o,c)=>e.check(Ed(o,c)),e.max=(o,c)=>e.check(Ed(o,c)),e.int=o=>e.check(lv(o)),e.safe=o=>e.check(lv(o)),e.positive=o=>e.check(rv(0,o)),e.nonnegative=o=>e.check(_d(0,o)),e.negative=o=>e.check(av(0,o)),e.nonpositive=o=>e.check(Ed(0,o)),e.multipleOf=(o,c)=>e.check(iv(o,c)),e.step=(o,c)=>e.check(iv(o,c)),e.finite=()=>e;const a=e._zod.bag;e.minValue=Math.max(a.minimum??Number.NEGATIVE_INFINITY,a.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(a.maximum??Number.POSITIVE_INFINITY,a.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(a.format??"").includes("int")||Number.isSafeInteger(a.multipleOf??.5),e.isFinite=!0,e.format=a.format??null});function Be(e){return DN(gx,e)}const d_=xe("ZodNumberFormat",(e,n)=>{Pw.init(e,n),gx.init(e,n)});function lv(e){return BN(d_,e)}const f_=xe("ZodBoolean",(e,n)=>{Hw.init(e,n),xn.init(e,n),e._zod.processJSONSchema=(a,o,c)=>oE(e,a,o)});function ys(e){return $N(f_,e)}const h_=xe("ZodUnknown",(e,n)=>{Zw.init(e,n),xn.init(e,n),e._zod.processJSONSchema=(a,o,c)=>cE()});function Is(){return IN(h_)}const m_=xe("ZodNever",(e,n)=>{qw.init(e,n),xn.init(e,n),e._zod.processJSONSchema=(a,o,c)=>lE(e,a,o)});function p_(e){return PN(m_,e)}const g_=xe("ZodArray",(e,n)=>{Vw.init(e,n),xn.init(e,n),e._zod.processJSONSchema=(a,o,c)=>mE(e,a,o,c),e.element=n.element,e.min=(a,o)=>e.check(Wl(a,o)),e.nonempty=a=>e.check(Wl(1,a)),e.max=(a,o)=>e.check(cx(a,o)),e.length=(a,o)=>e.check(ux(a,o)),e.unwrap=()=>e.element});function gn(e,n){return JN(g_,e,n)}const v_=xe("ZodObject",(e,n)=>{Gw.init(e,n),xn.init(e,n),e._zod.processJSONSchema=(a,o,c)=>pE(e,a,o,c),Ft(e,"shape",()=>n.shape),e.keyof=()=>Xn(Object.keys(e._zod.def.shape)),e.catchall=a=>e.clone({...e._zod.def,catchall:a}),e.passthrough=()=>e.clone({...e._zod.def,catchall:Is()}),e.loose=()=>e.clone({...e._zod.def,catchall:Is()}),e.strict=()=>e.clone({...e._zod.def,catchall:p_()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=a=>m2(e,a),e.safeExtend=a=>p2(e,a),e.merge=a=>g2(e,a),e.pick=a=>f2(e,a),e.omit=a=>h2(e,a),e.partial=(...a)=>v2(xx,e,a[0]),e.required=(...a)=>x2(yx,e,a[0])});function Ae(e,n){const a={type:"object",shape:e??{},...at(n)};return new v_(a)}const vx=xe("ZodUnion",(e,n)=>{ox.init(e,n),xn.init(e,n),e._zod.processJSONSchema=(a,o,c)=>gE(e,a,o,c),e.options=n.options});function wo(e,n){return new vx({type:"union",options:e,...at(n)})}const x_=xe("ZodDiscriminatedUnion",(e,n)=>{vx.init(e,n),Yw.init(e,n)});function hi(e,n,a){return new x_({type:"union",options:n,discriminator:e,...at(a)})}const y_=xe("ZodIntersection",(e,n)=>{Kw.init(e,n),xn.init(e,n),e._zod.processJSONSchema=(a,o,c)=>vE(e,a,o,c)});function b_(e,n){return new y_({type:"intersection",left:e,right:n})}const S_=xe("ZodRecord",(e,n)=>{Ww.init(e,n),xn.init(e,n),e._zod.processJSONSchema=(a,o,c)=>xE(e,a,o,c),e.keyType=n.keyType,e.valueType=n.valueType});function kf(e,n,a){return new S_({type:"record",keyType:e,valueType:n,...at(a)})}const ef=xe("ZodEnum",(e,n)=>{Xw.init(e,n),xn.init(e,n),e._zod.processJSONSchema=(o,c,u)=>uE(e,o,c),e.enum=n.entries,e.options=Object.values(n.entries);const a=new Set(Object.keys(n.entries));e.extract=(o,c)=>{const u={};for(const d of o)if(a.has(d))u[d]=n.entries[d];else throw new Error(`Key ${d} not found in enum`);return new ef({...n,checks:[],...at(c),entries:u})},e.exclude=(o,c)=>{const u={...n.entries};for(const d of o)if(a.has(d))delete u[d];else throw new Error(`Key ${d} not found in enum`);return new ef({...n,checks:[],...at(c),entries:u})}});function Xn(e,n){const a=Array.isArray(e)?Object.fromEntries(e.map(o=>[o,o])):e;return new ef({type:"enum",entries:a,...at(n)})}const j_=xe("ZodLiteral",(e,n)=>{Qw.init(e,n),xn.init(e,n),e._zod.processJSONSchema=(a,o,c)=>dE(e,a,o),e.values=new Set(n.values),Object.defineProperty(e,"value",{get(){if(n.values.length>1)throw new Error("This schema contains multiple valid literal values. Use `.values` instead.");return n.values[0]}})});function Pt(e,n){return new j_({type:"literal",values:Array.isArray(e)?e:[e],...at(n)})}const w_=xe("ZodTransform",(e,n)=>{Jw.init(e,n),xn.init(e,n),e._zod.processJSONSchema=(a,o,c)=>hE(e,a),e._zod.parse=(a,o)=>{if(o.direction==="backward")throw new H0(e.constructor.name);a.addIssue=u=>{if(typeof u=="string")a.issues.push(vo(u,a.value,n));else{const d=u;d.fatal&&(d.continue=!1),d.code??(d.code="custom"),d.input??(d.input=a.value),d.inst??(d.inst=e),a.issues.push(vo(d))}};const c=n.transform(a.value,a);return c instanceof Promise?c.then(u=>(a.value=u,a)):(a.value=c,a)}});function N_(e){return new w_({type:"transform",transform:e})}const xx=xe("ZodOptional",(e,n)=>{lx.init(e,n),xn.init(e,n),e._zod.processJSONSchema=(a,o,c)=>mx(e,a,o,c),e.unwrap=()=>e._zod.def.innerType});function cv(e){return new xx({type:"optional",innerType:e})}const E_=xe("ZodExactOptional",(e,n)=>{eN.init(e,n),xn.init(e,n),e._zod.processJSONSchema=(a,o,c)=>mx(e,a,o,c),e.unwrap=()=>e._zod.def.innerType});function __(e){return new E_({type:"optional",innerType:e})}const C_=xe("ZodNullable",(e,n)=>{tN.init(e,n),xn.init(e,n),e._zod.processJSONSchema=(a,o,c)=>yE(e,a,o,c),e.unwrap=()=>e._zod.def.innerType});function uv(e){return new C_({type:"nullable",innerType:e})}const T_=xe("ZodDefault",(e,n)=>{nN.init(e,n),xn.init(e,n),e._zod.processJSONSchema=(a,o,c)=>SE(e,a,o,c),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function k_(e,n){return new T_({type:"default",innerType:e,get defaultValue(){return typeof n=="function"?n():F0(n)}})}const R_=xe("ZodPrefault",(e,n)=>{sN.init(e,n),xn.init(e,n),e._zod.processJSONSchema=(a,o,c)=>jE(e,a,o,c),e.unwrap=()=>e._zod.def.innerType});function A_(e,n){return new R_({type:"prefault",innerType:e,get defaultValue(){return typeof n=="function"?n():F0(n)}})}const yx=xe("ZodNonOptional",(e,n)=>{aN.init(e,n),xn.init(e,n),e._zod.processJSONSchema=(a,o,c)=>bE(e,a,o,c),e.unwrap=()=>e._zod.def.innerType});function M_(e,n){return new yx({type:"nonoptional",innerType:e,...at(n)})}const O_=xe("ZodCatch",(e,n)=>{rN.init(e,n),xn.init(e,n),e._zod.processJSONSchema=(a,o,c)=>wE(e,a,o,c),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function z_(e,n){return new O_({type:"catch",innerType:e,catchValue:typeof n=="function"?n:()=>n})}const U_=xe("ZodPipe",(e,n)=>{iN.init(e,n),xn.init(e,n),e._zod.processJSONSchema=(a,o,c)=>NE(e,a,o,c),e.in=n.in,e.out=n.out});function dv(e,n){return new U_({type:"pipe",in:e,out:n})}const L_=xe("ZodReadonly",(e,n)=>{oN.init(e,n),xn.init(e,n),e._zod.processJSONSchema=(a,o,c)=>EE(e,a,o,c),e.unwrap=()=>e._zod.def.innerType});function D_(e){return new L_({type:"readonly",innerType:e})}const B_=xe("ZodCustom",(e,n)=>{lN.init(e,n),xn.init(e,n),e._zod.processJSONSchema=(a,o,c)=>fE(e,a)});function $_(e,n={}){return eE(B_,e,n)}function I_(e){return tE(e)}function rs(e){return wo([e,Q()])}const P_=Ae({type:Xn(["text","thinking","tool_use","tool_result"]),text:Q().optional(),thinking:Q().optional(),signature:Q().optional(),id:Q().optional(),name:Q().optional(),input:Is().optional(),tool_use_id:Q().optional(),content:Q().optional(),is_error:ys().optional()}),H_=Ae({status:Xn(["completed","failed","timeout"]).optional(),prompt:Q().optional(),agentId:Q().optional(),content:gn(P_).optional(),totalDurationMs:Be().optional(),totalTokens:Be().optional(),totalToolUseCount:Be().optional()}),Z_=rs(H_),q_=Ae({stdout:Q().optional(),stderr:Q().optional(),interrupted:ys().optional(),isImage:ys().optional(),backgroundTaskId:Q().optional()}),V_=rs(q_),F_=Ae({filePath:Q().optional(),content:Q().optional(),numLines:Be().optional(),startLine:Be().optional(),totalLines:Be().optional()}),G_=Ae({originalWidth:Be().optional(),originalHeight:Be().optional(),displayWidth:Be().optional(),displayHeight:Be().optional()}),Y_=Ae({base64:Q().optional(),type:Q().optional(),originalSize:Be().optional(),dimensions:G_.optional()}),K_=Ae({type:Xn(["text","image"]).optional(),file:wo([F_,Y_]).optional()}),W_=rs(K_),X_=Ae({oldStart:Be().optional(),oldLines:Be().optional(),newStart:Be().optional(),newLines:Be().optional(),lines:gn(Q()).optional()}),Q_=Ae({type:Xn(["create","edit","update"]).optional(),filePath:Q().optional(),oldString:Q().optional(),newString:Q().optional(),originalFile:Q().nullable().optional(),replaceAll:ys().optional(),userModified:ys().optional(),structuredPatch:gn(X_).optional()}),J_=rs(Q_),eC=Ae({type:Pt("text").optional(),file:Ae({filePath:Q().optional(),content:Q().optional(),numLines:Be().optional(),startLine:Be().optional(),totalLines:Be().optional()}).optional()}),tC=rs(eC),nC=Ae({filenames:gn(Q()).optional(),durationMs:Be().optional(),numFiles:Be().optional(),truncated:ys().optional()}),sC=rs(nC),aC=Ae({mode:Xn(["files_with_matches","content","count"]).optional(),filenames:gn(Q()).optional(),numFiles:Be().optional(),content:Q().optional(),numLines:Be().optional(),appliedLimit:Be().optional()}),rC=rs(aC),fv=Ae({content:Q().optional(),status:Xn(["pending","in_progress","completed"]).optional(),activeForm:Q().optional()}),iC=Ae({oldTodos:gn(fv).optional(),newTodos:gn(fv).optional()}),oC=rs(iC),lC=Ae({tool_use_id:Q().optional(),content:gn(Ae({title:Q().optional(),url:Q().optional()})).optional()}),cC=Ae({query:Q().optional(),results:gn(wo([lC,Q()])).optional(),durationSeconds:Be().optional()}),uC=rs(cC),dC=Ae({bytes:Be().optional(),code:Be().optional(),codeText:Q().optional(),result:Q().optional(),durationMs:Be().optional(),url:Q().optional()}),fC=rs(dC),hC=Ae({label:Q().optional(),description:Q().optional()}),mC=Ae({question:Q().optional(),header:Q().optional(),options:gn(hC).optional(),multiSelect:ys().optional()}),pC=Ae({questions:gn(mC).optional(),answers:kf(Q(),Q()).optional()}),gC=rs(pC),vC=Ae({shellId:Q().optional(),command:Q().optional(),status:Xn(["running","completed","failed"]).optional(),exitCode:Be().nullable().optional(),stdout:Q().optional(),stderr:Q().optional(),stdoutLines:Be().optional(),stderrLines:Be().optional(),timestamp:Q().optional()}),xC=rs(vC),yC=Ae({retrieval_status:Xn(["completed","timeout","running"]).optional(),task:Ae({task_id:Q().optional(),task_type:Xn(["local_bash","agent"]).optional(),status:Xn(["running","completed","failed"]).optional(),description:Q().optional(),output:Q().optional(),exitCode:Be().nullable().optional()}).optional()}),bC=rs(yC),SC=Ae({message:Q().optional(),shell_id:Q().optional()}),jC=rs(SC),wC=Ae({message:Q().optional()});rs(wC);const NC=Ae({message:Q().optional(),plan:Q().optional()});rs(NC);const EC=Ae({id:Q(),timestamp:Q(),cwd:Q(),originator:Q().optional(),cli_version:Q().optional(),instructions:Q().optional(),source:Q().optional(),model_provider:Q().optional()}),_C=Ae({timestamp:Q(),type:Pt("session_meta"),payload:EC}),CC=Ae({type:Pt("input_text"),text:Q()}),TC=Ae({type:Pt("output_text"),text:Q()}),kC=Ae({type:Pt("message"),role:Xn(["user","assistant"]),content:gn(wo([CC,TC]))}),RC=Ae({type:Pt("summary_text"),text:Q()}),AC=Ae({type:Pt("reasoning"),summary:gn(RC).optional(),content:Is().nullable().optional(),encrypted_content:Q().optional()}),MC=Ae({type:Pt("function_call"),name:Q(),arguments:Q(),call_id:Q()}),OC=Ae({type:Pt("function_call_output"),call_id:Q(),output:Q()}),zC=Ae({type:Pt("ghost_snapshot"),ghost_commit:Ae({id:Q(),parent:Q(),preexisting_untracked_files:gn(Q()).optional(),preexisting_untracked_dirs:gn(Q()).optional()})}),UC=hi("type",[kC,AC,MC,OC,zC]),LC=Ae({timestamp:Q(),type:Pt("response_item"),payload:UC}),DC=Ae({primary:Ae({used_percent:Be(),window_minutes:Be(),resets_at:Be()}).optional(),secondary:Ae({used_percent:Be(),window_minutes:Be(),resets_at:Be()}).optional(),credits:Ae({has_credits:ys(),unlimited:ys(),balance:Is().nullable()}).optional(),plan_type:Q().nullable().optional()}),BC=Ae({total_token_usage:Ae({input_tokens:Be(),cached_input_tokens:Be().optional(),output_tokens:Be(),reasoning_output_tokens:Be().optional(),total_tokens:Be()}).optional(),last_token_usage:Ae({input_tokens:Be(),cached_input_tokens:Be().optional(),output_tokens:Be(),reasoning_output_tokens:Be().optional(),total_tokens:Be()}).optional(),model_context_window:Be().optional()}),$C=Ae({type:Pt("user_message"),message:Q(),images:gn(Is()).optional()}),IC=Ae({type:Pt("agent_message"),message:Q()}),PC=Ae({type:Pt("agent_reasoning"),text:Q()}),HC=Ae({type:Pt("token_count"),info:BC.nullable(),rate_limits:DC.optional()}),ZC=hi("type",[$C,IC,PC,HC]),qC=Ae({timestamp:Q(),type:Pt("event_msg"),payload:ZC}),VC=Ae({type:Q(),network_access:ys().optional(),exclude_tmpdir_env_var:ys().optional(),exclude_slash_tmp:ys().optional()}),FC=Ae({cwd:Q(),approval_policy:Q(),sandbox_policy:VC.optional(),model:Q().optional(),summary:Q().optional()}),GC=Ae({timestamp:Q(),type:Pt("turn_context"),payload:FC});hi("type",[_C,LC,qC,GC]);const YC=Ae({total_tokens:Be().optional(),input_tokens:Be().optional(),output_tokens:Be().optional(),cached:Be().optional(),input:Be().optional(),duration_ms:Be().optional(),tool_calls:Be().optional()}),KC=Ae({type:Pt("init"),timestamp:Q().optional(),session_id:Q(),model:Q().optional()}),WC=Ae({type:Pt("message"),timestamp:Q().optional(),role:Xn(["user","assistant"]),content:Q(),delta:ys().optional()}),XC=Ae({type:Pt("tool_use"),timestamp:Q().optional(),tool_name:Q(),tool_id:Q(),parameters:kf(Q(),Is()).optional()}),QC=Ae({type:Pt("tool_result"),timestamp:Q().optional(),tool_id:Q(),status:Xn(["success","error"]),output:Q().optional(),error:Q().optional()}),JC=Ae({type:Pt("result"),timestamp:Q().optional(),status:Xn(["success","error","cancelled"]),stats:YC.optional(),error:Q().optional()}),e6=Ae({type:Pt("error"),timestamp:Q().optional(),error:Q().optional(),message:Q().optional(),code:Q().optional()});hi("type",[KC,WC,XC,QC,JC,e6]);const t6=Ae({id:Q(),name:Q(),response:Ae({output:Q()})}),n6=Ae({functionResponse:t6}),s6=Ae({id:Q(),name:Q(),args:kf(Q(),Is()),result:gn(n6).optional(),status:Xn(["success","error","pending"]).optional(),timestamp:Q().optional(),resultDisplay:Q().optional(),displayName:Q().optional(),description:Q().optional(),renderOutputAsMarkdown:ys().optional()}),a6=Ae({subject:Q(),description:Q(),timestamp:Q().optional()}),r6=Ae({input:Be().optional(),output:Be().optional(),cached:Be().optional(),thoughts:Be().optional(),tool:Be().optional(),total:Be().optional()}),i6=Ae({id:Q(),timestamp:Q(),type:Pt("user"),content:Q()}),o6=Ae({id:Q(),timestamp:Q(),type:Pt("gemini"),content:Q(),thoughts:gn(a6).optional(),toolCalls:gn(s6).optional(),tokens:r6.optional(),model:Q().optional()}),l6=hi("type",[i6,o6]);Ae({sessionId:Q(),projectHash:Q(),startTime:Q(),lastUpdated:Q(),messages:gn(l6)});const c6=Ae({type:Xn(["busy","idle"])}),bx=Ae({input:Be().optional(),output:Be().optional(),reasoning:Be().optional(),cache:Ae({read:Be().optional(),write:Be().optional()}).optional()}),Rf=Ae({start:Be().optional(),end:Be().optional(),created:Be().optional(),updated:Be().optional(),completed:Be().optional()}),u6=Ae({id:Q(),sessionID:Q(),messageID:Q(),type:Q(),text:Q().optional(),time:Rf.optional(),reason:Q().optional(),snapshot:Q().optional(),cost:Be().optional(),tokens:bx.optional(),tool:Q().optional(),input:Is().optional(),output:Is().optional(),error:Q().optional()}),d6=Ae({id:Q(),sessionID:Q(),role:Xn(["user","assistant"]),time:Rf.optional(),parentID:Q().optional(),modelID:Q().optional(),providerID:Q().optional(),mode:Q().optional(),agent:Q().optional(),path:Ae({cwd:Q().optional(),root:Q().optional()}).optional(),cost:Be().optional(),tokens:bx.optional(),finish:Q().optional(),summary:Ae({title:Q().optional(),diffs:gn(Is()).optional()}).optional(),model:Ae({providerID:Q().optional(),modelID:Q().optional()}).optional()}),f6=Ae({id:Q(),version:Q().optional(),projectID:Q().optional(),directory:Q().optional(),title:Q().optional(),time:Rf.optional(),summary:Ae({additions:Be().optional(),deletions:Be().optional(),files:Be().optional()}).optional()}),h6=Ae({type:Pt("server.connected"),properties:Ae({}).optional()}),m6=Ae({type:Pt("session.status"),properties:Ae({sessionID:Q(),status:c6})}),p6=Ae({type:Pt("session.updated"),properties:Ae({info:f6})}),g6=Ae({type:Pt("session.idle"),properties:Ae({sessionID:Q()})}),v6=Ae({type:Pt("session.diff"),properties:Ae({sessionID:Q(),diff:gn(Is())})}),x6=Ae({type:Pt("message.updated"),properties:Ae({info:d6})}),y6=Ae({type:Pt("message.part.updated"),properties:Ae({part:u6,delta:Q().optional()})});hi("type",[h6,m6,p6,g6,v6,x6,y6]);function b6(e){return typeof e=="object"&&e!==null&&e.type==="srp_challenge"}function S6(e){return typeof e=="object"&&e!==null&&e.type==="srp_verify"}function hv(e){return typeof e=="object"&&e!==null&&e.type==="srp_error"}function j6(e){return typeof e=="object"&&e!==null&&e.type==="encrypted"&&typeof e.nonce=="string"&&typeof e.ciphertext=="string"}function w6(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Cd={exports:{}};const N6={},E6=Object.freeze(Object.defineProperty({__proto__:null,default:N6},Symbol.toStringTag,{value:"Module"})),tf=N1(E6);var mv;function _6(){return mv||(mv=1,(function(e){(function(n){var a=function(j){var k,T=new Float64Array(16);if(j)for(k=0;k<j.length;k++)T[k]=j[k];return T},o=function(){throw new Error("no PRNG")},c=new Uint8Array(16),u=new Uint8Array(32);u[0]=9;var d=a(),m=a([1]),p=a([56129,1]),v=a([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),x=a([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),b=a([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),w=a([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),_=a([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function C(j,k,T,y){j[k]=T>>24&255,j[k+1]=T>>16&255,j[k+2]=T>>8&255,j[k+3]=T&255,j[k+4]=y>>24&255,j[k+5]=y>>16&255,j[k+6]=y>>8&255,j[k+7]=y&255}function E(j,k,T,y,M){var Y,K=0;for(Y=0;Y<M;Y++)K|=j[k+Y]^T[y+Y];return(1&K-1>>>8)-1}function N(j,k,T,y){return E(j,k,T,y,16)}function z(j,k,T,y){return E(j,k,T,y,32)}function O(j,k,T,y){for(var M=y[0]&255|(y[1]&255)<<8|(y[2]&255)<<16|(y[3]&255)<<24,Y=T[0]&255|(T[1]&255)<<8|(T[2]&255)<<16|(T[3]&255)<<24,K=T[4]&255|(T[5]&255)<<8|(T[6]&255)<<16|(T[7]&255)<<24,ce=T[8]&255|(T[9]&255)<<8|(T[10]&255)<<16|(T[11]&255)<<24,ke=T[12]&255|(T[13]&255)<<8|(T[14]&255)<<16|(T[15]&255)<<24,Pe=y[4]&255|(y[5]&255)<<8|(y[6]&255)<<16|(y[7]&255)<<24,De=k[0]&255|(k[1]&255)<<8|(k[2]&255)<<16|(k[3]&255)<<24,wt=k[4]&255|(k[5]&255)<<8|(k[6]&255)<<16|(k[7]&255)<<24,Ie=k[8]&255|(k[9]&255)<<8|(k[10]&255)<<16|(k[11]&255)<<24,nt=k[12]&255|(k[13]&255)<<8|(k[14]&255)<<16|(k[15]&255)<<24,de=y[8]&255|(y[9]&255)<<8|(y[10]&255)<<16|(y[11]&255)<<24,$e=T[16]&255|(T[17]&255)<<8|(T[18]&255)<<16|(T[19]&255)<<24,ct=T[20]&255|(T[21]&255)<<8|(T[22]&255)<<16|(T[23]&255)<<24,ut=T[24]&255|(T[25]&255)<<8|(T[26]&255)<<16|(T[27]&255)<<24,dt=T[28]&255|(T[29]&255)<<8|(T[30]&255)<<16|(T[31]&255)<<24,Ve=y[12]&255|(y[13]&255)<<8|(y[14]&255)<<16|(y[15]&255)<<24,qe=M,We=Y,ue=K,Ne=ce,Le=ke,ze=Pe,ne=De,te=wt,be=Ie,ge=nt,ve=de,Ee=$e,it=ct,xt=ut,pt=dt,gt=Ve,$,Nt=0;Nt<20;Nt+=2)$=qe+it|0,Le^=$<<7|$>>>25,$=Le+qe|0,be^=$<<9|$>>>23,$=be+Le|0,it^=$<<13|$>>>19,$=it+be|0,qe^=$<<18|$>>>14,$=ze+We|0,ge^=$<<7|$>>>25,$=ge+ze|0,xt^=$<<9|$>>>23,$=xt+ge|0,We^=$<<13|$>>>19,$=We+xt|0,ze^=$<<18|$>>>14,$=ve+ne|0,pt^=$<<7|$>>>25,$=pt+ve|0,ue^=$<<9|$>>>23,$=ue+pt|0,ne^=$<<13|$>>>19,$=ne+ue|0,ve^=$<<18|$>>>14,$=gt+Ee|0,Ne^=$<<7|$>>>25,$=Ne+gt|0,te^=$<<9|$>>>23,$=te+Ne|0,Ee^=$<<13|$>>>19,$=Ee+te|0,gt^=$<<18|$>>>14,$=qe+Ne|0,We^=$<<7|$>>>25,$=We+qe|0,ue^=$<<9|$>>>23,$=ue+We|0,Ne^=$<<13|$>>>19,$=Ne+ue|0,qe^=$<<18|$>>>14,$=ze+Le|0,ne^=$<<7|$>>>25,$=ne+ze|0,te^=$<<9|$>>>23,$=te+ne|0,Le^=$<<13|$>>>19,$=Le+te|0,ze^=$<<18|$>>>14,$=ve+ge|0,Ee^=$<<7|$>>>25,$=Ee+ve|0,be^=$<<9|$>>>23,$=be+Ee|0,ge^=$<<13|$>>>19,$=ge+be|0,ve^=$<<18|$>>>14,$=gt+pt|0,it^=$<<7|$>>>25,$=it+gt|0,xt^=$<<9|$>>>23,$=xt+it|0,pt^=$<<13|$>>>19,$=pt+xt|0,gt^=$<<18|$>>>14;qe=qe+M|0,We=We+Y|0,ue=ue+K|0,Ne=Ne+ce|0,Le=Le+ke|0,ze=ze+Pe|0,ne=ne+De|0,te=te+wt|0,be=be+Ie|0,ge=ge+nt|0,ve=ve+de|0,Ee=Ee+$e|0,it=it+ct|0,xt=xt+ut|0,pt=pt+dt|0,gt=gt+Ve|0,j[0]=qe>>>0&255,j[1]=qe>>>8&255,j[2]=qe>>>16&255,j[3]=qe>>>24&255,j[4]=We>>>0&255,j[5]=We>>>8&255,j[6]=We>>>16&255,j[7]=We>>>24&255,j[8]=ue>>>0&255,j[9]=ue>>>8&255,j[10]=ue>>>16&255,j[11]=ue>>>24&255,j[12]=Ne>>>0&255,j[13]=Ne>>>8&255,j[14]=Ne>>>16&255,j[15]=Ne>>>24&255,j[16]=Le>>>0&255,j[17]=Le>>>8&255,j[18]=Le>>>16&255,j[19]=Le>>>24&255,j[20]=ze>>>0&255,j[21]=ze>>>8&255,j[22]=ze>>>16&255,j[23]=ze>>>24&255,j[24]=ne>>>0&255,j[25]=ne>>>8&255,j[26]=ne>>>16&255,j[27]=ne>>>24&255,j[28]=te>>>0&255,j[29]=te>>>8&255,j[30]=te>>>16&255,j[31]=te>>>24&255,j[32]=be>>>0&255,j[33]=be>>>8&255,j[34]=be>>>16&255,j[35]=be>>>24&255,j[36]=ge>>>0&255,j[37]=ge>>>8&255,j[38]=ge>>>16&255,j[39]=ge>>>24&255,j[40]=ve>>>0&255,j[41]=ve>>>8&255,j[42]=ve>>>16&255,j[43]=ve>>>24&255,j[44]=Ee>>>0&255,j[45]=Ee>>>8&255,j[46]=Ee>>>16&255,j[47]=Ee>>>24&255,j[48]=it>>>0&255,j[49]=it>>>8&255,j[50]=it>>>16&255,j[51]=it>>>24&255,j[52]=xt>>>0&255,j[53]=xt>>>8&255,j[54]=xt>>>16&255,j[55]=xt>>>24&255,j[56]=pt>>>0&255,j[57]=pt>>>8&255,j[58]=pt>>>16&255,j[59]=pt>>>24&255,j[60]=gt>>>0&255,j[61]=gt>>>8&255,j[62]=gt>>>16&255,j[63]=gt>>>24&255}function U(j,k,T,y){for(var M=y[0]&255|(y[1]&255)<<8|(y[2]&255)<<16|(y[3]&255)<<24,Y=T[0]&255|(T[1]&255)<<8|(T[2]&255)<<16|(T[3]&255)<<24,K=T[4]&255|(T[5]&255)<<8|(T[6]&255)<<16|(T[7]&255)<<24,ce=T[8]&255|(T[9]&255)<<8|(T[10]&255)<<16|(T[11]&255)<<24,ke=T[12]&255|(T[13]&255)<<8|(T[14]&255)<<16|(T[15]&255)<<24,Pe=y[4]&255|(y[5]&255)<<8|(y[6]&255)<<16|(y[7]&255)<<24,De=k[0]&255|(k[1]&255)<<8|(k[2]&255)<<16|(k[3]&255)<<24,wt=k[4]&255|(k[5]&255)<<8|(k[6]&255)<<16|(k[7]&255)<<24,Ie=k[8]&255|(k[9]&255)<<8|(k[10]&255)<<16|(k[11]&255)<<24,nt=k[12]&255|(k[13]&255)<<8|(k[14]&255)<<16|(k[15]&255)<<24,de=y[8]&255|(y[9]&255)<<8|(y[10]&255)<<16|(y[11]&255)<<24,$e=T[16]&255|(T[17]&255)<<8|(T[18]&255)<<16|(T[19]&255)<<24,ct=T[20]&255|(T[21]&255)<<8|(T[22]&255)<<16|(T[23]&255)<<24,ut=T[24]&255|(T[25]&255)<<8|(T[26]&255)<<16|(T[27]&255)<<24,dt=T[28]&255|(T[29]&255)<<8|(T[30]&255)<<16|(T[31]&255)<<24,Ve=y[12]&255|(y[13]&255)<<8|(y[14]&255)<<16|(y[15]&255)<<24,qe=M,We=Y,ue=K,Ne=ce,Le=ke,ze=Pe,ne=De,te=wt,be=Ie,ge=nt,ve=de,Ee=$e,it=ct,xt=ut,pt=dt,gt=Ve,$,Nt=0;Nt<20;Nt+=2)$=qe+it|0,Le^=$<<7|$>>>25,$=Le+qe|0,be^=$<<9|$>>>23,$=be+Le|0,it^=$<<13|$>>>19,$=it+be|0,qe^=$<<18|$>>>14,$=ze+We|0,ge^=$<<7|$>>>25,$=ge+ze|0,xt^=$<<9|$>>>23,$=xt+ge|0,We^=$<<13|$>>>19,$=We+xt|0,ze^=$<<18|$>>>14,$=ve+ne|0,pt^=$<<7|$>>>25,$=pt+ve|0,ue^=$<<9|$>>>23,$=ue+pt|0,ne^=$<<13|$>>>19,$=ne+ue|0,ve^=$<<18|$>>>14,$=gt+Ee|0,Ne^=$<<7|$>>>25,$=Ne+gt|0,te^=$<<9|$>>>23,$=te+Ne|0,Ee^=$<<13|$>>>19,$=Ee+te|0,gt^=$<<18|$>>>14,$=qe+Ne|0,We^=$<<7|$>>>25,$=We+qe|0,ue^=$<<9|$>>>23,$=ue+We|0,Ne^=$<<13|$>>>19,$=Ne+ue|0,qe^=$<<18|$>>>14,$=ze+Le|0,ne^=$<<7|$>>>25,$=ne+ze|0,te^=$<<9|$>>>23,$=te+ne|0,Le^=$<<13|$>>>19,$=Le+te|0,ze^=$<<18|$>>>14,$=ve+ge|0,Ee^=$<<7|$>>>25,$=Ee+ve|0,be^=$<<9|$>>>23,$=be+Ee|0,ge^=$<<13|$>>>19,$=ge+be|0,ve^=$<<18|$>>>14,$=gt+pt|0,it^=$<<7|$>>>25,$=it+gt|0,xt^=$<<9|$>>>23,$=xt+it|0,pt^=$<<13|$>>>19,$=pt+xt|0,gt^=$<<18|$>>>14;j[0]=qe>>>0&255,j[1]=qe>>>8&255,j[2]=qe>>>16&255,j[3]=qe>>>24&255,j[4]=ze>>>0&255,j[5]=ze>>>8&255,j[6]=ze>>>16&255,j[7]=ze>>>24&255,j[8]=ve>>>0&255,j[9]=ve>>>8&255,j[10]=ve>>>16&255,j[11]=ve>>>24&255,j[12]=gt>>>0&255,j[13]=gt>>>8&255,j[14]=gt>>>16&255,j[15]=gt>>>24&255,j[16]=ne>>>0&255,j[17]=ne>>>8&255,j[18]=ne>>>16&255,j[19]=ne>>>24&255,j[20]=te>>>0&255,j[21]=te>>>8&255,j[22]=te>>>16&255,j[23]=te>>>24&255,j[24]=be>>>0&255,j[25]=be>>>8&255,j[26]=be>>>16&255,j[27]=be>>>24&255,j[28]=ge>>>0&255,j[29]=ge>>>8&255,j[30]=ge>>>16&255,j[31]=ge>>>24&255}function P(j,k,T,y){O(j,k,T,y)}function A(j,k,T,y){U(j,k,T,y)}var D=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function I(j,k,T,y,M,Y,K){var ce=new Uint8Array(16),ke=new Uint8Array(64),Pe,De;for(De=0;De<16;De++)ce[De]=0;for(De=0;De<8;De++)ce[De]=Y[De];for(;M>=64;){for(P(ke,ce,K,D),De=0;De<64;De++)j[k+De]=T[y+De]^ke[De];for(Pe=1,De=8;De<16;De++)Pe=Pe+(ce[De]&255)|0,ce[De]=Pe&255,Pe>>>=8;M-=64,k+=64,y+=64}if(M>0)for(P(ke,ce,K,D),De=0;De<M;De++)j[k+De]=T[y+De]^ke[De];return 0}function Z(j,k,T,y,M){var Y=new Uint8Array(16),K=new Uint8Array(64),ce,ke;for(ke=0;ke<16;ke++)Y[ke]=0;for(ke=0;ke<8;ke++)Y[ke]=y[ke];for(;T>=64;){for(P(K,Y,M,D),ke=0;ke<64;ke++)j[k+ke]=K[ke];for(ce=1,ke=8;ke<16;ke++)ce=ce+(Y[ke]&255)|0,Y[ke]=ce&255,ce>>>=8;T-=64,k+=64}if(T>0)for(P(K,Y,M,D),ke=0;ke<T;ke++)j[k+ke]=K[ke];return 0}function re(j,k,T,y,M){var Y=new Uint8Array(32);A(Y,y,M,D);for(var K=new Uint8Array(8),ce=0;ce<8;ce++)K[ce]=y[ce+16];return Z(j,k,T,K,Y)}function _e(j,k,T,y,M,Y,K){var ce=new Uint8Array(32);A(ce,Y,K,D);for(var ke=new Uint8Array(8),Pe=0;Pe<8;Pe++)ke[Pe]=Y[Pe+16];return I(j,k,T,y,M,ke,ce)}var Te=function(j){this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0;var k,T,y,M,Y,K,ce,ke;k=j[0]&255|(j[1]&255)<<8,this.r[0]=k&8191,T=j[2]&255|(j[3]&255)<<8,this.r[1]=(k>>>13|T<<3)&8191,y=j[4]&255|(j[5]&255)<<8,this.r[2]=(T>>>10|y<<6)&7939,M=j[6]&255|(j[7]&255)<<8,this.r[3]=(y>>>7|M<<9)&8191,Y=j[8]&255|(j[9]&255)<<8,this.r[4]=(M>>>4|Y<<12)&255,this.r[5]=Y>>>1&8190,K=j[10]&255|(j[11]&255)<<8,this.r[6]=(Y>>>14|K<<2)&8191,ce=j[12]&255|(j[13]&255)<<8,this.r[7]=(K>>>11|ce<<5)&8065,ke=j[14]&255|(j[15]&255)<<8,this.r[8]=(ce>>>8|ke<<8)&8191,this.r[9]=ke>>>5&127,this.pad[0]=j[16]&255|(j[17]&255)<<8,this.pad[1]=j[18]&255|(j[19]&255)<<8,this.pad[2]=j[20]&255|(j[21]&255)<<8,this.pad[3]=j[22]&255|(j[23]&255)<<8,this.pad[4]=j[24]&255|(j[25]&255)<<8,this.pad[5]=j[26]&255|(j[27]&255)<<8,this.pad[6]=j[28]&255|(j[29]&255)<<8,this.pad[7]=j[30]&255|(j[31]&255)<<8};Te.prototype.blocks=function(j,k,T){for(var y=this.fin?0:2048,M,Y,K,ce,ke,Pe,De,wt,Ie,nt,de,$e,ct,ut,dt,Ve,qe,We,ue,Ne=this.h[0],Le=this.h[1],ze=this.h[2],ne=this.h[3],te=this.h[4],be=this.h[5],ge=this.h[6],ve=this.h[7],Ee=this.h[8],it=this.h[9],xt=this.r[0],pt=this.r[1],gt=this.r[2],$=this.r[3],Nt=this.r[4],ht=this.r[5],Mt=this.r[6],St=this.r[7],kt=this.r[8],Et=this.r[9];T>=16;)M=j[k+0]&255|(j[k+1]&255)<<8,Ne+=M&8191,Y=j[k+2]&255|(j[k+3]&255)<<8,Le+=(M>>>13|Y<<3)&8191,K=j[k+4]&255|(j[k+5]&255)<<8,ze+=(Y>>>10|K<<6)&8191,ce=j[k+6]&255|(j[k+7]&255)<<8,ne+=(K>>>7|ce<<9)&8191,ke=j[k+8]&255|(j[k+9]&255)<<8,te+=(ce>>>4|ke<<12)&8191,be+=ke>>>1&8191,Pe=j[k+10]&255|(j[k+11]&255)<<8,ge+=(ke>>>14|Pe<<2)&8191,De=j[k+12]&255|(j[k+13]&255)<<8,ve+=(Pe>>>11|De<<5)&8191,wt=j[k+14]&255|(j[k+15]&255)<<8,Ee+=(De>>>8|wt<<8)&8191,it+=wt>>>5|y,Ie=0,nt=Ie,nt+=Ne*xt,nt+=Le*(5*Et),nt+=ze*(5*kt),nt+=ne*(5*St),nt+=te*(5*Mt),Ie=nt>>>13,nt&=8191,nt+=be*(5*ht),nt+=ge*(5*Nt),nt+=ve*(5*$),nt+=Ee*(5*gt),nt+=it*(5*pt),Ie+=nt>>>13,nt&=8191,de=Ie,de+=Ne*pt,de+=Le*xt,de+=ze*(5*Et),de+=ne*(5*kt),de+=te*(5*St),Ie=de>>>13,de&=8191,de+=be*(5*Mt),de+=ge*(5*ht),de+=ve*(5*Nt),de+=Ee*(5*$),de+=it*(5*gt),Ie+=de>>>13,de&=8191,$e=Ie,$e+=Ne*gt,$e+=Le*pt,$e+=ze*xt,$e+=ne*(5*Et),$e+=te*(5*kt),Ie=$e>>>13,$e&=8191,$e+=be*(5*St),$e+=ge*(5*Mt),$e+=ve*(5*ht),$e+=Ee*(5*Nt),$e+=it*(5*$),Ie+=$e>>>13,$e&=8191,ct=Ie,ct+=Ne*$,ct+=Le*gt,ct+=ze*pt,ct+=ne*xt,ct+=te*(5*Et),Ie=ct>>>13,ct&=8191,ct+=be*(5*kt),ct+=ge*(5*St),ct+=ve*(5*Mt),ct+=Ee*(5*ht),ct+=it*(5*Nt),Ie+=ct>>>13,ct&=8191,ut=Ie,ut+=Ne*Nt,ut+=Le*$,ut+=ze*gt,ut+=ne*pt,ut+=te*xt,Ie=ut>>>13,ut&=8191,ut+=be*(5*Et),ut+=ge*(5*kt),ut+=ve*(5*St),ut+=Ee*(5*Mt),ut+=it*(5*ht),Ie+=ut>>>13,ut&=8191,dt=Ie,dt+=Ne*ht,dt+=Le*Nt,dt+=ze*$,dt+=ne*gt,dt+=te*pt,Ie=dt>>>13,dt&=8191,dt+=be*xt,dt+=ge*(5*Et),dt+=ve*(5*kt),dt+=Ee*(5*St),dt+=it*(5*Mt),Ie+=dt>>>13,dt&=8191,Ve=Ie,Ve+=Ne*Mt,Ve+=Le*ht,Ve+=ze*Nt,Ve+=ne*$,Ve+=te*gt,Ie=Ve>>>13,Ve&=8191,Ve+=be*pt,Ve+=ge*xt,Ve+=ve*(5*Et),Ve+=Ee*(5*kt),Ve+=it*(5*St),Ie+=Ve>>>13,Ve&=8191,qe=Ie,qe+=Ne*St,qe+=Le*Mt,qe+=ze*ht,qe+=ne*Nt,qe+=te*$,Ie=qe>>>13,qe&=8191,qe+=be*gt,qe+=ge*pt,qe+=ve*xt,qe+=Ee*(5*Et),qe+=it*(5*kt),Ie+=qe>>>13,qe&=8191,We=Ie,We+=Ne*kt,We+=Le*St,We+=ze*Mt,We+=ne*ht,We+=te*Nt,Ie=We>>>13,We&=8191,We+=be*$,We+=ge*gt,We+=ve*pt,We+=Ee*xt,We+=it*(5*Et),Ie+=We>>>13,We&=8191,ue=Ie,ue+=Ne*Et,ue+=Le*kt,ue+=ze*St,ue+=ne*Mt,ue+=te*ht,Ie=ue>>>13,ue&=8191,ue+=be*Nt,ue+=ge*$,ue+=ve*gt,ue+=Ee*pt,ue+=it*xt,Ie+=ue>>>13,ue&=8191,Ie=(Ie<<2)+Ie|0,Ie=Ie+nt|0,nt=Ie&8191,Ie=Ie>>>13,de+=Ie,Ne=nt,Le=de,ze=$e,ne=ct,te=ut,be=dt,ge=Ve,ve=qe,Ee=We,it=ue,k+=16,T-=16;this.h[0]=Ne,this.h[1]=Le,this.h[2]=ze,this.h[3]=ne,this.h[4]=te,this.h[5]=be,this.h[6]=ge,this.h[7]=ve,this.h[8]=Ee,this.h[9]=it},Te.prototype.finish=function(j,k){var T=new Uint16Array(10),y,M,Y,K;if(this.leftover){for(K=this.leftover,this.buffer[K++]=1;K<16;K++)this.buffer[K]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(y=this.h[1]>>>13,this.h[1]&=8191,K=2;K<10;K++)this.h[K]+=y,y=this.h[K]>>>13,this.h[K]&=8191;for(this.h[0]+=y*5,y=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=y,y=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=y,T[0]=this.h[0]+5,y=T[0]>>>13,T[0]&=8191,K=1;K<10;K++)T[K]=this.h[K]+y,y=T[K]>>>13,T[K]&=8191;for(T[9]-=8192,M=(y^1)-1,K=0;K<10;K++)T[K]&=M;for(M=~M,K=0;K<10;K++)this.h[K]=this.h[K]&M|T[K];for(this.h[0]=(this.h[0]|this.h[1]<<13)&65535,this.h[1]=(this.h[1]>>>3|this.h[2]<<10)&65535,this.h[2]=(this.h[2]>>>6|this.h[3]<<7)&65535,this.h[3]=(this.h[3]>>>9|this.h[4]<<4)&65535,this.h[4]=(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14)&65535,this.h[5]=(this.h[6]>>>2|this.h[7]<<11)&65535,this.h[6]=(this.h[7]>>>5|this.h[8]<<8)&65535,this.h[7]=(this.h[8]>>>8|this.h[9]<<5)&65535,Y=this.h[0]+this.pad[0],this.h[0]=Y&65535,K=1;K<8;K++)Y=(this.h[K]+this.pad[K]|0)+(Y>>>16)|0,this.h[K]=Y&65535;j[k+0]=this.h[0]>>>0&255,j[k+1]=this.h[0]>>>8&255,j[k+2]=this.h[1]>>>0&255,j[k+3]=this.h[1]>>>8&255,j[k+4]=this.h[2]>>>0&255,j[k+5]=this.h[2]>>>8&255,j[k+6]=this.h[3]>>>0&255,j[k+7]=this.h[3]>>>8&255,j[k+8]=this.h[4]>>>0&255,j[k+9]=this.h[4]>>>8&255,j[k+10]=this.h[5]>>>0&255,j[k+11]=this.h[5]>>>8&255,j[k+12]=this.h[6]>>>0&255,j[k+13]=this.h[6]>>>8&255,j[k+14]=this.h[7]>>>0&255,j[k+15]=this.h[7]>>>8&255},Te.prototype.update=function(j,k,T){var y,M;if(this.leftover){for(M=16-this.leftover,M>T&&(M=T),y=0;y<M;y++)this.buffer[this.leftover+y]=j[k+y];if(T-=M,k+=M,this.leftover+=M,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(T>=16&&(M=T-T%16,this.blocks(j,k,M),k+=M,T-=M),T){for(y=0;y<T;y++)this.buffer[this.leftover+y]=j[k+y];this.leftover+=T}};function se(j,k,T,y,M,Y){var K=new Te(Y);return K.update(T,y,M),K.finish(j,k),0}function le(j,k,T,y,M,Y){var K=new Uint8Array(16);return se(K,0,T,y,M,Y),N(j,k,K,0)}function me(j,k,T,y,M){var Y;if(T<32)return-1;for(_e(j,0,k,0,T,y,M),se(j,16,j,32,T-32,j),Y=0;Y<16;Y++)j[Y]=0;return 0}function Re(j,k,T,y,M){var Y,K=new Uint8Array(32);if(T<32||(re(K,0,32,y,M),le(k,16,k,32,T-32,K)!==0))return-1;for(_e(j,0,k,0,T,y,M),Y=0;Y<32;Y++)j[Y]=0;return 0}function L(j,k){var T;for(T=0;T<16;T++)j[T]=k[T]|0}function F(j){var k,T,y=1;for(k=0;k<16;k++)T=j[k]+y+65535,y=Math.floor(T/65536),j[k]=T-y*65536;j[0]+=y-1+37*(y-1)}function G(j,k,T){for(var y,M=~(T-1),Y=0;Y<16;Y++)y=M&(j[Y]^k[Y]),j[Y]^=y,k[Y]^=y}function we(j,k){var T,y,M,Y=a(),K=a();for(T=0;T<16;T++)K[T]=k[T];for(F(K),F(K),F(K),y=0;y<2;y++){for(Y[0]=K[0]-65517,T=1;T<15;T++)Y[T]=K[T]-65535-(Y[T-1]>>16&1),Y[T-1]&=65535;Y[15]=K[15]-32767-(Y[14]>>16&1),M=Y[15]>>16&1,Y[14]&=65535,G(K,Y,1-M)}for(T=0;T<16;T++)j[2*T]=K[T]&255,j[2*T+1]=K[T]>>8}function Me(j,k){var T=new Uint8Array(32),y=new Uint8Array(32);return we(T,j),we(y,k),z(T,0,y,0)}function B(j){var k=new Uint8Array(32);return we(k,j),k[0]&1}function ie(j,k){var T;for(T=0;T<16;T++)j[T]=k[2*T]+(k[2*T+1]<<8);j[15]&=32767}function X(j,k,T){for(var y=0;y<16;y++)j[y]=k[y]+T[y]}function Se(j,k,T){for(var y=0;y<16;y++)j[y]=k[y]-T[y]}function pe(j,k,T){var y,M,Y=0,K=0,ce=0,ke=0,Pe=0,De=0,wt=0,Ie=0,nt=0,de=0,$e=0,ct=0,ut=0,dt=0,Ve=0,qe=0,We=0,ue=0,Ne=0,Le=0,ze=0,ne=0,te=0,be=0,ge=0,ve=0,Ee=0,it=0,xt=0,pt=0,gt=0,$=T[0],Nt=T[1],ht=T[2],Mt=T[3],St=T[4],kt=T[5],Et=T[6],un=T[7],Bt=T[8],Yt=T[9],dn=T[10],rn=T[11],_n=T[12],zn=T[13],Fn=T[14],Gn=T[15];y=k[0],Y+=y*$,K+=y*Nt,ce+=y*ht,ke+=y*Mt,Pe+=y*St,De+=y*kt,wt+=y*Et,Ie+=y*un,nt+=y*Bt,de+=y*Yt,$e+=y*dn,ct+=y*rn,ut+=y*_n,dt+=y*zn,Ve+=y*Fn,qe+=y*Gn,y=k[1],K+=y*$,ce+=y*Nt,ke+=y*ht,Pe+=y*Mt,De+=y*St,wt+=y*kt,Ie+=y*Et,nt+=y*un,de+=y*Bt,$e+=y*Yt,ct+=y*dn,ut+=y*rn,dt+=y*_n,Ve+=y*zn,qe+=y*Fn,We+=y*Gn,y=k[2],ce+=y*$,ke+=y*Nt,Pe+=y*ht,De+=y*Mt,wt+=y*St,Ie+=y*kt,nt+=y*Et,de+=y*un,$e+=y*Bt,ct+=y*Yt,ut+=y*dn,dt+=y*rn,Ve+=y*_n,qe+=y*zn,We+=y*Fn,ue+=y*Gn,y=k[3],ke+=y*$,Pe+=y*Nt,De+=y*ht,wt+=y*Mt,Ie+=y*St,nt+=y*kt,de+=y*Et,$e+=y*un,ct+=y*Bt,ut+=y*Yt,dt+=y*dn,Ve+=y*rn,qe+=y*_n,We+=y*zn,ue+=y*Fn,Ne+=y*Gn,y=k[4],Pe+=y*$,De+=y*Nt,wt+=y*ht,Ie+=y*Mt,nt+=y*St,de+=y*kt,$e+=y*Et,ct+=y*un,ut+=y*Bt,dt+=y*Yt,Ve+=y*dn,qe+=y*rn,We+=y*_n,ue+=y*zn,Ne+=y*Fn,Le+=y*Gn,y=k[5],De+=y*$,wt+=y*Nt,Ie+=y*ht,nt+=y*Mt,de+=y*St,$e+=y*kt,ct+=y*Et,ut+=y*un,dt+=y*Bt,Ve+=y*Yt,qe+=y*dn,We+=y*rn,ue+=y*_n,Ne+=y*zn,Le+=y*Fn,ze+=y*Gn,y=k[6],wt+=y*$,Ie+=y*Nt,nt+=y*ht,de+=y*Mt,$e+=y*St,ct+=y*kt,ut+=y*Et,dt+=y*un,Ve+=y*Bt,qe+=y*Yt,We+=y*dn,ue+=y*rn,Ne+=y*_n,Le+=y*zn,ze+=y*Fn,ne+=y*Gn,y=k[7],Ie+=y*$,nt+=y*Nt,de+=y*ht,$e+=y*Mt,ct+=y*St,ut+=y*kt,dt+=y*Et,Ve+=y*un,qe+=y*Bt,We+=y*Yt,ue+=y*dn,Ne+=y*rn,Le+=y*_n,ze+=y*zn,ne+=y*Fn,te+=y*Gn,y=k[8],nt+=y*$,de+=y*Nt,$e+=y*ht,ct+=y*Mt,ut+=y*St,dt+=y*kt,Ve+=y*Et,qe+=y*un,We+=y*Bt,ue+=y*Yt,Ne+=y*dn,Le+=y*rn,ze+=y*_n,ne+=y*zn,te+=y*Fn,be+=y*Gn,y=k[9],de+=y*$,$e+=y*Nt,ct+=y*ht,ut+=y*Mt,dt+=y*St,Ve+=y*kt,qe+=y*Et,We+=y*un,ue+=y*Bt,Ne+=y*Yt,Le+=y*dn,ze+=y*rn,ne+=y*_n,te+=y*zn,be+=y*Fn,ge+=y*Gn,y=k[10],$e+=y*$,ct+=y*Nt,ut+=y*ht,dt+=y*Mt,Ve+=y*St,qe+=y*kt,We+=y*Et,ue+=y*un,Ne+=y*Bt,Le+=y*Yt,ze+=y*dn,ne+=y*rn,te+=y*_n,be+=y*zn,ge+=y*Fn,ve+=y*Gn,y=k[11],ct+=y*$,ut+=y*Nt,dt+=y*ht,Ve+=y*Mt,qe+=y*St,We+=y*kt,ue+=y*Et,Ne+=y*un,Le+=y*Bt,ze+=y*Yt,ne+=y*dn,te+=y*rn,be+=y*_n,ge+=y*zn,ve+=y*Fn,Ee+=y*Gn,y=k[12],ut+=y*$,dt+=y*Nt,Ve+=y*ht,qe+=y*Mt,We+=y*St,ue+=y*kt,Ne+=y*Et,Le+=y*un,ze+=y*Bt,ne+=y*Yt,te+=y*dn,be+=y*rn,ge+=y*_n,ve+=y*zn,Ee+=y*Fn,it+=y*Gn,y=k[13],dt+=y*$,Ve+=y*Nt,qe+=y*ht,We+=y*Mt,ue+=y*St,Ne+=y*kt,Le+=y*Et,ze+=y*un,ne+=y*Bt,te+=y*Yt,be+=y*dn,ge+=y*rn,ve+=y*_n,Ee+=y*zn,it+=y*Fn,xt+=y*Gn,y=k[14],Ve+=y*$,qe+=y*Nt,We+=y*ht,ue+=y*Mt,Ne+=y*St,Le+=y*kt,ze+=y*Et,ne+=y*un,te+=y*Bt,be+=y*Yt,ge+=y*dn,ve+=y*rn,Ee+=y*_n,it+=y*zn,xt+=y*Fn,pt+=y*Gn,y=k[15],qe+=y*$,We+=y*Nt,ue+=y*ht,Ne+=y*Mt,Le+=y*St,ze+=y*kt,ne+=y*Et,te+=y*un,be+=y*Bt,ge+=y*Yt,ve+=y*dn,Ee+=y*rn,it+=y*_n,xt+=y*zn,pt+=y*Fn,gt+=y*Gn,Y+=38*We,K+=38*ue,ce+=38*Ne,ke+=38*Le,Pe+=38*ze,De+=38*ne,wt+=38*te,Ie+=38*be,nt+=38*ge,de+=38*ve,$e+=38*Ee,ct+=38*it,ut+=38*xt,dt+=38*pt,Ve+=38*gt,M=1,y=Y+M+65535,M=Math.floor(y/65536),Y=y-M*65536,y=K+M+65535,M=Math.floor(y/65536),K=y-M*65536,y=ce+M+65535,M=Math.floor(y/65536),ce=y-M*65536,y=ke+M+65535,M=Math.floor(y/65536),ke=y-M*65536,y=Pe+M+65535,M=Math.floor(y/65536),Pe=y-M*65536,y=De+M+65535,M=Math.floor(y/65536),De=y-M*65536,y=wt+M+65535,M=Math.floor(y/65536),wt=y-M*65536,y=Ie+M+65535,M=Math.floor(y/65536),Ie=y-M*65536,y=nt+M+65535,M=Math.floor(y/65536),nt=y-M*65536,y=de+M+65535,M=Math.floor(y/65536),de=y-M*65536,y=$e+M+65535,M=Math.floor(y/65536),$e=y-M*65536,y=ct+M+65535,M=Math.floor(y/65536),ct=y-M*65536,y=ut+M+65535,M=Math.floor(y/65536),ut=y-M*65536,y=dt+M+65535,M=Math.floor(y/65536),dt=y-M*65536,y=Ve+M+65535,M=Math.floor(y/65536),Ve=y-M*65536,y=qe+M+65535,M=Math.floor(y/65536),qe=y-M*65536,Y+=M-1+37*(M-1),M=1,y=Y+M+65535,M=Math.floor(y/65536),Y=y-M*65536,y=K+M+65535,M=Math.floor(y/65536),K=y-M*65536,y=ce+M+65535,M=Math.floor(y/65536),ce=y-M*65536,y=ke+M+65535,M=Math.floor(y/65536),ke=y-M*65536,y=Pe+M+65535,M=Math.floor(y/65536),Pe=y-M*65536,y=De+M+65535,M=Math.floor(y/65536),De=y-M*65536,y=wt+M+65535,M=Math.floor(y/65536),wt=y-M*65536,y=Ie+M+65535,M=Math.floor(y/65536),Ie=y-M*65536,y=nt+M+65535,M=Math.floor(y/65536),nt=y-M*65536,y=de+M+65535,M=Math.floor(y/65536),de=y-M*65536,y=$e+M+65535,M=Math.floor(y/65536),$e=y-M*65536,y=ct+M+65535,M=Math.floor(y/65536),ct=y-M*65536,y=ut+M+65535,M=Math.floor(y/65536),ut=y-M*65536,y=dt+M+65535,M=Math.floor(y/65536),dt=y-M*65536,y=Ve+M+65535,M=Math.floor(y/65536),Ve=y-M*65536,y=qe+M+65535,M=Math.floor(y/65536),qe=y-M*65536,Y+=M-1+37*(M-1),j[0]=Y,j[1]=K,j[2]=ce,j[3]=ke,j[4]=Pe,j[5]=De,j[6]=wt,j[7]=Ie,j[8]=nt,j[9]=de,j[10]=$e,j[11]=ct,j[12]=ut,j[13]=dt,j[14]=Ve,j[15]=qe}function He(j,k){pe(j,k,k)}function et(j,k){var T=a(),y;for(y=0;y<16;y++)T[y]=k[y];for(y=253;y>=0;y--)He(T,T),y!==2&&y!==4&&pe(T,T,k);for(y=0;y<16;y++)j[y]=T[y]}function Oe(j,k){var T=a(),y;for(y=0;y<16;y++)T[y]=k[y];for(y=250;y>=0;y--)He(T,T),y!==1&&pe(T,T,k);for(y=0;y<16;y++)j[y]=T[y]}function Ze(j,k,T){var y=new Uint8Array(32),M=new Float64Array(80),Y,K,ce=a(),ke=a(),Pe=a(),De=a(),wt=a(),Ie=a();for(K=0;K<31;K++)y[K]=k[K];for(y[31]=k[31]&127|64,y[0]&=248,ie(M,T),K=0;K<16;K++)ke[K]=M[K],De[K]=ce[K]=Pe[K]=0;for(ce[0]=De[0]=1,K=254;K>=0;--K)Y=y[K>>>3]>>>(K&7)&1,G(ce,ke,Y),G(Pe,De,Y),X(wt,ce,Pe),Se(ce,ce,Pe),X(Pe,ke,De),Se(ke,ke,De),He(De,wt),He(Ie,ce),pe(ce,Pe,ce),pe(Pe,ke,wt),X(wt,ce,Pe),Se(ce,ce,Pe),He(ke,ce),Se(Pe,De,Ie),pe(ce,Pe,p),X(ce,ce,De),pe(Pe,Pe,ce),pe(ce,De,Ie),pe(De,ke,M),He(ke,wt),G(ce,ke,Y),G(Pe,De,Y);for(K=0;K<16;K++)M[K+16]=ce[K],M[K+32]=Pe[K],M[K+48]=ke[K],M[K+64]=De[K];var nt=M.subarray(32),de=M.subarray(16);return et(nt,nt),pe(de,de,nt),we(j,de),0}function Fe(j,k){return Ze(j,k,u)}function lt(j,k){return o(k,32),Fe(j,k)}function Xt(j,k,T){var y=new Uint8Array(32);return Ze(y,T,k),A(j,c,y,D)}var qt=me,Qt=Re;function bn(j,k,T,y,M,Y){var K=new Uint8Array(32);return Xt(K,M,Y),qt(j,k,T,y,K)}function Gt(j,k,T,y,M,Y){var K=new Uint8Array(32);return Xt(K,M,Y),Qt(j,k,T,y,K)}var pn=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function V(j,k,T,y){for(var M=new Int32Array(16),Y=new Int32Array(16),K,ce,ke,Pe,De,wt,Ie,nt,de,$e,ct,ut,dt,Ve,qe,We,ue,Ne,Le,ze,ne,te,be,ge,ve,Ee,it=j[0],xt=j[1],pt=j[2],gt=j[3],$=j[4],Nt=j[5],ht=j[6],Mt=j[7],St=k[0],kt=k[1],Et=k[2],un=k[3],Bt=k[4],Yt=k[5],dn=k[6],rn=k[7],_n=0;y>=128;){for(Le=0;Le<16;Le++)ze=8*Le+_n,M[Le]=T[ze+0]<<24|T[ze+1]<<16|T[ze+2]<<8|T[ze+3],Y[Le]=T[ze+4]<<24|T[ze+5]<<16|T[ze+6]<<8|T[ze+7];for(Le=0;Le<80;Le++)if(K=it,ce=xt,ke=pt,Pe=gt,De=$,wt=Nt,Ie=ht,nt=Mt,de=St,$e=kt,ct=Et,ut=un,dt=Bt,Ve=Yt,qe=dn,We=rn,ne=Mt,te=rn,be=te&65535,ge=te>>>16,ve=ne&65535,Ee=ne>>>16,ne=($>>>14|Bt<<18)^($>>>18|Bt<<14)^(Bt>>>9|$<<23),te=(Bt>>>14|$<<18)^(Bt>>>18|$<<14)^($>>>9|Bt<<23),be+=te&65535,ge+=te>>>16,ve+=ne&65535,Ee+=ne>>>16,ne=$&Nt^~$&ht,te=Bt&Yt^~Bt&dn,be+=te&65535,ge+=te>>>16,ve+=ne&65535,Ee+=ne>>>16,ne=pn[Le*2],te=pn[Le*2+1],be+=te&65535,ge+=te>>>16,ve+=ne&65535,Ee+=ne>>>16,ne=M[Le%16],te=Y[Le%16],be+=te&65535,ge+=te>>>16,ve+=ne&65535,Ee+=ne>>>16,ge+=be>>>16,ve+=ge>>>16,Ee+=ve>>>16,ue=ve&65535|Ee<<16,Ne=be&65535|ge<<16,ne=ue,te=Ne,be=te&65535,ge=te>>>16,ve=ne&65535,Ee=ne>>>16,ne=(it>>>28|St<<4)^(St>>>2|it<<30)^(St>>>7|it<<25),te=(St>>>28|it<<4)^(it>>>2|St<<30)^(it>>>7|St<<25),be+=te&65535,ge+=te>>>16,ve+=ne&65535,Ee+=ne>>>16,ne=it&xt^it&pt^xt&pt,te=St&kt^St&Et^kt&Et,be+=te&65535,ge+=te>>>16,ve+=ne&65535,Ee+=ne>>>16,ge+=be>>>16,ve+=ge>>>16,Ee+=ve>>>16,nt=ve&65535|Ee<<16,We=be&65535|ge<<16,ne=Pe,te=ut,be=te&65535,ge=te>>>16,ve=ne&65535,Ee=ne>>>16,ne=ue,te=Ne,be+=te&65535,ge+=te>>>16,ve+=ne&65535,Ee+=ne>>>16,ge+=be>>>16,ve+=ge>>>16,Ee+=ve>>>16,Pe=ve&65535|Ee<<16,ut=be&65535|ge<<16,xt=K,pt=ce,gt=ke,$=Pe,Nt=De,ht=wt,Mt=Ie,it=nt,kt=de,Et=$e,un=ct,Bt=ut,Yt=dt,dn=Ve,rn=qe,St=We,Le%16===15)for(ze=0;ze<16;ze++)ne=M[ze],te=Y[ze],be=te&65535,ge=te>>>16,ve=ne&65535,Ee=ne>>>16,ne=M[(ze+9)%16],te=Y[(ze+9)%16],be+=te&65535,ge+=te>>>16,ve+=ne&65535,Ee+=ne>>>16,ue=M[(ze+1)%16],Ne=Y[(ze+1)%16],ne=(ue>>>1|Ne<<31)^(ue>>>8|Ne<<24)^ue>>>7,te=(Ne>>>1|ue<<31)^(Ne>>>8|ue<<24)^(Ne>>>7|ue<<25),be+=te&65535,ge+=te>>>16,ve+=ne&65535,Ee+=ne>>>16,ue=M[(ze+14)%16],Ne=Y[(ze+14)%16],ne=(ue>>>19|Ne<<13)^(Ne>>>29|ue<<3)^ue>>>6,te=(Ne>>>19|ue<<13)^(ue>>>29|Ne<<3)^(Ne>>>6|ue<<26),be+=te&65535,ge+=te>>>16,ve+=ne&65535,Ee+=ne>>>16,ge+=be>>>16,ve+=ge>>>16,Ee+=ve>>>16,M[ze]=ve&65535|Ee<<16,Y[ze]=be&65535|ge<<16;ne=it,te=St,be=te&65535,ge=te>>>16,ve=ne&65535,Ee=ne>>>16,ne=j[0],te=k[0],be+=te&65535,ge+=te>>>16,ve+=ne&65535,Ee+=ne>>>16,ge+=be>>>16,ve+=ge>>>16,Ee+=ve>>>16,j[0]=it=ve&65535|Ee<<16,k[0]=St=be&65535|ge<<16,ne=xt,te=kt,be=te&65535,ge=te>>>16,ve=ne&65535,Ee=ne>>>16,ne=j[1],te=k[1],be+=te&65535,ge+=te>>>16,ve+=ne&65535,Ee+=ne>>>16,ge+=be>>>16,ve+=ge>>>16,Ee+=ve>>>16,j[1]=xt=ve&65535|Ee<<16,k[1]=kt=be&65535|ge<<16,ne=pt,te=Et,be=te&65535,ge=te>>>16,ve=ne&65535,Ee=ne>>>16,ne=j[2],te=k[2],be+=te&65535,ge+=te>>>16,ve+=ne&65535,Ee+=ne>>>16,ge+=be>>>16,ve+=ge>>>16,Ee+=ve>>>16,j[2]=pt=ve&65535|Ee<<16,k[2]=Et=be&65535|ge<<16,ne=gt,te=un,be=te&65535,ge=te>>>16,ve=ne&65535,Ee=ne>>>16,ne=j[3],te=k[3],be+=te&65535,ge+=te>>>16,ve+=ne&65535,Ee+=ne>>>16,ge+=be>>>16,ve+=ge>>>16,Ee+=ve>>>16,j[3]=gt=ve&65535|Ee<<16,k[3]=un=be&65535|ge<<16,ne=$,te=Bt,be=te&65535,ge=te>>>16,ve=ne&65535,Ee=ne>>>16,ne=j[4],te=k[4],be+=te&65535,ge+=te>>>16,ve+=ne&65535,Ee+=ne>>>16,ge+=be>>>16,ve+=ge>>>16,Ee+=ve>>>16,j[4]=$=ve&65535|Ee<<16,k[4]=Bt=be&65535|ge<<16,ne=Nt,te=Yt,be=te&65535,ge=te>>>16,ve=ne&65535,Ee=ne>>>16,ne=j[5],te=k[5],be+=te&65535,ge+=te>>>16,ve+=ne&65535,Ee+=ne>>>16,ge+=be>>>16,ve+=ge>>>16,Ee+=ve>>>16,j[5]=Nt=ve&65535|Ee<<16,k[5]=Yt=be&65535|ge<<16,ne=ht,te=dn,be=te&65535,ge=te>>>16,ve=ne&65535,Ee=ne>>>16,ne=j[6],te=k[6],be+=te&65535,ge+=te>>>16,ve+=ne&65535,Ee+=ne>>>16,ge+=be>>>16,ve+=ge>>>16,Ee+=ve>>>16,j[6]=ht=ve&65535|Ee<<16,k[6]=dn=be&65535|ge<<16,ne=Mt,te=rn,be=te&65535,ge=te>>>16,ve=ne&65535,Ee=ne>>>16,ne=j[7],te=k[7],be+=te&65535,ge+=te>>>16,ve+=ne&65535,Ee+=ne>>>16,ge+=be>>>16,ve+=ge>>>16,Ee+=ve>>>16,j[7]=Mt=ve&65535|Ee<<16,k[7]=rn=be&65535|ge<<16,_n+=128,y-=128}return y}function he(j,k,T){var y=new Int32Array(8),M=new Int32Array(8),Y=new Uint8Array(256),K,ce=T;for(y[0]=1779033703,y[1]=3144134277,y[2]=1013904242,y[3]=2773480762,y[4]=1359893119,y[5]=2600822924,y[6]=528734635,y[7]=1541459225,M[0]=4089235720,M[1]=2227873595,M[2]=4271175723,M[3]=1595750129,M[4]=2917565137,M[5]=725511199,M[6]=4215389547,M[7]=327033209,V(y,M,k,T),T%=128,K=0;K<T;K++)Y[K]=k[ce-T+K];for(Y[T]=128,T=256-128*(T<112?1:0),Y[T-9]=0,C(Y,T-8,ce/536870912|0,ce<<3),V(y,M,Y,T),K=0;K<8;K++)C(j,8*K,y[K],M[K]);return 0}function Ge(j,k){var T=a(),y=a(),M=a(),Y=a(),K=a(),ce=a(),ke=a(),Pe=a(),De=a();Se(T,j[1],j[0]),Se(De,k[1],k[0]),pe(T,T,De),X(y,j[0],j[1]),X(De,k[0],k[1]),pe(y,y,De),pe(M,j[3],k[3]),pe(M,M,x),pe(Y,j[2],k[2]),X(Y,Y,Y),Se(K,y,T),Se(ce,Y,M),X(ke,Y,M),X(Pe,y,T),pe(j[0],K,ce),pe(j[1],Pe,ke),pe(j[2],ke,ce),pe(j[3],K,Pe)}function tt(j,k,T){var y;for(y=0;y<4;y++)G(j[y],k[y],T)}function Tt(j,k){var T=a(),y=a(),M=a();et(M,k[2]),pe(T,k[0],M),pe(y,k[1],M),we(j,y),j[31]^=B(T)<<7}function bt(j,k,T){var y,M;for(L(j[0],d),L(j[1],m),L(j[2],m),L(j[3],d),M=255;M>=0;--M)y=T[M/8|0]>>(M&7)&1,tt(j,k,y),Ge(k,j),Ge(j,j),tt(j,k,y)}function Ct(j,k){var T=[a(),a(),a(),a()];L(T[0],b),L(T[1],w),L(T[2],m),pe(T[3],b,w),bt(j,T,k)}function Mn(j,k,T){var y=new Uint8Array(64),M=[a(),a(),a(),a()],Y;for(T||o(k,32),he(y,k,32),y[0]&=248,y[31]&=127,y[31]|=64,Ct(M,y),Tt(j,M),Y=0;Y<32;Y++)k[Y+32]=j[Y];return 0}var cn=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function st(j,k){var T,y,M,Y;for(y=63;y>=32;--y){for(T=0,M=y-32,Y=y-12;M<Y;++M)k[M]+=T-16*k[y]*cn[M-(y-32)],T=Math.floor((k[M]+128)/256),k[M]-=T*256;k[M]+=T,k[y]=0}for(T=0,M=0;M<32;M++)k[M]+=T-(k[31]>>4)*cn[M],T=k[M]>>8,k[M]&=255;for(M=0;M<32;M++)k[M]-=T*cn[M];for(y=0;y<32;y++)k[y+1]+=k[y]>>8,j[y]=k[y]&255}function Ce(j){var k=new Float64Array(64),T;for(T=0;T<64;T++)k[T]=j[T];for(T=0;T<64;T++)j[T]=0;st(j,k)}function rt(j,k,T,y){var M=new Uint8Array(64),Y=new Uint8Array(64),K=new Uint8Array(64),ce,ke,Pe=new Float64Array(64),De=[a(),a(),a(),a()];he(M,y,32),M[0]&=248,M[31]&=127,M[31]|=64;var wt=T+64;for(ce=0;ce<T;ce++)j[64+ce]=k[ce];for(ce=0;ce<32;ce++)j[32+ce]=M[32+ce];for(he(K,j.subarray(32),T+32),Ce(K),Ct(De,K),Tt(j,De),ce=32;ce<64;ce++)j[ce]=y[ce];for(he(Y,j,T+64),Ce(Y),ce=0;ce<64;ce++)Pe[ce]=0;for(ce=0;ce<32;ce++)Pe[ce]=K[ce];for(ce=0;ce<32;ce++)for(ke=0;ke<32;ke++)Pe[ce+ke]+=Y[ce]*M[ke];return st(j.subarray(32),Pe),wt}function Vt(j,k){var T=a(),y=a(),M=a(),Y=a(),K=a(),ce=a(),ke=a();return L(j[2],m),ie(j[1],k),He(M,j[1]),pe(Y,M,v),Se(M,M,j[2]),X(Y,j[2],Y),He(K,Y),He(ce,K),pe(ke,ce,K),pe(T,ke,M),pe(T,T,Y),Oe(T,T),pe(T,T,M),pe(T,T,Y),pe(T,T,Y),pe(j[0],T,Y),He(y,j[0]),pe(y,y,Y),Me(y,M)&&pe(j[0],j[0],_),He(y,j[0]),pe(y,y,Y),Me(y,M)?-1:(B(j[0])===k[31]>>7&&Se(j[0],d,j[0]),pe(j[3],j[0],j[1]),0)}function sn(j,k,T,y){var M,Y=new Uint8Array(32),K=new Uint8Array(64),ce=[a(),a(),a(),a()],ke=[a(),a(),a(),a()];if(T<64||Vt(ke,y))return-1;for(M=0;M<T;M++)j[M]=k[M];for(M=0;M<32;M++)j[M+32]=y[M];if(he(K,j,T),Ce(K),bt(ce,ke,K),Ct(ke,k.subarray(32)),Ge(ce,ke),Tt(Y,ce),T-=64,z(k,0,Y,0)){for(M=0;M<T;M++)j[M]=0;return-1}for(M=0;M<T;M++)j[M]=k[M+64];return T}var Ue=32,Rt=24,At=32,Ht=16,mt=32,is=32,Sn=32,jn=32,On=32,Qn=Rt,wn=At,kn=Ht,Nn=64,Pn=32,cs=64,Vn=32,us=64;n.lowlevel={crypto_core_hsalsa20:A,crypto_stream_xor:_e,crypto_stream:re,crypto_stream_salsa20_xor:I,crypto_stream_salsa20:Z,crypto_onetimeauth:se,crypto_onetimeauth_verify:le,crypto_verify_16:N,crypto_verify_32:z,crypto_secretbox:me,crypto_secretbox_open:Re,crypto_scalarmult:Ze,crypto_scalarmult_base:Fe,crypto_box_beforenm:Xt,crypto_box_afternm:qt,crypto_box:bn,crypto_box_open:Gt,crypto_box_keypair:lt,crypto_hash:he,crypto_sign:rt,crypto_sign_keypair:Mn,crypto_sign_open:sn,crypto_secretbox_KEYBYTES:Ue,crypto_secretbox_NONCEBYTES:Rt,crypto_secretbox_ZEROBYTES:At,crypto_secretbox_BOXZEROBYTES:Ht,crypto_scalarmult_BYTES:mt,crypto_scalarmult_SCALARBYTES:is,crypto_box_PUBLICKEYBYTES:Sn,crypto_box_SECRETKEYBYTES:jn,crypto_box_BEFORENMBYTES:On,crypto_box_NONCEBYTES:Qn,crypto_box_ZEROBYTES:wn,crypto_box_BOXZEROBYTES:kn,crypto_sign_BYTES:Nn,crypto_sign_PUBLICKEYBYTES:Pn,crypto_sign_SECRETKEYBYTES:cs,crypto_sign_SEEDBYTES:Vn,crypto_hash_BYTES:us,gf:a,D:v,L:cn,pack25519:we,unpack25519:ie,M:pe,A:X,S:He,Z:Se,pow2523:Oe,add:Ge,set25519:L,modL:st,scalarmult:bt,scalarbase:Ct};function ds(j,k){if(j.length!==Ue)throw new Error("bad key size");if(k.length!==Rt)throw new Error("bad nonce size")}function qs(j,k){if(j.length!==Sn)throw new Error("bad public key size");if(k.length!==jn)throw new Error("bad secret key size")}function En(){for(var j=0;j<arguments.length;j++)if(!(arguments[j]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function Ks(j){for(var k=0;k<j.length;k++)j[k]=0}n.randomBytes=function(j){var k=new Uint8Array(j);return o(k,j),k},n.secretbox=function(j,k,T){En(j,k,T),ds(T,k);for(var y=new Uint8Array(At+j.length),M=new Uint8Array(y.length),Y=0;Y<j.length;Y++)y[Y+At]=j[Y];return me(M,y,y.length,k,T),M.subarray(Ht)},n.secretbox.open=function(j,k,T){En(j,k,T),ds(T,k);for(var y=new Uint8Array(Ht+j.length),M=new Uint8Array(y.length),Y=0;Y<j.length;Y++)y[Y+Ht]=j[Y];return y.length<32||Re(M,y,y.length,k,T)!==0?null:M.subarray(At)},n.secretbox.keyLength=Ue,n.secretbox.nonceLength=Rt,n.secretbox.overheadLength=Ht,n.scalarMult=function(j,k){if(En(j,k),j.length!==is)throw new Error("bad n size");if(k.length!==mt)throw new Error("bad p size");var T=new Uint8Array(mt);return Ze(T,j,k),T},n.scalarMult.base=function(j){if(En(j),j.length!==is)throw new Error("bad n size");var k=new Uint8Array(mt);return Fe(k,j),k},n.scalarMult.scalarLength=is,n.scalarMult.groupElementLength=mt,n.box=function(j,k,T,y){var M=n.box.before(T,y);return n.secretbox(j,k,M)},n.box.before=function(j,k){En(j,k),qs(j,k);var T=new Uint8Array(On);return Xt(T,j,k),T},n.box.after=n.secretbox,n.box.open=function(j,k,T,y){var M=n.box.before(T,y);return n.secretbox.open(j,k,M)},n.box.open.after=n.secretbox.open,n.box.keyPair=function(){var j=new Uint8Array(Sn),k=new Uint8Array(jn);return lt(j,k),{publicKey:j,secretKey:k}},n.box.keyPair.fromSecretKey=function(j){if(En(j),j.length!==jn)throw new Error("bad secret key size");var k=new Uint8Array(Sn);return Fe(k,j),{publicKey:k,secretKey:new Uint8Array(j)}},n.box.publicKeyLength=Sn,n.box.secretKeyLength=jn,n.box.sharedKeyLength=On,n.box.nonceLength=Qn,n.box.overheadLength=n.secretbox.overheadLength,n.sign=function(j,k){if(En(j,k),k.length!==cs)throw new Error("bad secret key size");var T=new Uint8Array(Nn+j.length);return rt(T,j,j.length,k),T},n.sign.open=function(j,k){if(En(j,k),k.length!==Pn)throw new Error("bad public key size");var T=new Uint8Array(j.length),y=sn(T,j,j.length,k);if(y<0)return null;for(var M=new Uint8Array(y),Y=0;Y<M.length;Y++)M[Y]=T[Y];return M},n.sign.detached=function(j,k){for(var T=n.sign(j,k),y=new Uint8Array(Nn),M=0;M<y.length;M++)y[M]=T[M];return y},n.sign.detached.verify=function(j,k,T){if(En(j,k,T),k.length!==Nn)throw new Error("bad signature size");if(T.length!==Pn)throw new Error("bad public key size");var y=new Uint8Array(Nn+j.length),M=new Uint8Array(Nn+j.length),Y;for(Y=0;Y<Nn;Y++)y[Y]=k[Y];for(Y=0;Y<j.length;Y++)y[Y+Nn]=j[Y];return sn(M,y,y.length,T)>=0},n.sign.keyPair=function(){var j=new Uint8Array(Pn),k=new Uint8Array(cs);return Mn(j,k),{publicKey:j,secretKey:k}},n.sign.keyPair.fromSecretKey=function(j){if(En(j),j.length!==cs)throw new Error("bad secret key size");for(var k=new Uint8Array(Pn),T=0;T<k.length;T++)k[T]=j[32+T];return{publicKey:k,secretKey:new Uint8Array(j)}},n.sign.keyPair.fromSeed=function(j){if(En(j),j.length!==Vn)throw new Error("bad seed size");for(var k=new Uint8Array(Pn),T=new Uint8Array(cs),y=0;y<32;y++)T[y]=j[y];return Mn(k,T,!0),{publicKey:k,secretKey:T}},n.sign.publicKeyLength=Pn,n.sign.secretKeyLength=cs,n.sign.seedLength=Vn,n.sign.signatureLength=Nn,n.hash=function(j){En(j);var k=new Uint8Array(us);return he(k,j,j.length),k},n.hash.hashLength=us,n.verify=function(j,k){return En(j,k),j.length===0||k.length===0||j.length!==k.length?!1:E(j,0,k,0,j.length)===0},n.setPRNG=function(j){o=j},(function(){var j=typeof self<"u"?self.crypto||self.msCrypto:null;if(j&&j.getRandomValues){var k=65536;n.setPRNG(function(T,y){var M,Y=new Uint8Array(y);for(M=0;M<y;M+=k)j.getRandomValues(Y.subarray(M,M+Math.min(y-M,k)));for(M=0;M<y;M++)T[M]=Y[M];Ks(Y)})}else typeof w6<"u"&&(j=tf,j&&j.randomBytes&&n.setPRNG(function(T,y){var M,Y=j.randomBytes(y);for(M=0;M<y;M++)T[M]=Y[M];Ks(Y)}))})()})(e.exports?e.exports:self.nacl=self.nacl||{})})(Cd)),Cd.exports}var C6=_6();const mi=w1(C6),Sx=mi.secretbox.nonceLength,xo=mi.secretbox.keyLength;function T6(){return mi.randomBytes(Sx)}function pv(e){let n="";for(const a of e)n+=String.fromCharCode(a);return btoa(n)}function gv(e){const n=atob(e),a=new Uint8Array(n.length);for(let o=0;o<n.length;o++)a[o]=n.charCodeAt(o);return a}function k6(e,n){if(n.length!==xo)throw new Error(`Key must be ${xo} bytes, got ${n.length}`);const a=T6(),o=new TextEncoder().encode(e),c=mi.secretbox(o,a,n);return{nonce:pv(a),ciphertext:pv(c)}}function R6(e,n,a){if(a.length!==xo)throw new Error(`Key must be ${xo} bytes, got ${a.length}`);try{const o=gv(e),c=gv(n);if(o.length!==Sx)return null;const u=mi.secretbox.open(c,o,a);return u?new TextDecoder().decode(u):null}catch{return null}}function A6(e){return mi.hash(e).slice(0,xo)}var Td={},oo={},Qr={},vv;function jx(){if(vv)return Qr;vv=1,Object.defineProperty(Qr,"__esModule",{value:!0}),Qr.crossEnvCrypto=void 0;try{const e=typeof window<"u"&&window.crypto||tf.webcrypto;if(e){if(!e.subtle)throw new Error("Crypto.Subtle is undefined. Make sure you are using HTTPS in a compatible browser.");const n=a=>o=>e.subtle.digest(a,o);Qr.crossEnvCrypto={randomBytes:e.getRandomValues.bind(e),hashFunctions:{SHA1:n("SHA-1"),SHA256:n("SHA-256"),SHA384:n("SHA-384"),SHA512:n("SHA-512")}}}else{const n=tf,a=o=>c=>n.createHash(o).update(c).digest().buffer;Qr.crossEnvCrypto={randomBytes:n.randomFillSync,hashFunctions:{SHA1:a("sha1"),SHA256:a("sha256"),SHA384:a("sha384"),SHA512:a("sha512")}}}}catch(e){throw console.error(e),new Error("No suitable crypto library was found. You may need a polyfill.")}return Qr}var xv;function M6(){if(xv)return oo;xv=1,Object.defineProperty(oo,"__esModule",{value:!0}),oo.SRPParameters=void 0;const e=jx();class n{constructor(o=n.PrimeGroup[2048],c=n.H.SHA512){if(this.primeGroup=o,this.H=c,this.NBits=this.primeGroup.N.toString(2).length,!c)throw new Error("Hash function required")}}return oo.SRPParameters=n,n.PrimeGroup={256:{N:BigInt("125617018995153554710546479714086468244499594888726646874671447258204721048803"),g:BigInt(2)},512:{N:BigInt("11144252439149533417835749556168991736939157778924947037200268358613863350040339017097790259154750906072491181606044774215413467851989724116331597513345603"),g:BigInt(2)},768:{N:BigInt("1087179135105457859072065649059069760280540086975817629066444682366896187793570736574549981488868217843627094867924800342887096064844227836735667168319981288765377499806385489913341488724152562880918438701129530606139552645689583147"),g:BigInt(2)},1024:{N:BigInt("167609434410335061345139523764350090260135525329813904557420930309800865859473551531551523800013916573891864789934747039010546328480848979516637673776605610374669426214776197828492691384519453218253702788022233205683635831626913357154941914129985489522629902540768368409482248290641036967659389658897350067939"),g:BigInt(2)},1536:{N:BigInt("1486998185923128292816507353619409521152457662596380074614818966810244974827752411420380336514078832314731499938313197533147998565301020797040787428051479639316928015998415709101293902971072960487527411068082311763171549170528008620813391411445907584912865222076100726050255271567749213905330659264908657221124284665444825474741087704974475795505492821585749417639344967192301749033325359286273431675492866492416941152646940908101472416714421046022696100064262587"),g:BigInt(2)},2048:{N:BigInt("21766174458617435773191008891802753781907668374255538511144643224689886235383840957210909013086056401571399717235807266581649606472148410291413364152197364477180887395655483738115072677402235101762521901569820740293149529620419333266262073471054548368736039519702486226506248861060256971802984953561121442680157668000761429988222457090413873973970171927093992114751765168063614761119615476233422096442783117971236371647333871414335895773474667308967050807005509320424799678417036867928316761272274230314067548291133582479583061439577559347101961771406173684378522703483495337037655006751328447510550299250924469288819"),g:BigInt(2)}},n.H={SHA1:e.crossEnvCrypto.hashFunctions.SHA1,SHA256:e.crossEnvCrypto.hashFunctions.SHA256,SHA384:e.crossEnvCrypto.hashFunctions.SHA384,SHA512:e.crossEnvCrypto.hashFunctions.SHA512},oo}var mr={},lo={},yv;function Af(){return yv||(yv=1,(function(e){var n=lo&&lo.__awaiter||function(U,P,A,D){function I(Z){return Z instanceof A?Z:new A(function(re){re(Z)})}return new(A||(A=Promise))(function(Z,re){function _e(le){try{se(D.next(le))}catch(me){re(me)}}function Te(le){try{se(D.throw(le))}catch(me){re(me)}}function se(le){le.done?Z(le.value):I(le.value).then(_e,Te)}se((D=D.apply(U,P||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0}),e.modPow=e.hashBitCount=e.createVerifierAndSalt=e.createVerifier=e.generateRandomBigInt=e.generateRandomString=e.hashPadded=e.hash=e.padStartArrayBuffer=e.stringToArrayBuffer=e.arrayBufferToBigInt=e.bigIntToArrayBuffer=void 0;const a=jx(),o=BigInt(0),c=BigInt(1),u=BigInt(2),d=U=>{const P=U.toString(16),A=new ArrayBuffer(Math.ceil(P.length/2)),D=new Uint8Array(A);let I=0;P.length%2!==0&&(D[0]=parseInt(P[0],16),I=1);for(let Z=0;Z<A.byteLength;Z++)D[Z+I]=parseInt(P.slice(2*Z+I,2*Z+2+I),16);return A};e.bigIntToArrayBuffer=d;const m=U=>{const P=[];return new Uint8Array(U).forEach(A=>{P.push(("0"+A.toString(16)).slice(-2))}),BigInt(`0x${P.join("")}`)};e.arrayBufferToBigInt=m;function p(U){return new TextEncoder().encode(U).buffer}e.stringToArrayBuffer=p;const v=(U,P)=>{const A=new Uint8Array(U);if(A.length<P){const D=new Uint8Array(P);return D.fill(0,0,P-A.length),D.set(A,P-A.length),D}return A};e.padStartArrayBuffer=v;function x(U,...P){const A=P.reduce((I,Z)=>I+Z.byteLength,0),D=new Uint8Array(A);for(let I=0,Z=0;Z<P.length;Z++)D.set(new Uint8Array(P[Z]),I),I+=P[Z].byteLength;return U.H(D)}e.hash=x;function b(U,P,...A){const D=A.map(I=>e.padStartArrayBuffer(I,P));return x(U,...D)}e.hashPadded=b;function w(U=10){const P=new Uint8Array(Math.ceil(Math.ceil(U/2)));return a.crossEnvCrypto.randomBytes(P),P.reduce((A,D)=>{const I=D.toString(16).toString();return I.length===1?A+"0"+I:A+I},"").slice(0,U)}e.generateRandomString=w;function _(U=16){return e.arrayBufferToBigInt(O(U))}e.generateRandomBigInt=_;function C(U,P,A,D){return n(this,void 0,void 0,function*(){if(!P||!P.trim())throw new Error("Identity (I) must not be null or empty.");if(!A)throw new Error("Salt (s) must not be null.");if(!D)throw new Error("Password (P) must not be null");const I=yield U.computeX(P,A,D);return U.computeVerifier(I)})}e.createVerifier=C;function E(U,P,A,D){return n(this,void 0,void 0,function*(){const I=yield U.generateRandomSalt(D);return{s:I,v:yield C(U,P,I,A)}})}e.createVerifierAndSalt=E;const N=U=>n(void 0,void 0,void 0,function*(){return(yield x(U,e.bigIntToArrayBuffer(BigInt(1)))).byteLength*8});e.hashBitCount=N;function z(U,P,A){let D=c;for(;P>o;)P%u==c?(D=U*D%A,P-=c):(U=U*U%A,P/=u);return D}e.modPow=z;const O=U=>{const P=new Uint8Array(U);return a.crossEnvCrypto.randomBytes(P),P.buffer}})(lo)),lo}var bv;function O6(){if(bv)return mr;bv=1;var e=mr&&mr.__awaiter||function(o,c,u,d){function m(p){return p instanceof u?p:new u(function(v){v(p)})}return new(u||(u=Promise))(function(p,v){function x(_){try{w(d.next(_))}catch(C){v(C)}}function b(_){try{w(d.throw(_))}catch(C){v(C)}}function w(_){_.done?p(_.value):m(_.value).then(x,b)}w((d=d.apply(o,c||[])).next())})};Object.defineProperty(mr,"__esModule",{value:!0}),mr.SRPRoutines=void 0;const n=Af();class a{constructor(c){this.parameters=c}hash(...c){return n.hash(this.parameters,...c)}hashPadded(...c){const u=Math.trunc((this.parameters.NBits+7)/8);return n.hashPadded(this.parameters,u,...c)}computeK(){return e(this,void 0,void 0,function*(){return n.arrayBufferToBigInt(yield this.hashPadded(n.bigIntToArrayBuffer(this.parameters.primeGroup.N),n.bigIntToArrayBuffer(this.parameters.primeGroup.g)))})}generateRandomSalt(c){return e(this,void 0,void 0,function*(){const u=yield n.hashBitCount(this.parameters),d=c||2*u/8;return n.generateRandomBigInt(d)})}computeX(c,u,d){return e(this,void 0,void 0,function*(){return n.arrayBufferToBigInt(yield this.hash(n.bigIntToArrayBuffer(u),yield this.computeIdentityHash(c,d)))})}computeXStep2(c,u){return e(this,void 0,void 0,function*(){return n.arrayBufferToBigInt(yield this.hash(n.bigIntToArrayBuffer(c),u))})}computeIdentityHash(c,u){return e(this,void 0,void 0,function*(){return yield this.hash(n.stringToArrayBuffer(u))})}computeVerifier(c){return n.modPow(this.parameters.primeGroup.g,c,this.parameters.primeGroup.N)}generatePrivateValue(){const c=Math.max(256,this.parameters.NBits);let u;do u=n.generateRandomBigInt(c/8)%this.parameters.primeGroup.N;while(u===BigInt(0));return u}computeClientPublicValue(c){return n.modPow(this.parameters.primeGroup.g,c,this.parameters.primeGroup.N)}isValidPublicValue(c){return c%this.parameters.primeGroup.N!==BigInt(0)}computeU(c,u){return e(this,void 0,void 0,function*(){return n.arrayBufferToBigInt(yield this.hashPadded(n.bigIntToArrayBuffer(c),n.bigIntToArrayBuffer(u)))})}computeClientEvidence(c,u,d,m,p){return e(this,void 0,void 0,function*(){return n.arrayBufferToBigInt(yield this.hash(n.bigIntToArrayBuffer(d),n.bigIntToArrayBuffer(m),n.bigIntToArrayBuffer(p)))})}computeServerEvidence(c,u,d){return e(this,void 0,void 0,function*(){return n.arrayBufferToBigInt(yield this.hash(n.bigIntToArrayBuffer(c),n.bigIntToArrayBuffer(u),n.bigIntToArrayBuffer(d)))})}computeClientSessionKey(c,u,d,m,p){const v=this.parameters.primeGroup.N,x=d*u+m,b=n.modPow(this.parameters.primeGroup.g,u,v)*c%v;return n.modPow(p+v-b,x,v)}}return mr.SRPRoutines=a,mr}var Ys={},Sv;function z6(){if(Sv)return Ys;Sv=1;var e=Ys&&Ys.__awaiter||function(c,u,d,m){function p(v){return v instanceof d?v:new d(function(x){x(v)})}return new(d||(d=Promise))(function(v,x){function b(C){try{_(m.next(C))}catch(E){x(E)}}function w(C){try{_(m.throw(C))}catch(E){x(E)}}function _(C){C.done?v(C.value):p(C.value).then(b,w)}_((m=m.apply(c,u||[])).next())})};Object.defineProperty(Ys,"__esModule",{value:!0}),Ys.SRPClientSessionStep2=Ys.SRPClientSessionStep1=Ys.SRPClientSession=void 0;class n{constructor(u){this.routines=u}step1(u,d){return e(this,void 0,void 0,function*(){if(!u||!u.trim())throw new Error("User identity must not be null nor empty");if(!d)throw new Error("User password must not be null");const m=yield this.routines.computeIdentityHash(u,d);return new a(this.routines,u,m)})}}Ys.SRPClientSession=n;class a{constructor(u,d,m){this.routines=u,this.I=d,this.IH=m}step2(u,d){return e(this,void 0,void 0,function*(){if(!u)throw new Error("Salt (s) must not be null");if(!d)throw new Error("Public server value (B) must not be null");const m=yield this.routines.computeXStep2(u,this.IH),p=this.routines.generatePrivateValue(),v=this.routines.computeClientPublicValue(p),x=yield this.routines.computeK(),b=yield this.routines.computeU(v,d),w=this.routines.computeClientSessionKey(x,m,b,p,d),_=yield this.routines.computeClientEvidence(this.I,u,v,d,w);return new o(this.routines,v,_,w)})}toJSON(){return{I:this.I,IH:Array.from(new Uint8Array(this.IH))}}static fromState(u,d){return new a(u,d.I,new Uint8Array(d.IH).buffer)}}Ys.SRPClientSessionStep1=a;class o{constructor(u,d,m,p){this.routines=u,this.A=d,this.M1=m,this.S=p}step3(u){return e(this,void 0,void 0,function*(){if(!u)throw new Error("Server evidence (M2) must not be null");if((yield this.routines.computeServerEvidence(this.A,this.M1,this.S))!==u)throw new Error("Bad server credentials")})}toJSON(){return{A:this.A.toString(16),M1:this.M1.toString(16),S:this.S.toString(16)}}static fromState(u,d){return new o(u,BigInt("0x"+d.A),BigInt("0x"+d.M1),BigInt("0x"+d.S))}}return Ys.SRPClientSessionStep2=o,Ys}var xa={},jv;function U6(){if(jv)return xa;jv=1;var e=xa&&xa.__awaiter||function(d,m,p,v){function x(b){return b instanceof p?b:new p(function(w){w(b)})}return new(p||(p=Promise))(function(b,w){function _(N){try{E(v.next(N))}catch(z){w(z)}}function C(N){try{E(v.throw(N))}catch(z){w(z)}}function E(N){N.done?b(N.value):x(N.value).then(_,C)}E((v=v.apply(d,m||[])).next())})};Object.defineProperty(xa,"__esModule",{value:!0}),xa.SRPServerSessionStep1=xa.SRPServerSession=void 0;const n=Af();class a{constructor(m){this.routines=m}step1(m,p,v){return e(this,void 0,void 0,function*(){const x=this.routines.generatePrivateValue(),b=yield this.routines.computeK(),w=c(this.routines.parameters,b,v,x);return new o(this.routines,m,p,v,x,w)})}}xa.SRPServerSession=a;class o{constructor(m,p,v,x,b,w){this.routines=m,this.identifier=p,this.salt=v,this.verifier=x,this.b=b,this.B=w}sessionKey(m){return e(this,void 0,void 0,function*(){if(m===null)throw new Error("Client public value (A) must not be null");if(!this.routines.isValidPublicValue(m))throw new Error(`Invalid Client public value (A): ${m.toString(16)}`);const p=yield this.routines.computeU(m,this.B);return u(this.routines.parameters.primeGroup.N,this.verifier,p,m,this.b)})}step2(m,p){return e(this,void 0,void 0,function*(){if(!p)throw new Error("Client evidence (M1) must not be null");const v=yield this.sessionKey(m);if((yield this.routines.computeClientEvidence(this.identifier,this.salt,m,this.B,v))!==p)throw new Error("Bad client credentials");return this.routines.computeServerEvidence(m,p,v)})}toJSON(){return{identifier:this.identifier,salt:this.salt.toString(16),verifier:this.verifier.toString(16),b:this.b.toString(16),B:this.B.toString(16)}}static fromState(m,p){return new o(m,p.identifier,BigInt("0x"+p.salt),BigInt("0x"+p.verifier),BigInt("0x"+p.b),BigInt("0x"+p.B))}}xa.SRPServerSessionStep1=o;const c=(d,m,p,v)=>(n.modPow(d.primeGroup.g,v,d.primeGroup.N)+p*m)%d.primeGroup.N,u=(d,m,p,v,x)=>n.modPow(n.modPow(m,p,d)*v,x,d);return xa}var wv;function L6(){return wv||(wv=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.generateRandomBigInt=e.arrayBufferToBigInt=e.bigIntToArrayBuffer=e.createVerifierAndSalt=e.SRPServerSessionStep1=e.SRPServerSession=e.SRPClientSessionStep2=e.SRPClientSessionStep1=e.SRPClientSession=e.SRPRoutines=e.SRPParameters=void 0;var n=M6();Object.defineProperty(e,"SRPParameters",{enumerable:!0,get:function(){return n.SRPParameters}});var a=O6();Object.defineProperty(e,"SRPRoutines",{enumerable:!0,get:function(){return a.SRPRoutines}});var o=z6();Object.defineProperty(e,"SRPClientSession",{enumerable:!0,get:function(){return o.SRPClientSession}}),Object.defineProperty(e,"SRPClientSessionStep1",{enumerable:!0,get:function(){return o.SRPClientSessionStep1}}),Object.defineProperty(e,"SRPClientSessionStep2",{enumerable:!0,get:function(){return o.SRPClientSessionStep2}});var c=U6();Object.defineProperty(e,"SRPServerSession",{enumerable:!0,get:function(){return c.SRPServerSession}}),Object.defineProperty(e,"SRPServerSessionStep1",{enumerable:!0,get:function(){return c.SRPServerSessionStep1}});var u=Af();Object.defineProperty(e,"createVerifierAndSalt",{enumerable:!0,get:function(){return u.createVerifierAndSalt}}),Object.defineProperty(e,"bigIntToArrayBuffer",{enumerable:!0,get:function(){return u.bigIntToArrayBuffer}}),Object.defineProperty(e,"arrayBufferToBigInt",{enumerable:!0,get:function(){return u.arrayBufferToBigInt}}),Object.defineProperty(e,"generateRandomBigInt",{enumerable:!0,get:function(){return u.generateRandomBigInt}})})(Td)),Td}var Ql=L6();const D6=new Ql.SRPParameters,B6=new Ql.SRPRoutines(D6);function Nv(e){return e.toString(16)}function kd(e){return BigInt(`0x${e}`)}class $6{constructor(){Qe(this,"session");Qe(this,"step1Result",null);Qe(this,"step2Result",null);Qe(this,"sessionKey",null);Qe(this,"identity",null);this.session=new Ql.SRPClientSession(B6)}async generateHello(n,a){return this.identity=n,this.step1Result=await this.session.step1(n,a),{identity:n}}async processChallenge(n,a){if(!this.step1Result)throw new Error("Must call generateHello before processChallenge");const o=kd(n),c=kd(a);return this.step2Result=await this.step1Result.step2(o,c),{A:Nv(this.step2Result.A),M1:Nv(this.step2Result.M1)}}async verifyServer(n){if(!this.step2Result)throw new Error("Must call processChallenge before verifyServer");const a=kd(n);try{await this.step2Result.step3(a);const o=Ql.bigIntToArrayBuffer(this.step2Result.S);return this.sessionKey=new Uint8Array(o),!0}catch{return!1}}getSessionKey(){return this.sessionKey}isAuthenticated(){return this.sessionKey!==null}getIdentity(){return this.identity}}function Il(){return crypto.randomUUID()}const I6=64*1024;class wx{constructor(n,a,o){Qe(this,"mode","secure");Qe(this,"ws",null);Qe(this,"srpSession",null);Qe(this,"sessionKey",null);Qe(this,"connectionState","disconnected");Qe(this,"pendingRequests",new Map);Qe(this,"pendingUploads",new Map);Qe(this,"subscriptions",new Map);Qe(this,"connectionPromise",null);Qe(this,"username");Qe(this,"password");Qe(this,"wsUrl");this.wsUrl=n,this.username=a,this.password=o}async ensureConnected(){var n;if(!(((n=this.ws)==null?void 0:n.readyState)===WebSocket.OPEN&&this.connectionState==="authenticated")){if(this.connectionPromise)return this.connectionPromise;this.connectionPromise=this.connectAndAuthenticate();try{await this.connectionPromise}finally{this.connectionPromise=null}}}connectAndAuthenticate(){return new Promise((n,a)=>{console.log("[SecureConnection] Connecting to",this.wsUrl),this.connectionState="connecting";const o=new WebSocket(this.wsUrl);let c=()=>{},u=()=>{};const d=new Promise((p,v)=>{c=p,u=v});o.onopen=async()=>{console.log("[SecureConnection] WebSocket connected, starting SRP"),this.ws=o;try{this.srpSession=new $6,await this.srpSession.generateHello(this.username,this.password);const p={type:"srp_hello",identity:this.username};o.send(JSON.stringify(p)),this.connectionState="srp_hello_sent",console.log("[SecureConnection] SRP hello sent")}catch(p){console.error("[SecureConnection] SRP hello error:",p),this.connectionState="failed",u(p instanceof Error?p:new Error(String(p))),o.close()}},o.onerror=p=>{console.error("[SecureConnection] Error:",p)},o.onclose=p=>{var v,x;console.log("[SecureConnection] Closed:",p.code,p.reason),this.ws=null,this.sessionKey=null,this.srpSession=null,this.connectionState!=="authenticated"&&(this.connectionState="failed",u(new Error("Connection closed before authentication")));for(const[b,w]of this.pendingRequests)clearTimeout(w.timeout),w.reject(new Error("WebSocket connection closed")),this.pendingRequests.delete(b);for(const[b,w]of this.pendingUploads)w.reject(new Error("WebSocket connection closed")),this.pendingUploads.delete(b);for(const b of this.subscriptions.values())(v=b.onError)==null||v.call(b,new Error("WebSocket connection closed")),(x=b.onClose)==null||x.call(b);this.subscriptions.clear()},o.onmessage=async p=>{this.connectionState==="srp_hello_sent"?await this.handleSrpChallenge(p.data,c,u):this.connectionState==="srp_proof_sent"?await this.handleSrpVerify(p.data,c,u):this.connectionState==="authenticated"&&this.handleMessage(p.data)};const m=setTimeout(()=>{this.connectionState!=="authenticated"&&(o.close(),this.connectionState="failed",a(new Error("Connection timeout")))},3e4);d.then(()=>{clearTimeout(m),n()}).catch(p=>{clearTimeout(m),a(p)})})}async handleSrpChallenge(n,a,o){var c,u,d;try{const m=JSON.parse(n);if(hv(m)){console.error("[SecureConnection] SRP error:",m.message),this.connectionState="failed",o(new Error(`Authentication failed: ${m.message}`)),(c=this.ws)==null||c.close();return}if(!b6(m)){console.warn("[SecureConnection] Unexpected message during SRP:",m);return}if(!this.srpSession){o(new Error("No SRP session"));return}console.log("[SecureConnection] Received SRP challenge");const{A:p,M1:v}=await this.srpSession.processChallenge(m.salt,m.B),x={type:"srp_proof",A:p,M1:v};(u=this.ws)==null||u.send(JSON.stringify(x)),this.connectionState="srp_proof_sent",console.log("[SecureConnection] SRP proof sent")}catch(m){console.error("[SecureConnection] SRP challenge error:",m),this.connectionState="failed",o(m instanceof Error?m:new Error(String(m))),(d=this.ws)==null||d.close()}}async handleSrpVerify(n,a,o){var c,u,d;try{const m=JSON.parse(n);if(hv(m)){console.error("[SecureConnection] SRP error:",m.message),this.connectionState="failed",o(new Error(`Authentication failed: ${m.message}`)),(c=this.ws)==null||c.close();return}if(!S6(m)){console.warn("[SecureConnection] Unexpected message during SRP:",m);return}if(!this.srpSession){o(new Error("No SRP session"));return}if(console.log("[SecureConnection] Received SRP verify"),!await this.srpSession.verifyServer(m.M2)){console.error("[SecureConnection] Server verification failed"),this.connectionState="failed",o(new Error("Server verification failed")),(u=this.ws)==null||u.close();return}const v=this.srpSession.getSessionKey();if(!v){o(new Error("No session key"));return}this.sessionKey=A6(v),this.connectionState="authenticated",console.log("[SecureConnection] Authentication complete"),a()}catch(m){console.error("[SecureConnection] SRP verify error:",m),this.connectionState="failed",o(m instanceof Error?m:new Error(String(m))),(d=this.ws)==null||d.close()}}handleMessage(n){if(typeof n!="string"){console.warn("[SecureConnection] Ignoring non-string message");return}let a;try{a=JSON.parse(n)}catch{console.warn("[SecureConnection] Failed to parse message:",n);return}if(!j6(a)){console.warn("[SecureConnection] Received unencrypted message after auth");return}if(!this.sessionKey){console.warn("[SecureConnection] No session key for decryption");return}const o=R6(a.nonce,a.ciphertext,this.sessionKey);if(!o){console.warn("[SecureConnection] Failed to decrypt message");return}let c;try{c=JSON.parse(o)}catch{console.warn("[SecureConnection] Failed to parse decrypted message:",o);return}switch(c.type){case"response":this.handleResponse(c);break;case"event":this.handleEvent(c);break;case"upload_progress":this.handleUploadProgress(c);break;case"upload_complete":this.handleUploadComplete(c);break;case"upload_error":this.handleUploadError(c);break;default:console.warn("[SecureConnection] Unknown message type:",c.type)}}handleEvent(n){var o;const a=this.subscriptions.get(n.subscriptionId);if(!a){console.warn("[SecureConnection] Received event for unknown subscription:",n.subscriptionId);return}n.eventType==="connected"&&((o=a.onOpen)==null||o.call(a)),a.onEvent(n.eventType,n.eventId,n.data)}handleResponse(n){const a=this.pendingRequests.get(n.id);if(!a){console.warn("[SecureConnection] Received response for unknown request:",n.id);return}clearTimeout(a.timeout),this.pendingRequests.delete(n.id),a.resolve(n)}handleUploadProgress(n){const a=this.pendingUploads.get(n.uploadId);a!=null&&a.onProgress&&a.onProgress(n.bytesReceived)}handleUploadComplete(n){const a=this.pendingUploads.get(n.uploadId);a&&(this.pendingUploads.delete(n.uploadId),a.resolve(n.file))}handleUploadError(n){const a=this.pendingUploads.get(n.uploadId);a&&(this.pendingUploads.delete(n.uploadId),a.reject(new Error(n.error)))}send(n){if(!this.ws||this.ws.readyState!==WebSocket.OPEN)throw new Error("WebSocket not connected");if(!this.sessionKey)throw new Error("Not authenticated");const a=JSON.stringify(n),{nonce:o,ciphertext:c}=k6(a,this.sessionKey),u={type:"encrypted",nonce:o,ciphertext:c};this.ws.send(JSON.stringify(u))}async fetch(n,a){await this.ensureConnected();const o=Il(),c=(a==null?void 0:a.method)??"GET";let u;if(a!=null&&a.body)if(typeof a.body=="string")try{u=JSON.parse(a.body)}catch{u=a.body}else u=a.body;const d={};if(a!=null&&a.headers)if(a.headers instanceof Headers)a.headers.forEach((p,v)=>{d[v]=p});else if(Array.isArray(a.headers))for(const[p,v]of a.headers)d[p]=v;else Object.assign(d,a.headers);d["Content-Type"]="application/json",d["X-Yep-Anywhere"]="true";const m={type:"request",id:o,method:c,path:n.startsWith("/api")?n:`/api${n}`,headers:d,body:u};return new Promise((p,v)=>{const x=setTimeout(()=>{this.pendingRequests.delete(o),v(new Error("Request timeout"))},3e4);this.pendingRequests.set(o,{resolve:b=>{var w;if(b.status>=400){const _=new Error(`API error: ${b.status}`);_.status=b.status,((w=b.headers)==null?void 0:w["X-Setup-Required"])==="true"&&(_.setupRequired=!0),v(_)}else p(b.body)},reject:v,timeout:x});try{this.send(m)}catch(b){clearTimeout(x),this.pendingRequests.delete(o),v(b)}})}subscribeSession(n,a,o){const c=Il();return this.subscriptions.set(c,a),this.ensureConnected().then(()=>{const u={type:"subscribe",subscriptionId:c,channel:"session",sessionId:n,lastEventId:o};this.send(u)}).catch(u=>{var d;(d=a.onError)==null||d.call(a,u),this.subscriptions.delete(c)}),{close:()=>{var u,d;if(this.subscriptions.delete(c),((u=this.ws)==null?void 0:u.readyState)===WebSocket.OPEN&&this.connectionState==="authenticated"){const m={type:"unsubscribe",subscriptionId:c};try{this.send(m)}catch{}}(d=a.onClose)==null||d.call(a)}}}subscribeActivity(n){const a=Il();return this.subscriptions.set(a,n),this.ensureConnected().then(()=>{const o={type:"subscribe",subscriptionId:a,channel:"activity"};this.send(o)}).catch(o=>{var c;(c=n.onError)==null||c.call(n,o),this.subscriptions.delete(a)}),{close:()=>{var o,c;if(this.subscriptions.delete(a),((o=this.ws)==null?void 0:o.readyState)===WebSocket.OPEN&&this.connectionState==="authenticated"){const u={type:"unsubscribe",subscriptionId:a};try{this.send(u)}catch{}}(c=n.onClose)==null||c.call(n)}}}async upload(n,a,o,c){var p;await this.ensureConnected();const u=Il(),d=(c==null?void 0:c.chunkSize)??I6,m=new Promise((v,x)=>{this.pendingUploads.set(u,{resolve:v,reject:x,onProgress:c==null?void 0:c.onProgress}),c!=null&&c.signal&&c.signal.addEventListener("abort",()=>{this.pendingUploads.delete(u),x(new Error("Upload aborted"))})});try{const v={type:"upload_start",uploadId:u,projectId:n,sessionId:a,filename:o.name,size:o.size,mimeType:o.type||"application/octet-stream"};this.send(v);let x=0;const b=o.stream().getReader();for(;;){if((p=c==null?void 0:c.signal)!=null&&p.aborted)throw b.cancel(),new Error("Upload aborted");const{done:_,value:C}=await b.read();if(_)break;let E=0;for(;E<C.length;){const N=Math.min(E+d,C.length),z=C.slice(E,N),O=btoa(Array.from(z).map(P=>String.fromCharCode(P)).join("")),U={type:"upload_chunk",uploadId:u,offset:x,data:O};this.send(U),x+=z.length,E=N}}const w={type:"upload_end",uploadId:u};return this.send(w),await m}catch(v){throw this.pendingUploads.delete(u),v}}close(){var n;for(const a of this.subscriptions.values())(n=a.onClose)==null||n.call(a);this.subscriptions.clear();for(const[a,o]of this.pendingRequests)clearTimeout(o.timeout),o.reject(new Error("Connection closed"));this.pendingRequests.clear();for(const a of this.pendingUploads.values())a.reject(new Error("Connection closed"));this.pendingUploads.clear(),this.sessionKey=null,this.srpSession=null,this.connectionState="disconnected",this.ws&&(this.ws.close(),this.ws=null)}isAuthenticated(){return this.connectionState==="authenticated"&&this.sessionKey!==null}}let Nx=null;function nf(e){Nx=e}function Mf(){return Nx}const P6=Object.freeze(Object.defineProperty({__proto__:null,DirectConnection:$0,SecureConnection:wx,WebSocketConnection:P0,directConnection:I0,getGlobalConnection:Mf,getWebSocketConnection:jo,setGlobalConnection:nf},Symbol.toStringTag,{value:"Module"})),H6="/api";async function Je(e,n){const a=Mf();if(a)return a.fetch(e,n);if(jf())return jo().fetch(e,n);const o=await fetch(`${H6}${e}`,{...n,credentials:"include",headers:{"Content-Type":"application/json","X-Yep-Anywhere":"true",...n==null?void 0:n.headers}});if(!o.ok){const c=o.headers.get("X-Setup-Required")==="true",u=new Error(`API error: ${o.status} ${o.statusText}`);throw u.status=o.status,c&&(u.setupRequired=!0),u}return o.json()}const Ke={getVersion:()=>Je("/version"),getProviders:()=>Je("/providers"),getProjects:()=>Je("/projects"),addProject:e=>Je("/projects",{method:"POST",body:JSON.stringify({path:e})}),getProject:e=>Je(`/projects/${e}`),getSession:(e,n,a)=>{const o=a?`?afterMessageId=${a}`:"";return Je(`/projects/${e}/sessions/${n}${o}`)},getSessionMetadata:(e,n)=>Je(`/projects/${e}/sessions/${n}/metadata`),getAgentSession:(e,n,a)=>Je(`/projects/${e}/sessions/${n}/agents/${a}`),getAgentMappings:(e,n)=>Je(`/projects/${e}/sessions/${n}/agents`),startSession:(e,n,a,o)=>Je(`/projects/${e}/sessions`,{method:"POST",body:JSON.stringify({message:n,mode:a==null?void 0:a.mode,model:a==null?void 0:a.model,thinking:a==null?void 0:a.thinking,provider:a==null?void 0:a.provider,attachments:o})}),createSession:(e,n)=>Je(`/projects/${e}/sessions/create`,{method:"POST",body:JSON.stringify({mode:n==null?void 0:n.mode,model:n==null?void 0:n.model,thinking:n==null?void 0:n.thinking,provider:n==null?void 0:n.provider})}),resumeSession:(e,n,a,o,c,u)=>Je(`/projects/${e}/sessions/${n}/resume`,{method:"POST",body:JSON.stringify({message:a,mode:o==null?void 0:o.mode,model:o==null?void 0:o.model,thinking:o==null?void 0:o.thinking,provider:o==null?void 0:o.provider,attachments:c,tempId:u})}),queueMessage:(e,n,a,o,c,u)=>Je(`/sessions/${e}/messages`,{method:"POST",body:JSON.stringify({message:n,mode:a,attachments:o,tempId:c,thinking:u})}),abortProcess:e=>Je(`/processes/${e}/abort`,{method:"POST"}),respondToInput:(e,n,a,o,c)=>Je(`/sessions/${e}/input`,{method:"POST",body:JSON.stringify({requestId:n,response:a,answers:o,feedback:c})}),setPermissionMode:(e,n)=>Je(`/sessions/${e}/mode`,{method:"PUT",body:JSON.stringify({mode:n})}),setHold:(e,n)=>Je(`/sessions/${e}/hold`,{method:"PUT",body:JSON.stringify({hold:n})}),getProcessInfo:e=>Je(`/sessions/${e}/process`),markSessionSeen:(e,n,a)=>Je(`/sessions/${e}/mark-seen`,{method:"POST",body:JSON.stringify({timestamp:n,messageId:a})}),markSessionUnread:e=>Je(`/sessions/${e}/mark-seen`,{method:"DELETE"}),getLastSeen:()=>Je("/notifications/last-seen"),updateSessionMetadata:(e,n)=>Je(`/sessions/${e}/metadata`,{method:"PUT",body:JSON.stringify(n)}),cloneSession:(e,n,a)=>Je(`/projects/${e}/sessions/${n}/clone`,{method:"POST",body:JSON.stringify({title:a})}),getPushPublicKey:()=>Je("/push/vapid-public-key"),subscribePush:(e,n,a)=>Je("/push/subscribe",{method:"POST",body:JSON.stringify({deviceId:e,subscription:n,deviceName:a})}),unsubscribePush:e=>Je("/push/unsubscribe",{method:"POST",body:JSON.stringify({deviceId:e})}),getPushSubscriptions:()=>Je("/push/subscriptions"),testPush:(e,n)=>Je("/push/test",{method:"POST",body:JSON.stringify({deviceId:e,message:n})}),getFile:(e,n,a=!1)=>{const o=new URLSearchParams({path:n});return a&&o.set("highlight","true"),Je(`/projects/${e}/files?${o.toString()}`)},getFileRawUrl:(e,n,a=!1)=>{const o=new URLSearchParams({path:n});return a&&o.set("download","true"),`/api/projects/${e}/files/raw?${o.toString()}`},expandDiffContext:(e,n,a,o,c)=>Je(`/projects/${e}/diff/expand`,{method:"POST",body:JSON.stringify({filePath:n,oldString:a,newString:o,originalFile:c})}),getInbox:e=>Je(e?`/inbox?projectId=${encodeURIComponent(e)}`:"/inbox"),getGlobalSessions:e=>{const n=new URLSearchParams;e!=null&&e.project&&n.set("project",e.project),e!=null&&e.q&&n.set("q",e.q),e!=null&&e.after&&n.set("after",e.after),e!=null&&e.limit&&n.set("limit",String(e.limit)),e!=null&&e.includeArchived&&n.set("includeArchived","true"),e!=null&&e.starred&&n.set("starred","true");const a=n.toString();return Je(a?`/sessions?${a}`:"/sessions")},getAuthStatus:()=>Je("/auth/status"),enableAuth:e=>Je("/auth/enable",{method:"POST",body:JSON.stringify({password:e})}),disableAuth:()=>Je("/auth/disable",{method:"POST"}),setupAccount:e=>Je("/auth/setup",{method:"POST",body:JSON.stringify({password:e})}),login:e=>Je("/auth/login",{method:"POST",body:JSON.stringify({password:e})}),logout:()=>Je("/auth/logout",{method:"POST"}),changePassword:(e,n)=>Je("/auth/change-password",{method:"POST",body:JSON.stringify({currentPassword:e,newPassword:n})}),getClaudeLoginStatus:()=>Je("/auth/claude-login/status"),startClaudeLogin:()=>Je("/auth/claude-login/start",{method:"POST"}),submitClaudeLoginCode:e=>Je("/auth/claude-login/code",{method:"POST",body:JSON.stringify({code:e})}),cancelClaudeLogin:()=>Je("/auth/claude-login/cancel",{method:"POST"}),checkTmuxAvailable:()=>Je("/auth/claude-login/tmux"),setClaudeApiKey:e=>Je("/auth/claude-login/apikey",{method:"POST",body:JSON.stringify({apiKey:e})}),getRecents:e=>Je(e?`/recents?limit=${e}`:"/recents"),recordVisit:(e,n)=>Je("/recents/visit",{method:"POST",body:JSON.stringify({sessionId:e,projectId:n})}),clearRecents:()=>Je("/recents",{method:"DELETE"}),getBeadsStatus:e=>Je(`/projects/${e}/beads/status`),getBeadsList:e=>Je(`/projects/${e}/beads/list`),getBeadsReady:e=>Je(`/projects/${e}/beads/ready`)},Z6="modulepreload",q6=function(e){return"/"+e},Ev={},V6=function(n,a,o){let c=Promise.resolve();if(a&&a.length>0){let d=function(v){return Promise.all(v.map(x=>Promise.resolve(x).then(b=>({status:"fulfilled",value:b}),b=>({status:"rejected",reason:b}))))};document.getElementsByTagName("link");const m=document.querySelector("meta[property=csp-nonce]"),p=(m==null?void 0:m.nonce)||(m==null?void 0:m.getAttribute("nonce"));c=d(a.map(v=>{if(v=q6(v),v in Ev)return;Ev[v]=!0;const x=v.endsWith(".css"),b=x?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${v}"]${b}`))return;const w=document.createElement("link");if(w.rel=x?"stylesheet":Z6,x||(w.as="script"),w.crossOrigin="",w.href=v,p&&w.setAttribute("nonce",p),document.head.appendChild(w),x)return new Promise((_,C)=>{w.addEventListener("load",_),w.addEventListener("error",()=>C(new Error(`Unable to preload CSS for ${v}`)))})}))}function u(d){const m=new Event("vite:preloadError",{cancelable:!0});if(m.payload=d,window.dispatchEvent(m),!m.defaultPrevented)throw d}return c.then(d=>{for(const m of d||[])m.status==="rejected"&&u(m.reason);return n().catch(u)})},F6="/api",Rd=2e3;class G6{constructor(){Qe(this,"eventSource",null);Qe(this,"wsSubscription",null);Qe(this,"listeners",new Map);Qe(this,"reconnectTimeout",null);Qe(this,"hasConnected",!1);Qe(this,"_connected",!1);Qe(this,"useWebSocket",!1)}get connected(){return this._connected}connect(){if(this.eventSource||this.wsSubscription)return;const n=Mf();if(n){this.connectWithConnection(n);return}this.useWebSocket=jf(),this.useWebSocket?this.connectWebSocket():this.connectSSE()}connectWithConnection(n){this.wsSubscription=n.subscribeActivity({onEvent:(a,o,c)=>{this.handleWsEvent(a,c)},onOpen:()=>{const a=this.hasConnected;this.hasConnected=!0,this._connected=!0,a&&this.emit("reconnect",void 0)},onError:a=>{console.error("[ActivityBus] Connection error:",a),this._connected=!1,this.wsSubscription=null,this.reconnectTimeout=setTimeout(()=>this.connect(),Rd)}})}connectWebSocket(){V6(async()=>{const{getWebSocketConnection:n}=await Promise.resolve().then(()=>P6);return{getWebSocketConnection:n}},[]).then(({getWebSocketConnection:n})=>{const a=n();this.wsSubscription=a.subscribeActivity({onEvent:(o,c,u)=>{this.handleWsEvent(o,u)},onOpen:()=>{const o=this.hasConnected;this.hasConnected=!0,this._connected=!0,o&&this.emit("reconnect",void 0)},onError:o=>{console.error("[ActivityBus] WebSocket error:",o),this._connected=!1,this.wsSubscription=null,this.reconnectTimeout=setTimeout(()=>this.connect(),Rd)}})})}handleWsEvent(n,a){n==="connected"||n==="heartbeat"||this.isValidEventType(n)&&this.emit(n,a)}isValidEventType(n){return["file-change","session-status-changed","session-created","session-updated","session-seen","process-state-changed","session-metadata-changed","source-change","backend-reloaded","worker-activity-changed","reconnect"].includes(n)}connectSSE(){const n=new EventSource(`${F6}/activity/events`);n.onopen=()=>{const a=this.hasConnected;this.hasConnected=!0,this._connected=!0,a&&this.emit("reconnect",void 0)},n.addEventListener("file-change",a=>this.handleEvent("file-change",a)),n.addEventListener("session-status-changed",a=>this.handleEvent("session-status-changed",a)),n.addEventListener("session-created",a=>this.handleEvent("session-created",a)),n.addEventListener("session-updated",a=>this.handleEvent("session-updated",a)),n.addEventListener("session-seen",a=>this.handleEvent("session-seen",a)),n.addEventListener("process-state-changed",a=>this.handleEvent("process-state-changed",a)),n.addEventListener("session-metadata-changed",a=>this.handleEvent("session-metadata-changed",a)),n.addEventListener("source-change",a=>this.handleEvent("source-change",a)),n.addEventListener("backend-reloaded",()=>this.emit("backend-reloaded",void 0)),n.addEventListener("worker-activity-changed",a=>this.handleEvent("worker-activity-changed",a)),n.addEventListener("connected",()=>{}),n.addEventListener("heartbeat",()=>{}),n.onerror=()=>{this._connected=!1,n.close(),this.eventSource=null,this.reconnectTimeout=setTimeout(()=>this.connect(),Rd)},this.eventSource=n}disconnect(){this.reconnectTimeout&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null),this.eventSource&&(this.eventSource.close(),this.eventSource=null),this.wsSubscription&&(this.wsSubscription.close(),this.wsSubscription=null),this._connected=!1}on(n,a){let o=this.listeners.get(n);return o||(o=new Set,this.listeners.set(n,o)),o.add(a),()=>{o.delete(a)}}handleEvent(n,a){if(!(a.data===void 0||a.data===null))try{const o=JSON.parse(a.data);this.emit(n,o)}catch{}}emit(n,a){const o=this.listeners.get(n);if(o)for(const c of o)c(a)}}const Wn=new G6,Y6=500;function pi(e={}){const{maxEvents:n=Y6,onFileChange:a,onSessionStatusChange:o,onSessionCreated:c,onSessionSeen:u,onProcessStateChange:d,onSessionMetadataChange:m,onSessionUpdated:p,onReconnect:v}=e,[x,b]=h.useState([]),[w,_]=h.useState(Wn.connected),[C,E]=h.useState(!1),N=h.useRef(a);N.current=a;const z=h.useRef(o);z.current=o;const O=h.useRef(c);O.current=c;const U=h.useRef(u);U.current=u;const P=h.useRef(d);P.current=d;const A=h.useRef(m);A.current=m;const D=h.useRef(p);D.current=p;const I=h.useRef(v);I.current=v;const Z=h.useRef(n);Z.current=n;const re=h.useRef(C);re.current=C,h.useEffect(()=>{const L=[];return L.push(Wn.on("file-change",F=>{var G;(G=N.current)==null||G.call(N,F),re.current||b(we=>[F,...we].slice(0,Z.current))})),L.push(Wn.on("session-status-changed",F=>{var G;(G=z.current)==null||G.call(z,F)})),L.push(Wn.on("session-created",F=>{var G;(G=O.current)==null||G.call(O,F)})),L.push(Wn.on("session-seen",F=>{var G;(G=U.current)==null||G.call(U,F)})),L.push(Wn.on("process-state-changed",F=>{var G;(G=P.current)==null||G.call(P,F)})),L.push(Wn.on("session-metadata-changed",F=>{var G;(G=A.current)==null||G.call(A,F)})),L.push(Wn.on("session-updated",F=>{var G;(G=D.current)==null||G.call(D,F)})),L.push(Wn.on("reconnect",()=>{var F;_(!0),(F=I.current)==null||F.call(I)})),()=>{for(const F of L)F()}},[]),h.useEffect(()=>{const F=setInterval(()=>{_(Wn.connected)},1e3);return()=>clearInterval(F)},[]);const _e=h.useCallback(()=>{b([])},[]),Te=h.useCallback(()=>{E(L=>!L)},[]),se=h.useCallback(L=>{const F=new RegExp(L,"i");return x.filter(G=>F.test(G.relativePath))},[x]),le=h.useCallback(L=>x.filter(F=>F.fileType===L),[x]),me=h.useCallback(()=>{},[]),Re=h.useCallback(()=>{},[]);return{events:x,connected:w,paused:C,connect:me,disconnect:Re,clearEvents:_e,togglePause:Te,filterByPath:se,filterByType:le}}const K6=500,W6=["needsAttention","active","recentActivity","unread8h","unread24h"];function X6(e,n){const a={needsAttention:[],active:[],recentActivity:[],unread8h:[],unread24h:[]};for(const o of W6){const c=e[o],u=n[o],d=new Map(c.map(v=>[v.sessionId,v])),m=[];for(const v of u){const x=d.get(v);x&&m.push(x)}const p=new Set(u);for(const v of c)p.has(v.sessionId)||m.push(v);a[o]=m}return a}function _v(e){return{needsAttention:e.needsAttention.map(n=>n.sessionId),active:e.active.map(n=>n.sessionId),recentActivity:e.recentActivity.map(n=>n.sessionId),unread8h:e.unread8h.map(n=>n.sessionId),unread24h:e.unread24h.map(n=>n.sessionId)}}function Q6(){return{needsAttention:[],active:[],recentActivity:[],unread8h:[],unread24h:[]}}const J6={needsAttention:[],active:[],recentActivity:[],unread8h:[],unread24h:[]},Ex=h.createContext(null);function eT({children:e,initialEnabled:n=!0}){const[a,o]=h.useState(J6),[c,u]=h.useState(!0),[d,m]=h.useState(null),[p,v]=h.useState(n),x=h.useRef(Q6()),b=h.useRef(!1),w=h.useRef(null),_=h.useRef(p);_.current=p;const C=h.useCallback(async(P=!1)=>{if(_.current)try{const A=await Ke.getInbox();if(!b.current||P)o(A),x.current=_v(A),b.current=!0;else{const D=X6(A,x.current);o(D),x.current=_v(D)}m(null)}catch(A){m(A instanceof Error?A:new Error(String(A)))}finally{u(!1)}},[]),E=h.useCallback(()=>C(!0),[C]),N=h.useCallback(()=>{_.current&&(w.current&&clearTimeout(w.current),w.current=setTimeout(()=>{C()},K6))},[C]);pi({onProcessStateChange:N,onSessionStatusChange:N,onSessionSeen:N,onSessionCreated:N}),h.useEffect(()=>{p&&C()},[p,C]),h.useEffect(()=>()=>{w.current&&clearTimeout(w.current)},[]);const z=a.needsAttention.length,O=a.active.length,U=a.needsAttention.length+a.active.length+a.recentActivity.length+a.unread8h.length+a.unread24h.length;return i.jsx(Ex.Provider,{value:{needsAttention:a.needsAttention,active:a.active,recentActivity:a.recentActivity,unread8h:a.unread8h,unread24h:a.unread24h,inbox:a,loading:c,error:d,refresh:E,refetch:C,totalNeedsAttention:z,totalActive:O,totalItems:U,enabled:p,setEnabled:v},children:e})}function Of(){const e=h.useContext(Ex);if(!e)throw new Error("useInboxContext must be used within an InboxProvider");return e}const _x=h.createContext(null),zf="yep-anywhere-remote-credentials";function tT(){try{const e=localStorage.getItem(zf);if(e)return JSON.parse(e)}catch{}return null}function nT(e,n){try{const a={wsUrl:e,username:n};localStorage.setItem(zf,JSON.stringify(a))}catch{}}function sT(){try{localStorage.removeItem(zf)}catch{}}function aT({children:e}){const[n,a]=h.useState(null),[o,c]=h.useState(!1),[u,d]=h.useState(null),m=tT(),p=h.useCallback(async(b,w,_)=>{c(!0),d(null);try{const C=new wx(b,w,_);await C.fetch("/auth/status"),nT(b,w),a(C)}catch(C){const E=C instanceof Error?C.message:"Connection failed";throw d(E),C}finally{c(!1)}},[]),v=h.useCallback(()=>{n&&(n.close(),a(null)),sT(),d(null)},[n]);h.useEffect(()=>(nf(n),()=>{nf(null),n==null||n.close()}),[n]);const x={connection:n,isConnecting:o,error:u,connect:p,disconnect:v,storedUrl:(m==null?void 0:m.wsUrl)??null,storedUsername:(m==null?void 0:m.username)??null};return i.jsx(_x.Provider,{value:x,children:e})}function Cx(){const e=h.useContext(_x);if(!e)throw new Error("useRemoteConnection must be used within RemoteConnectionProvider");return e}const Tx="yep-anywhere-schema-validation",Ad={enabled:!1,ignoredTools:[]};function rT(){const e=localStorage.getItem(Tx);if(!e)return Ad;try{return{...Ad,...JSON.parse(e)}}catch{return Ad}}function Cv(e){localStorage.setItem(Tx,JSON.stringify(e))}function kx(){const[e,n]=h.useState(rT),a=h.useCallback(c=>{n(u=>{const d={...u,enabled:c};return Cv(d),d})},[]),o=h.useCallback(c=>{n(u=>{const d={...u,ignoredTools:c};return Cv(d),d})},[]);return{settings:e,setEnabled:a,setIgnoredTools:o}}function iT({toasts:e,onDismiss:n}){return e.length===0?null:i.jsx("div",{className:"toast-container",children:e.map(a=>i.jsxs("div",{className:`toast toast-${a.type}`,onClick:()=>n(a.id),onKeyDown:o=>o.key==="Enter"&&n(a.id),role:"alert",children:[i.jsx("span",{className:"toast-message",children:a.message}),a.action&&i.jsx("button",{type:"button",className:"toast-action",onClick:o=>{var c;o.stopPropagation(),(c=a.action)==null||c.onClick(),n(a.id)},children:a.action.label})]},a.id))})}const Rx=h.createContext(null);function oT({children:e}){const[n,a]=h.useState([]),o=h.useCallback((u,d="info",m)=>{const p=crypto.randomUUID();a(x=>[...x,{id:p,message:u,type:d,action:m}]),setTimeout(()=>{a(x=>x.filter(b=>b.id!==p))},m?7e3:5e3)},[]),c=h.useCallback(u=>{a(d=>d.filter(m=>m.id!==u))},[]);return i.jsxs(Rx.Provider,{value:{showToast:o,dismissToast:c},children:[e,i.jsx(iT,{toasts:n,onDismiss:c})]})}function Uf(){const e=h.useContext(Rx);if(!e)throw new Error("useToastContext must be used within a ToastProvider");return e}const Ax=h.createContext(null);function lT({children:e}){const{settings:n,setIgnoredTools:a}=kx(),{showToast:o}=Uf(),c=h.useRef(new Set),u=h.useCallback(x=>n.ignoredTools.includes(x),[n.ignoredTools]),d=h.useCallback(x=>{n.ignoredTools.includes(x)||a([...n.ignoredTools,x])},[n.ignoredTools,a]),m=h.useCallback(()=>{a([])},[a]),v={reportValidationError:h.useCallback((x,b)=>{console.error(`Schema validation failed for ${x}:`,b),n.enabled&&(n.ignoredTools.includes(x)||c.current.has(x)||(c.current.add(x),o(`Schema validation failed for ${x}`,"error",{label:"Ignore",onClick:()=>d(x)})))},[n.enabled,n.ignoredTools,o,d]),isToolIgnored:u,ignoreToolErrors:d,clearIgnoredTools:m,ignoredTools:n.ignoredTools,enabled:n.enabled};return i.jsx(Ax.Provider,{value:v,children:e})}function In(){const e=h.useContext(Ax);if(!e)throw new Error("useSchemaValidationContext must be used within a SchemaValidationProvider");return e}const Md=/^\(\d+\)\s*/;function Mx(){const{totalNeedsAttention:e}=Of();return h.useEffect(()=>{let n=!1;const a=()=>{n=!0;const u=document.title.replace(Md,"");e>0?document.title=`(${e}) ${u}`:document.title=u,setTimeout(()=>{n=!1},0)};a();const o=new MutationObserver(()=>{if(n)return;const u=document.title;(e>0?u.startsWith(`(${e}) `):!Md.test(u))||a()}),c=document.querySelector("title");return c&&o.observe(c,{childList:!0,characterData:!0,subtree:!0}),()=>{o.disconnect(),document.title=document.title.replace(Md,"")}},[e]),e}const Ox="yep-anywhere-notify-in-app";function sf(){return localStorage.getItem(Ox)==="true"}function af(e){"serviceWorker"in navigator&&(navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({type:"setting-update",key:"notifyInApp",value:e}),navigator.serviceWorker.ready.then(n=>{var a;(a=n.active)==null||a.postMessage({type:"setting-update",key:"notifyInApp",value:e})}))}function cT(){h.useEffect(()=>{const e=sf();if(af(e),"serviceWorker"in navigator){const n=()=>{af(sf())};return navigator.serviceWorker.addEventListener("controllerchange",n),()=>{navigator.serviceWorker.removeEventListener("controllerchange",n)}}},[])}function uT(){const[e,n]=h.useState(sf);h.useEffect(()=>{af(e)},[e]);const a=h.useCallback(o=>{localStorage.setItem(Ox,String(o)),n(o)},[]);return{notifyInApp:e,setNotifyInApp:a}}function dT(){h.useEffect(()=>(Wn.connect(),()=>{Wn.disconnect()}),[])}function rf({showIcon:e=!0,className:n=""}){return i.jsxs("span",{className:`yep-anywhere-logo ${n}`,children:[e&&i.jsxs("svg",{viewBox:"0 0 120 120",className:"yep-anywhere-logo-icon","aria-hidden":"true",children:[i.jsx("defs",{children:i.jsxs("linearGradient",{id:"yepIconGrad",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[i.jsx("stop",{offset:"0%",stopColor:"var(--app-yep-green)"}),i.jsx("stop",{offset:"100%",stopColor:"var(--app-yep-green-dark)"})]})}),i.jsx("rect",{x:"0",y:"0",width:"120",height:"120",rx:"26",fill:"url(#yepIconGrad)"}),i.jsx("path",{d:"M 28 35 L 50 62 L 92 20",fill:"none",stroke:"#ffffff",strokeWidth:"10",strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M 50 62 L 50 95",fill:"none",stroke:"#ffffff",strokeWidth:"10",strokeLinecap:"round"})]}),i.jsxs("span",{className:"yep-anywhere-logo-text",children:[i.jsx("span",{className:"yep-anywhere-logo-yep",children:"yep"}),i.jsx("span",{className:"yep-anywhere-logo-anywhere",children:"anywhere"})]})]})}function fT(){const{connect:e,isConnecting:n,error:a,storedUrl:o,storedUsername:c}=Cx(),[u,d]=h.useState(o??"ws://localhost:3400/ws"),[m,p]=h.useState(c??""),[v,x]=h.useState(""),[b,w]=h.useState(null),_=async E=>{if(E.preventDefault(),w(null),!u.trim()){w("Server URL is required");return}if(!m.trim()){w("Username is required");return}if(!v){w("Password is required");return}let N=u.trim();N.startsWith("http://")?N=N.replace("http://","ws://"):N.startsWith("https://")?N=N.replace("https://","wss://"):!N.startsWith("ws://")&&!N.startsWith("wss://")&&(N=`ws://${N}`),N.endsWith("/ws")||(N=`${N.replace(/\/$/,"")}/ws`);try{await e(N,m.trim(),v)}catch{}},C=b??a;return i.jsx("div",{className:"login-page",children:i.jsxs("div",{className:"login-container",children:[i.jsx("div",{className:"login-logo",children:i.jsx(rf,{})}),i.jsx("p",{className:"login-subtitle",children:"Connect to your Yep Anywhere server"}),i.jsxs("form",{onSubmit:_,className:"login-form",children:[i.jsxs("div",{className:"login-field",children:[i.jsx("label",{htmlFor:"serverUrl",children:"Server URL"}),i.jsx("input",{id:"serverUrl",type:"text",value:u,onChange:E=>d(E.target.value),placeholder:"ws://localhost:3400/ws",disabled:n,autoComplete:"url"}),i.jsx("p",{className:"login-field-hint",children:"Your server's address (e.g., ws://192.168.1.50:3400/ws)"})]}),i.jsxs("div",{className:"login-field",children:[i.jsx("label",{htmlFor:"username",children:"Username"}),i.jsx("input",{id:"username",type:"text",value:m,onChange:E=>p(E.target.value),placeholder:"Enter username",disabled:n,autoComplete:"username"})]}),i.jsxs("div",{className:"login-field",children:[i.jsx("label",{htmlFor:"password",children:"Password"}),i.jsx("input",{id:"password",type:"password",value:v,onChange:E=>x(E.target.value),placeholder:"Enter password",disabled:n,autoComplete:"current-password"})]}),C&&i.jsx("div",{className:"login-error",children:C}),i.jsx("button",{type:"submit",className:"login-button",disabled:n,children:n?"Connecting...":"Connect"})]}),i.jsx("p",{className:"login-hint",children:"Remote access must be enabled in your server's Settings. The username and password are set there."})]})})}function hT({children:e}){return dT(),cT(),Mx(),i.jsxs(i.Fragment,{children:[e,i.jsx(Lj,{})]})}function mT({children:e}){const{connection:n}=Cx();return n?i.jsx(eT,{children:i.jsx(lT,{children:i.jsx(hT,{children:e})})}):i.jsx(fT,{})}function pT({children:e}){return i.jsx(oT,{children:i.jsx(aT,{children:i.jsx(mT,{children:e})})})}const zx="yep-anywhere-font-size",gT={small:.85,default:1,large:1.15,larger:1.3},vT={small:"Small",default:"Default",large:"Large",larger:"Larger"},Ux=["small","default","large","larger"];function xT(e){return vT[e]}function Lx(e){const n=gT[e],a=document.documentElement;a.style.fontSize=`${100*n}%`,a.style.setProperty("--font-size-xs",`${10*n}px`),a.style.setProperty("--font-size-sm",`${12*n}px`),a.style.setProperty("--font-size-base",`${13*n}px`),a.style.setProperty("--font-size-lg",`${14*n}px`)}function Dx(){const e=localStorage.getItem(zx);return e&&Ux.includes(e)?e:"large"}function yT(e){localStorage.setItem(zx,e)}function bT(){const[e,n]=h.useState(Dx);h.useEffect(()=>{Lx(e)},[e]);const a=h.useCallback(o=>{n(o),yT(o)},[]);return{fontSize:e,setFontSize:a}}function ST(){const e=Dx();Lx(e)}const Bx="yep-anywhere-theme",jT={auto:"Auto",light:"Light",dark:"Dark",verydark:"Very Dark"},$x=["auto","light","dark","verydark"];function wT(e){return jT[e]}function Ix(e){document.documentElement.setAttribute("data-theme",e)}function Px(){const e=localStorage.getItem(Bx);return e&&$x.includes(e)?e:"auto"}function NT(e){localStorage.setItem(Bx,e)}function ET(){const[e,n]=h.useState(Px);h.useEffect(()=>{Ix(e)},[e]);const a=h.useCallback(o=>{n(o),NT(o)},[]);return{theme:e,setTheme:a}}function _T(){const e=Px();Ix(e)}const CT=500,TT={totalCount:0,unreadCount:0,starredCount:0,archivedCount:0,providerCounts:{}};function Jl(e={}){const{projectId:n,searchQuery:a,limit:o,includeArchived:c,starred:u}=e,[d,m]=h.useState([]),[p,v]=h.useState(TT),[x,b]=h.useState([]),[w,_]=h.useState(!0),[C,E]=h.useState(null),[N,z]=h.useState(!1),O=h.useRef(null),U=h.useRef(!1),P=h.useRef([]);P.current=d;const A=h.useRef([]);A.current=x;const D=h.useRef({}),I=h.useCallback(async()=>{const L=D.current.projectId!==n||D.current.searchQuery!==a||D.current.includeArchived!==c||D.current.starred!==u;L&&(U.current=!1),D.current={projectId:n,searchQuery:a,limit:o,includeArchived:c,starred:u},(P.current.length===0||L)&&_(!0),E(null);try{const F=await Ke.getGlobalSessions({project:n??void 0,q:a||void 0,limit:o,includeArchived:c,starred:u});!U.current||L?(m(F.sessions),U.current=!0):m(G=>{const we=new Map(F.sessions.map(Se=>[Se.id,Se])),B=G.map(Se=>we.get(Se.id)??Se).filter(Se=>we.has(Se.id)),ie=new Set(G.map(Se=>Se.id));return[...F.sessions.filter(Se=>!ie.has(Se.id)),...B]}),z(F.hasMore),v(F.stats),b(F.projects)}catch(F){E(F instanceof Error?F:new Error(String(F)))}finally{_(!1)}},[n,a,o,c,u]),Z=h.useCallback(async()=>{if(!N||d.length===0)return;const L=d[d.length-1];if(L)try{const F=await Ke.getGlobalSessions({project:n??void 0,q:a||void 0,limit:o,after:L.updatedAt,includeArchived:c,starred:u});m(G=>{const we=new Set(G.map(B=>B.id)),Me=F.sessions.filter(B=>!we.has(B.id));return[...G,...Me]}),z(F.hasMore)}catch(F){E(F instanceof Error?F:new Error(String(F)))}},[N,d,n,a,o,c,u]),re=h.useCallback(()=>{O.current&&clearTimeout(O.current),O.current=setTimeout(()=>{I()},CT)},[I]),_e=h.useCallback(L=>{m(F=>F.map(G=>G.id===L.sessionId?{...G,status:L.status}:G)),L.status.state==="idle"&&m(F=>F.map(G=>G.id===L.sessionId?{...G,pendingInputType:void 0,processState:void 0}:G))},[]),Te=h.useCallback(L=>{m(F=>F.map(G=>G.id===L.sessionId?{...G,processState:L.processState}:G)),L.processState==="running"&&m(F=>F.map(G=>G.id===L.sessionId?{...G,pendingInputType:void 0}:G))},[]),se=h.useCallback(L=>{if(!(n&&L.session.projectId!==n)&&!(u&&!L.session.isStarred)){if(a){re();return}m(F=>{if(F.some(B=>B.id===L.session.id))return F;const G=A.current.find(B=>B.id===L.session.projectId),we=(G==null?void 0:G.name)??L.session.projectId;return[{id:L.session.id,title:L.session.title,createdAt:L.session.createdAt,updatedAt:L.session.updatedAt,messageCount:L.session.messageCount,provider:L.session.provider,projectId:L.session.projectId,projectName:we,status:L.session.status,pendingInputType:L.session.pendingInputType,processState:L.session.processState,hasUnread:L.session.hasUnread,customTitle:L.session.customTitle,isArchived:L.session.isArchived,isStarred:L.session.isStarred},...F]})}},[n,a,u,re]),le=h.useCallback(L=>{m(F=>{const G=F.map(we=>we.id!==L.sessionId?we:{...we,...L.title!==void 0&&{customTitle:L.title},...L.archived!==void 0&&{isArchived:L.archived},...L.starred!==void 0&&{isStarred:L.starred}});return u&&L.starred===!1?G.filter(we=>we.id!==L.sessionId):G})},[u]),me=h.useCallback(L=>{m(F=>F.map(G=>G.id!==L.sessionId?G:{...G,hasUnread:!1}))},[]),Re=h.useCallback(L=>{m(F=>F.map(G=>G.id!==L.sessionId?G:{...G,...L.title!==void 0&&{title:L.title},...L.messageCount!==void 0&&{messageCount:L.messageCount},...L.updatedAt!==void 0&&{updatedAt:L.updatedAt}}))},[]);return pi({onSessionStatusChange:_e,onSessionCreated:se,onProcessStateChange:Te,onSessionMetadataChange:le,onSessionSeen:me,onSessionUpdated:Re,onReconnect:I}),h.useEffect(()=>{I()},[I]),h.useEffect(()=>()=>{O.current&&clearTimeout(O.current)},[]),{sessions:d,stats:p,projects:x,loading:w,error:C,hasMore:N,loadMore:Z,refetch:I}}function Hx(e){const[n,a]=h.useState(null),[o,c]=h.useState(!0),[u,d]=h.useState(null),m=h.useRef(void 0);return h.useEffect(()=>{if(!e){a(null),c(!1);return}m.current!==e&&(c(!0),d(null),m.current=e);let p=!1;return Ke.getProject(e).then(v=>{p||(a(v.project),c(!1))}).catch(v=>{p||(d(v instanceof Error?v:new Error(String(v))),c(!1))}),()=>{p=!0}},[e]),h.useMemo(()=>({project:n,loading:o,error:u}),[n,o,u])}const kT=500;function gi(){const[e,n]=h.useState([]),[a,o]=h.useState(!0),[c,u]=h.useState(null),d=h.useRef(null),m=h.useRef(!1),p=h.useCallback(async()=>{o(!0),u(null);try{const b=await Ke.getProjects();n(b.projects)}catch(b){u(b instanceof Error?b:new Error(String(b)))}finally{o(!1)}},[]);h.useEffect(()=>{m.current||(m.current=!0,p())},[p]);const v=h.useCallback(()=>{d.current&&clearTimeout(d.current),d.current=setTimeout(()=>{p()},kT)},[p]),x=h.useCallback(b=>{v()},[v]);return pi({onSessionStatusChange:x}),h.useEffect(()=>()=>{d.current&&clearTimeout(d.current)},[]),{projects:e,loading:a,error:c,refetch:p}}const RT=12;function AT(){const{projects:e,loading:n}=gi();return{recentProjects:h.useMemo(()=>[...e].filter(o=>o.lastActivity!==null).sort((o,c)=>{const u=o.lastActivity?new Date(o.lastActivity).getTime():0;return(c.lastActivity?new Date(c.lastActivity).getTime():0)-u}).slice(0,RT),[e]),loading:n}}function ss(e){return e.uuid??e.id??""}function Zx(e,n,a){if(!e)return{...n,_source:a};const o=e._source??"sdk";return a==="jsonl"?{...e,...n,_source:"jsonl"}:o==="jsonl"?e:{...n,_source:"sdk"}}function MT(e,n,a){const o=new Map(e.map(d=>[ss(d),d]));for(const d of n){const m=ss(d),p=o.get(m);o.set(m,Zx(p,d,"jsonl"))}const c=[],u=new Set;for(const d of e){const m=ss(d);u.has(m)||(c.push(o.get(m)??d),u.add(m))}for(const d of n){const m=ss(d);u.has(m)||(c.push(o.get(m)??d),u.add(m))}return a!=null&&a.skipDagOrdering?{messages:c}:{messages:r2(c)}}function OT(e,n){const a=ss(n),o=e.findIndex(c=>ss(c)===a);if(o>=0){const c=e[o],u=Zx(c,n,"sdk");if(c===u)return{messages:e,index:o};const d=[...e];return d[o]=u,{messages:d,index:o}}return{messages:[...e,{...n,_source:"sdk"}],index:e.length}}const zT=500;function UT(){const[e,n]=h.useState(0),a=h.useRef(null),o=h.useCallback(async()=>{try{const u=await Ke.getInbox();n(u.active.length)}catch{}},[]),c=h.useCallback(()=>{a.current&&clearTimeout(a.current),a.current=setTimeout(o,zT)},[o]);return pi({onProcessStateChange:c,onReconnect:o}),h.useEffect(()=>{o()},[o]),h.useEffect(()=>()=>{a.current&&clearTimeout(a.current)},[]),e}function br({variant:e="dot",label:n="Thinking",className:a}){const o=i.jsx("span",{className:"thinking-indicator-dot"});return e==="pill"?i.jsxs("span",{className:`thinking-indicator-pill ${a??""}`,children:[o,i.jsx("span",{className:"thinking-indicator-label",children:n})]}):i.jsx("span",{className:`thinking-indicator ${a??""}`,children:o})}const gr={inbox:i.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[i.jsx("polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12"}),i.jsx("path",{d:"M5.45 5.11L2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z"})]}),projects:i.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",children:i.jsx("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"})}),agents:i.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[i.jsx("rect",{x:"3",y:"11",width:"18",height:"10",rx:"2"}),i.jsx("circle",{cx:"12",cy:"5",r:"3"}),i.jsx("path",{d:"M12 8v3"}),i.jsx("circle",{cx:"8",cy:"16",r:"1"}),i.jsx("circle",{cx:"16",cy:"16",r:"1"})]}),settings:i.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[i.jsx("circle",{cx:"12",cy:"12",r:"3"}),i.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})]}),allSessions:i.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",children:[i.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),i.jsx("line",{x1:"3",y1:"9",x2:"21",y2:"9"}),i.jsx("line",{x1:"9",y1:"21",x2:"9",y2:"9"})]}),newSession:i.jsxs("svg",{className:"sidebar-new-session-icon",width:"20",height:"20",viewBox:"0 0 24 24","aria-hidden":"true",children:[i.jsx("circle",{cx:"12",cy:"12",r:"12",fill:"var(--app-yep-green)"}),i.jsx("line",{x1:"12",y1:"7",x2:"12",y2:"17",stroke:"white",strokeWidth:"2",strokeLinecap:"round"}),i.jsx("line",{x1:"7",y1:"12",x2:"17",y2:"12",stroke:"white",strokeWidth:"2",strokeLinecap:"round"})]}),tasks:i.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[i.jsx("path",{d:"M9 11l3 3L22 4"}),i.jsx("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"})]})};function vr({to:e,icon:n,label:a,badge:o,onClick:c,title:u,hasDraft:d,hasActivityIndicator:m}){const v=Hs().pathname===e;return i.jsxs($s,{to:e,className:`sidebar-nav-item ${v?"active":""}`,onClick:c,title:u??a,children:[n,i.jsx("span",{className:"sidebar-nav-text",children:a}),d&&i.jsx("span",{className:"session-draft-badge",children:"(draft)"}),m&&i.jsx(br,{}),o!==void 0&&o>0&&i.jsx("span",{className:"sidebar-nav-badge",children:o})]})}function LT({children:e}){return i.jsx("nav",{className:"sidebar-nav-section",children:e})}function DT({onClick:e}){const n=UT();return i.jsx(vr,{to:"/agents",icon:gr.agents,label:"Agents",onClick:e,hasActivityIndicator:n>0})}function Lf({usage:e,size:n=16,showLabel:a=!0}){if(!e)return null;const{percentage:o}=e,c=Math.min(100,Math.max(0,o)),u=n/2-1,d=2*Math.PI*u,m=c/100*d,p=()=>c>=90?"var(--color-error, #dc3545)":c>=75?"var(--color-warning, #ffc107)":"var(--text-muted, #9d9d9d)";return i.jsxs("span",{className:"context-usage-indicator",title:`Context: ${o}% (${BT(e.inputTokens)} tokens)`,children:[i.jsxs("svg",{width:n,height:n,viewBox:`0 0 ${n} ${n}`,className:"context-usage-pie","aria-hidden":"true",children:[i.jsx("circle",{cx:n/2,cy:n/2,r:u,fill:"none",stroke:"var(--border-color, #3c3c3c)",strokeWidth:"2"}),i.jsx("circle",{cx:n/2,cy:n/2,r:u,fill:"none",stroke:p(),strokeWidth:"2",strokeDasharray:`${m} ${d}`,strokeLinecap:"round",transform:`rotate(-90 ${n/2} ${n/2})`})]}),a&&i.jsxs("span",{className:"context-usage-label",children:[c,"%"]})]})}function BT(e){return e>=1e6?`${(e/1e6).toFixed(1)}M`:e>=1e3?`${(e/1e3).toFixed(1)}K`:e.toString()}class $T{constructor(){Qe(this,"id","claude");Qe(this,"displayName","Claude");Qe(this,"capabilities",{supportsDag:!0,supportsCloning:!0});Qe(this,"metadata",{description:"Anthropic's Claude Code SDK. Full tool transparency, real-time streaming, and permission modes.",limitations:[],website:"https://claude.ai/download",cliName:"claude"})}}class IT{constructor(){Qe(this,"id","codex");Qe(this,"displayName","Codex");Qe(this,"capabilities",{supportsDag:!1,supportsCloning:!1});Qe(this,"metadata",{description:"OpenAI's Codex CLI. Full editing capabilities with cloud-based reasoning.",limitations:["Edit details not visible (black box)","No out-of-band tool approval","Best for fire-and-forget tasks"],website:"https://openai.com/index/introducing-codex/",cliName:"codex"})}}class PT{constructor(){Qe(this,"id","codex-oss");Qe(this,"displayName","Codex OSS");Qe(this,"capabilities",{supportsDag:!1,supportsCloning:!1});Qe(this,"metadata",{description:"Codex with local models via Ollama. All operations visible through shell commands.",limitations:["Requires Ollama running locally","Model quality varies","More verbose output"],website:"https://github.com/openai/codex",cliName:"codex"})}}class HT{constructor(){Qe(this,"id","gemini");Qe(this,"displayName","Gemini");Qe(this,"capabilities",{supportsDag:!1,supportsCloning:!1});Qe(this,"metadata",{description:"Google's Gemini CLI. Read-only tools for code exploration and analysis.",limitations:["Read-only (no file edits or bash commands)","Best for research and planning tasks"],website:"https://github.com/google-gemini/gemini-cli",cliName:"gemini"})}}class ZT{constructor(){Qe(this,"id","opencode");Qe(this,"displayName","OpenCode");Qe(this,"capabilities",{supportsDag:!1,supportsCloning:!1});Qe(this,"metadata",{description:"Multi-provider agent with tool streaming via SSE. Supports various LLM backends.",limitations:["Tool approval flow still under investigation","Experimental integration"],website:"https://opencode.ai",cliName:"opencode"})}}const qx={claude:new $T,gemini:new HT,codex:new IT,"codex-oss":new PT,opencode:new ZT};function qT(){return Object.values(qx)}class Tv{constructor(n){Qe(this,"capabilities",{supportsDag:!1,supportsCloning:!1});Qe(this,"metadata");this.id=n,this.metadata={description:"Unknown provider",limitations:[],website:"",cliName:n}}get displayName(){return this.id}}function Vx(e){return e?qx[e]??new Tv(e):new Tv("unknown")}function Fx({sessionId:e,projectId:n,isStarred:a,isArchived:o,hasUnread:c,provider:u,onToggleStar:d,onToggleArchive:m,onToggleRead:p,onRename:v,onClone:x,useEllipsisIcon:b=!1,className:w="",useFixedPositioning:_=!1}){const[C,E]=h.useState(!1),[N,z]=h.useState(!1),[O,U]=h.useState(null),P=h.useRef(null),A=h.useRef(null),D=h.useRef(null);h.useEffect(()=>{if(!C)return;const me=L=>{var Me,B,ie;const F=L.target,G=(Me=P.current)==null?void 0:Me.contains(F),we=(B=D.current)==null?void 0:B.contains(F);!G&&!we&&(E(!1),(ie=A.current)==null||ie.blur())},Re=()=>{var L;E(!1),U(null),(L=A.current)==null||L.blur()};return document.addEventListener("mousedown",me),document.addEventListener("scroll",Re,!0),()=>{document.removeEventListener("mousedown",me),document.removeEventListener("scroll",Re,!0)}},[C]);const I=()=>{var me;if(C)E(!1),U(null),(me=A.current)==null||me.blur();else{if(_&&A.current){const Re=A.current.getBoundingClientRect(),L=140,F=180,G=window.innerWidth-Re.right,we=8,B=Re.bottom+we+F>window.innerHeight?Re.top-F-we:Re.bottom+we;Re.right-L<we?U({top:B,left:Re.left}):U({top:B,right:G})}E(!0)}},Z=me=>{var Re;E(!1),U(null),(Re=A.current)==null||Re.blur(),me()},re=async()=>{var me;if(!N){z(!0),E(!1),U(null),(me=A.current)==null||me.blur();try{const Re=await Ke.cloneSession(n,e);x==null||x(Re.sessionId)}catch(Re){console.error("Failed to clone session:",Re)}finally{z(!1)}}},_e=["session-menu-wrapper",w,C&&"is-open"].filter(Boolean).join(" "),Te=_?{position:"fixed",top:(O==null?void 0:O.top)??100,...(O==null?void 0:O.left)!==void 0?{left:O.left}:{right:(O==null?void 0:O.right)??20}}:void 0,se=i.jsxs("div",{ref:D,className:"session-menu-dropdown",style:Te,children:[i.jsxs("button",{type:"button",onClick:()=>Z(d),children:[i.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:a?"currentColor":"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",children:i.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})}),a?"Unstar":"Star"]}),i.jsxs("button",{type:"button",onClick:()=>Z(v),children:[i.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",children:[i.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),i.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]}),"Rename"]}),x&&Vx(u).capabilities.supportsCloning&&i.jsxs("button",{type:"button",onClick:re,disabled:N,children:[i.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",children:[i.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),i.jsx("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]}),N?"Cloning...":"Clone"]}),i.jsxs("button",{type:"button",onClick:()=>Z(m),children:[i.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",children:[i.jsx("polyline",{points:"21 8 21 21 3 21 3 8"}),i.jsx("rect",{x:"1",y:"3",width:"22",height:"5"}),i.jsx("line",{x1:"10",y1:"12",x2:"14",y2:"12"})]}),o?"Unarchive":"Archive"]}),p&&i.jsxs("button",{type:"button",onClick:()=>Z(p),children:[i.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",children:c?i.jsx("polyline",{points:"20 6 9 17 4 12"}):i.jsx("circle",{cx:"12",cy:"12",r:"10"})}),c?"Mark as read":"Mark as unread"]})]}),le=()=>_?di.createPortal(se,document.body):se;return i.jsxs("div",{className:_e,ref:P,children:[i.jsx("button",{ref:A,type:"button",className:"session-menu-trigger",onClick:me=>{me.preventDefault(),me.stopPropagation(),I()},title:"Session options","aria-label":"Session options","aria-expanded":C,children:b?i.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",stroke:"none","aria-hidden":"true",children:[i.jsx("circle",{cx:"5",cy:"12",r:"2"}),i.jsx("circle",{cx:"12",cy:"12",r:"2"}),i.jsx("circle",{cx:"19",cy:"12",r:"2"})]}):i.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",children:i.jsx("polyline",{points:"6 9 12 15 18 9"})})}),C&&le()]})}function VT({variant:e,label:n}){const a=e==="needs-input"?"Input Needed":"New";return i.jsx("span",{className:`status-badge notification-${e}`,children:n??a})}function FT({status:e,pendingInputType:n,hasUnread:a,processState:o}){if(e.state==="external")return i.jsx("span",{className:"status-badge status-external",children:"External"});if(n){const c=n==="tool-approval"?"Approval Needed":"Question";return i.jsx(VT,{variant:"needs-input",label:c})}return o==="running"?i.jsx(br,{variant:"pill"}):null}function ho({sessionId:e,projectId:n,title:a,fullTitle:o,projectName:c,updatedAt:u,hasUnread:d,processState:m,pendingInputType:p,contextUsage:v,status:x,provider:b,mode:w,showProjectName:_=!1,showTimestamp:C=!0,showContextUsage:E=!0,showStatusBadge:N=!0,customBadge:z,isStarred:O,isArchived:U,onToggleStar:P,onToggleArchive:A,onToggleRead:D,onRename:I,isCurrent:Z=!1,isSelected:re=!1,isSelectionMode:_e=!1,onSelect:Te,onNavigate:se,hasDraft:le=!1}){const me=ea(),[Re,L]=h.useState(void 0),[F,G]=h.useState(void 0),[we,Me]=h.useState(!1),[B,ie]=h.useState(""),[X,Se]=h.useState(!1),[pe,He]=h.useState(void 0),et=h.useRef(null),Oe=h.useRef(!1),Ze=Re??O,Fe=F??U,lt=pe??a??"Untitled session";h.useEffect(()=>{we&&setTimeout(()=>{var st,Ce;(st=et.current)==null||st.focus(),(Ce=et.current)==null||Ce.select()},0)},[we]);const[Xt,qt]=h.useState(void 0),Qt=Xt??d,bn=async()=>{const st=!Ze;L(st);try{await Ke.updateSessionMetadata(e,{starred:st}),P==null||P()}catch(Ce){console.error("Failed to update star status:",Ce),L(void 0)}},Gt=async()=>{const st=!Fe;G(st);try{await Ke.updateSessionMetadata(e,{archived:st}),A==null||A()}catch(Ce){console.error("Failed to update archive status:",Ce),G(void 0)}},pn=async()=>{const st=!Qt;qt(st);try{st?await Ke.markSessionUnread(e):await Ke.markSessionSeen(e),D==null||D()}catch(Ce){console.error("Failed to update read status:",Ce),qt(void 0)}},V=()=>{Oe.current||(Me(!1),ie(""))},he=async()=>{if(!(!B.trim()||X)){if(B.trim()===lt){V();return}Oe.current=!0,Se(!0);try{await Ke.updateSessionMetadata(e,{title:B.trim()}),He(B.trim()),Me(!1),I==null||I()}catch(st){console.error("Failed to rename session:",st)}finally{Se(!1),Oe.current=!1}}},Ge=()=>{if(!Oe.current){if(!B.trim()||B.trim()===lt){V();return}he()}},tt=st=>{st.key==="Enter"?(st.preventDefault(),he()):st.key==="Escape"&&(st.preventDefault(),V())},Tt=st=>{st.stopPropagation(),Te==null||Te(e,st.target.checked)},bt=()=>{if((x==null?void 0:x.state)==="external")return i.jsx("span",{className:"session-badge session-badge-external",children:"Ext"});if(p){const st=p==="tool-approval"?"Appr":"Q";return i.jsx("span",{className:"session-badge session-badge-needs-input",children:st})}return m==="running"?i.jsx(br,{}):null},Ct=st=>{const Ce=Date.now(),rt=new Date(st).getTime(),Vt=Ce-rt,sn=Math.floor(Vt/6e4),Ue=Math.floor(Vt/36e5),Rt=Math.floor(Vt/864e5);return sn<1?"just now":sn<60?`${sn}m ago`:Ue<24?`${Ue}h ago`:Rt<7?`${Rt}d ago`:new Date(st).toLocaleDateString()},Mn=["session-list-item",w==="card"?"session-list-item--card":"session-list-item--compact",Z&&"current",Qt&&"unread",re&&"selected",Fe&&"archived"].filter(Boolean).join(" "),cn=({filled:st,size:Ce=10})=>i.jsx("svg",{className:"session-star-icon",width:Ce,height:Ce,viewBox:"0 0 24 24",fill:st?"currentColor":"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",children:i.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})});return i.jsxs("li",{className:Mn,children:[Te&&i.jsx("input",{type:"checkbox",className:"session-list-item__checkbox",checked:re,onChange:Tt,onClick:st=>st.stopPropagation(),"aria-label":`Select ${lt}`}),we?i.jsx("input",{ref:et,type:"text",className:"session-rename-input",value:B,onChange:st=>ie(st.target.value),onBlur:Ge,onKeyDown:tt,disabled:X}):i.jsx($s,{to:`/projects/${n}/sessions/${e}`,onClick:st=>{_e&&st.preventDefault(),se==null||se()},title:o||lt,className:"session-list-item__link",children:w==="card"?i.jsxs(i.Fragment,{children:[i.jsxs("strong",{className:"session-list-item__title",children:[Ze&&i.jsx(cn,{filled:!0,size:12}),lt,Fe&&i.jsx("span",{className:"session-archived-badge",children:"Archived"})]}),i.jsxs("span",{className:"session-list-item__meta",children:[_&&c&&i.jsx("span",{className:"session-list-item__project",children:c}),C&&u&&Ct(u),E&&i.jsx(Lf,{usage:v,size:14}),z&&i.jsx("span",{className:`inbox-item-badge ${z.className}`,children:z.label}),N&&x&&i.jsx(FT,{status:x,pendingInputType:p,hasUnread:Qt,processState:m})]})]}):i.jsxs(i.Fragment,{children:[i.jsxs("span",{className:"session-list-item__title-row",children:[Ze&&i.jsx(cn,{filled:!0}),i.jsx("span",{className:"session-list-item__title-text",children:lt}),le&&i.jsx("span",{className:"session-draft-badge",children:"(draft)"})]}),_&&c&&i.jsx("span",{className:"session-list-item__project-compact",children:c}),bt()]})}),b&&i.jsx(Fx,{sessionId:e,projectId:n,isStarred:Ze??!1,isArchived:Fe??!1,hasUnread:Qt??!1,provider:b,onToggleStar:bn,onToggleArchive:Gt,onToggleRead:pn,onRename:()=>{ie(lt),Me(!0)},onClone:st=>{me(`/projects/${n}/sessions/${st}`)},useEllipsisIcon:!0,useFixedPositioning:!0,className:"session-list-item__menu"})]})}const GT=15,Od=12,Jr=10;function kv({isOpen:e,onClose:n,onNavigate:a,currentSessionId:o,isDesktop:c=!1,isCollapsed:u=!1,onToggleExpanded:d,sidebarWidth:m,onResizeStart:p,onResize:v,onResizeEnd:x}){const{sessions:b}=Jl({limit:50}),{sessions:w}=Jl({starred:!0,limit:100}),_=Mx(),{recentProjects:C}=AT(),E=h.useRef(null),N=h.useRef(null),z=h.useRef(null),O=h.useRef(!1),[U,P]=h.useState(0),[A,D]=h.useState(!1),I=h.useRef(null),Z=h.useRef(null),[re,_e]=h.useState(Od),[Te,se]=h.useState(Od),[le,me]=h.useState(Od),Re=X=>{var Se,pe;N.current=((Se=X.touches[0])==null?void 0:Se.clientX)??null,z.current=((pe=X.touches[0])==null?void 0:pe.clientY)??null,O.current=!1,P(0)},L=X=>{var Oe,Ze;if(N.current===null||z.current===null)return;const Se=(Oe=X.touches[0])==null?void 0:Oe.clientX,pe=(Ze=X.touches[0])==null?void 0:Ze.clientY;if(Se===void 0||pe===void 0)return;const He=Se-N.current,et=pe-z.current;if(!O.current){const Fe=Math.abs(He),lt=Math.abs(et);if(Fe>GT&&Fe>lt&&He<0)O.current=!0;else return}He<0&&P(He)},F=()=>{O.current&&U<-50&&n(),N.current=null,z.current=null,O.current=!1,P(0)},G=X=>{!c||u||!m||(X.preventDefault(),I.current=X.clientX,Z.current=m,D(!0),p==null||p())};h.useEffect(()=>{if(!A)return;const X=pe=>{if(I.current===null||Z.current===null)return;const He=pe.clientX-I.current,et=Z.current+He;v==null||v(et)},Se=()=>{I.current=null,Z.current=null,D(!1),x==null||x()};return document.addEventListener("mousemove",X),document.addEventListener("mouseup",Se),()=>{document.removeEventListener("mousemove",X),document.removeEventListener("mouseup",Se)}},[A,v,x]);const we=h.useMemo(()=>w.filter(X=>!X.isArchived),[w]),Me=h.useMemo(()=>{const X=Date.now()-864e5,Se=pe=>pe.getTime()>=X;return b.filter(pe=>!pe.isStarred&&!pe.isArchived&&Se(new Date(pe.updatedAt)))},[b]),B=h.useMemo(()=>{const X=Date.now()-864e5,Se=pe=>pe.getTime()<X;return b.filter(pe=>!pe.isStarred&&!pe.isArchived&&Se(new Date(pe.updatedAt)))},[b]);if(!c&&!e)return null;const ie=()=>i.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[i.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),i.jsx("line",{x1:"9",y1:"3",x2:"9",y2:"21"})]});return i.jsxs(i.Fragment,{children:[!c&&i.jsx("div",{className:"sidebar-overlay",onClick:n,onKeyDown:X=>X.key==="Escape"&&n(),role:"button",tabIndex:0,"aria-label":"Close sidebar"}),i.jsxs("aside",{ref:E,className:"sidebar",onTouchStart:c?void 0:Re,onTouchMove:c?void 0:L,onTouchEnd:c?void 0:F,style:!c&&U<0?{transform:`translateX(${U}px)`,transition:"none"}:void 0,children:[i.jsx("div",{className:"sidebar-header",children:c&&u?i.jsx("button",{type:"button",className:"sidebar-toggle",onClick:d,title:"Expand sidebar","aria-label":"Expand sidebar",children:i.jsx(ie,{})}):c?i.jsx("span",{className:"sidebar-brand",children:i.jsx(rf,{})}):i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"sidebar-brand",children:i.jsx(rf,{})}),i.jsx("button",{type:"button",className:"sidebar-close",onClick:n,"aria-label":"Close sidebar",children:i.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",children:[i.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),i.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]})}),i.jsx("div",{className:"sidebar-actions",children:C[0]&&i.jsx(vr,{to:`/new-session?projectId=${encodeURIComponent(C[0].id)}`,icon:gr.newSession,label:"New Session",onClick:a})}),i.jsxs("div",{className:"sidebar-sessions",children:[i.jsxs(LT,{children:[i.jsx(vr,{to:"/inbox",icon:gr.inbox,label:"Inbox",badge:_,onClick:a}),i.jsx(vr,{to:"/sessions",icon:gr.allSessions,label:"All Sessions",onClick:a}),i.jsx(vr,{to:"/projects",icon:gr.projects,label:"Projects",onClick:a}),i.jsx(DT,{onClick:a}),i.jsx(vr,{to:"/tasks",icon:gr.tasks,label:"Tasks",onClick:a}),i.jsx(vr,{to:"/settings",icon:gr.settings,label:"Settings",onClick:a})]}),we.length>0&&i.jsxs("div",{className:"sidebar-section",children:[i.jsx("h3",{className:"sidebar-section-title",children:"Starred"}),i.jsx("ul",{className:"sidebar-session-list",children:we.slice(0,le).map(X=>i.jsx(ho,{sessionId:X.id,projectId:X.projectId,title:ya(X),fullTitle:ya(X),provider:X.provider,status:X.status,pendingInputType:X.pendingInputType,hasUnread:X.hasUnread,isStarred:X.isStarred,isArchived:X.isArchived,mode:"compact",isCurrent:X.id===o,processState:X.processState,onNavigate:a,showProjectName:!0,projectName:X.projectName},X.id))}),we.length>le&&i.jsxs("button",{type:"button",className:"sidebar-show-more",onClick:()=>me(X=>X+Jr),children:["Show"," ",Math.min(Jr,we.length-le)," ","more"]})]}),Me.length>0&&i.jsxs("div",{className:"sidebar-section",children:[i.jsx("h3",{className:"sidebar-section-title",children:"Last 24 Hours"}),i.jsx("ul",{className:"sidebar-session-list",children:Me.slice(0,re).map(X=>i.jsx(ho,{sessionId:X.id,projectId:X.projectId,title:ya(X),fullTitle:ya(X),provider:X.provider,status:X.status,pendingInputType:X.pendingInputType,hasUnread:X.hasUnread,isStarred:X.isStarred,isArchived:X.isArchived,mode:"compact",isCurrent:X.id===o,processState:X.processState,onNavigate:a,showProjectName:!0,projectName:X.projectName},X.id))}),Me.length>re&&i.jsxs("button",{type:"button",className:"sidebar-show-more",onClick:()=>_e(X=>X+Jr),children:["Show"," ",Math.min(Jr,Me.length-re)," ","more"]})]}),B.length>0&&i.jsxs("div",{className:"sidebar-section",children:[i.jsx("h3",{className:"sidebar-section-title",children:"Older"}),i.jsx("ul",{className:"sidebar-session-list",children:B.slice(0,Te).map(X=>i.jsx(ho,{sessionId:X.id,projectId:X.projectId,title:ya(X),fullTitle:ya(X),provider:X.provider,status:X.status,pendingInputType:X.pendingInputType,hasUnread:X.hasUnread,isStarred:X.isStarred,isArchived:X.isArchived,mode:"compact",isCurrent:X.id===o,processState:X.processState,onNavigate:a,showProjectName:!0,projectName:X.projectName},X.id))}),B.length>Te&&i.jsxs("button",{type:"button",className:"sidebar-show-more",onClick:()=>se(X=>X+Jr),children:["Show"," ",Math.min(Jr,B.length-Te)," ","more"]})]}),we.length===0&&Me.length===0&&B.length===0&&i.jsx("p",{className:"sidebar-empty",children:"No sessions yet"})]}),c&&!u&&i.jsx("div",{className:`sidebar-resize-handle ${A?"active":""}`,onMouseDown:G,role:"separator","aria-orientation":"vertical","aria-label":"Resize sidebar",tabIndex:0})]})]})}const Rv="sidebar-expanded";function YT(){const[e,n]=h.useState(()=>{if(typeof window<"u"){const c=localStorage.getItem(Rv);return c===null?!0:c==="true"}return!0}),a=h.useCallback(c=>{n(c),localStorage.setItem(Rv,String(c))},[]),o=h.useCallback(()=>{a(!e)},[e,a]);return{isExpanded:e,setIsExpanded:a,toggleExpanded:o}}function KT(){const{sessionId:e}=hf(),[n,a]=h.useState(!1),{isExpanded:o,toggleExpanded:c}=YT(),{width:u,setWidth:d,isResizing:m,setIsResizing:p,canShowDesktop:v,canShowExpanded:x}=xj(),b=T0(),w=v(b),_=!o||!x(b),C={openSidebar:()=>a(!0),isWideScreen:w,isSidebarCollapsed:_,toggleSidebar:c},E=w?{"--sidebar-width":`${u}px`}:void 0;return i.jsxs("div",{className:`session-page ${w?"desktop-layout":""} ${m?"resizing":""}`,style:E,children:[w&&i.jsx("aside",{className:`sidebar-desktop ${_?"sidebar-collapsed":""} ${m?"resizing":""}`,style:{width:_?void 0:u},children:i.jsx(kv,{isOpen:!0,onClose:()=>{},onNavigate:()=>{},currentSessionId:e,isDesktop:!0,isCollapsed:_,onToggleExpanded:c,sidebarWidth:u,onResizeStart:()=>p(!0),onResize:d,onResizeEnd:()=>p(!1)})}),!w&&i.jsx(kv,{isOpen:n,onClose:()=>a(!1),onNavigate:()=>a(!1),currentSessionId:e}),i.jsx(AS,{context:C})]})}function Wa(){return gS()}function WT(e){return new Date(e).toLocaleTimeString()}function XT(e){return new Date(e).toLocaleDateString()}function QT(e){switch(e){case"create":return"+";case"modify":return"~";case"delete":return"-"}}function JT(e){switch(e){case"create":return"#4f4";case"modify":return"#ff4";case"delete":return"#f44"}}function ek(e){switch(e){case"create":return"created";case"modify":return"modified";case"delete":return"deleted"}}function Av(e){switch(e){case"session":return"Session";case"agent-session":return"Agent Session";case"settings":return"Settings";case"credentials":return"Credentials";case"telemetry":return"Telemetry";case"other":return"Other"}}const tk=["session","agent-session","settings","credentials","telemetry","other"];function nk(){const[e,n]=h.useState(""),[a,o]=h.useState(new Set),{events:c,connected:u,paused:d,clearEvents:m,togglePause:p}=pi(),v=h.useRef(null),x=h.useRef(!0);let b=c;if(e){const N=new RegExp(e,"i");b=b.filter(z=>N.test(z.relativePath))}a.size>0&&(b=b.filter(N=>a.has(N.fileType)));const w=[...b].reverse(),_=N=>{o(z=>{const O=new Set(z);return O.has(N)?O.delete(N):O.add(N),O})},C=()=>{const N=v.current;if(!N)return;const z=20;x.current=N.scrollHeight-N.scrollTop-N.clientHeight<z};h.useLayoutEffect(()=>{const N=v.current;N&&x.current&&(N.scrollTop=N.scrollHeight)},[w.length]);const E=w.reduce((N,z)=>{const O=XT(z.timestamp);return N[O]||(N[O]=[]),N[O].push(z),N},{});return i.jsxs("div",{className:"page",style:{maxWidth:"1000px",height:"100vh",display:"flex",flexDirection:"column",overflow:"hidden"},children:[i.jsxs("nav",{className:"breadcrumb",children:[i.jsx($s,{to:"/projects",children:"Projects"})," / Activity"]}),i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[i.jsx("h1",{children:"File Activity"}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx("span",{style:{width:10,height:10,borderRadius:"50%",background:u?"#4f4":"#f44"}}),i.jsx("span",{style:{fontSize:"0.875rem",color:"#888"},children:u?"Connected":"Disconnected"})]})]}),i.jsxs("div",{style:{display:"flex",gap:"1rem",marginBottom:"1rem",flexWrap:"wrap"},children:[i.jsx("input",{type:"text",value:e,onChange:N=>n(N.target.value),placeholder:"Filter by path (regex)...",style:{flex:1,minWidth:"200px",padding:"0.75rem",background:"#2a2a2a",border:"1px solid #444",borderRadius:"8px",color:"inherit",fontSize:"1rem"}}),i.jsx("button",{type:"button",onClick:p,style:{background:d?"#a44":"#444"},children:d?"Resume":"Pause"}),i.jsx("button",{type:"button",onClick:m,style:{background:"#444"},children:"Clear"})]}),i.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1rem",flexWrap:"wrap"},children:[tk.map(N=>i.jsx("button",{type:"button",onClick:()=>_(N),style:{padding:"0.5rem 0.75rem",fontSize:"0.875rem",background:a.has(N)?"#4a4aff":"#333",border:a.has(N)?"1px solid #5a5aff":"1px solid #444"},children:Av(N)},N)),a.size>0&&i.jsx("button",{type:"button",onClick:()=>o(new Set),style:{padding:"0.5rem 0.75rem",fontSize:"0.875rem",background:"#444"},children:"Clear filters"})]}),i.jsxs("div",{style:{display:"flex",gap:"2rem",marginBottom:"1rem",fontSize:"0.875rem",color:"#888"},children:[i.jsxs("span",{children:["Total: ",c.length," events"]}),i.jsxs("span",{children:["Showing: ",w.length]})]}),i.jsx("div",{ref:v,onScroll:C,style:{flex:1,overflow:"auto",minHeight:0,background:"#1a1a1a",borderRadius:"8px",padding:"1rem"},children:Object.entries(E).length===0?i.jsx("div",{style:{textAlign:"center",padding:"3rem",color:"#888"},children:c.length===0?"Waiting for file changes...":"No events match current filters"}):Object.entries(E).map(([N,z])=>i.jsxs("div",{style:{marginBottom:"1.5rem"},children:[i.jsx("h3",{style:{color:"#888",fontSize:"0.875rem",marginBottom:"0.5rem"},children:N}),i.jsx("div",{style:{background:"#2a2a2a",borderRadius:"8px",overflow:"hidden"},children:z.map((O,U)=>i.jsxs("div",{style:{padding:"0.75rem 1rem",borderBottom:U<z.length-1?"1px solid #333":"none",display:"grid",gridTemplateColumns:"80px 24px 100px 1fr",gap:"0.75rem",alignItems:"center",fontFamily:"monospace",fontSize:"0.875rem"},children:[i.jsx("span",{style:{color:"#666"},children:WT(O.timestamp)}),i.jsx("span",{style:{color:JT(O.changeType),fontWeight:"bold",textAlign:"center"},title:ek(O.changeType),children:QT(O.changeType)}),i.jsx("span",{style:{color:"#888",fontSize:"0.75rem",background:"#333",padding:"0.25rem 0.5rem",borderRadius:"4px",textAlign:"center"},children:Av(O.fileType)}),i.jsx("span",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},title:O.path,children:O.relativePath})]},`${O.timestamp}-${O.path}-${U}`))})]},N))})]})}function sk(e,n=60){return e.length>n?`${e.slice(0,n)}`:e}function ak(e){const n=[/^\/home\/[^/]+/,/^\/Users\/[^/]+/];for(const a of n)if(a.test(e))return e.replace(a,"~");return e}const rk=()=>i.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[i.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),i.jsx("line",{x1:"9",y1:"3",x2:"9",y2:"21"})]});function Ga({title:e,titleElement:n,onOpenSidebar:a,onToggleSidebar:o,isWideScreen:c=!1,isSidebarCollapsed:u=!1}){const d=c?u?void 0:o:a,m=c?"Toggle sidebar":"Open sidebar";return i.jsx("header",{className:"session-header",children:i.jsx("div",{className:"session-header-inner",children:i.jsxs("div",{className:"session-header-left",children:[d&&i.jsx("button",{type:"button",className:"sidebar-toggle",onClick:d,title:m,"aria-label":m,children:i.jsx(rk,{})}),n??i.jsx("span",{className:"session-title",title:e.length>60?e:void 0,children:sk(e)})]})})})}const ik=3e4;function ok(){const[e,n]=h.useState([]),[a,o]=h.useState([]),[c,u]=h.useState(!0),[d,m]=h.useState(null),p=h.useRef(null),v=h.useCallback(async()=>{try{const b=await Je("/processes?includeTerminated=true");n(b.processes),o(b.terminatedProcesses??[]),m(null)}catch(b){m(b instanceof Error?b:new Error(String(b)))}finally{u(!1)}},[]);h.useEffect(()=>{v()},[v]),h.useEffect(()=>(p.current=setInterval(v,ik),()=>{p.current&&clearInterval(p.current)}),[v]);const x=e.filter(b=>b.state==="running"||b.state==="waiting-input").length;return{processes:e,terminatedProcesses:a,loading:c,error:d,activeCount:x,refetch:v}}function lk(e){const n=new Date(e).getTime(),o=Date.now()-n,c=Math.floor(o/1e3),u=Math.floor(c/60),d=Math.floor(u/60),m=Math.floor(d/24);return m>0?`${m}d ${d%24}h`:d>0?`${d}h ${u%60}m`:u>0?`${u}m ${c%60}s`:`${c}s`}function ck(e){switch(e){case"running":return"Running";case"waiting-input":return"Needs Input";case"idle":return"Idle";case"terminated":return"Stopped";default:return e}}function uk(e){switch(e){case"running":return"agent-state-running";case"waiting-input":return"agent-state-input";case"idle":return"agent-state-idle";case"terminated":return"agent-state-terminated";default:return""}}function dk(e){switch(e){case"claude":return"Claude";case"codex":return"Codex";case"gemini":return"Gemini";case"local":return"Local";default:return e??"Claude"}}function fk(e){switch(e){case"codex":return"agent-provider-codex";case"gemini":return"agent-provider-gemini";case"local":return"agent-provider-local";default:return"agent-provider-claude"}}function zd({process:e,isTerminated:n=!1}){return i.jsxs($s,{to:`/projects/${e.projectId}/sessions/${e.sessionId}`,className:`agent-card ${n?"agent-card-terminated":""}`,children:[i.jsxs("div",{className:"agent-card-header",children:[i.jsxs("div",{className:"agent-card-title",children:[i.jsx("span",{className:"agent-card-session-title",children:e.sessionTitle||"Untitled Session"}),i.jsx("span",{className:`agent-provider-badge ${fk(e.provider)}`,children:dk(e.provider)}),e.state==="running"?i.jsx(br,{variant:"pill",label:"Running"}):i.jsx("span",{className:`agent-state-badge ${uk(e.state)}`,children:ck(e.state)})]}),i.jsxs("div",{className:"agent-card-meta",children:[i.jsx("span",{className:"agent-card-project",children:e.projectName}),!n&&i.jsx("span",{className:"agent-card-uptime",children:lk(e.startedAt)}),e.contextUsage&&i.jsx(Lf,{usage:e.contextUsage})]})]}),(e.permissionMode||e.queueDepth>0||e.terminationReason)&&i.jsxs("div",{className:"agent-card-details",children:[e.permissionMode&&i.jsxs("div",{className:"agent-detail-row",children:[i.jsx("span",{className:"agent-detail-label",children:"Permission Mode"}),i.jsx("span",{className:"agent-detail-value",children:e.permissionMode})]}),e.queueDepth>0&&i.jsxs("div",{className:"agent-detail-row",children:[i.jsx("span",{className:"agent-detail-label",children:"Messages Queued"}),i.jsx("span",{className:"agent-detail-value",children:e.queueDepth})]}),e.terminationReason&&i.jsxs("div",{className:"agent-detail-row",children:[i.jsx("span",{className:"agent-detail-label",children:"Stop Reason"}),i.jsx("span",{className:"agent-detail-value",children:e.terminationReason})]})]})]})}function hk(){const{processes:e,terminatedProcesses:n,loading:a,error:o}=ok(),{openSidebar:c,isWideScreen:u}=Wa(),d=e.filter(p=>p.state==="running"||p.state==="waiting-input"),m=e.filter(p=>p.state==="idle");return i.jsx("div",{className:u?"main-content-wrapper":"main-content-mobile",children:i.jsxs("div",{className:u?"main-content-constrained":"main-content-mobile-inner",children:[i.jsx(Ga,{title:"Agents",onOpenSidebar:c}),i.jsx("main",{className:"page-scroll-container",children:i.jsxs("div",{className:"page-content-inner",children:[a&&i.jsx("p",{className:"loading",children:"Loading agents..."}),o&&i.jsxs("p",{className:"error",children:["Error loading agents: ",o.message]}),!a&&!o&&i.jsxs(i.Fragment,{children:[i.jsxs("section",{className:"agents-section",children:[i.jsx("h2",{children:"Active"}),d.length===0?i.jsx("p",{className:"agents-empty",children:"No active agents"}):i.jsx("div",{className:"agents-list",children:d.map(p=>i.jsx(zd,{process:p},p.id))})]}),i.jsxs("section",{className:"agents-section",children:[i.jsx("h2",{children:"Idle"}),m.length===0?i.jsx("p",{className:"agents-empty",children:"No idle agents"}):i.jsx("div",{className:"agents-list",children:m.map(p=>i.jsx(zd,{process:p},p.id))})]}),i.jsxs("section",{className:"agents-section",children:[i.jsx("h2",{children:"Stopped"}),n.length===0?i.jsx("p",{className:"agents-empty",children:"No stopped agents"}):i.jsx("div",{className:"agents-list",children:n.map(p=>i.jsx(zd,{process:p,isTerminated:!0},p.id))})]})]})]})})]})})}const Mv=769;function si({label:e,options:n,selected:a,onChange:o,multiSelect:c=!0,placeholder:u}){const[d,m]=h.useState(!1),[p,v]=h.useState(()=>window.innerWidth>=Mv),x=h.useRef(null),b=h.useRef(null),w=()=>{var A;(A=x.current)==null||A.blur(),m(!0)},_=A=>{c?a.includes(A)?o(a.filter(D=>D!==A)):o([...a,A]):(o([A]),m(!1))},C=()=>{o([])},E=h.useCallback(()=>{m(!1)},[]);h.useEffect(()=>{const A=()=>{v(window.innerWidth>=Mv)};return window.addEventListener("resize",A),()=>window.removeEventListener("resize",A)},[]),h.useEffect(()=>{if(!d)return;const A=D=>{D.key==="Escape"&&(D.preventDefault(),D.stopPropagation(),E())};return document.addEventListener("keydown",A,!0),()=>document.removeEventListener("keydown",A,!0)},[d,E]),h.useEffect(()=>{if(!d||!p)return;const A=D=>{b.current&&!b.current.contains(D.target)&&x.current&&!x.current.contains(D.target)&&E()};return document.addEventListener("mousedown",A),()=>document.removeEventListener("mousedown",A)},[d,p,E]),h.useEffect(()=>{if(d&&!p)return document.body.style.overflow="hidden",()=>{document.body.style.overflow=""}},[d,p]),h.useEffect(()=>{var A;d&&((A=b.current)==null||A.focus())},[d]);const N=A=>{A.target===A.currentTarget&&(A.preventDefault(),A.stopPropagation(),E())},z=(()=>{if(a.length===0)return u||e;if(!c&&a.length===1){const A=n.find(D=>D.value===a[0]);return(A==null?void 0:A.label)||e}return`${e} (${a.length})`})(),O=i.jsxs(i.Fragment,{children:[c&&a.length>0&&i.jsxs(i.Fragment,{children:[i.jsx("button",{type:"button",className:"filter-dropdown-option filter-dropdown-clear",onClick:C,children:i.jsx("span",{className:"filter-dropdown-label",children:"Clear all"})}),i.jsx("div",{className:"filter-dropdown-divider"})]}),n.map(A=>{const D=a.includes(A.value);return i.jsxs("button",{type:"button",className:`filter-dropdown-option ${D?"selected":""} ${c?"":"single-select"}`,onClick:()=>_(A.value),"aria-pressed":D,children:[c&&i.jsx("span",{className:`filter-dropdown-checkbox ${D?"checked":""}`,"aria-hidden":"true",children:D&&i.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:i.jsx("polyline",{points:"20 6 9 17 4 12"})})}),A.color&&i.jsx("span",{className:"filter-dropdown-color-dot",style:{backgroundColor:A.color},"aria-hidden":"true"}),i.jsx("span",{className:"filter-dropdown-label",children:A.label}),A.count!==void 0&&i.jsx("span",{className:"filter-dropdown-count",children:A.count})]},A.value)})]}),U=d&&!p?di.createPortal(i.jsx("div",{className:"filter-dropdown-overlay",onClick:N,onMouseDown:A=>A.stopPropagation(),children:i.jsxs("div",{ref:b,className:"filter-dropdown-sheet",tabIndex:-1,"aria-label":`Filter by ${e}`,children:[i.jsx("div",{className:"filter-dropdown-header",children:i.jsx("span",{className:"filter-dropdown-title",children:e})}),i.jsx("div",{className:"filter-dropdown-options",children:O})]})}),document.body):null,P=d&&p?i.jsx("div",{ref:b,className:"filter-dropdown-dropdown",tabIndex:-1,"aria-label":`Filter by ${e}`,children:i.jsx("div",{className:"filter-dropdown-options",children:O})}):null;return i.jsxs("div",{className:"filter-dropdown-container",children:[i.jsxs("button",{ref:x,type:"button",className:`filter-dropdown-button ${a.length>0?"has-selection":""}`,onClick:w,title:`Filter by ${e}`,"aria-haspopup":"listbox","aria-expanded":d,children:[z,i.jsx("svg",{className:"filter-dropdown-chevron",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:i.jsx("polyline",{points:"6 9 12 15 18 9"})})]}),P,U]})}function mk(e){const[n,a]=h.useState([]),[o,c]=h.useState(null),[u,d]=h.useState(!1),[m,p]=h.useState(null),v=h.useRef(null),x=h.useCallback(async()=>{if(!e){a([]),c(null),d(!1);return}d(!0),p(null);try{const b=await Ke.getBeadsList(e);a(b.issues),c({installed:b.status.installed,initialized:b.status.initialized})}catch(b){p(b instanceof Error?b:new Error(String(b)))}finally{d(!1)}},[e]);return h.useEffect(()=>{e!==v.current&&(v.current=e??null,x())},[e,x]),{issues:n,status:o,loading:u,error:m,refetch:x}}const Ud="beads-selected-project";function pk(e){return`P${e}`}function gk(e){switch(e){case 1:return"beads-priority-1";case 2:return"beads-priority-2";case 3:return"beads-priority-3";default:return"beads-priority-4"}}function vk(e){switch(e){case"open":return"beads-status-open";case"in_progress":return"beads-status-progress";case"closed":return"beads-status-closed";default:return""}}function xk(e){const n=new Date(e),o=Date.now()-n.getTime(),c=Math.floor(o/6e4),u=Math.floor(c/60),d=Math.floor(u/24);return d>0?`${d}d ago`:u>0?`${u}h ago`:c>0?`${c}m ago`:"just now"}function Ld({issue:e}){return i.jsxs("div",{className:"beads-card",children:[i.jsxs("div",{className:"beads-card-header",children:[i.jsx("span",{className:"beads-card-id",children:e.id}),i.jsx("span",{className:`beads-priority-badge ${gk(e.priority)}`,children:pk(e.priority)}),i.jsx("span",{className:`beads-status-badge ${vk(e.status)}`,children:e.status}),i.jsx("span",{className:"beads-type-badge",children:e.issue_type})]}),i.jsx("h3",{className:"beads-card-title",children:e.title}),i.jsxs("div",{className:"beads-card-meta",children:[i.jsxs("span",{children:["Updated ",xk(e.updated_at)]}),e.dependency_count!==void 0&&e.dependency_count>0&&i.jsxs("span",{className:"beads-deps",children:[e.dependency_count," dep",e.dependency_count!==1?"s":""]})]}),e.description&&i.jsx("div",{className:"beads-card-description",children:i.jsx("pre",{children:e.description})})]})}function yk({projects:e,selectedId:n,onSelect:a}){const o=e.map(c=>({value:c.id,label:c.name}));return i.jsx(si,{label:"Project",options:o,selected:n?[n]:[],onChange:c=>{c.length>0&&c[0]&&a(c[0])},multiSelect:!1,placeholder:"Select a project..."})}function bk(){const{openSidebar:e,isWideScreen:n}=Wa(),{projects:a,loading:o}=gi(),[c,u]=h.useState(()=>{try{return localStorage.getItem(Ud)}catch{return null}});h.useEffect(()=>{if(!c&&a.length>0&&a[0]){u(a[0].id);try{localStorage.setItem(Ud,a[0].id)}catch{}}},[a,c]);const d=_=>{u(_);try{localStorage.setItem(Ud,_)}catch{}},{issues:m,status:p,loading:v,error:x,refetch:b}=mk(c),w=a.find(_=>_.id===c);return i.jsx("div",{className:n?"main-content-wrapper":"main-content-mobile",children:i.jsxs("div",{className:n?"main-content-constrained":"main-content-mobile-inner",children:[i.jsx(Ga,{title:"Tasks",onOpenSidebar:e}),i.jsx("main",{className:"page-scroll-container",children:i.jsxs("div",{className:"page-content-inner",children:[i.jsxs("div",{className:"beads-toolbar",children:[i.jsx(yk,{projects:a,selectedId:c,onSelect:d}),i.jsxs("button",{type:"button",className:"beads-refresh-btn",onClick:b,title:"Refresh tasks",disabled:!c,children:[i.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[i.jsx("polyline",{points:"23 4 23 10 17 10"}),i.jsx("polyline",{points:"1 20 1 14 7 14"}),i.jsx("path",{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"})]}),"Refresh"]})]}),o&&i.jsx("p",{className:"loading",children:"Loading projects..."}),!o&&a.length===0&&i.jsxs("div",{className:"beads-empty-state",children:[i.jsx("p",{children:"No projects found."}),i.jsx("p",{children:"Add a project first to view its tasks."})]}),!o&&!c&&a.length>0&&i.jsx("div",{className:"beads-empty-state",children:i.jsx("p",{children:"Select a project to view its tasks."})}),c&&v&&i.jsx("p",{className:"loading",children:"Loading tasks..."}),c&&x&&i.jsxs("p",{className:"error",children:["Error loading tasks: ",x.message]}),c&&!v&&!x&&p&&(p.initialized?i.jsx(Sk,{issues:m}):i.jsxs("div",{className:"beads-not-initialized",children:[i.jsx("h2",{children:"Beads not initialized"}),p.installed?i.jsxs("p",{children:["Beads is installed but not initialized for"," ",i.jsx("strong",{children:w==null?void 0:w.name}),".",i.jsx("br",{}),"Run ",i.jsx("code",{children:"bd init"})," in the project directory to get started."]}):i.jsxs("p",{children:["Beads is not installed.",i.jsx("br",{}),"Visit"," ",i.jsx("a",{href:"https://github.com/steveyegge/beads",target:"_blank",rel:"noopener noreferrer",children:"github.com/steveyegge/beads"})," ","to install it."]})]}))]})})]})})}function Sk({issues:e}){const n=e.filter(c=>c.status==="open"),a=e.filter(c=>c.status==="in_progress"),o=e.filter(c=>c.status==="closed");return i.jsxs(i.Fragment,{children:[a.length>0&&i.jsxs("section",{className:"beads-section",children:[i.jsxs("h2",{children:["In Progress (",a.length,")"]}),i.jsx("div",{className:"beads-list",children:a.map(c=>i.jsx(Ld,{issue:c},c.id))})]}),i.jsxs("section",{className:"beads-section",children:[i.jsxs("h2",{children:["Open (",n.length,")"]}),n.length===0?i.jsx("p",{className:"beads-empty",children:"No open tasks"}):i.jsx("div",{className:"beads-list",children:n.map(c=>i.jsx(Ld,{issue:c},c.id))})]}),o.length>0&&i.jsxs("section",{className:"beads-section",children:[i.jsxs("h2",{children:["Closed (",o.length,")"]}),i.jsx("div",{className:"beads-list",children:o.map(c=>i.jsx(Ld,{issue:c},c.id))})]}),e.length===0&&i.jsxs("div",{className:"beads-empty-state",children:[i.jsx("p",{children:"No tasks yet."}),i.jsxs("p",{children:["Create one with ",i.jsx("code",{children:'bd create "Task title"'})]}),i.jsx("p",{className:"beads-learn-more",children:i.jsx("a",{href:"https://github.com/steveyegge/beads",target:"_blank",rel:"noopener noreferrer",children:"Learn more about Beads"})})]})]})}function Ov(e){return e<1024?`${e} B`:e<1024*1024?`${(e/1024).toFixed(1)} KB`:`${(e/(1024*1024)).toFixed(1)} MB`}function jk(e){var o;const n=((o=e.split(".").pop())==null?void 0:o.toLowerCase())||"";return{ts:"typescript",tsx:"typescript",js:"javascript",jsx:"javascript",py:"python",rb:"ruby",go:"go",rs:"rust",java:"java",kt:"kotlin",c:"c",cpp:"cpp",h:"c",hpp:"cpp",cs:"csharp",swift:"swift",php:"php",sql:"sql",sh:"bash",bash:"bash",zsh:"bash",json:"json",yaml:"yaml",yml:"yaml",toml:"toml",xml:"xml",html:"html",css:"css",scss:"scss",md:"markdown",markdown:"markdown"}[n]||"plaintext"}function wk(e){return e.startsWith("image/")}function Nk(e){return e.split("/").pop()||e}const Ek=h.memo(function({projectId:n,filePath:a,onClose:o,standalone:c=!1,lineNumber:u,lineEnd:d}){const[m,p]=h.useState(null),[v,x]=h.useState(!0),[b,w]=h.useState(null),[_,C]=h.useState(!1),[E,N]=h.useState(!1),[z,O]=h.useState(null);h.useEffect(()=>{let Re=!1;return x(!0),w(null),Ke.getFile(n,a,!0).then(L=>{Re||(p(L),x(!1))}).catch(L=>{Re||(w(L.message||"Failed to load file"),x(!1))}),()=>{Re=!0}},[n,a]),h.useEffect(()=>{if(!E)return;const Re=L=>{L.key==="Escape"&&N(!1)};return window.addEventListener("keydown",Re),()=>window.removeEventListener("keydown",Re)},[E]),h.useEffect(()=>{z&&requestAnimationFrame(()=>{z.scrollIntoView({behavior:"smooth",block:"center"})})},[z]);const U=h.useCallback(async()=>{if(m!=null&&m.content)try{await navigator.clipboard.writeText(m.content),C(!0),setTimeout(()=>C(!1),2e3)}catch(Re){console.error("Failed to copy:",Re)}},[m==null?void 0:m.content]),P=h.useCallback(()=>{const Re=Ke.getFileRawUrl(n,a,!0);window.open(Re,"_blank")},[n,a]),A=h.useCallback(()=>{const Re=`/projects/${n}/file?path=${encodeURIComponent(a)}`;window.open(Re,"_blank")},[n,a]),D=Nk(a),I=jk(a);if(v)return i.jsx("div",{className:"file-viewer",children:i.jsxs("div",{className:"file-viewer-loading",children:["Loading ",D,"..."]})});if(b||!m)return i.jsx("div",{className:"file-viewer",children:i.jsx("div",{className:"file-viewer-error",children:b||"File not found"})});const{metadata:Z,content:re,rawUrl:_e}=m,Te=wk(Z.mimeType),se=()=>{if(Te)return i.jsx("div",{className:"file-viewer-image",children:i.jsx("img",{src:_e,alt:D})});if(re!==void 0){if(m.highlightedHtml)return i.jsxs("div",{className:"file-viewer-code file-viewer-code-highlighted","data-language":m.highlightedLanguage??I,children:[i.jsx("div",{className:"shiki-container",dangerouslySetInnerHTML:{__html:m.highlightedHtml}}),m.highlightedTruncated&&i.jsx("div",{className:"file-viewer-truncated",children:"File truncated for highlighting (showing first 2000 lines)"})]});const Re=re.split(`
`),L=u??0,F=d??L;return i.jsx("div",{className:"file-viewer-code","data-language":I,children:i.jsxs("div",{className:"code-highlighter-plain",children:[i.jsx("div",{className:"code-line-numbers",children:Re.map((G,we)=>i.jsx("div",{children:we+1},`ln-${we+1}`))}),i.jsx("pre",{className:"code-content",children:i.jsx("code",{children:Re.map((G,we)=>{const Me=we+1,B=u&&Me>=L&&Me<=F;return i.jsx("div",{ref:u&&Me===L?ie=>O(ie):void 0,className:B?"highlighted-line":void 0,style:B?{backgroundColor:"rgba(255, 255, 0, 0.15)",marginLeft:"-0.75rem",marginRight:"-0.75rem",paddingLeft:"0.75rem",paddingRight:"0.75rem"}:void 0,children:G||" "},`line-${we+1}`)})})})]})})}return i.jsxs("div",{className:"file-viewer-binary",children:[i.jsx("p",{children:"This file cannot be displayed inline."}),i.jsxs("p",{children:[i.jsx("strong",{children:"Type:"})," ",Z.mimeType]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Size:"})," ",Ov(Z.size)]}),i.jsx("button",{type:"button",className:"file-viewer-download-btn",onClick:P,children:"Download File"})]})},le=i.jsxs("div",{className:"file-viewer-header",children:[i.jsxs("div",{className:"file-viewer-info",children:[i.jsx("span",{className:"file-viewer-path",title:a,children:a}),i.jsxs("span",{className:"file-viewer-meta",children:[Ov(Z.size),Z.isText&&re&&`  ${re.split(`
`).length} lines`]})]}),i.jsxs("div",{className:"file-viewer-actions",children:[re&&i.jsx("button",{type:"button",className:`file-viewer-action ${_?"copied":""}`,onClick:U,title:_?"Copied!":"Copy content",children:_?i.jsx(Ck,{}):i.jsx(_k,{})}),!c&&i.jsx("button",{type:"button",className:"file-viewer-action",onClick:A,title:"Open in new tab",children:i.jsx(kk,{})}),i.jsx("button",{type:"button",className:"file-viewer-action",onClick:P,title:"Download",children:i.jsx(Tk,{})}),i.jsx("button",{type:"button",className:"file-viewer-action",onClick:()=>N(!E),title:E?"Exit fullscreen":"Fullscreen",children:E?i.jsx(Mk,{}):i.jsx(Ak,{})}),o&&i.jsx("button",{type:"button",className:"file-viewer-action file-viewer-close",onClick:o,title:"Close",children:i.jsx(Rk,{})})]})]}),me=["file-viewer",c&&"file-viewer-standalone",E&&"file-viewer-fullscreen"].filter(Boolean).join(" ");return i.jsxs("div",{className:me,children:[le,i.jsx("div",{className:"file-viewer-body",children:se()})]})});function _k(){return i.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[i.jsx("rect",{x:"5",y:"5",width:"9",height:"9",rx:"1.5"}),i.jsx("path",{d:"M11 5V3.5A1.5 1.5 0 0 0 9.5 2H3.5A1.5 1.5 0 0 0 2 3.5v6A1.5 1.5 0 0 0 3.5 11H5"})]})}function Ck(){return i.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:i.jsx("path",{d:"M3 8.5L6.5 12L13 4"})})}function Tk(){return i.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:i.jsx("path",{d:"M8 2v9M4 8l4 4 4-4M2 14h12"})})}function kk(){return i.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:i.jsx("path",{d:"M12 9v4a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h4M9 2h5v5M6 10l8-8"})})}function Rk(){return i.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:i.jsx("path",{d:"M4 4l8 8M12 4l-8 8"})})}function Ak(){return i.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:i.jsx("path",{d:"M2 5V2h3M11 2h3v3M14 11v3h-3M5 14H2v-3"})})}function Mk(){return i.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:i.jsx("path",{d:"M5 2v3H2M14 5h-3V2M11 14v-3h3M2 11h3v3"})})}function Ok(){const{projectId:e}=hf(),[n]=nc(),a=n.get("path");return e?a?i.jsxs("div",{className:"file-page",children:[i.jsx("div",{className:"file-page-nav",children:i.jsxs($s,{to:`/projects/${e}`,className:"file-page-back-link",title:"Back to project",children:[i.jsx(zk,{}),i.jsx("span",{children:"Back to project"})]})}),i.jsx("div",{className:"file-page-content",children:i.jsx(Ek,{projectId:e,filePath:a,standalone:!0})})]}):i.jsx("div",{className:"file-page file-page-error",children:i.jsxs("div",{className:"file-page-error-content",children:[i.jsx("h1",{children:"Invalid URL"}),i.jsx("p",{children:"File path is missing from the URL."}),i.jsx($s,{to:`/projects/${e}`,className:"file-page-back-link",children:"Go to Project"})]})}):i.jsx("div",{className:"file-page file-page-error",children:i.jsxs("div",{className:"file-page-error-content",children:[i.jsx("h1",{children:"Invalid URL"}),i.jsx("p",{children:"Project ID is missing from the URL."}),i.jsx($s,{to:"/projects",className:"file-page-back-link",children:"Go to Projects"})]})})}function zk(){return i.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:i.jsx("path",{d:"M10 12L6 8l4-4"})})}function Uk({selectedCount:e,onArchive:n,onUnarchive:a,onStar:o,onUnstar:c,onMarkRead:u,onMarkUnread:d,onClearSelection:m,isPending:p=!1,canArchive:v=!0,canUnarchive:x=!0,canStar:b=!0,canUnstar:w=!0,canMarkRead:_=!0,canMarkUnread:C=!0}){return e===0?null:i.jsxs("div",{className:"bulk-action-bar",children:[i.jsxs("div",{className:"bulk-action-bar__info",children:[i.jsxs("span",{className:"bulk-action-bar__count",children:[e," selected"]}),i.jsx("button",{type:"button",className:"bulk-action-bar__clear",onClick:m,disabled:p,"aria-label":"Clear selection",children:i.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[i.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),i.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),i.jsxs("div",{className:"bulk-action-bar__actions",children:[v&&i.jsxs("button",{type:"button",className:"bulk-action-button",onClick:n,disabled:p,title:"Archive selected",children:[i.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[i.jsx("polyline",{points:"21 8 21 21 3 21 3 8"}),i.jsx("rect",{x:"1",y:"3",width:"22",height:"5"}),i.jsx("line",{x1:"10",y1:"12",x2:"14",y2:"12"})]}),i.jsx("span",{children:"Archive"})]}),x&&i.jsxs("button",{type:"button",className:"bulk-action-button",onClick:a,disabled:p,title:"Unarchive selected",children:[i.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[i.jsx("polyline",{points:"21 8 21 21 3 21 3 8"}),i.jsx("rect",{x:"1",y:"3",width:"22",height:"5"}),i.jsx("polyline",{points:"12 11 12 17"}),i.jsx("polyline",{points:"9 14 12 11 15 14"})]}),i.jsx("span",{children:"Unarchive"})]}),b&&i.jsxs("button",{type:"button",className:"bulk-action-button",onClick:o,disabled:p,title:"Star selected",children:[i.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:i.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})}),i.jsx("span",{children:"Star"})]}),w&&i.jsxs("button",{type:"button",className:"bulk-action-button",onClick:c,disabled:p,title:"Unstar selected",children:[i.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[i.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"}),i.jsx("line",{x1:"4",y1:"4",x2:"20",y2:"20"})]}),i.jsx("span",{children:"Unstar"})]}),_&&i.jsxs("button",{type:"button",className:"bulk-action-button",onClick:u,disabled:p,title:"Mark as read",children:[i.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[i.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),i.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),i.jsx("span",{children:"Mark read"})]}),C&&i.jsxs("button",{type:"button",className:"bulk-action-button",onClick:d,disabled:p,title:"Mark as unread",children:[i.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[i.jsx("circle",{cx:"12",cy:"12",r:"10"}),i.jsx("circle",{cx:"12",cy:"12",r:"4",fill:"currentColor"})]}),i.jsx("span",{children:"Mark unread"})]})]})]})}const Lk=500,zv={claude:"var(--app-yep-green)",codex:"#10a37f","codex-oss":"#f97316",gemini:"#4285f4",opencode:"#9333ea"};function Dk(){const{openSidebar:e,isWideScreen:n,toggleSidebar:a,isSidebarCollapsed:o}=Wa(),[c,u]=nc(),d=c.get("q")||"",m=c.get("project")||void 0,[p,v]=h.useState(d),x=h.useMemo(()=>{const V=c.get("status");return V?V.split(",").filter(he=>["all","unread","starred","archived"].includes(he)):[]},[c]),b=h.useMemo(()=>{const V=c.get("provider");if(!V)return[];const he=Object.keys(zv);return V.split(",").filter(Ge=>he.includes(Ge))},[c]),w=h.useCallback(V=>{u(he=>{const Ge=new URLSearchParams(he);return V.length>0?Ge.set("status",V.join(",")):Ge.delete("status"),Ge})},[u]),_=h.useCallback(V=>{u(he=>{const Ge=new URLSearchParams(he);return V.length>0?Ge.set("provider",V.join(",")):Ge.delete("provider"),Ge})},[u]),C=x.includes("archived"),{sessions:E,stats:N,projects:z,loading:O,error:U,hasMore:P,loadMore:A}=Jl({projectId:m,searchQuery:d,includeArchived:C}),D=h.useMemo(()=>E.filter(V=>{if(x.length===0){if(V.isArchived)return!1}else{let he=!1;for(const Ge of x)switch(Ge){case"all":V.isArchived||(he=!0);break;case"unread":V.hasUnread&&!V.isArchived&&(he=!0);break;case"starred":V.isStarred&&(he=!0);break;case"archived":V.isArchived&&(he=!0);break}if(!he)return!1}return!(b.length>0&&(!V.provider||!b.includes(V.provider)))}),[E,x,b]),I=h.useMemo(()=>{const V=!m;return[{value:"all",label:"All",count:V?N.totalCount:void 0},{value:"unread",label:"Unread",count:V?N.unreadCount:void 0},{value:"starred",label:"Starred",count:V?N.starredCount:void 0},{value:"archived",label:"Archived",count:V?N.archivedCount:void 0}]},[N,m]),Z=h.useMemo(()=>{const V=!m,he=N.providerCounts,Ge=[];for(const tt of t2){const Tt=he[tt];Tt&&Tt>0&&Ge.push({value:tt,label:tt.charAt(0).toUpperCase()+tt.slice(1),count:V?Tt:void 0,color:zv[tt]})}return Ge},[N.providerCounts,m]),[re,_e]=h.useState(new Set),[Te,se]=h.useState(!1),[le,me]=h.useState(!1),Re=h.useRef(null),L=h.useRef(null),F=h.useRef(null),G=h.useCallback((V,he)=>{_e(Ge=>{const tt=new Set(Ge);return he?tt.add(V):tt.delete(V),tt.size===0&&se(!1),tt})},[]),we=h.useCallback(()=>{_e(new Set(D.map(V=>V.id))),se(!0)},[D]),Me=h.useCallback(()=>{_e(new Set),se(!1)},[]),B=h.useCallback((V,he)=>{if(!(Te||n)){if("touches"in he){const Ge=he.touches[0];Ge&&(F.current={x:Ge.clientX,y:Ge.clientY})}else"clientX"in he&&(F.current={x:he.clientX,y:he.clientY});L.current=V,Re.current=setTimeout(()=>{se(!0),_e(new Set([V])),L.current=null,F.current=null},Lk)}},[Te,n]),ie=h.useCallback(()=>{Re.current&&(clearTimeout(Re.current),Re.current=null),L.current=null,F.current=null},[]),X=h.useCallback(V=>{if(!F.current||!Re.current)return;const he=V.touches[0];if(!he)return;const Ge=he.clientX-F.current.x,tt=he.clientY-F.current.y;Math.sqrt(Ge*Ge+tt*tt)>10&&(clearTimeout(Re.current),Re.current=null,L.current=null,F.current=null)},[]),Se=h.useCallback(V=>{(Re.current||Te)&&V.preventDefault()},[Te]),pe=h.useCallback(async()=>{if(!le){me(!0);try{await Promise.all(Array.from(re).map(V=>Ke.updateSessionMetadata(V,{archived:!0}))),Me()}finally{me(!1)}}},[re,le,Me]),He=h.useCallback(async()=>{if(!le){me(!0);try{await Promise.all(Array.from(re).map(V=>Ke.updateSessionMetadata(V,{archived:!1}))),Me()}finally{me(!1)}}},[re,le,Me]),et=h.useCallback(async()=>{if(!le){me(!0);try{await Promise.all(Array.from(re).map(V=>Ke.updateSessionMetadata(V,{starred:!0}))),Me()}finally{me(!1)}}},[re,le,Me]),Oe=h.useCallback(async()=>{if(!le){me(!0);try{await Promise.all(Array.from(re).map(V=>Ke.updateSessionMetadata(V,{starred:!1}))),Me()}finally{me(!1)}}},[re,le,Me]),Ze=h.useCallback(async()=>{if(!le){me(!0);try{await Promise.all(Array.from(re).map(V=>Ke.markSessionSeen(V))),Me()}finally{me(!1)}}},[re,le,Me]),Fe=h.useCallback(async()=>{if(!le){me(!0);try{await Promise.all(Array.from(re).map(V=>Ke.markSessionUnread(V))),Me()}finally{me(!1)}}},[re,le,Me]),lt=h.useMemo(()=>{const V=E.filter(he=>re.has(he.id));return{canArchive:V.some(he=>!he.isArchived),canUnarchive:V.some(he=>he.isArchived),canStar:V.some(he=>!he.isStarred),canUnstar:V.some(he=>he.isStarred),canMarkRead:V.some(he=>he.hasUnread),canMarkUnread:V.some(he=>!he.hasUnread)}},[E,re]),Xt=V=>{V.preventDefault();const he=new URLSearchParams(c);p.trim()?he.set("q",p.trim()):he.delete("q"),u(he)},qt=h.useCallback(V=>{const he=new URLSearchParams(c);V.length>0&&V[0]?he.set("project",V[0]):he.delete("project"),u(he)},[c,u]),Qt=h.useMemo(()=>z.map(V=>({value:V.id,label:V.name})),[z]),bn=()=>{v(""),u(new URLSearchParams)},Gt=D.length===0,pn=d||m||x.length>0||b.length>0;return i.jsx("div",{className:n?"main-content-wrapper":"main-content-mobile",children:i.jsxs("div",{className:n?"main-content-constrained":"main-content-mobile-inner",children:[i.jsx(Ga,{title:"All Sessions",onOpenSidebar:e,onToggleSidebar:a,isWideScreen:n,isSidebarCollapsed:o}),i.jsx("main",{className:"page-scroll-container",children:i.jsxs("div",{className:"page-content-inner",children:[i.jsxs("div",{className:"filter-bar",children:[i.jsxs("form",{onSubmit:Xt,className:"filter-search-form",children:[i.jsx("input",{type:"text",className:"filter-search",placeholder:"Search sessions...",value:p,onChange:V=>v(V.target.value)}),i.jsx("button",{type:"submit",className:"filter-search-button",children:i.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[i.jsx("circle",{cx:"11",cy:"11",r:"8"}),i.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]})})]}),i.jsxs("div",{className:"filter-dropdowns",children:[Qt.length>0&&i.jsx(si,{label:"Project",options:Qt,selected:m?[m]:[],onChange:qt,multiSelect:!1,placeholder:"All projects"}),i.jsx(si,{label:"Status",options:I,selected:x,onChange:w,placeholder:"All statuses"}),Z.length>1&&i.jsx(si,{label:"Provider",options:Z,selected:b,onChange:_,placeholder:"All providers"})]}),pn&&i.jsx("button",{type:"button",onClick:bn,className:"filter-clear-button",children:"Clear filters"})]}),O&&E.length===0&&i.jsx("p",{className:"loading",children:"Loading sessions..."}),U&&i.jsxs("p",{className:"error",children:["Error loading sessions: ",U.message]}),!O&&!U&&Gt&&i.jsxs("div",{className:"inbox-empty",children:[i.jsx("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:i.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})}),i.jsx("h3",{children:"No sessions found"}),i.jsx("p",{children:pn?"Try adjusting your search or filters.":"Start a new session to get started."})]}),!U&&!Gt&&i.jsxs(i.Fragment,{children:[(n||Te)&&D.length>0&&i.jsx("div",{className:"session-list-header",children:i.jsxs("label",{className:"session-list-header__select-all",children:[i.jsx("input",{type:"checkbox",checked:re.size===D.length&&D.length>0,onChange:V=>V.target.checked?we():Me()}),i.jsx("span",{children:re.size>0?`${re.size} selected`:"Select all"})]})}),i.jsx("ul",{className:`session-list ${Te?"session-list--selection-mode":""}`,children:D.map(V=>i.jsx("div",{onTouchStart:he=>B(V.id,he),onTouchMove:X,onTouchEnd:ie,onTouchCancel:ie,onMouseDown:he=>!n&&B(V.id,he),onMouseUp:ie,onMouseLeave:ie,onContextMenu:Se,children:i.jsx(ho,{sessionId:V.id,projectId:V.projectId,title:ya(V),fullTitle:ya(V),updatedAt:V.updatedAt,hasUnread:V.hasUnread,processState:V.processState,pendingInputType:V.pendingInputType,status:V.status,provider:V.provider,isStarred:V.isStarred,isArchived:V.isArchived,mode:"card",showContextUsage:!1,isSelected:re.has(V.id),isSelectionMode:Te&&!n,onNavigate:()=>{Te&&!n&&G(V.id,!re.has(V.id))},onSelect:n||Te?G:void 0,showProjectName:!m,projectName:V.projectName})},V.id))}),P&&i.jsx("div",{className:"global-sessions-load-more",children:i.jsx("button",{type:"button",onClick:A,className:"global-sessions-load-more-button",disabled:O,children:O?"Loading...":"Load more"})})]}),i.jsx(Uk,{selectedCount:re.size,onArchive:pe,onUnarchive:He,onStar:et,onUnstar:Oe,onMarkRead:Ze,onMarkUnread:Fe,onClearSelection:Me,isPending:le,canArchive:lt.canArchive,canUnarchive:lt.canUnarchive,canStar:lt.canStar,canUnstar:lt.canUnstar,canMarkRead:lt.canMarkRead,canMarkUnread:lt.canMarkUnread})]})})]})})}const Bk=[{key:"needsAttention",title:"Needs Attention",colorClass:"inbox-tier-attention",getBadge:e=>e.pendingInputType==="tool-approval"?{label:"Approval",className:"inbox-badge-approval"}:e.pendingInputType==="user-question"?{label:"Question",className:"inbox-badge-question"}:null},{key:"active",title:"Active",colorClass:"inbox-tier-active"},{key:"recentActivity",title:"Recent Activity",colorClass:"inbox-tier-recent"},{key:"unread8h",title:"Unread (8h)",colorClass:"inbox-tier-unread8h"},{key:"unread24h",title:"Unread (24h)",colorClass:"inbox-tier-unread24h"}];function $k({config:e,items:n,hideProjectName:a}){const o=n.length===0;return i.jsxs("section",{className:`inbox-section ${e.colorClass} ${o?"inbox-section-empty":""}`,children:[i.jsxs("h2",{className:"inbox-section-header",children:[e.title,i.jsx("span",{className:"inbox-section-count",children:n.length})]}),o?i.jsx("p",{className:"inbox-section-empty-message",children:"No sessions"}):i.jsx("ul",{className:"sessions-list",children:n.map(c=>{var d;const u=(d=e.getBadge)==null?void 0:d.call(e,c);return i.jsx(ho,{sessionId:c.sessionId,projectId:c.projectId,title:c.sessionTitle,projectName:c.projectName,updatedAt:c.updatedAt,hasUnread:c.hasUnread,processState:e.key==="active"?"running":c.processState,pendingInputType:c.pendingInputType,mode:"card",showProjectName:!a,showTimestamp:!0,showContextUsage:!1,showStatusBadge:!1,customBadge:u},c.sessionId)})})]})}function co(e,n){return n?e.filter(a=>a.projectId===n):e}function Ik({projectId:e,projects:n,onProjectChange:a}){const{needsAttention:o,active:c,recentActivity:u,unread8h:d,unread24h:m,loading:p,error:v,refresh:x}=Of(),b=co(o,e),w=co(c,e),_=co(u,e),C=co(d,e),E=co(m,e),N=b.length+w.length+_.length+C.length+E.length,[z,O]=h.useState(!1),U=async()=>{O(!0),await x(),O(!1)},P={needsAttention:b,active:w,recentActivity:_,unread8h:C,unread24h:E},A=N===0&&!p,D=n?[{value:"",label:"All Projects"},...n.map(Z=>({value:Z.id,label:Z.name}))]:[],I=Z=>{const re=Z[0]??"";a==null||a(re===""?void 0:re)};return i.jsx("main",{className:"page-scroll-container",children:i.jsxs("div",{className:"page-content-inner inbox-content",children:[i.jsxs("div",{className:"inbox-toolbar",children:[n&&n.length>0&&i.jsx(si,{label:"Project",options:D,selected:[e??""],onChange:I,multiSelect:!1,placeholder:"All Projects"}),i.jsxs("button",{type:"button",className:"inbox-refresh-button",onClick:U,disabled:z||p,title:"Refresh inbox",children:[i.jsxs("svg",{className:z?"spinning":"",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[i.jsx("polyline",{points:"23 4 23 10 17 10"}),i.jsx("polyline",{points:"1 20 1 14 7 14"}),i.jsx("path",{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"})]}),z?"Refreshing...":"Refresh"]})]}),p&&i.jsx("p",{className:"loading",children:"Loading inbox..."}),v&&i.jsxs("p",{className:"error",children:["Error loading inbox: ",v.message]}),!p&&!v&&A&&i.jsxs("div",{className:"inbox-empty",children:[i.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[i.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),i.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),i.jsx("h3",{children:"All caught up!"}),i.jsx("p",{children:e?"No sessions need attention in this project.":"No sessions need attention."})]}),!p&&!v&&!A&&i.jsx("div",{className:"inbox-tiers",children:Bk.map(Z=>i.jsx($k,{config:Z,items:P[Z.key]??[],hideProjectName:!!e},Z.key))})]})})}function Pk(){const{openSidebar:e,isWideScreen:n}=Wa(),{projects:a}=gi(),[o,c]=nc(),u=o.get("project")??void 0,d=h.useCallback(p=>{c(p?{project:p}:{})},[c]),m=h.useMemo(()=>{var p;if(u)return(p=a.find(v=>v.id===u))==null?void 0:p.name},[u,a]);return i.jsx("div",{className:n?"main-content-wrapper":"main-content-mobile",children:i.jsxs("div",{className:n?"main-content-constrained":"main-content-mobile-inner",children:[i.jsx(Ga,{title:m?`${m} Inbox`:"Inbox",onOpenSidebar:e}),i.jsx(Ik,{projectId:u,projects:a,onProjectChange:d})]})})}function Gx(){const[e,n]=h.useState({isOpen:!1,authMethod:null,url:null,error:null,statusMessage:""}),a=h.useCallback(()=>{n({isOpen:!0,authMethod:null,url:null,error:null,statusMessage:""})},[]),o=h.useCallback(async m=>{if(n(p=>({...p,authMethod:m,error:null})),m==="oauth"){n(p=>({...p,statusMessage:"Starting Claude CLI..."}));try{n(v=>({...v,statusMessage:"Waiting for login prompt..."}));const p=await Ke.startClaudeLogin();p.success&&p.url?n(v=>({...v,url:p.url??null,statusMessage:""})):n(v=>({...v,error:p.error||"Failed to start login flow",statusMessage:""}))}catch(p){const v=p instanceof Error?p.message:"Failed to start login";n(x=>({...x,error:v,statusMessage:""}))}}},[]),c=h.useCallback(()=>{n({isOpen:!1,authMethod:null,url:null,error:null,statusMessage:""})},[]),u=h.useCallback(()=>{c()},[c]),d=h.useCallback(async()=>{if(e.authMethod==="oauth")try{await Ke.cancelClaudeLogin()}catch{}c()},[c,e.authMethod]);return{...e,startLogin:a,selectMethod:o,closeLogin:c,handleSuccess:u,handleCancel:d}}function Yx(){const{websocketTransportEnabled:e}=Sf();return e?jo():I0}function Df(){const[e,n]=h.useState([]),[a,o]=h.useState(!0),[c,u]=h.useState(null),d=h.useRef(!1),m=h.useCallback(async()=>{o(!0),u(null);try{const p=await Ke.getProviders();n(p.providers)}catch(p){u(p instanceof Error?p:new Error(String(p)))}finally{o(!1)}},[]);return h.useEffect(()=>{d.current||(d.current=!0,m())},[m]),{providers:e,loading:a,error:c,refetch:m}}function Kx(e){return e.filter(n=>n.installed&&(n.authenticated||n.enabled))}function Hk(e){const n=Kx(e);if(n.length===0)return null;const a=n.find(o=>o.name===n2);return a||(n[0]??null)}function bs({title:e,children:n,onClose:a}){const o=h.useRef(null);h.useEffect(()=>{const m=p=>{p.key==="Escape"&&(p.preventDefault(),p.stopPropagation(),a())};return document.addEventListener("keydown",m,!0),()=>document.removeEventListener("keydown",m,!0)},[a]),h.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow=""}),[]),h.useEffect(()=>{var m;(m=o.current)==null||m.focus()},[]);const c=m=>{m.target===m.currentTarget&&(m.preventDefault(),m.stopPropagation(),a())},u=m=>{m.stopPropagation()},d=i.jsx("div",{className:"modal-overlay",onClick:c,onMouseDown:m=>m.stopPropagation(),children:i.jsxs("dialog",{className:"modal",open:!0,onClick:u,children:[i.jsxs("div",{className:"modal-header",children:[i.jsx("span",{className:"modal-title",children:e}),i.jsx("button",{ref:o,type:"button",className:"modal-close",onClick:m=>{m.preventDefault(),m.stopPropagation(),a()},"aria-label":"Close",children:""})]}),i.jsx("div",{className:"modal-content",children:n})]})});return di.createPortal(d,document.body)}function Wx({authMethod:e,onSelectMethod:n,url:a,statusMessage:o,startupError:c,onSuccess:u,onCancel:d}){const[m,p]=h.useState(""),[v,x]=h.useState(""),[b,w]=h.useState(!1),[_,C]=h.useState(null),E=e==="oauth"&&!a&&!c,N=async U=>{if(U.preventDefault(),!m.trim()){C("Please enter the authorization code");return}w(!0),C(null);try{const P=await Ke.submitClaudeLoginCode(m.trim());P.success?u():C(P.error||"Failed to submit code")}catch(P){C(P instanceof Error?P.message:"Failed to submit code")}finally{w(!1)}},z=async U=>{if(U.preventDefault(),!v.trim()){C("Please enter your API key");return}if(!v.trim().startsWith("sk-ant-")){C("Invalid API key format. Anthropic API keys start with 'sk-ant-'");return}w(!0),C(null);try{const P=await Ke.setClaudeApiKey(v.trim());P.success?u():C(P.error||"Failed to set API key")}catch(P){C(P instanceof Error?P.message:"Failed to set API key")}finally{w(!1)}},O=async()=>{if(e==="oauth")try{await Ke.cancelClaudeLogin()}catch{}d()};return e?e==="apikey"?i.jsx(bs,{title:"API Key Authentication",onClose:O,children:i.jsx("div",{className:"claude-login-modal-content",children:c?i.jsxs("div",{className:"claude-login-error-state",children:[i.jsx("p",{className:"claude-login-error",children:c}),i.jsx("div",{className:"claude-login-actions",children:i.jsx("button",{type:"button",className:"btn-secondary",onClick:d,children:"Close"})})]}):i.jsxs(i.Fragment,{children:[i.jsxs("p",{className:"claude-login-instructions",children:["Enter your Anthropic API key. You can find this in the"," ",i.jsx("a",{href:"https://console.anthropic.com/settings/keys",target:"_blank",rel:"noopener noreferrer",children:"Anthropic Console"}),"."]}),i.jsxs("form",{onSubmit:z,children:[i.jsx("input",{type:"password",className:"claude-login-apikey-input",value:v,onChange:U=>x(U.target.value),placeholder:"sk-ant-...",disabled:b}),_&&i.jsx("p",{className:"claude-login-error",children:_}),i.jsxs("div",{className:"claude-login-actions",children:[i.jsx("button",{type:"button",className:"btn-secondary",onClick:O,disabled:b,children:"Cancel"}),i.jsx("button",{type:"submit",className:"btn-primary",disabled:b||!v.trim(),children:b?"Saving...":"Save API Key"})]})]})]})})}):i.jsx(bs,{title:"Claude Max/Pro Login",onClose:O,children:i.jsx("div",{className:"claude-login-modal-content",children:E?i.jsxs("div",{className:"claude-login-loading",children:[i.jsx("div",{className:"claude-login-spinner"}),i.jsx("p",{className:"claude-login-status",children:o||"Starting login flow..."})]}):c?i.jsxs("div",{className:"claude-login-error-state",children:[i.jsx("p",{className:"claude-login-error",children:c}),i.jsx("div",{className:"claude-login-actions",children:i.jsx("button",{type:"button",className:"btn-secondary",onClick:d,children:"Close"})})]}):i.jsxs(i.Fragment,{children:[i.jsx("p",{className:"claude-login-instructions",children:"Complete the OAuth flow to authenticate with your Claude subscription."}),i.jsxs("div",{className:"claude-login-step",children:[i.jsx("span",{className:"step-number",children:"1"}),i.jsxs("div",{className:"step-content",children:[i.jsx("p",{children:"Click the link below to open the authorization page:"}),i.jsx("a",{href:a??void 0,target:"_blank",rel:"noopener noreferrer",className:"claude-login-url",children:"Open Claude Authorization"})]})]}),i.jsxs("div",{className:"claude-login-step",children:[i.jsx("span",{className:"step-number",children:"2"}),i.jsx("div",{className:"step-content",children:i.jsx("p",{children:"After authorizing, you'll be redirected to a page with an authorization code. Copy the entire code from the URL."})})]}),i.jsxs("div",{className:"claude-login-step",children:[i.jsx("span",{className:"step-number",children:"3"}),i.jsxs("div",{className:"step-content",children:[i.jsx("p",{children:"Paste the authorization code below:"}),i.jsxs("form",{onSubmit:N,children:[i.jsx("textarea",{className:"claude-login-code-input",value:m,onChange:U=>p(U.target.value),placeholder:"Paste authorization code here...",rows:3,disabled:b}),_&&i.jsx("p",{className:"claude-login-error",children:_}),i.jsxs("div",{className:"claude-login-actions",children:[i.jsx("button",{type:"button",className:"btn-secondary",onClick:O,disabled:b,children:"Cancel"}),i.jsx("button",{type:"submit",className:"btn-primary",disabled:b||!m.trim(),children:b?"Submitting...":"Submit Code"})]})]})]})]})]})})}):i.jsx(bs,{title:"Authenticate Claude CLI",onClose:d,children:i.jsxs("div",{className:"claude-login-modal-content",children:[i.jsx("p",{className:"claude-login-instructions",children:"Choose how you'd like to authenticate with Claude:"}),i.jsxs("div",{className:"claude-login-methods",children:[i.jsxs("button",{type:"button",className:"claude-login-method-option",onClick:()=>n("oauth"),children:[i.jsx("div",{className:"method-option-header",children:i.jsx("span",{className:"method-option-title",children:"Claude Max/Pro"})}),i.jsx("p",{className:"method-option-desc",children:"For Claude Max, Pro, or Team subscriptions. Authenticates via OAuth."})]}),i.jsxs("button",{type:"button",className:"claude-login-method-option",onClick:()=>n("apikey"),children:[i.jsx("div",{className:"method-option-header",children:i.jsx("span",{className:"method-option-title",children:"API Key"})}),i.jsx("p",{className:"method-option-desc",children:"For Anthropic API users. Enter your API key directly."})]})]}),i.jsx("div",{className:"claude-login-actions",children:i.jsx("button",{type:"button",className:"btn-secondary",onClick:d,children:"Cancel"})})]})})}const Zk=["default","acceptEdits","plan","bypassPermissions"],qk={default:"Ask before edits",acceptEdits:"Edit automatically",plan:"Plan mode",bypassPermissions:"Bypass permissions"},Vk={default:"Claude will ask for approval before making changes",acceptEdits:"Claude can edit files without asking",plan:"Claude will create a plan before implementing",bypassPermissions:"Skip all permission checks (use with caution)"};function Fk(e){return e<1024?`${e} B`:e<1024*1024?`${(e/1024).toFixed(1)} KB`:e<1024*1024*1024?`${(e/(1024*1024)).toFixed(1)} MB`:`${(e/(1024*1024*1024)).toFixed(1)} GB`}function Gk({projectId:e,autoFocus:n=!0,rows:a=6,placeholder:o="Describe what you'd like help with...",compact:c=!1}){const u=ea(),[d,m,p]=xf(`draft-new-session-${e}`),[v,x]=h.useState("default"),[b,w]=h.useState(null),[_,C]=h.useState(null),[E,N]=h.useState([]),[z,O]=h.useState(!1),[U,P]=h.useState({}),[A,D]=h.useState(""),I=h.useRef(null),Z=h.useRef(null),re=h.useRef(null),{thinkingEnabled:_e,toggleThinking:Te,thinkingLevel:se}=sc(),le=Gx(),me=Yx(),{showToast:Re}=Uf(),{providers:L,loading:F}=Df(),G=Kx(L),we=L.find(V=>V.name===b),Me=(we==null?void 0:we.models)??[],B=(we==null?void 0:we.supportsPermissionMode)??!0,ie=(we==null?void 0:we.supportsThinkingToggle)??!0;h.useEffect(()=>{var V;if(!b&&L.length>0){const he=Hk(L);if(he&&(w(he.name),he.models&&he.models.length>0)){const Ge=qg(Yd()),tt=he.models.find(Tt=>Tt.id===Ge);C((tt==null?void 0:tt.id)??((V=he.models[0])==null?void 0:V.id)??null)}}},[L,b]);const X=V=>{var Ge;w(V);const he=L.find(tt=>tt.name===V);if(he!=null&&he.models&&he.models.length>0){const tt=qg(Yd()),Tt=he.models.find(bt=>bt.id===tt);C((Tt==null?void 0:Tt.id)??((Ge=he.models[0])==null?void 0:Ge.id)??null)}else C(null)},Se=h.useMemo(()=>Me.map(V=>({value:V.id,label:V.size?`${V.name} (${(V.size/(1024*1024*1024)).toFixed(1)} GB)`:V.name})),[Me]),pe=h.useCallback(V=>{C(V[0]??null)},[]),He=A?d+(d.trimEnd()?" ":"")+A:d;h.useEffect(()=>{if(A){const V=Z.current;V&&(V.scrollTop=V.scrollHeight)}},[A]),h.useEffect(()=>{var V;n&&((V=Z.current)==null||V.focus())},[n]),h.useEffect(()=>{const V=Oj();V&&(m(V),zj(),Z.current&&(Z.current.focus(),Z.current.setSelectionRange(V.length,V.length)))},[m]);const et=V=>{const he=V.target.files;if(!(he!=null&&he.length))return;const Ge=Array.from(he).map(tt=>({id:`pending-${Date.now()}-${Math.random().toString(36).slice(2)}`,file:tt,previewUrl:tt.type.startsWith("image/")?URL.createObjectURL(tt):void 0}));N(tt=>[...tt,...Ge]),V.target.value=""},Oe=V=>{N(he=>{const Ge=he.find(tt=>tt.id===V);return Ge!=null&&Ge.previewUrl&&URL.revokeObjectURL(Ge.previewUrl),he.filter(tt=>tt.id!==V)})},Ze=V=>{x(V)},Fe=async()=>{var Tt;const V=((Tt=re.current)==null?void 0:Tt.stopAndFinalize())??"";let he=d.trimEnd();V&&(he=he?`${he} ${V}`:V);const Ge=he.trim()||E.length>0;if(!e||!Ge||z)return;const tt=he.trim();if(tt==="/login"){le.startLogin();return}D(""),O(!0);try{let bt,Ct;const Mn=[],cn=Kd(),st={mode:v,model:_??void 0,thinking:cn,provider:b??void 0};if(E.length>0){const Ce=await Ke.createSession(e,st);bt=Ce.sessionId,Ct=Ce.processId;for(const rt of E)try{const Vt=await me.upload(e,bt,rt.file,{onProgress:sn=>{P(Ue=>({...Ue,[rt.id]:{uploaded:sn,total:rt.file.size}}))}});Mn.push(Vt)}catch(Vt){console.error("Failed to upload file:",Vt)}await Ke.queueMessage(bt,tt,v,Mn.length>0?Mn:void 0,void 0,cn)}else{const Ce=await Ke.startSession(e,tt,st);bt=Ce.sessionId,Ct=Ce.processId}for(const Ce of E)Ce.previewUrl&&URL.revokeObjectURL(Ce.previewUrl);p.clearDraft(),u(`/projects/${e}/sessions/${bt}`,{state:{initialStatus:{state:"owned",processId:Ct},initialTitle:tt,initialModel:_,initialProvider:b}})}catch(bt){console.error("Failed to start session:",bt),p.restoreFromStorage(),O(!1);let Ct="Failed to start session";bt instanceof Error&&(bt.message.includes("Queue is full")?Ct="Server is busy. Please try again in a moment.":bt.message.includes("503")?Ct="Server is at capacity. Please try again later.":bt.message.includes("404")?Ct="Project not found.":bt.message.includes("fetch")||bt.message.includes("network")?Ct="Network error. Check your connection.":Ct=bt.message),Re(Ct,"error")}},lt=V=>{var he;if(V.key==="Enter"){const Ge=window.matchMedia("(pointer: coarse)").matches;if((he=re.current)!=null&&he.isListening){V.preventDefault(),Fe();return}if(Ge)return;{if(V.ctrlKey||V.shiftKey)return;V.preventDefault(),Fe()}}},Xt=V=>{var tt;const he=(tt=V.clipboardData)==null?void 0:tt.items;if(!he)return;const Ge=[];for(const Tt of he)if(Tt.kind==="file"){const bt=Tt.getAsFile();bt&&Ge.push(bt)}if(Ge.length>0){V.preventDefault();const Tt=Ge.map(bt=>({id:`pending-${Date.now()}-${Math.random().toString(36).slice(2)}`,file:bt,previewUrl:bt.type.startsWith("image/")?URL.createObjectURL(bt):void 0}));N(bt=>[...bt,...Tt])}},qt=h.useCallback(V=>{const he=d.trimEnd();m(he?`${he} ${V}`:V),D(""),setTimeout(()=>{const Ge=Z.current;Ge&&(Ge.scrollTop=Ge.scrollHeight)},0)},[d,m]),Qt=h.useCallback(V=>{D(V)},[]),bn=d.trim()||E.length>0,Gt=i.jsxs(i.Fragment,{children:[i.jsx("textarea",{ref:Z,value:He,onChange:V=>{D(""),m(V.target.value)},onKeyDown:lt,onPaste:Xt,placeholder:o,disabled:z,rows:a,className:"new-session-form-textarea"}),i.jsxs("div",{className:"new-session-form-toolbar",children:[i.jsxs("div",{className:"new-session-form-toolbar-left",children:[i.jsx("input",{ref:I,type:"file",multiple:!0,style:{display:"none"},onChange:et}),i.jsx("button",{type:"button",className:"toolbar-button",onClick:()=>{var V;return(V=I.current)==null?void 0:V.click()},disabled:z,"aria-label":"Attach files",children:i.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",children:i.jsx("path",{d:"M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48"})})}),i.jsx(yf,{ref:re,onTranscript:qt,onInterimTranscript:Qt,onListeningStart:()=>{var V;return(V=Z.current)==null?void 0:V.focus()},disabled:z,className:"toolbar-button"}),ie&&i.jsx("button",{type:"button",className:`toolbar-button ${_e?"active":""}`,onClick:Te,disabled:z,title:_e?`Extended thinking: ${se}`:"Enable extended thinking","aria-pressed":_e,"aria-label":"Toggle extended thinking",children:i.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[i.jsx("circle",{cx:"12",cy:"12",r:"10"}),i.jsx("polyline",{points:"12 6 12 12 16 14"})]})})]}),i.jsx("button",{type:"button",onClick:Fe,disabled:z||!bn,className:"send-button","aria-label":"Start session",children:z?i.jsx("span",{className:"send-spinner"}):i.jsx("span",{className:"send-icon",children:""})})]}),E.length>0&&i.jsx("div",{className:"pending-files-list",children:E.map(V=>{const he=U[V.id];return i.jsxs("div",{className:"pending-file-chip",children:[V.previewUrl&&i.jsx("img",{src:V.previewUrl,alt:"",className:"pending-file-preview"}),i.jsxs("div",{className:"pending-file-info",children:[i.jsx("span",{className:"pending-file-name",children:V.file.name}),i.jsx("span",{className:"pending-file-size",children:he?`${Math.round(he.uploaded/he.total*100)}%`:Fk(V.file.size)})]}),!z&&i.jsx("button",{type:"button",className:"pending-file-remove",onClick:()=>Oe(V.id),"aria-label":`Remove ${V.file.name}`,children:i.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",children:[i.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),i.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]},V.id)})})]}),pn=le.isOpen&&i.jsx(Wx,{authMethod:le.authMethod,onSelectMethod:le.selectMethod,url:le.url,statusMessage:le.statusMessage,startupError:le.error,onSuccess:le.handleSuccess,onCancel:le.handleCancel});return c?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:`new-session-form new-session-form-compact ${A?"voice-recording":""}`,children:Gt}),pn]}):i.jsxs("div",{className:`new-session-form new-session-container ${A?"voice-recording":""}`,children:[i.jsxs("div",{className:"new-session-header",children:[i.jsx("h1",{children:"Start a New Session"}),i.jsx("p",{className:"new-session-subtitle",children:"What would you like to work on?"})]}),i.jsx("div",{className:"new-session-input-area",children:Gt}),!F&&G.length>1&&i.jsxs("div",{className:"new-session-provider-section",children:[i.jsx("h3",{children:"AI Provider"}),i.jsx("div",{className:"provider-options",children:L.map(V=>{const he=V.installed&&(V.authenticated||V.enabled),Ge=b===V.name;return i.jsxs("button",{type:"button",className:`provider-option ${Ge?"selected":""} ${he?"":"disabled"}`,onClick:()=>he&&X(V.name),disabled:z||!he,title:he?V.displayName:`${V.displayName} is not available (${V.installed?"not authenticated":"not installed"})`,children:[i.jsx("span",{className:`provider-option-dot provider-${V.name}`}),i.jsxs("div",{className:"provider-option-content",children:[i.jsx("span",{className:"provider-option-label",children:V.displayName}),!he&&i.jsx("span",{className:"provider-option-status",children:V.installed?"Not authenticated":"Not installed"})]})]},V.name)})})]}),b&&Se.length>0&&i.jsxs("div",{className:"new-session-model-section",children:[i.jsx("h3",{children:"Model"}),i.jsx(si,{label:"Model",options:Se,selected:_?[_]:[],onChange:pe,multiSelect:!1,placeholder:"Select model"})]}),B&&i.jsxs("div",{className:"new-session-mode-section",children:[i.jsx("h3",{children:"Permission Mode"}),i.jsx("div",{className:"mode-options",children:Zk.map(V=>i.jsxs("button",{type:"button",className:`mode-option ${v===V?"selected":""}`,onClick:()=>Ze(V),disabled:z,children:[i.jsx("span",{className:`mode-option-dot mode-${V}`}),i.jsxs("div",{className:"mode-option-content",children:[i.jsx("span",{className:"mode-option-label",children:qk[V]}),i.jsx("span",{className:"mode-option-desc",children:Vk[V]})]})]},V))})]}),pn]})}const Uv=769;function Yk({currentProjectId:e,currentProjectName:n,onProjectChange:a}){const[o,c]=h.useState(!1),[u,d]=h.useState(()=>window.innerWidth>=Uv),m=h.useRef(null),p=h.useRef(null),v=ea(),{projects:x,loading:b}=gi(),w=x.find(A=>A.id===e),_=(w==null?void 0:w.name)??n??"Project",C=()=>{var A;(A=m.current)==null||A.blur(),c(!0)},E=A=>{A.id!==e&&(a?a(A):v(`/new-session?projectId=${encodeURIComponent(A.id)}`)),c(!1)},N=h.useCallback(()=>{c(!1)},[]);h.useEffect(()=>{const A=()=>{d(window.innerWidth>=Uv)};return window.addEventListener("resize",A),()=>window.removeEventListener("resize",A)},[]),h.useEffect(()=>{if(!o)return;const A=D=>{D.key==="Escape"&&(D.preventDefault(),D.stopPropagation(),N())};return document.addEventListener("keydown",A,!0),()=>document.removeEventListener("keydown",A,!0)},[o,N]),h.useEffect(()=>{if(!o||!u)return;const A=D=>{p.current&&!p.current.contains(D.target)&&m.current&&!m.current.contains(D.target)&&N()};return document.addEventListener("mousedown",A),()=>document.removeEventListener("mousedown",A)},[o,u,N]),h.useEffect(()=>{if(o&&!u)return document.body.style.overflow="hidden",()=>{document.body.style.overflow=""}},[o,u]),h.useEffect(()=>{var A;o&&((A=p.current)==null||A.focus())},[o]);const z=A=>{A.target===A.currentTarget&&(A.preventDefault(),A.stopPropagation(),N())};if(!b&&x.length<=1)return i.jsx("span",{className:"session-title",children:_});const O=i.jsx("div",{className:"project-selector-options",children:x.map(A=>{const D=A.id===e;return i.jsxs("button",{type:"button",className:`project-selector-option ${D?"selected":""}`,onClick:()=>E(A),children:[i.jsx("span",{className:"project-selector-name",children:A.name}),i.jsxs("span",{className:"project-selector-meta",children:[A.sessionCount," sessions"]})]},A.id)})}),U=o&&!u?di.createPortal(i.jsx("div",{className:"project-selector-overlay",onClick:z,onMouseDown:A=>A.stopPropagation(),children:i.jsxs("div",{ref:p,className:"project-selector-sheet",tabIndex:-1,"aria-label":"Select project",children:[i.jsx("div",{className:"project-selector-header",children:i.jsx("span",{className:"project-selector-title",children:"Select Project"})}),O]})}),document.body):null,P=o&&u?i.jsx("div",{ref:p,className:"project-selector-dropdown",tabIndex:-1,"aria-label":"Select project",children:O}):null;return i.jsxs("div",{className:"project-selector-container",children:[i.jsxs("button",{ref:m,type:"button",className:"project-selector-button",onClick:C,title:"Change project","aria-haspopup":"listbox","aria-expanded":o,children:[i.jsx("span",{className:"project-selector-text",children:_}),i.jsx("svg",{className:"project-selector-chevron",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:i.jsx("polyline",{points:"6 9 12 15 18 9"})})]}),P,U]})}const Lv="Yep Anywhere";function Dv(e,n){return e.length<=n?e:`${e.slice(0,n-1)}`}function Xx(e,n){h.useEffect(()=>{let a=Lv;if(e)if(n){const o=Dv(e,10),c=Dv(n,20);a=`${o} - ${c}`}else a=e;return document.title=a,()=>{document.title=Lv}},[e,n])}function Kk(){var _;const[e,n]=nc(),a=e.get("projectId"),{openSidebar:o,isWideScreen:c,toggleSidebar:u,isSidebarCollapsed:d}=Wa(),{projects:m}=gi(),p=a||((_=m[0])==null?void 0:_.id),{project:v,loading:x,error:b}=Hx(p),w=C=>{n({projectId:C},{replace:!0})};return!p&&!x&&m.length===0?i.jsx("div",{className:"error",children:"No projects available"}):(Xx(v==null?void 0:v.name,"New Session"),x||b?i.jsx("div",{className:c?"main-content-wrapper":"main-content-mobile",children:i.jsxs("div",{className:c?"main-content-constrained":"main-content-mobile-inner",children:[i.jsx(Ga,{title:"New Session",onOpenSidebar:o,onToggleSidebar:u,isWideScreen:c,isSidebarCollapsed:d}),i.jsx("main",{className:"page-scroll-container",children:i.jsx("div",{className:"page-content-inner",children:x?i.jsx("div",{className:"loading",children:"Loading..."}):i.jsxs("div",{className:"error",children:["Error: ",b==null?void 0:b.message]})})})]})}):i.jsx("div",{className:c?"main-content-wrapper":"main-content-mobile",children:i.jsxs("div",{className:c?"main-content-constrained":"main-content-mobile-inner",children:[i.jsx(Ga,{title:(v==null?void 0:v.name)??"New Session",titleElement:p?i.jsx(Yk,{currentProjectId:p,currentProjectName:v==null?void 0:v.name,onProjectChange:C=>w(C.id)}):void 0,onOpenSidebar:o,onToggleSidebar:u,isWideScreen:c,isSidebarCollapsed:d}),i.jsx("main",{className:"page-scroll-container",children:i.jsx("div",{className:"page-content-inner",children:p&&i.jsx(Gk,{projectId:p})})})]})}))}function Wk(e){const n=Date.now(),a=new Date(e).getTime(),o=n-a,c=Math.floor(o/6e4),u=Math.floor(o/36e5),d=Math.floor(o/864e5);return c<1?"just now":c<60?`${c}m ago`:u<24?`${u}h ago`:d<7?`${d}d ago`:new Date(e).toLocaleDateString()}function Xk({project:e,needsAttentionCount:n,thinkingCount:a}){const o=ea(),c=u=>{u.preventDefault(),u.stopPropagation(),o(`/new-session?projectId=${e.id}`)};return i.jsx("li",{className:"project-card",children:i.jsxs($s,{to:`/sessions?project=${e.id}`,className:"project-card__link",children:[i.jsxs("div",{className:"project-card__header",children:[i.jsxs("strong",{className:"project-card__name",children:[n>0&&i.jsx("span",{className:"project-card__attention-badge",children:n}),e.name]}),i.jsx("button",{type:"button",className:"project-card__new-session",onClick:c,title:"New session",children:i.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[i.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),i.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})})]}),i.jsxs("div",{className:"project-card__meta",children:[i.jsx("span",{className:"project-card__path",title:e.path,children:ak(e.path)}),i.jsxs("span",{className:"project-card__stats",children:[i.jsxs("span",{className:"project-card__sessions",children:[e.sessionCount," session",e.sessionCount!==1?"s":""]}),a>0&&i.jsxs("span",{className:"project-card__thinking",children:[i.jsx(br,{}),i.jsx("span",{children:a})]}),e.lastActivity&&i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"project-card__separator",children:""}),i.jsx("span",{className:"project-card__time",children:Wk(e.lastActivity)})]})]})]})]})})}function Qk(){const{projects:e,loading:n,error:a,refetch:o}=gi(),{needsAttention:c,active:u}=Of(),[d,m]=h.useState(!1),[p,v]=h.useState(""),[x,b]=h.useState(null),[w,_]=h.useState(!1),C=ea(),{openSidebar:E,isWideScreen:N,toggleSidebar:z,isSidebarCollapsed:O}=Wa(),U=h.useMemo(()=>{const Z=new Map;for(const re of c){const _e=Z.get(re.projectId)??0;Z.set(re.projectId,_e+1)}return Z},[c]),P=h.useMemo(()=>{const Z=new Map;for(const re of u){const _e=Z.get(re.projectId)??0;Z.set(re.projectId,_e+1)}return Z},[u]),A=h.useMemo(()=>[...e].sort((Z,re)=>{const _e=U.get(Z.id)??0,Te=U.get(re.id)??0;if(_e>0&&Te===0)return-1;if(Te>0&&_e===0)return 1;const se=Z.lastActivity?new Date(Z.lastActivity).getTime():0;return(re.lastActivity?new Date(re.lastActivity).getTime():0)-se}),[e,U]),D=async Z=>{if(Z.preventDefault(),!!p.trim()){_(!0),b(null);try{const{project:re}=await Ke.addProject(p.trim());await o(),v(""),m(!1),C(`/sessions?project=${re.id}`)}catch(re){b(re instanceof Error?re.message:"Failed to add project")}finally{_(!1)}}};if(n)return i.jsx("div",{className:"loading",children:"Loading projects..."});if(a)return i.jsxs("div",{className:"error",children:["Error: ",a.message]});const I=e.length===0;return i.jsx("div",{className:N?"main-content-wrapper":"main-content-mobile",children:i.jsxs("div",{className:N?"main-content-constrained":"main-content-mobile-inner",children:[i.jsx(Ga,{title:"Projects",onOpenSidebar:E,onToggleSidebar:z,isWideScreen:N,isSidebarCollapsed:O}),i.jsx("main",{className:"page-scroll-container",children:i.jsxs("div",{className:"page-content-inner",children:[i.jsx("div",{className:"inbox-toolbar",children:d?i.jsxs("form",{onSubmit:D,className:"add-project-form",children:[i.jsx("input",{type:"text",value:p,onChange:Z=>v(Z.target.value),placeholder:"Enter project path (e.g., ~/code/my-project)",disabled:w}),i.jsxs("div",{className:"add-project-actions",children:[i.jsx("button",{type:"submit",disabled:w||!p.trim(),children:w?"Adding...":"Add"}),i.jsx("button",{type:"button",onClick:()=>{m(!1),v(""),b(null)},disabled:w,children:"Cancel"})]}),x&&i.jsx("div",{className:"add-project-error",children:x})]}):i.jsxs("button",{type:"button",className:"inbox-refresh-button",onClick:()=>m(!0),children:[i.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[i.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),i.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),"Add Project"]})}),I?i.jsxs("div",{className:"inbox-empty",children:[i.jsx("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:i.jsx("path",{d:"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"})}),i.jsx("h3",{children:"No projects yet"}),i.jsx("p",{children:"Add a project above, or launch Claude in a folder and it will automatically appear here."})]}):i.jsx("ul",{className:"project-list-cards",children:A.map(Z=>i.jsx(Xk,{project:Z,needsAttentionCount:U.get(Z.id)??0,thinkingCount:P.get(Z.id)??0},Z.id))})]})})]})})}const Jk=["default","acceptEdits","plan","bypassPermissions"],Bv={default:"Ask before edits",acceptEdits:"Edit automatically",plan:"Plan mode",bypassPermissions:"Bypass permissions"},$v=769;function e3({mode:e,onModeChange:n,disabled:a,isModePending:o,isHeld:c=!1,onHoldChange:u}){const[d,m]=h.useState(!1),[p,v]=h.useState(()=>window.innerWidth>=$v),x=h.useRef(null),b=h.useRef(null),w=()=>{var D;a||((D=x.current)==null||D.blur(),m(!0))},_=D=>{c&&u&&u(!1),n(D),m(!1)},C=()=>{u&&u(!c),m(!1)},E=h.useCallback(()=>{m(!1)},[]);h.useEffect(()=>{const D=()=>{v(window.innerWidth>=$v)};return window.addEventListener("resize",D),()=>window.removeEventListener("resize",D)},[]),h.useEffect(()=>{if(!d)return;const D=I=>{I.key==="Escape"&&(I.preventDefault(),I.stopPropagation(),E())};return document.addEventListener("keydown",D,!0),()=>document.removeEventListener("keydown",D,!0)},[d,E]),h.useEffect(()=>{if(!d||!p)return;const D=I=>{b.current&&!b.current.contains(I.target)&&x.current&&!x.current.contains(I.target)&&E()};return document.addEventListener("mousedown",D),()=>document.removeEventListener("mousedown",D)},[d,p,E]),h.useEffect(()=>{if(d&&!p)return document.body.style.overflow="hidden",()=>{document.body.style.overflow=""}},[d,p]),h.useEffect(()=>{var D;d&&((D=b.current)==null||D.focus())},[d]);const N=D=>{D.target===D.currentTarget&&(D.preventDefault(),D.stopPropagation(),E())},z=c?"Hold":Bv[e],O=c?"mode-hold":`mode-${e}`,U=i.jsxs(i.Fragment,{children:[u&&i.jsxs("button",{type:"button",className:`mode-selector-option ${c?"selected":""}`,onClick:C,"aria-pressed":c,children:[i.jsx("span",{className:"mode-dot mode-hold"}),i.jsx("span",{className:"mode-selector-label",children:c?"Resume":"Hold"}),i.jsx("span",{className:"mode-selector-description",children:c?"Continue execution":"Pause execution"}),c&&i.jsx("span",{className:"mode-selector-check","aria-hidden":"true",children:i.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:i.jsx("polyline",{points:"20 6 9 17 4 12"})})})]}),u&&i.jsx("div",{className:"mode-selector-divider"}),Jk.map(D=>i.jsxs("button",{type:"button",className:`mode-selector-option ${!c&&e===D?"selected":""}`,onClick:()=>_(D),"aria-pressed":!c&&e===D,children:[i.jsx("span",{className:`mode-dot mode-${D}`}),i.jsx("span",{className:"mode-selector-label",children:Bv[D]}),!c&&e===D&&i.jsx("span",{className:"mode-selector-check","aria-hidden":"true",children:i.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:i.jsx("polyline",{points:"20 6 9 17 4 12"})})})]},D))]}),P=d&&!p?di.createPortal(i.jsx("div",{className:"mode-selector-overlay",onClick:N,onMouseDown:D=>D.stopPropagation(),children:i.jsxs("div",{ref:b,className:"mode-selector-sheet",tabIndex:-1,"aria-label":"Select mode",children:[i.jsx("div",{className:"mode-selector-header",children:i.jsx("span",{className:"mode-selector-title",children:"Session Mode"})}),i.jsx("div",{className:"mode-selector-options",children:U})]})}),document.body):null,A=d&&p?i.jsx("div",{ref:b,className:"mode-selector-dropdown",tabIndex:-1,"aria-label":"Select mode",children:i.jsx("div",{className:"mode-selector-options",children:U})}):null;return i.jsxs("div",{className:"mode-selector-container",children:[i.jsxs("button",{ref:x,type:"button",className:`mode-button ${c?"mode-button-held":""}`,onClick:w,disabled:a,title:"Click to select mode","aria-haspopup":"listbox","aria-expanded":d,children:[i.jsx("span",{className:`mode-dot ${O}`}),z,o&&!c&&i.jsx("span",{className:"mode-pending-hint",children:"(set on next message)"})]}),A,P]})}function t3({commands:e,onSelectCommand:n,disabled:a}){const[o,c]=h.useState(!1),u=h.useRef(null),d=h.useRef(null);h.useEffect(()=>{if(!o)return;const p=v=>{d.current&&!d.current.contains(v.target)&&u.current&&!u.current.contains(v.target)&&c(!1)};return document.addEventListener("mousedown",p),()=>document.removeEventListener("mousedown",p)},[o]),h.useEffect(()=>{if(!o)return;const p=v=>{var x;v.key==="Escape"&&(c(!1),(x=u.current)==null||x.focus())};return document.addEventListener("keydown",p),()=>document.removeEventListener("keydown",p)},[o]);const m=h.useCallback(p=>{n(`/${p}`),c(!1)},[n]);return e.length===0?null:i.jsxs("div",{className:"slash-command-container",children:[i.jsx("button",{ref:u,type:"button",className:`slash-command-button ${o?"active":""}`,onClick:()=>c(!o),disabled:a,title:"Slash commands","aria-label":"Show slash commands","aria-expanded":o,"aria-haspopup":"menu",children:i.jsx("span",{className:"slash-icon",children:"/"})}),o&&i.jsx("div",{ref:d,className:"slash-command-menu",role:"menu","aria-label":"Slash commands",children:e.map(p=>i.jsxs("button",{type:"button",className:"slash-command-item",onClick:()=>m(p),role:"menuitem",children:["/",p]},p))})]})}function Qx({mode:e="default",onModeChange:n,isModePending:a,isHeld:o,onHoldChange:c,supportsPermissionMode:u=!0,supportsThinkingToggle:d=!0,canAttach:m,attachmentCount:p=0,onAttachClick:v,voiceButtonRef:x,onVoiceTranscript:b,onInterimTranscript:w,onListeningStart:_,voiceDisabled:C,slashCommands:E=[],onSelectSlashCommand:N,contextUsage:z,isRunning:O,isThinking:U,onStop:P,onSend:A,canSend:D,disabled:I,pendingApproval:Z}){const{thinkingEnabled:re,toggleThinking:_e,thinkingLevel:Te}=sc();return i.jsxs("div",{className:"message-input-toolbar",children:[i.jsxs("div",{className:"message-input-left",children:[n&&u&&i.jsx(e3,{mode:e,onModeChange:n,isModePending:a,isHeld:o,onHoldChange:c}),i.jsxs("button",{type:"button",className:"attach-button",onClick:v,disabled:!m,title:m?"Attach files":"Send a message first to enable attachments",children:[i.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",children:i.jsx("path",{d:"M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48"})}),p>0&&i.jsx("span",{className:"attach-count",children:p})]}),d&&i.jsx("button",{type:"button",className:`thinking-toggle-button ${re?"active":""}`,onClick:_e,title:re?`Extended thinking: ${Te}`:"Enable extended thinking","aria-pressed":re,children:i.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[i.jsx("circle",{cx:"12",cy:"12",r:"10"}),i.jsx("polyline",{points:"12 6 12 12 16 14"})]})}),x&&b&&w&&i.jsx(yf,{ref:x,onTranscript:b,onInterimTranscript:w,onListeningStart:_,disabled:C}),N&&i.jsx(t3,{commands:E,onSelectCommand:N,disabled:C})]}),i.jsxs("div",{className:"message-input-actions",children:[Z&&i.jsxs("button",{type:"button",className:`pending-approval-indicator ${Z.type}`,onClick:Z.onExpand,title:Z.type==="tool-approval"?"Expand tool approval":"Expand question",children:[i.jsx("span",{className:"pending-approval-dot"}),i.jsx("span",{className:"pending-approval-text",children:Z.type==="tool-approval"?"Approval":"Question"})]}),i.jsx(Lf,{usage:z,size:16}),O&&P&&U&&!D?i.jsx("button",{type:"button",onClick:P,className:"stop-button","aria-label":"Stop",children:i.jsx("span",{className:"stop-icon"})}):A?i.jsx("button",{type:"button",onClick:A,disabled:I||!D,className:"send-button","aria-label":"Send",children:i.jsx("span",{className:"send-icon",children:""})}):null]})]})}function n3(e){return e<1024?`${e} B`:e<1024*1024?`${(e/1024).toFixed(1)} KB`:e<1024*1024*1024?`${(e/(1024*1024)).toFixed(1)} MB`:`${(e/(1024*1024*1024)).toFixed(1)} GB`}function s3({onSend:e,disabled:n,placeholder:a,mode:o="default",onModeChange:c,isModePending:u,isHeld:d,onHoldChange:m,isRunning:p,isThinking:v,onStop:x,draftKey:b,collapsed:w,onDraftControlsReady:_,contextUsage:C,projectId:E,sessionId:N,attachments:z=[],onAttach:O,onRemoveAttachment:U,uploadProgress:P=[],supportsPermissionMode:A=!0,supportsThinkingToggle:D=!0,slashCommands:I=[]}){const[Z,re,_e]=xf(b),Te=h.useRef(null),se=h.useRef(null),le=h.useRef(null),[me,Re]=h.useState(!1),[L,F]=h.useState(""),G=L?Z+(Z.trimEnd()?" ":"")+L:Z;h.useEffect(()=>{if(L){const Oe=Te.current;Oe&&(Oe.scrollTop=Oe.scrollHeight)}},[L]);const we=me||w,Me=!!(E&&N&&O),B=Oe=>{const Ze=Oe.target.files;Ze!=null&&Ze.length&&O&&(O(Array.from(Ze)),Oe.target.value="")};h.useEffect(()=>{_==null||_(_e)},[_e,_]);const ie=h.useCallback(()=>{var lt,Xt;const Oe=((lt=le.current)==null?void 0:lt.stopAndFinalize())??"";let Ze=Z.trimEnd();if(Oe&&(Ze=Ze?`${Ze} ${Oe}`:Oe),(Ze.trim()||z.length>0)&&!n){const qt=Ze.trim();_e.clearInput(),F(""),e(qt),(Xt=Te.current)==null||Xt.focus()}},[Z,n,_e,e,z.length]),X=Oe=>{var Ze,Fe;if(Oe.key===" "&&Oe.ctrlKey&&!Oe.shiftKey&&!Oe.altKey){Oe.preventDefault(),(Ze=le.current)!=null&&Ze.isAvailable&&le.current.toggle();return}if(Oe.key==="Enter"){const lt=window.matchMedia("(pointer: coarse)").matches;if((Fe=le.current)!=null&&Fe.isListening){Oe.preventDefault(),ie();return}if(lt)return;{if(Oe.ctrlKey||Oe.shiftKey)return;Oe.preventDefault(),ie()}}},Se=Oe=>{var lt;if(!Me||!O)return;const Ze=(lt=Oe.clipboardData)==null?void 0:lt.items;if(!Ze)return;const Fe=[];for(const Xt of Ze)if(Xt.kind==="file"){const qt=Xt.getAsFile();qt&&Fe.push(qt)}Fe.length>0&&(Oe.preventDefault(),O(Fe))},pe=h.useCallback(Oe=>{const Ze=Oe.trim();if(!Ze)return;const Fe=Z.trimEnd();re(Fe?`${Fe} ${Ze}`:Ze),F(""),setTimeout(()=>{const lt=Te.current;lt&&(lt.scrollTop=lt.scrollHeight)},0)},[Z,re]),He=h.useCallback(Oe=>{F(Oe)},[]),et=h.useCallback(Oe=>{var Fe;const Ze=Z.trimEnd();re(Ze?`${Ze} ${Oe} `:`${Oe} `),(Fe=Te.current)==null||Fe.focus()},[Z,re]);return i.jsxs("div",{className:"message-input-wrapper",children:[!w&&i.jsx("button",{type:"button",className:"message-input-toggle",onClick:()=>Re(!me),"aria-label":me?"Expand message input":"Collapse message input","aria-expanded":!me,children:i.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:me?"chevron-up":"chevron-down","aria-hidden":"true",children:i.jsx("polyline",{points:"6 9 12 15 18 9"})})}),i.jsxs("div",{className:`message-input ${we?"message-input-collapsed":""} ${L?"voice-recording":""}`,children:[i.jsx("textarea",{ref:Te,value:G,onChange:Oe=>{F(""),re(Oe.target.value)},onKeyDown:X,onPaste:Se,placeholder:w?"Continue typing while responding above...":a,disabled:n,rows:we?1:3}),!we&&(z.length>0||P.length>0)&&i.jsxs("div",{className:"attachment-list",children:[z.map(Oe=>i.jsxs("div",{className:"attachment-chip",children:[i.jsx("span",{className:"attachment-name",title:Oe.path,children:Oe.originalName}),i.jsx("span",{className:"attachment-size",children:n3(Oe.size)}),i.jsx("button",{type:"button",className:"attachment-remove",onClick:()=>U==null?void 0:U(Oe.id),"aria-label":`Remove ${Oe.originalName}`,children:"x"})]},Oe.id)),P.map(Oe=>i.jsxs("div",{className:"attachment-chip uploading",children:[i.jsx("span",{className:"attachment-name",children:Oe.fileName}),i.jsxs("span",{className:"attachment-progress",children:[Oe.percent,"%"]})]},Oe.fileId))]}),i.jsx("input",{ref:se,type:"file",multiple:!0,style:{display:"none"},onChange:B}),!we&&i.jsx(Qx,{mode:o,onModeChange:c,isModePending:u,isHeld:d,onHoldChange:m,supportsPermissionMode:A,supportsThinkingToggle:D,canAttach:Me,attachmentCount:z.length,onAttachClick:()=>{var Oe;return(Oe=se.current)==null?void 0:Oe.click()},voiceButtonRef:le,onVoiceTranscript:pe,onInterimTranscript:He,onListeningStart:()=>{var Oe;return(Oe=Te.current)==null?void 0:Oe.focus()},voiceDisabled:n,slashCommands:I,onSelectSlashCommand:et,contextUsage:C,isRunning:p,isThinking:v,onStop:x,onSend:ie,canSend:!!(Z.trim()||z.length>0),disabled:n})]})]})}function Bf(e,n){const a=[],o=new Map,c=new Set;if(!(n!=null&&n.activeToolApproval)){for(const u of e)if(u.orphanedToolUseIds)for(const d of u.orphanedToolUseIds)c.add(d)}for(const u of e)a3(u,a,o,c,n);return a}function a3(e,n,a,o,c){var b,w,_,C,E,N,z,O,U;const u=ss(e);if(e.type==="system"){const P=e.subtype??"unknown";if(P==="compact_boundary"){const A={type:"system",id:u,subtype:P,content:typeof e.content=="string"?e.content:"Context compacted",sourceMessages:[e]};n.push(A)}return}typeof window<"u"&&window.__STREAMING_DEBUG__&&e.type==="assistant"&&console.log("[preprocessMessages] Processing assistant message:",{msgId:u,uuid:e.uuid,id:e.id,_isStreaming:e._isStreaming});const d=((b=e.message)==null?void 0:b.content)??e.content,m=((w=e.message)==null?void 0:w.role)??e.role,p=e.type==="user"||m==="user";if(typeof d=="string"){if(p){n.push({type:"user_prompt",id:u,content:d,sourceMessages:[e],isSubagent:e.isSubagent});return}if(d.trim()){const P=e._html;n.push({type:"text",id:u,text:d,sourceMessages:[e],isSubagent:e.isSubagent,augmentHtml:P??((C=(_=c==null?void 0:c.markdown)==null?void 0:_[u])==null?void 0:C.html)})}return}if(!Array.isArray(d))return;if(p&&d.every(P=>P.type==="tool_result")){for(const P of d)P.type==="tool_result"&&P.tool_use_id&&r3(P,e,n,a);return}if(p){n.push({type:"user_prompt",id:u,content:d,sourceMessages:[e],isSubagent:e.isSubagent});return}let x=-1;if(e._isStreaming)for(let P=d.length-1;P>=0;P--){const A=d[P];if((A==null?void 0:A.type)==="text"&&((E=A.text)!=null&&E.trim())){x=P;break}}for(let P=0;P<d.length;P++){const A=d[P];if(!A)continue;const D=`${u}-${P}`;if(A.type==="text"){if((N=A.text)!=null&&N.trim()){const I=A._html;n.push({type:"text",id:D,text:A.text,sourceMessages:[e],isSubagent:e.isSubagent,isStreaming:e._isStreaming&&P===x,augmentHtml:I??((O=(z=c==null?void 0:c.markdown)==null?void 0:z[u])==null?void 0:O.html)})}}else if(A.type==="thinking")(U=A.thinking)!=null&&U.trim()&&n.push({type:"thinking",id:D,thinking:A.thinking,signature:void 0,status:"complete",sourceMessages:[e],isSubagent:e.isSubagent});else if(A.type==="tool_use"&&A.id&&A.name){const I=o.has(A.id),Z={type:"tool_call",id:A.id,toolName:A.name,toolInput:A.input,toolResult:void 0,status:I?"aborted":"pending",sourceMessages:[e],isSubagent:e.isSubagent};a.set(A.id,n.length),n.push(Z)}}}function r3(e,n,a,o){const c=e.tool_use_id;if(!c)return;const u=o.get(c);if(u===void 0){console.warn(`Tool result for unknown tool_use: ${c}`);return}const d=a[u];if(!d||d.type!=="tool_call")return;const m=n.toolUseResult??n.tool_use_result,p={content:e.content||"",isError:e.is_error||!1,structured:m},v={type:"tool_call",id:d.id,toolName:d.toolName,toolInput:d.toolInput,toolResult:p,status:e.is_error?"error":"complete",sourceMessages:[...d.sourceMessages,n],isSubagent:d.isSubagent};a[u]=v,o.delete(c)}const Jx="yep-anywhere-fun-phrases-enabled";function ey(){const e=localStorage.getItem(Jx);return e===null?!0:e==="true"}function i3(e){localStorage.setItem(Jx,String(e))}function o3(){const[e,n]=h.useState(ey),a=h.useCallback(o=>{n(o),i3(o)},[]);return{funPhrasesEnabled:e,setFunPhrasesEnabled:a}}function l3(){return ey()}const c3=["Thinking...","Processing...","Cooking...","Analyzing...","Working on it...","Pondering...","Computing...","Crafting...","Mulling it over...","On it...","Crunching...","Brewing...","Conjuring...","Synthesizing...","Deliberating...","Ruminating...","Contemplating...","Percolating...","Cogitating...","Noodling..."],u3=2e3,d3=25;function f3(e){const n=[...e];for(let a=n.length-1;a>0;a--){const o=Math.floor(Math.random()*(a+1)),c=n[a];n[a]=n[o],n[o]=c}return n}const h3=h.memo(function({isProcessing:n}){const[a,o]=h.useState(0),[c,u]=h.useState(""),[d,m]=h.useState(!0),p=h.useMemo(()=>n?l3()?f3(c3):["Thinking..."]:["Thinking..."],[n]);return h.useEffect(()=>{if(!n){o(0),u(""),m(!0);return}const v=setInterval(()=>{o(x=>(x+1)%p.length),m(!0),u("")},u3);return()=>clearInterval(v)},[n,p.length]),h.useEffect(()=>{if(!n||!d)return;const v=p[a]??"";if(c.length>=v.length){m(!1);return}const x=setTimeout(()=>{u(v.slice(0,c.length+1))},d3);return()=>clearTimeout(x)},[n,d,a,c,p]),n?i.jsxs("div",{className:"processing-indicator",children:[i.jsx("div",{className:"processing-dot-container",children:i.jsx(br,{})}),i.jsxs("span",{className:"processing-text",children:[c,i.jsx("span",{className:"processing-cursor",children:"|"})]})]}):null}),ty=h.createContext(null);function m3({children:e}){const n=h.useRef(null),a=h.useRef(null),o=h.useCallback(x=>(typeof window<"u"&&window.__STREAMING_DEBUG__&&console.log("%c[CONTEXT] Handler registered","color: #2196F3",{hadPreviousHandler:!!n.current}),n.current=x,()=>{n.current===x&&(typeof window<"u"&&window.__STREAMING_DEBUG__&&console.log("%c[CONTEXT] Handler unregistered","color: #FF5722"),n.current=null)}),[]),c=h.useCallback(x=>{a.current=x},[]),u=h.useCallback(x=>{var b;typeof window<"u"&&window.__STREAMING_DEBUG__&&console.log("%c[CONTEXT] dispatchAugment called","color: #4CAF50",{hasHandler:!!n.current,augment:{blockIndex:x.blockIndex,type:x.type}}),(b=n.current)==null||b.onAugment(x)},[]),d=h.useCallback(x=>{var b;typeof window<"u"&&window.__STREAMING_DEBUG__&&console.log("%c[CONTEXT] dispatchPending called","color: #FF9800",{hasHandler:!!n.current,htmlLength:x.html.length}),(b=n.current)==null||b.onPending(x)},[]),m=h.useCallback(()=>{var x;(x=n.current)==null||x.onStreamEnd(),a.current=null},[]),p=h.useCallback(()=>{var x,b;return((b=(x=n.current)==null?void 0:x.captureHtml)==null?void 0:b.call(x))??null},[]),v={registerStreamingHandler:o,setCurrentMessageId:c,dispatchAugment:u,dispatchPending:d,dispatchStreamEnd:m,captureStreamingHtml:p};return i.jsx(ty.Provider,{value:v,children:e})}function ny(){return h.useContext(ty)}function Zn(e,n,a){if(typeof window<"u"&&window.__STREAMING_DEBUG__){const o={augment:"[AUGMENT]",pending:"[PENDING]",event:"[EVENT]",dom:"[DOM]"}[e],c=a?` ${JSON.stringify(a)}`:"";console.log(`%c${o} ${n}${c}`,p3(e))}}function p3(e){return{augment:"color: #4caf50; font-weight: bold",pending:"color: #ff9800; font-weight: bold",event:"color: #2196f3; font-weight: bold",dom:"color: #9c27b0; font-weight: bold"}[e]||""}function g3(){const e=h.useRef(null),n=h.useRef(null),[a,o]=h.useState(!1),c=h.useRef(new Map),u=h.useRef(-1),d=h.useCallback(b=>{const w=e.current;if(Zn("augment","Received augment",{blockIndex:b.blockIndex,type:b.type,htmlLength:b.html.length,htmlPreview:b.html.substring(0,100)}),!w){Zn("augment","ERROR: containerRef.current is null - refs not attached!");return}o(!0);const{blockIndex:_,html:C}=b;if(c.current.has(_)){const N=c.current.get(_);N&&(Zn("dom","Updating existing block",{blockIndex:_}),N.innerHTML=C);return}const E=document.createElement("div");if(E.className="streaming-block",E.dataset.blockIndex=String(_),E.innerHTML=C,Zn("dom","Created new block element",{blockIndex:_,className:E.className}),_>u.current)w.appendChild(E),u.current=_,Zn("dom","Appended block to end",{blockIndex:_,maxBlockIndex:u.current});else{let N=!1;const z=w.children;for(let O=0;O<z.length;O++){const U=z[O],P=Number.parseInt(U.dataset.blockIndex??"-1",10);if(P>_){w.insertBefore(E,U),N=!0,Zn("dom","Inserted block before",{blockIndex:_,beforeIndex:P});break}}N||(w.appendChild(E),Zn("dom","Appended out-of-order block to end",{blockIndex:_}))}c.current.set(_,E),Zn("dom","Block tracking updated",{totalBlocks:c.current.size})},[]),m=h.useCallback(b=>{const w=n.current;if(Zn("pending","Received pending update",{htmlLength:b.html.length,htmlPreview:b.html.substring(0,80)}),!w){Zn("pending","ERROR: pendingRef.current is null - refs not attached!");return}o(!0),w.innerHTML=b.html,Zn("pending","Updated pending element innerHTML")},[]),p=h.useCallback(()=>{Zn("event","Stream ended");const b=n.current;b&&(b.innerHTML="",Zn("event","Cleared pending element")),o(!1),Zn("event","Set isStreaming to false")},[]),v=h.useCallback(()=>{Zn("event","Reset called");const b=e.current,w=n.current;b&&(b.innerHTML="",Zn("event","Cleared container")),w&&(w.innerHTML="",Zn("event","Cleared pending element"));const _=c.current.size;c.current.clear(),u.current=-1,o(!1),Zn("event","Reset complete",{previousBlockCount:_,maxBlockIndexReset:!0})},[]),x=h.useCallback(()=>{const b=e.current;if(!b)return null;const w=b.innerHTML;return Zn("event","Captured HTML",{length:w.length}),w||null},[]);return{containerRef:e,pendingRef:n,isStreaming:a,onAugment:d,onPending:m,onStreamEnd:p,reset:v,captureHtml:x}}const v3=h.memo(function({text:n,isStreaming:a=!1,augmentHtml:o}){const[c,u]=h.useState(!1),d=g3(),m=ny(),[p,v]=h.useState(!1);h.useEffect(()=>{if(!a||!m){a||(v(!1),d.reset());return}return m.registerStreamingHandler({onAugment:C=>{v(!0),d.onAugment(C)},onPending:d.onPending,onStreamEnd:d.onStreamEnd,captureHtml:d.captureHtml})},[a,m,d]);const x=h.useCallback(async()=>{try{await navigator.clipboard.writeText(n),u(!0),setTimeout(()=>u(!1),2e3)}catch(_){console.error("Failed to copy text:",_)}},[n]),b=a&&p,w=a;return i.jsxs("div",{className:`text-block timeline-item${a?" streaming":""}`,children:[i.jsx("button",{type:"button",className:`text-block-copy ${c?"copied":""}`,onClick:x,title:c?"Copied!":"Copy markdown","aria-label":c?"Copied!":"Copy markdown",children:c?i.jsx(y3,{}):i.jsx(x3,{})}),w&&i.jsxs("div",{style:b?void 0:{display:"none"},children:[i.jsx("div",{ref:d.containerRef,className:"streaming-blocks"}),i.jsx("span",{ref:d.pendingRef,className:"streaming-pending"})]}),!b&&(o?i.jsx("div",{dangerouslySetInnerHTML:{__html:o}}):i.jsx("p",{children:n}))]})});function x3(){return i.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 16 16",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[i.jsx("rect",{x:"5",y:"5",width:"9",height:"9",rx:"1.5"}),i.jsx("path",{d:"M11 5V3.5A1.5 1.5 0 0 0 9.5 2H3.5A1.5 1.5 0 0 0 2 3.5v6A1.5 1.5 0 0 0 3.5 11H5"})]})}function y3(){return i.jsx("svg",{width:"14",height:"14",viewBox:"0 0 16 16",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:i.jsx("path",{d:"M3 8.5L6.5 12L13 4"})})}const b3=h.memo(function({thinking:n,status:a,isExpanded:o,onToggle:c}){const u=a==="streaming",d=["thinking-block","collapsible","timeline-item",u&&!o?"thinking-streaming-collapsed":""].filter(Boolean).join(" ");return i.jsxs("details",{className:d,open:o,onToggle:m=>{m.currentTarget.open!==o&&c()},children:[i.jsxs("summary",{className:"collapsible__summary",children:[i.jsx("span",{children:u?"Thinking...":"Thinking"}),i.jsx("span",{className:"collapsible__icon",children:""})]}),i.jsx("div",{className:"collapsible__content",children:i.jsx("span",{className:"text-content",children:n})})]})}),S3={Task:Z_,Bash:V_,Read:W_,Edit:J_,Write:tC,Glob:sC,Grep:rC,TodoWrite:oC,WebSearch:uC,WebFetch:fC,AskUserQuestion:gC,BashOutput:xC,TaskOutput:bC,KillShell:jC};function qn(e,n){const a=S3[e];if(!a)return{valid:!0,toolName:e};const o=a.safeParse(n);return o.success?{valid:!0,toolName:e}:{valid:!1,errors:o.error,toolName:e}}function j3(e){const n=e.issues,a=[],o=[];for(const c of n){const u=c.path.join(".")||"(root)";c.code==="invalid_type"&&c.message.toLowerCase().includes("required")?a.push(u):o.push({path:u,message:c.message})}return{missing:a,invalid:o}}const w3="https://github.com/kzahel/yepanywhere/issues/new";function N3(e,n,a){const o=`Schema validation error: ${e}`,c=[`## Tool

\`${e}\``];n.length>0&&c.push(`## Missing fields

${n.map(m=>`- \`${m}\``).join(`
`)}`),a.length>0&&c.push(`## Invalid fields

${a.map(({path:m,message:p})=>`- \`${m}\`: ${p}`).join(`
`)}`),c.push(`## Context

<!-- Please add any additional context here, such as what you were doing when this occurred -->`);const u=c.join(`

`),d=new URLSearchParams({title:o,body:u,labels:"bug,schema"});return`${w3}?${d.toString()}`}function vt({toolName:e,errors:n}){const[a,o]=h.useState(!1),{missing:c,invalid:u}=j3(n),d=N3(e,c,u),m=h.useCallback(x=>{x.stopPropagation(),o(!0)},[]),p=h.useCallback(x=>{(x.key==="Enter"||x.key===" ")&&(x.preventDefault(),x.stopPropagation(),o(!0))},[]),v=h.useCallback(()=>{o(!1)},[]);return i.jsxs(i.Fragment,{children:[i.jsx("span",{role:"button",tabIndex:0,className:"schema-warning",onClick:m,onKeyDown:p,title:`Schema warning for ${e} - click for details`,children:i.jsx("span",{className:"schema-warning-icon","aria-hidden":"true",children:"!"})}),a&&i.jsx(bs,{title:i.jsxs("span",{className:"schema-warning-modal-title",children:["Schema validation failed: ",e]}),onClose:v,children:i.jsxs("div",{className:"schema-warning-modal-content",children:[c.length>0&&i.jsxs("div",{className:"schema-warning-section",children:[i.jsx("div",{className:"schema-warning-section-title",children:"Missing fields"}),i.jsx("ul",{className:"schema-warning-list",children:c.map(x=>i.jsx("li",{className:"schema-warning-item",children:i.jsx("code",{children:x})},x))})]}),u.length>0&&i.jsxs("div",{className:"schema-warning-section",children:[i.jsx("div",{className:"schema-warning-section-title",children:"Invalid fields"}),i.jsx("ul",{className:"schema-warning-list",children:u.map(({path:x,message:b})=>i.jsxs("li",{className:"schema-warning-item",children:[i.jsx("code",{children:x}),i.jsx("span",{className:"schema-warning-message",children:b})]},x))})]}),i.jsx("div",{className:"schema-warning-footer",children:i.jsx("a",{href:d,target:"_blank",rel:"noopener noreferrer",className:"schema-warning-report-link",onClick:x=>x.stopPropagation(),children:"Report issue on GitHub"})})]})})]})}function sy({question:e,selectedAnswer:n}){return i.jsxs("div",{className:"question-item",children:[i.jsxs("div",{className:"question-header",children:[i.jsx("span",{className:"badge",children:e.header}),i.jsx("span",{className:"question-text",children:e.question})]}),i.jsx("ul",{className:"question-options",children:e.options.map(a=>{const o=n===a.label;return i.jsxs("li",{className:`question-option ${o?"question-option-selected":""}`,children:[i.jsx("span",{className:"question-option-indicator",children:e.multiSelect?o?"":"":o?"":""}),i.jsxs("div",{className:"question-option-content",children:[i.jsx("span",{className:"question-option-label",children:a.label}),a.description&&i.jsx("span",{className:"question-option-desc",children:a.description})]})]},a.label)})})]})}function E3({input:e}){return i.jsx("div",{className:"question-tool-use",children:e.questions.map((n,a)=>i.jsx(sy,{question:n},`${n.header}-${a}`))})}function _3({result:e,isError:n}){const{enabled:a,reportValidationError:o,isToolIgnored:c}=In(),[u,d]=h.useState(null);h.useEffect(()=>{if(a&&e){const p=qn("AskUserQuestion",e);!p.valid&&p.errors?(d(p.errors),o("AskUserQuestion",p.errors)):d(null)}},[a,e,o]);const m=a&&u&&!c("AskUserQuestion");if(n){const p=e;return i.jsxs("div",{className:"question-error",children:[m&&u&&i.jsx(vt,{toolName:"AskUserQuestion",errors:u}),typeof e=="object"&&(p!=null&&p.content)?String(p.content):"Question failed"]})}return!e||!e.questions?i.jsxs("div",{className:"question-empty",children:[m&&u&&i.jsx(vt,{toolName:"AskUserQuestion",errors:u}),"No questions"]}):i.jsxs("div",{className:"question-result",children:[m&&u&&i.jsx(vt,{toolName:"AskUserQuestion",errors:u}),e.questions.map((p,v)=>{var b;const x=(b=e.answers)==null?void 0:b[p.question];return i.jsx(sy,{question:p,selectedAnswer:x},`${p.header}-${v}`)})]})}const C3={tool:"AskUserQuestion",renderToolUse(e,n){return i.jsx(E3,{input:e})},renderToolResult(e,n,a){return i.jsx(_3,{result:e,isError:n})},getUseSummary(e){const n=e.questions;return`${(n==null?void 0:n.length)||0} question${(n==null?void 0:n.length)===1?"":"s"}`},getResultSummary(e,n){var c;if(n)return"Error";const a=Object.keys((e==null?void 0:e.answers)||{}).length,o=((c=e==null?void 0:e.questions)==null?void 0:c.length)||0;return a===0&&o>0?`${o} question${o===1?"":"s"}`:`${a} answered`}},Iv=20;function T3(e){try{const n=new Date(e),o=new Date().getTime()-n.getTime(),c=Math.floor(o/1e3);return c<60?`${c}s ago`:c<3600?`${Math.floor(c/60)}m ago`:n.toLocaleTimeString()}catch{return e}}function k3({status:e}){const a={running:{icon:"",className:"status-running"},completed:{icon:"",className:"status-completed"},failed:{icon:"",className:"status-failed"}}[e]||{icon:"?",className:""};return i.jsxs("span",{className:`bashoutput-status ${a.className}`,children:[a.icon," ",e]})}function R3({input:e}){return i.jsxs("div",{className:"bashoutput-tool-use",children:[i.jsx("span",{className:"bashoutput-label",children:"Polling background shell"}),i.jsx("code",{className:"bashoutput-id",children:e.bash_id}),e.block!==void 0&&i.jsx("span",{className:"badge",children:e.block?"blocking":"non-blocking"})]})}function A3({result:e,isError:n}){var E,N;const[a,o]=h.useState(!1),{enabled:c,reportValidationError:u,isToolIgnored:d}=In(),[m,p]=h.useState(null);h.useEffect(()=>{if(c&&e){const z=qn("BashOutput",e);!z.valid&&z.errors?(p(z.errors),u("BashOutput",z.errors)):p(null)}},[c,e,u]);const v=c&&m&&!d("BashOutput");if(n){const z=e;return i.jsxs("div",{className:"bashoutput-error",children:[v&&m&&i.jsx(vt,{toolName:"BashOutput",errors:m}),typeof e=="object"&&(z!=null&&z.content)?String(z.content):"Failed to get bash output"]})}if(!e)return i.jsx("div",{className:"bashoutput-empty",children:"No output"});const x=((E=e.stdout)==null?void 0:E.split(`
`))||[],b=((N=e.stderr)==null?void 0:N.split(`
`))||[],w=x.length+b.length,_=w>Iv,C=_&&!a?x.slice(0,Iv):x;return i.jsxs("div",{className:"bashoutput-result",children:[i.jsxs("div",{className:"bashoutput-header",children:[i.jsx(k3,{status:e.status}),e.command&&i.jsx("code",{className:"bashoutput-command",children:e.command}),e.exitCode!==null&&i.jsxs("span",{className:`badge ${e.exitCode===0?"badge-success":"badge-error"}`,children:["exit ",e.exitCode]}),e.timestamp&&i.jsx("span",{className:"bashoutput-timestamp",children:T3(e.timestamp)}),v&&m&&i.jsx(vt,{toolName:"BashOutput",errors:m})]}),(e.stdout||e.stderr)&&i.jsxs(i.Fragment,{children:[e.stdout&&i.jsx("pre",{className:"bash-stdout code-block",children:i.jsx("code",{children:C.join(`
`)})}),e.stderr&&i.jsx("pre",{className:"bash-stderr code-block",children:i.jsx("code",{children:e.stderr})}),_&&i.jsx("button",{type:"button",className:"expand-button",onClick:()=>o(!a),children:a?"Show less":`Show all ${w} lines`})]})]})}const M3={tool:"BashOutput",renderToolUse(e,n){return i.jsx(R3,{input:e})},renderToolResult(e,n,a){return i.jsx(A3,{result:e,isError:n})},getUseSummary(e){return e.bash_id},getResultSummary(e,n){if(n)return"Error";const a=e;return a?a.status==="running"?"Running...":a.exitCode!==null?`exit ${a.exitCode}`:a.status:"Pending"}},Pv=20,O3=4,Hv=400;function $f(e,n){return e?typeof e=="string"?{stdout:n?"":e,stderr:n?e:"",interrupted:!1,isImage:!1}:e:{stdout:"",stderr:"",interrupted:!1,isImage:!1}}function z3({input:e,result:n,isError:a}){const o=n?$f(n,a):void 0,c=(o==null?void 0:o.stdout)||"",u=(o==null?void 0:o.stderr)||"";return i.jsxs("div",{className:"bash-modal-sections",children:[i.jsxs("div",{className:"bash-modal-section",children:[i.jsx("div",{className:"bash-modal-label",children:"Command"}),i.jsx("div",{className:"bash-modal-code",children:i.jsx("pre",{className:"code-block",children:i.jsx("code",{children:e.command})})})]}),c&&i.jsxs("div",{className:"bash-modal-section",children:[i.jsx("div",{className:"bash-modal-label",children:"Output"}),i.jsx("div",{className:"bash-modal-code",children:i.jsx("pre",{className:"code-block",children:i.jsx("code",{children:c})})})]}),u&&i.jsxs("div",{className:"bash-modal-section",children:[i.jsx("div",{className:"bash-modal-label bash-modal-label-error",children:a?"Error":"Stderr"}),i.jsx("div",{className:"bash-modal-code bash-modal-code-error",children:i.jsx("pre",{className:"code-block code-block-error",children:i.jsx("code",{children:u})})})]}),!c&&!u&&o&&!o.interrupted&&i.jsxs("div",{className:"bash-modal-section",children:[i.jsx("div",{className:"bash-modal-label",children:"Output"}),i.jsx("div",{className:"bash-modal-empty",children:"No output"})]}),(o==null?void 0:o.interrupted)&&i.jsx("div",{className:"bash-modal-section",children:i.jsx("span",{className:"badge badge-warning",children:"Interrupted"})}),(o==null?void 0:o.backgroundTaskId)&&i.jsx("div",{className:"bash-modal-section",children:i.jsxs("span",{className:"badge badge-info",children:["Background: ",o.backgroundTaskId]})})]})}function U3({input:e}){return i.jsx("div",{className:"bash-tool-use",children:i.jsx("pre",{className:"code-block",children:i.jsx("code",{children:e.command})})})}function L3({result:e,isError:n}){const[a,o]=h.useState(!1),{enabled:c,reportValidationError:u,isToolIgnored:d}=In(),[m,p]=h.useState(null),v=$f(e,n);h.useEffect(()=>{if(c&&e&&typeof e=="object"){const N=qn("Bash",e);!N.valid&&N.errors?(p(N.errors),u("Bash",N.errors)):p(null)}},[c,e,u]);const x=c&&m&&!d("Bash"),b=v.stdout||"",w=v.stderr||"",_=b.split(`
`),C=_.length>Pv,E=C&&!a?`${_.slice(0,Pv).join(`
`)}
...`:b;return i.jsxs("div",{className:`bash-result ${n?"bash-result-error":""}`,children:[x&&m&&i.jsx(vt,{toolName:"Bash",errors:m}),(v==null?void 0:v.interrupted)&&i.jsx("span",{className:"badge badge-warning",children:"Interrupted"}),(v==null?void 0:v.backgroundTaskId)&&i.jsxs("span",{className:"badge badge-info",children:["Background: ",v.backgroundTaskId]}),b&&i.jsxs("div",{className:"bash-stdout",children:[i.jsx("pre",{className:"code-block",children:i.jsx("code",{children:E})}),C&&i.jsx("button",{type:"button",className:"expand-button",onClick:()=>o(!a),children:a?"Show less":`Show all ${_.length} lines`})]}),w&&i.jsx("div",{className:"bash-stderr",children:i.jsx("pre",{className:"code-block code-block-error",children:i.jsx("code",{children:w})})}),!b&&!w&&!(v!=null&&v.interrupted)&&i.jsx("div",{className:"bash-empty",children:"No output"})]})}function D3(e){const n=e.split(`
`);let a="",o=0,c=0;for(const u of n){if(c>=O3||o>=Hv)return{text:a.trimEnd(),truncated:!0};const d=Hv-o;if(u.length>d)return a+=`${u.slice(0,d)}...`,{text:a.trimEnd(),truncated:!0};a+=`${u}
`,o+=u.length+1,c++}return{text:a.trimEnd(),truncated:!1}}function B3({input:e,result:n,isError:a}){const[o,c]=h.useState(!1),{enabled:u,reportValidationError:d,isToolIgnored:m}=In(),[p,v]=h.useState(null),x=n?$f(n,a):void 0;h.useEffect(()=>{if(u&&n&&typeof n=="object"){const O=qn("Bash",n);!O.valid&&O.errors?(v(O.errors),d("Bash",O.errors)):v(null)}},[u,n,d]);const b=u&&p&&!m("Bash"),w=(x==null?void 0:x.stdout)||(x==null?void 0:x.stderr)||"",{text:_,truncated:C}=D3(w),E=_.length>0,N=h.useCallback(()=>{c(!0)},[]),z=h.useCallback(()=>{c(!1)},[]);return i.jsxs(i.Fragment,{children:[i.jsxs("button",{type:"button",className:"bash-collapsed-preview",onClick:N,children:[i.jsxs("div",{className:"bash-preview-row",children:[i.jsx("span",{className:"bash-preview-label",children:"IN"}),i.jsx("code",{className:"bash-preview-command",children:e.command}),b&&p&&i.jsx(vt,{toolName:"Bash",errors:p})]}),E&&i.jsxs("div",{className:"bash-preview-row bash-preview-output-row",children:[i.jsx("span",{className:"bash-preview-label",children:"OUT"}),i.jsxs("div",{className:`bash-preview-output ${C?"bash-preview-truncated":""} ${a||x!=null&&x.stderr?"bash-preview-error":""}`,children:[i.jsx("pre",{children:i.jsx("code",{children:_})}),C&&i.jsx("div",{className:"bash-preview-fade"})]})]}),!E&&x&&!x.interrupted&&i.jsxs("div",{className:"bash-preview-row",children:[i.jsx("span",{className:"bash-preview-label",children:"OUT"}),i.jsx("span",{className:"bash-preview-empty",children:"No output"})]}),(x==null?void 0:x.interrupted)&&i.jsxs("div",{className:"bash-preview-row",children:[i.jsx("span",{className:"bash-preview-label",children:"OUT"}),i.jsx("span",{className:"bash-preview-interrupted",children:"Interrupted"})]})]}),o&&i.jsx(bs,{title:e.description||"Bash Command",onClose:z,children:i.jsx(z3,{input:e,result:x,isError:a})})]})}const $3={tool:"Bash",renderToolUse(e,n){return i.jsx(U3,{input:e})},renderToolResult(e,n,a){return i.jsx(L3,{result:e,isError:n})},getUseSummary(e){const n=e;return n.description?n.description:n.command.length>60?`${n.command.slice(0,57)}...`:n.command},getResultSummary(e,n){const a=e;return a!=null&&a.interrupted?"Interrupted":n||a!=null&&a.stderr?"Error":""},renderCollapsedPreview(e,n,a,o){return i.jsx(B3,{input:e,result:n,isError:a})}},ay=h.createContext(null);function I3({projectId:e,projectPath:n,sessionId:a,children:o}){return i.jsx(ay.Provider,{value:{projectId:e,projectPath:n,sessionId:a},children:o})}function If(){const e=h.useContext(ay);if(!e)throw new Error("useSessionMetadata must be used within SessionMetadataProvider");return e}function P3(e){const{projectId:n}=If(),[a,o]=h.useState(!1),[c,u]=h.useState(null),[d,m]=h.useState(null),p=h.useCallback(async()=>{o(!0),u(null);try{const v=await Ke.expandDiffContext(n,e.filePath,e.oldString,e.newString,e.originalFile);m({structuredPatch:v.structuredPatch,diffHtml:v.diffHtml})}catch(v){u(v instanceof Error?v.message:"Failed to expand context")}finally{o(!1)}},[n,e.filePath,e.oldString,e.newString,e.originalFile]);return{loading:a,error:c,result:d,fetchExpandedDiff:p}}const H3=[{pattern:/^User denied permission\.?$/i,classification:"user_rejection",label:"Declined"},{pattern:/^User did not (approve|allow|permit)/i,classification:"user_rejection",label:"Declined"},{pattern:/^Permission denied by user/i,classification:"user_rejection",label:"Declined"},{pattern:/^Rejected by user/i,classification:"user_rejection",label:"Declined"},{pattern:/^The user doesn't want to proceed/i,classification:"user_rejection",label:"Declined"},{pattern:/^The user doesn't want to take this action/i,classification:"user_rejection",label:"Declined"},{pattern:/^\[Request interrupted by user/i,classification:"user_rejection",label:"Interrupted"},{pattern:/^User cancelled/i,classification:"user_rejection",label:"Cancelled"},{pattern:/^Plan mode - tools not executed/i,classification:"user_rejection",label:"Plan mode"},{pattern:/^Exit code [1-9]\d*/,classification:"command_failure",label:"Exit code"},{pattern:/ELIFECYCLE.*Command failed/,classification:"command_failure",label:"Command failed"},{pattern:/command not found/i,classification:"command_failure",label:"Not found"},{pattern:/Shell \d+ is not running/i,classification:"command_failure",label:"Shell stopped"},{pattern:/<tool_use_error>.*No shell found/i,classification:"command_failure",label:"Shell not found"},{pattern:/<tool_use_error>.*No task found/i,classification:"command_failure",label:"Task not found"},{pattern:/<tool_use_error>.*File has been modified since read/i,classification:"file_error",label:"File changed"},{pattern:/^File has been unexpectedly modified/i,classification:"file_error",label:"File changed"},{pattern:/<tool_use_error>.*File has not been read yet/i,classification:"file_error",label:"Not read yet"},{pattern:/<tool_use_error>.*File does not exist/i,classification:"file_error",label:"Not found"},{pattern:/<tool_use_error>.*No such file or directory/i,classification:"file_error",label:"Not found"},{pattern:/<tool_use_error>.*Permission denied/i,classification:"file_error",label:"Permission denied"},{pattern:/ENOENT/,classification:"file_error",label:"Not found"},{pattern:/EACCES/,classification:"file_error",label:"Permission denied"},{pattern:/No plan file found/i,classification:"file_error",label:"Plan not found"},{pattern:/<tool_use_error>.*Path does not exist/i,classification:"file_error",label:"Path not found"},{pattern:/<tool_use_error>.*old_string.*not found/i,classification:"validation_error",label:"Not found"},{pattern:/<tool_use_error>.*not unique/i,classification:"validation_error",label:"Not unique"},{pattern:/<tool_use_error>.*Found \d+ matches.*replace_all is false/i,classification:"validation_error",label:"Multiple matches"},{pattern:/<tool_use_error>.*InputValidationError/i,classification:"validation_error",label:"Invalid input"},{pattern:/Invalid (input|parameter|argument)/i,classification:"validation_error",label:"Invalid input"},{pattern:/<tool_use_error>.*No changes to make.*old_string and new_string are exactly the same/i,classification:"validation_error",label:"No changes"},{pattern:/<tool_use_error>.*String to replace not found/i,classification:"validation_error",label:"Not found"},{pattern:/File content.*exceeds maximum/i,classification:"validation_error",label:"Too large"},{pattern:/<tool_use_error>.*exceeds maximum allowed/i,classification:"validation_error",label:"Too large"},{pattern:/Agent type .* not found/i,classification:"validation_error",label:"Unknown agent"},{pattern:/^Request failed with status code/i,classification:"network_error",label:"Request failed"},{pattern:/ECONNREFUSED/,classification:"network_error",label:"Connection refused"},{pattern:/ENOTFOUND/,classification:"network_error",label:"Not found"},{pattern:/fetch failed/i,classification:"network_error",label:"Fetch failed"},{pattern:/Tool permission request failed/i,classification:"network_error",label:"Connection lost"},{pattern:/timed? ?out/i,classification:"timeout",label:"Timeout"},{pattern:/ETIMEDOUT/,classification:"timeout",label:"Timeout"}];function Gl(e){let n=e;return n=n.replace(/^Error:\s*/i,""),n=n.replace(/<\/?tool_use_error>/gi,""),n=n.trim(),n}function Z3(e){const n=e.match(/provided the following reason[^:]*:\s*(.+)/is);if(n!=null&&n[1])return n[1].trim()}function q3(e){const n=Gl(e);return n.length>200||/exit code|ENOENT|EACCES|<tool_use_error>|command failed|permission denied|not found|does not exist/i.test(n)?!1:/^[a-zA-Z]/.test(n)&&n.includes(" ")&&!/^[A-Z_]+:/.test(n)&&!/\n.*\n/.test(n)}function lc(e){for(const{pattern:n,classification:a,label:o}of H3)if(n.test(e)){const c=Gl(e);if(a==="user_rejection"){const u=Z3(e);if(u)return{classification:"user_rejection_with_reason",cleanedMessage:c,userReason:u,label:o}}return{classification:a,cleanedMessage:c,label:o}}if(q3(e)){const n=Gl(e);return{classification:"user_rejection_with_reason",cleanedMessage:n,userReason:n,label:"Declined"}}return{classification:"unknown",cleanedMessage:Gl(e),label:"Error"}}function ry(e){switch(e){case"user_rejection":case"user_rejection_with_reason":return"muted";default:return"warning"}}function iy(e){return e==="user_rejection"||e==="user_rejection_with_reason"}const yo=12;function oi(e){return e.split("/").pop()||e}function V3(e){return e.includes(".claude/plans/")}function oy(e){if(!e||e.length===0)return null;const n=e.flatMap(o=>o.lines).filter(o=>o.startsWith("+")).length,a=e.flatMap(o=>o.lines).filter(o=>o.startsWith("-")).length;return n>0&&a>0?`Modified ${n+a} lines`:n>0?`Added ${n} line${n!==1?"s":""}`:a>0?`Removed ${a} line${a!==1?"s":""}`:null}const Pf=h.memo(function({lines:n}){return i.jsx("div",{className:"diff-hunk",children:i.jsx("pre",{className:"diff-content",children:n.map((a,o)=>{const c=a[0],u=c==="-"?"diff-removed":c==="+"?"diff-added":"diff-context",d=`${o}-${a.slice(0,50)}`;return i.jsx("div",{className:u,children:a},d)})})})}),Hf=h.memo(function({diffHtml:n,truncateLines:a}){const o=h.useMemo(()=>{if(!a)return n;const c=/<span class="line[^"]*">/g,u=[...n.matchAll(c)];if(u.length<=a)return n;const d=u[a-1];if(!d)return n;const m=(d.index??0)+d[0].length,p=n.indexOf("</span>",m);return p===-1?n:`${n.slice(0,p+7)}</code></pre>`},[n,a]);return i.jsx("div",{className:"highlighted-diff",dangerouslySetInnerHTML:{__html:o}})}),F3=h.memo(function({hunk:n}){return i.jsx("div",{className:"diff-hunk",children:i.jsx("pre",{className:"diff-content",children:n.lines.map((a,o)=>{const c=a[0],u=c==="-"?"diff-removed":c==="+"?"diff-added":"diff-context";return i.jsx("div",{className:u,children:a},`${n.oldStart}-${o}`)})})})});function G3({input:e}){if(!e._structuredPatch||e._structuredPatch.length===0)return i.jsx("div",{className:"edit-result",children:i.jsx("div",{className:"edit-loading",children:"Computing diff..."})});const n=e._structuredPatch.flatMap(c=>c.lines),a=oy(e._structuredPatch),o=n.length>yo;return i.jsxs("div",{className:"edit-result",children:[a&&i.jsx("div",{className:"edit-change-summary",children:a}),i.jsxs("div",{className:`diff-view-container ${o?"truncated":""}`,children:[i.jsx("div",{className:"diff-view",children:e._diffHtml?i.jsx(Hf,{diffHtml:e._diffHtml,truncateLines:o?yo:void 0}):i.jsx(Pf,{lines:n})}),o&&i.jsx("div",{className:"diff-fade-overlay"})]})]})}function Y3(e,n){if(n&&e.startsWith(n)){const a=e.slice(n.length);return a.startsWith("/")?a.slice(1):a}return e}function Zf({diffHtml:e,structuredPatch:n,filePath:a,oldString:o,newString:c,originalFile:u}){const{projectPath:d}=If(),[m,p]=h.useState(!1),v=h.useRef(null),x=!!u,{loading:b,error:w,result:_,fetchExpandedDiff:C}=P3({filePath:a,oldString:o,newString:c,originalFile:u??""}),E=h.useCallback(async()=>{x&&(!m&&!_&&await C(),p(!m))},[x,m,_,C]);h.useEffect(()=>{m&&_&&v.current&&requestAnimationFrame(()=>{var P;const U=(P=v.current)==null?void 0:P.querySelector(".line-deleted, .line-inserted");U&&U.scrollIntoView({block:"center",behavior:"instant"})})},[m,_]);const N=m&&(_!=null&&_.diffHtml)?_.diffHtml:e,z=m&&(_!=null&&_.structuredPatch)?_.structuredPatch:n,O=Y3(a,d);return i.jsxs("div",{className:"diff-modal-content",ref:v,children:[i.jsxs("div",{className:"diff-context-controls",children:[i.jsx("span",{className:"diff-context-path",children:O}),x&&i.jsx("button",{type:"button",className:"diff-context-toggle",onClick:E,disabled:b,children:b?"Loading...":m?"Show diff only":"Show full context"}),w&&i.jsx("span",{className:"diff-context-error",children:w})]}),N?i.jsx(Hf,{diffHtml:N}):i.jsx(Pf,{lines:z.flatMap(U=>U.lines)})]})}function K3({input:e,result:n,isError:a}){const[o,c]=h.useState(!1),{enabled:u,reportValidationError:d,isToolIgnored:m}=In(),[p,v]=h.useState(null);h.useEffect(()=>{if(u&&n){const D=qn("Edit",n);!D.valid&&D.errors?(v(D.errors),d("Edit",D.errors)):v(null)}},[u,n,d]);const x=u&&p&&!m("Edit"),b=h.useCallback(D=>{D.stopPropagation(),a||c(!0)},[a]),w=h.useCallback(()=>{c(!1)},[]),_=(n==null?void 0:n.filePath)??e.file_path,C=oi(_),E=(n==null?void 0:n.oldString)??e.old_string,N=(n==null?void 0:n.newString)??e.new_string,z=n==null?void 0:n.originalFile,O=(n==null?void 0:n.structuredPatch)??e._structuredPatch??[],U=e._diffHtml;if(a){let D=null;if(typeof n=="string")D=n;else if(typeof n=="object"&&n!==null){const _e=n;_e.content&&(D=String(_e.content))}const I=D?lc(D):{classification:"unknown",label:"Error",cleanedMessage:""},Z=ry(I.classification),re=iy(I.classification);return i.jsxs("div",{className:`edit-collapsed-preview edit-collapsed-${Z}`,children:[x&&p&&i.jsx(vt,{toolName:"Edit",errors:p}),i.jsx("span",{className:`badge badge-${Z}`,children:re?I.label:`Edit ${I.label.toLowerCase()}`}),I.userReason?i.jsx("span",{className:"edit-error-message",children:I.userReason}):I.cleanedMessage&&!re?i.jsx("span",{className:"edit-error-message",children:I.cleanedMessage}):null]})}if(O.length===0)return i.jsx("div",{className:"edit-collapsed-preview",children:i.jsx("div",{className:"edit-loading",children:"Computing diff..."})});const P=O.flatMap(D=>D.lines),A=P.length>yo;return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"edit-collapsed-preview",children:[(n==null?void 0:n.userModified)&&i.jsx("span",{className:"badge badge-info",children:"User modified"}),x&&p&&i.jsx(vt,{toolName:"Edit",errors:p}),i.jsxs("div",{className:`diff-view-container ${A?"truncated":""}`,children:[i.jsx("div",{className:"diff-view",children:U?i.jsx(Hf,{diffHtml:U,truncateLines:A?yo:void 0}):i.jsx(Pf,{lines:P})}),A&&i.jsx("div",{className:"diff-fade-overlay"})]}),A&&i.jsx("button",{type:"button",className:"diff-expand-button",onClick:b,children:"Show full diff"})]}),o&&i.jsx(bs,{title:i.jsx("span",{className:"file-path",children:C}),onClose:w,children:i.jsx(Zf,{diffHtml:U,structuredPatch:O,filePath:_,oldString:E,newString:N,originalFile:z})})]})}function W3({input:e,result:n,isError:a}){const[o,c]=h.useState(!1),{enabled:u,reportValidationError:d,isToolIgnored:m}=In(),[p,v]=h.useState(null);h.useEffect(()=>{if(u&&n){const U=qn("Edit",n);!U.valid&&U.errors?(v(U.errors),d("Edit",U.errors)):v(null)}},[u,n,d]);const x=u&&p&&!m("Edit"),b=(n==null?void 0:n.filePath)??e.file_path,w=oi(b),_=(n==null?void 0:n.oldString)??e.old_string,C=(n==null?void 0:n.newString)??e.new_string,E=n==null?void 0:n.originalFile,N=(n==null?void 0:n.structuredPatch)??e._structuredPatch??[],z=e._diffHtml,O=oy(N);return a?i.jsxs("span",{children:[w,x&&p&&i.jsx(vt,{toolName:"Edit",errors:p})]}):N.length===0?i.jsx("span",{children:w}):i.jsxs(i.Fragment,{children:[i.jsxs("button",{type:"button",className:"file-link-inline",onClick:U=>{U.stopPropagation(),c(!0)},children:[w,O&&i.jsx("span",{className:"file-line-count-inline",children:O}),x&&p&&i.jsx(vt,{toolName:"Edit",errors:p})]}),o&&i.jsx(bs,{title:i.jsx("span",{className:"file-path",children:w}),onClose:()=>c(!1),children:i.jsx(Zf,{diffHtml:z,structuredPatch:N,filePath:b,oldString:_,newString:C,originalFile:E})})]})}function X3({result:e,input:n,isError:a}){const[o,c]=h.useState(!1),{enabled:u,reportValidationError:d,isToolIgnored:m}=In(),[p,v]=h.useState(null);h.useEffect(()=>{if(u&&e){const C=qn("Edit",e);!C.valid&&C.errors?(v(C.errors),d("Edit",C.errors)):v(null)}},[u,e,d]);const x=u&&p&&!m("Edit"),w=h.useMemo(()=>e!=null&&e.structuredPatch?e.structuredPatch.reduce((C,E)=>C+E.lines.length+1,0):0,[e==null?void 0:e.structuredPatch])>yo,_=h.useMemo(()=>{if(!(e!=null&&e.structuredPatch))return null;const C=e.structuredPatch.flatMap(N=>N.lines).filter(N=>N.startsWith("+")).length,E=e.structuredPatch.flatMap(N=>N.lines).filter(N=>N.startsWith("-")).length;return C>0&&E>0?`Modified ${C+E} lines`:C>0?`Added ${C} line${C!==1?"s":""}`:E>0?`Removed ${E} line${E!==1?"s":""}`:null},[e==null?void 0:e.structuredPatch]);if(a){let C=null;if(typeof e=="string")C=e;else if(typeof e=="object"&&e!==null){const O=e;O.content&&(C=String(O.content))}const E=C?lc(C):{classification:"unknown",label:"Error",cleanedMessage:""},N=ry(E.classification),z=iy(E.classification);return i.jsxs("div",{className:`edit-result edit-result-${N}`,children:[x&&p&&i.jsx(vt,{toolName:"Edit",errors:p}),i.jsx("span",{className:`badge badge-${N}`,children:z?E.label:`Edit ${E.label.toLowerCase()}`}),E.userReason?i.jsx("div",{className:"edit-error-message",children:E.userReason}):E.cleanedMessage&&!z?i.jsx("div",{className:"edit-error-message",children:E.cleanedMessage}):null]})}if(!(e!=null&&e.structuredPatch)||e.structuredPatch.length===0){const C=(e==null?void 0:e.filePath)||(n==null?void 0:n.file_path),E=(e==null?void 0:e.oldString)||(n==null?void 0:n.old_string)||"",N=(e==null?void 0:e.newString)||(n==null?void 0:n.new_string)||"",z=C?V3(C):!1;return i.jsxs("div",{className:"edit-result",children:[i.jsxs("div",{className:"edit-header",children:[i.jsx("span",{className:"file-path",children:C?oi(C):"File"}),z&&i.jsx("span",{className:"badge badge-muted",children:"Plan"}),(e==null?void 0:e.userModified)&&i.jsx("span",{className:"badge badge-info",children:"User modified"}),x&&p&&i.jsx(vt,{toolName:"Edit",errors:p})]}),i.jsxs("div",{className:"edit-simple",children:[i.jsxs("div",{className:"edit-old",children:[i.jsx("div",{className:"edit-label",children:"Removed:"}),i.jsx("pre",{className:"code-block",children:i.jsx("code",{children:E||"(empty)"})})]}),i.jsxs("div",{className:"edit-new",children:[i.jsx("div",{className:"edit-label",children:"Added:"}),i.jsx("pre",{className:"code-block",children:i.jsx("code",{children:N||"(empty)"})})]})]})]})}return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"edit-result",children:[x&&p&&i.jsx(vt,{toolName:"Edit",errors:p}),_&&i.jsx("div",{className:"edit-change-summary",children:_}),e.userModified&&i.jsx("span",{className:"badge badge-info",children:"User modified"}),i.jsxs("div",{className:`diff-view-container ${w?"truncated":""}`,children:[i.jsx("div",{className:"diff-view",children:e.structuredPatch.map((C,E)=>i.jsx(F3,{hunk:C},`hunk-${C.oldStart}-${E}`))}),w&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"diff-fade-overlay"}),i.jsx("button",{type:"button",className:"diff-expand-button",onClick:C=>{C.stopPropagation(),c(!0)},children:"Click to expand"})]})]})]}),o&&i.jsx(bs,{title:i.jsx("span",{className:"file-path",children:oi(e.filePath)}),onClose:()=>c(!1),children:i.jsx(Zf,{structuredPatch:e.structuredPatch,filePath:e.filePath,oldString:e.oldString??(n==null?void 0:n.old_string)??"",newString:e.newString??(n==null?void 0:n.new_string)??"",originalFile:e.originalFile})})]})}const Q3={tool:"Edit",renderToolUse(e){return i.jsx(G3,{input:e})},renderToolResult(e,n,a,o){return i.jsx(X3,{result:e,input:o,isError:n})},getUseSummary(e){return oi(e.file_path)},getResultSummary(e,n){if(n){let o=null;if(typeof e=="string")o=e;else if(typeof e=="object"&&e!==null){const c=e;c.content&&(o=String(c.content))}return o?lc(o).label:"Error"}const a=e;return a!=null&&a.filePath?oi(a.filePath):"file"},renderCollapsedPreview(e,n,a){return i.jsx(K3,{input:e,result:n,isError:a})},renderInteractiveSummary(e,n,a,o){return i.jsx(W3,{input:e,result:n,isError:a})}};function J3({plan:e,renderedHtml:n}){return n?i.jsx("div",{dangerouslySetInnerHTML:{__html:n}}):i.jsx("pre",{style:{whiteSpace:"pre-wrap",fontFamily:"inherit"},children:e})}const e4={tool:"ExitPlanMode",renderToolUse(){return null},renderToolResult(){return null},renderInline(e,n,a,o){const c=e,u=n,d=(c==null?void 0:c.plan)||(u==null?void 0:u.plan),m=(c==null?void 0:c._renderedHtml)||(u==null?void 0:u._renderedHtml);if(a){const p=n;return i.jsx("div",{className:"exitplan-error",children:typeof n=="object"&&(p!=null&&p.content)?String(p.content):"Exit plan mode failed"})}return!d&&!m?o==="pending"?i.jsx("div",{className:"exitplan-pending",children:"Planning..."}):null:i.jsxs("details",{className:"exitplan-collapsible collapsible",open:!0,children:[i.jsxs("summary",{className:"collapsible__summary",children:[i.jsx("span",{children:o==="pending"?"Planning...":"Plan"}),i.jsx("span",{className:"collapsible__icon",children:""})]}),i.jsx("div",{className:"collapsible__content",children:i.jsx("div",{className:`exitplan-inline ${o==="pending"?"pending":""}`,children:i.jsx(J3,{plan:d,renderedHtml:m})})})]})},getUseSummary(e){return"Exit plan mode"},getResultSummary(e,n){return n?"Error":"Plan"}},Dd=20;function t4(e){return e.split("/").pop()||e}function n4({input:e}){return i.jsxs("div",{className:"glob-tool-use",children:[i.jsx("span",{className:"glob-pattern",children:e.pattern}),e.path&&i.jsxs("span",{className:"glob-path",children:["in ",e.path]})]})}function s4({result:e,isError:n}){const[a,o]=h.useState(!1),{enabled:c,reportValidationError:u,isToolIgnored:d}=In(),[m,p]=h.useState(null);h.useEffect(()=>{if(c&&e){const E=qn("Glob",e);!E.valid&&E.errors?(p(E.errors),u("Glob",E.errors)):p(null)}},[c,e,u]);const v=c&&m&&!d("Glob");if(n){const E=e;return i.jsxs("div",{className:"glob-error",children:[v&&m&&i.jsx(vt,{toolName:"Glob",errors:m}),typeof e=="object"&&(E!=null&&E.content)?String(E.content):"Glob search failed"]})}if(!(e!=null&&e.filenames)||e.filenames.length===0)return i.jsxs("div",{className:"glob-empty",children:[v&&m&&i.jsx(vt,{toolName:"Glob",errors:m}),"No files found"]});const{filenames:x,numFiles:b,truncated:w}=e,_=x.length>Dd,C=_&&!a?x.slice(0,Dd):x;return i.jsxs("div",{className:"glob-result",children:[i.jsxs("div",{className:"glob-header",children:[i.jsxs("span",{className:"glob-count",children:[b," files"]}),w&&i.jsx("span",{className:"badge badge-warning",children:"truncated"}),v&&m&&i.jsx(vt,{toolName:"Glob",errors:m})]}),i.jsxs("div",{className:"file-list",children:[C.map(E=>i.jsxs("div",{className:"file-list-item",children:[i.jsx("span",{className:"file-path",children:t4(E)}),i.jsx("span",{className:"file-dir",children:E})]},E)),_&&!a&&i.jsxs("div",{className:"file-list-more",children:["... and ",x.length-Dd," more"]})]}),_&&i.jsx("button",{type:"button",className:"expand-button",onClick:()=>o(!a),children:a?"Show less":`Show all ${x.length} files`})]})}const a4={tool:"Glob",renderToolUse(e,n){return i.jsx(n4,{input:e})},renderToolResult(e,n,a){return i.jsx(s4,{result:e,isError:n})},getUseSummary(e){return`pattern: "${e.pattern}"`},getResultSummary(e,n){if(n)return"Error";const a=e;return(a==null?void 0:a.numFiles)===void 0?"Searching...":a.numFiles===0?"No files found":`Found ${a.numFiles} files`}},Bd=20,Zv=30;function r4(e){return e.split("/").pop()||e}function i4({input:e}){return i.jsxs("div",{className:"grep-tool-use",children:[i.jsx("span",{className:"grep-pattern",children:e.pattern}),e.glob&&i.jsxs("span",{className:"grep-glob",children:["(",e.glob,")"]}),e.path&&i.jsxs("span",{className:"grep-path",children:["in ",e.path]})]})}function o4({filenames:e,isExpanded:n,setIsExpanded:a}){const o=e.length>Bd,c=o&&!n?e.slice(0,Bd):e;return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"file-list",children:[c.map(u=>i.jsxs("div",{className:"file-list-item",children:[i.jsx("span",{className:"file-path",children:r4(u)}),i.jsx("span",{className:"file-dir",children:u})]},u)),o&&!n&&i.jsxs("div",{className:"file-list-more",children:["... and ",e.length-Bd," more"]})]}),o&&i.jsx("button",{type:"button",className:"expand-button",onClick:()=>a(!n),children:n?"Show less":`Show all ${e.length} files`})]})}function l4({content:e,isExpanded:n,setIsExpanded:a}){const o=e.split(`
`),c=o.length>Zv,u=c&&!n?o.slice(0,Zv):o;return i.jsxs(i.Fragment,{children:[i.jsx("pre",{className:"grep-content code-block",children:i.jsx("code",{children:u.join(`
`)})}),c&&i.jsx("button",{type:"button",className:"expand-button",onClick:()=>a(!n),children:n?"Show less":`Show all ${o.length} lines`})]})}function c4({result:e,isError:n}){const[a,o]=h.useState(!1),{enabled:c,reportValidationError:u,isToolIgnored:d}=In(),[m,p]=h.useState(null);h.useEffect(()=>{if(c&&e){const E=qn("Grep",e);!E.valid&&E.errors?(p(E.errors),u("Grep",E.errors)):p(null)}},[c,e,u]);const v=c&&m&&!d("Grep");if(n){const E=e;return i.jsxs("div",{className:"grep-error",children:[v&&m&&i.jsx(vt,{toolName:"Grep",errors:m}),typeof e=="object"&&(E!=null&&E.content)?String(E.content):"Search failed"]})}if(!e)return i.jsx("div",{className:"grep-empty",children:"No results"});const{mode:x,filenames:b,numFiles:w,content:_,appliedLimit:C}=e;if(x==="count")return i.jsxs("div",{className:"grep-result",children:[v&&m&&i.jsx(vt,{toolName:"Grep",errors:m}),i.jsxs("div",{className:"grep-count-summary",children:[w," ",w===1?"file":"files"," matched"]})]});if(x==="content"&&_){const N=_.split(`
`).filter(z=>/(^|:)\d+:/.test(z)).length;return i.jsxs("div",{className:"grep-result",children:[i.jsxs("div",{className:"grep-header",children:[i.jsxs("span",{className:"grep-count",children:[N," ",N===1?"match":"matches"]}),C&&i.jsxs("span",{className:"badge badge-info",children:["limit: ",C]}),v&&m&&i.jsx(vt,{toolName:"Grep",errors:m})]}),i.jsx(l4,{content:_,isExpanded:a,setIsExpanded:o})]})}return!b||b.length===0?i.jsxs("div",{className:"grep-empty",children:[v&&m&&i.jsx(vt,{toolName:"Grep",errors:m}),"No matches found"]}):i.jsxs("div",{className:"grep-result",children:[i.jsxs("div",{className:"grep-header",children:[i.jsxs("span",{className:"grep-count",children:[w," files"]}),v&&m&&i.jsx(vt,{toolName:"Grep",errors:m})]}),i.jsx(o4,{filenames:b,isExpanded:a,setIsExpanded:o})]})}const u4={tool:"Grep",renderToolUse(e,n){return i.jsx(i4,{input:e})},renderToolResult(e,n,a){return i.jsx(c4,{result:e,isError:n})},getUseSummary(e){return e.pattern},getResultSummary(e,n){if(n)return"Error";const a=e;if(!a)return"Results";if(a.mode==="content"&&a.content){const o=a.content.split(`
`).filter(c=>/(^|:)\d+:/.test(c)).length;return`${o} ${o===1?"match":"matches"}`}return a.numFiles!==void 0?`${a.numFiles} files`:"Results"}};function d4({input:e}){return i.jsxs("div",{className:"killshell-tool-use",children:[i.jsx("span",{className:"killshell-label",children:"Killing shell"}),i.jsx("code",{className:"killshell-id",children:e.shell_id})]})}function f4({result:e,isError:n}){const{enabled:a,reportValidationError:o,isToolIgnored:c}=In(),[u,d]=h.useState(null);h.useEffect(()=>{if(a&&e){const p=qn("KillShell",e);!p.valid&&p.errors?(d(p.errors),o("KillShell",p.errors)):d(null)}},[a,e,o]);const m=a&&u&&!c("KillShell");if(n){const p=e;return i.jsxs("div",{className:"killshell-error",children:[m&&u&&i.jsx(vt,{toolName:"KillShell",errors:u}),typeof e=="object"&&(p!=null&&p.content)?String(p.content):"Failed to kill shell"]})}return e?i.jsxs("div",{className:"killshell-result",children:[m&&u&&i.jsx(vt,{toolName:"KillShell",errors:u}),i.jsx("span",{className:"killshell-message",children:e.message}),e.shell_id&&i.jsx("code",{className:"killshell-id",children:e.shell_id})]}):i.jsx("div",{className:"killshell-empty",children:"No result"})}const h4={tool:"KillShell",renderToolUse(e,n){return i.jsx(d4,{input:e})},renderToolResult(e,n,a){return i.jsx(f4,{result:e,isError:n})},getUseSummary(e){return e.shell_id},getResultSummary(e,n){if(n)return"Error";const a=e;return(a==null?void 0:a.message)||"Killed"}};function xr(e){return e.split("/").pop()||e}function m4({input:e}){const n=xr(e.file_path);return i.jsxs("div",{className:"read-tool-use",children:[i.jsx("span",{className:"file-path",children:n}),(e.offset!==void 0||e.limit!==void 0)&&i.jsxs("span",{className:"read-range",children:[e.offset!==void 0&&` from line ${e.offset}`,e.limit!==void 0&&` (${e.limit} lines)`]})]})}function ly({file:e,highlightedHtml:n,highlightedTruncated:a,renderedMarkdownHtml:o}){const[c,u]=h.useState(!1),d=e.content.split(`
`),p=!!o&&i.jsxs("div",{className:"markdown-view-toggle",children:[i.jsx("button",{type:"button",className:`toggle-btn ${c?"":"active"}`,onClick:()=>u(!1),children:"Source"}),i.jsx("button",{type:"button",className:`toggle-btn ${c?"active":""}`,onClick:()=>u(!0),children:"Preview"})]});return c&&o?i.jsxs("div",{className:"file-content-modal",children:[p,i.jsx("div",{className:"markdown-preview",children:i.jsx("div",{className:"markdown-rendered",dangerouslySetInnerHTML:{__html:o}})})]}):n?i.jsxs("div",{className:"file-content-modal",children:[p,i.jsxs("div",{className:"file-viewer-code file-viewer-code-highlighted",children:[i.jsx("div",{className:"shiki-container",dangerouslySetInnerHTML:{__html:n}}),a&&i.jsx("div",{className:"file-viewer-truncated",children:"Content truncated for highlighting (showing first 2000 lines)"})]})]}):i.jsxs("div",{className:"file-content-modal",children:[p,i.jsxs("div",{className:"file-content-with-lines",children:[i.jsx("div",{className:"line-numbers",children:d.map((v,x)=>i.jsx("div",{children:e.startLine+x},`ln-${x+1}`))}),i.jsx("pre",{className:"line-content",children:i.jsx("code",{children:e.content})})]})]})}function cy({file:e}){const n=xr(e.filePath),a=e.startLine>1||e.numLines<e.totalLines;return i.jsxs("span",{className:"file-path",children:[n,a&&i.jsxs("span",{className:"file-range",children:[" ","(lines ",e.startLine,"-",e.startLine+e.numLines-1," of"," ",e.totalLines,")"]})]})}function p4({file:e,highlightedHtml:n,highlightedTruncated:a,renderedMarkdownHtml:o}){const[c,u]=h.useState(!1),d=xr(e.filePath),m=e.startLine>1||e.numLines<e.totalLines;return i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"read-text-result",children:i.jsxs("button",{type:"button",className:"file-link-button",onClick:()=>u(!0),children:[d,m&&i.jsxs("span",{className:"file-range",children:[" ","(lines ",e.startLine,"-",e.startLine+e.numLines-1,")"]}),i.jsxs("span",{className:"file-line-count",children:[e.numLines," lines"]})]})}),c&&i.jsx(bs,{title:i.jsx(cy,{file:e}),onClose:()=>u(!1),children:i.jsx(ly,{file:e,highlightedHtml:n,highlightedTruncated:a,renderedMarkdownHtml:o})})]})}function uy({file:e}){const n=e.originalSize?Math.round(e.originalSize/1024):0,{dimensions:a}=e,o=(a==null?void 0:a.originalWidth)!=null&&(a==null?void 0:a.originalHeight)!=null;return i.jsxs("div",{className:"read-image-result",children:[(o||n>0)&&i.jsxs("div",{className:"image-info",children:[o&&i.jsxs(i.Fragment,{children:[a.originalWidth,"x",a.originalHeight]}),o&&n>0&&" ",n>0&&i.jsxs(i.Fragment,{children:["(",n,"KB)"]})]}),i.jsx("img",{className:"read-image",src:`data:${e.type};base64,${e.base64}`,alt:"File content",width:a==null?void 0:a.displayWidth,height:a==null?void 0:a.displayHeight})]})}function g4({result:e,isError:n}){const{enabled:a,reportValidationError:o,isToolIgnored:c}=In(),[u,d]=h.useState(null);h.useEffect(()=>{if(a&&e){const p=qn("Read",e);!p.valid&&p.errors?(d(p.errors),o("Read",p.errors)):d(null)}},[a,e,o]);const m=a&&u&&!c("Read");if(n||!(e!=null&&e.file)){const p=e;return i.jsxs("div",{className:"read-error",children:[m&&u&&i.jsx(vt,{toolName:"Read",errors:u}),typeof e=="object"&&(p!=null&&p.content)?String(p.content):"Failed to read file"]})}return e.type==="image"?i.jsxs(i.Fragment,{children:[m&&u&&i.jsx(vt,{toolName:"Read",errors:u}),i.jsx(uy,{file:e.file})]}):i.jsxs(i.Fragment,{children:[m&&u&&i.jsx(vt,{toolName:"Read",errors:u}),i.jsx(p4,{file:e.file,highlightedHtml:e._highlightedContentHtml,highlightedTruncated:e._highlightedTruncated,renderedMarkdownHtml:e._renderedMarkdownHtml})]})}function v4({input:e,result:n,isError:a}){const[o,c]=h.useState(!1),{enabled:u,reportValidationError:d,isToolIgnored:m}=In(),[p,v]=h.useState(null);h.useEffect(()=>{if(u&&n){const _=qn("Read",n);!_.valid&&_.errors?(v(_.errors),d("Read",_.errors)):v(null)}},[u,n,d]);const x=u&&p&&!m("Read"),b=xr(e.file_path);if(a)return i.jsxs("span",{children:[b,x&&p&&i.jsx(vt,{toolName:"Read",errors:p})]});if(!(n!=null&&n.file))return i.jsx("span",{children:b});if(n.type==="image"){const _=n.file;return i.jsxs(i.Fragment,{children:[i.jsxs("button",{type:"button",className:"file-link-inline",onClick:C=>{C.stopPropagation(),c(!0)},children:[b,i.jsx("span",{className:"file-line-count-inline",children:"(image)"}),x&&p&&i.jsx(vt,{toolName:"Read",errors:p})]}),o&&i.jsx(bs,{title:b,onClose:()=>c(!1),children:i.jsx(uy,{file:_})})]})}const w=n.file;return i.jsxs(i.Fragment,{children:[i.jsxs("button",{type:"button",className:"file-link-inline",onClick:_=>{_.stopPropagation(),c(!0)},children:[b,i.jsxs("span",{className:"file-line-count-inline",children:[w.numLines," lines"]}),x&&p&&i.jsx(vt,{toolName:"Read",errors:p})]}),o&&i.jsx(bs,{title:i.jsx(cy,{file:w}),onClose:()=>c(!1),children:i.jsx(ly,{file:w,highlightedHtml:n._highlightedContentHtml,highlightedTruncated:n._highlightedTruncated,renderedMarkdownHtml:n._renderedMarkdownHtml})})]})}const x4={tool:"Read",renderToolUse(e,n){return i.jsx(m4,{input:e})},renderToolResult(e,n,a){return i.jsx(g4,{result:e,isError:n})},getUseSummary(e){return xr(e.file_path)},getResultSummary(e,n,a){if(n&&a)return xr(a.file_path);if(n)return"Error";const o=e;if(!(o!=null&&o.file))return"Reading...";const c=xr(o.type==="image"?"image":o.file.filePath);return o.type==="image"?"Image":c},renderInteractiveSummary(e,n,a,o){return i.jsx(v4,{input:e,result:n,isError:a})}},qv=20;function Vv({status:e}){const a={running:{icon:"",className:"status-running"},completed:{icon:"",className:"status-completed"},failed:{icon:"",className:"status-failed"},timeout:{icon:"",className:"status-timeout"}}[e]||{icon:"?",className:""};return i.jsxs("span",{className:`taskoutput-status ${a.className}`,children:[a.icon," ",e]})}function y4({input:e}){return i.jsxs("div",{className:"taskoutput-tool-use",children:[i.jsx("span",{className:"taskoutput-label",children:"Polling task"}),i.jsx("code",{className:"taskoutput-id",children:e.task_id}),e.block!==void 0&&i.jsx("span",{className:"badge",children:e.block?"blocking":"non-blocking"}),e.timeout!==void 0&&i.jsxs("span",{className:"badge",children:["timeout: ",e.timeout,"ms"]})]})}function b4({result:e,isError:n}){var C;const[a,o]=h.useState(!1),{enabled:c,reportValidationError:u,isToolIgnored:d}=In(),[m,p]=h.useState(null);h.useEffect(()=>{if(c&&e){const E=qn("TaskOutput",e);!E.valid&&E.errors?(p(E.errors),u("TaskOutput",E.errors)):p(null)}},[c,e,u]);const v=c&&m&&!d("TaskOutput");if(n){const E=e;return i.jsxs("div",{className:"taskoutput-error",children:[v&&m&&i.jsx(vt,{toolName:"TaskOutput",errors:m}),typeof e=="object"&&(E!=null&&E.content)?String(E.content):"Failed to get task output"]})}if(!e)return i.jsx("div",{className:"taskoutput-empty",children:"No output"});const x=e.task,b=((C=x==null?void 0:x.output)==null?void 0:C.split(`
`))||[],w=b.length>qv,_=w&&!a?b.slice(0,qv):b;return i.jsxs("div",{className:"taskoutput-result",children:[i.jsxs("div",{className:"taskoutput-header",children:[i.jsx(Vv,{status:e.retrieval_status}),(x==null?void 0:x.task_type)&&i.jsx("span",{className:"badge badge-info",children:x.task_type}),(x==null?void 0:x.description)&&i.jsx("span",{className:"taskoutput-desc",children:x.description}),v&&m&&i.jsx(vt,{toolName:"TaskOutput",errors:m})]}),x&&i.jsxs("div",{className:"taskoutput-task",children:[i.jsxs("div",{className:"taskoutput-task-status",children:[i.jsx(Vv,{status:x.status}),x.exitCode!==null&&i.jsxs("span",{className:`badge ${x.exitCode===0?"badge-success":"badge-error"}`,children:["exit ",x.exitCode]})]}),x.output&&i.jsxs(i.Fragment,{children:[i.jsx("pre",{className:"taskoutput-content code-block",children:i.jsx("code",{children:_.join(`
`)})}),w&&i.jsx("button",{type:"button",className:"expand-button",onClick:()=>o(!a),children:a?"Show less":`Show all ${b.length} lines`})]})]})]})}const S4={tool:"TaskOutput",renderToolUse(e,n){return i.jsx(y4,{input:e})},renderToolResult(e,n,a){return i.jsx(b4,{result:e,isError:n})},getUseSummary(e){return e.task_id},getResultSummary(e,n){if(n)return"Error";const a=e;return a?a.retrieval_status:"Pending"}},dy=h.createContext(null);function j4({children:e,agentContent:n,setAgentContent:a,toolUseToAgent:o,projectId:c,sessionId:u}){const[d,m]=h.useState(new Set),p=h.useRef(new Set),v=h.useCallback(async(w,_,C)=>{if(p.current.has(C))return n[C]??{messages:[],status:"pending"};if(d.has(C))return new Promise(E=>{const N=setInterval(()=>{p.current.has(C)&&(clearInterval(N),E(n[C]??{messages:[],status:"pending"}))},100);setTimeout(()=>{clearInterval(N),E({messages:[],status:"pending"})},3e4)});m(E=>new Set(E).add(C));try{const E=await Ke.getAgentSession(w,_,C);return p.current.add(C),a(N=>{const z=N[C],O=(z==null?void 0:z.messages)??[],U=E.messages,P=new Map;for(const D of U)P.set(ss(D),D);for(const D of O){const I=ss(D);P.has(I)||P.set(I,D)}const A=(z==null?void 0:z.status)==="running"?"running":E.status;return{...N,[C]:{messages:Array.from(P.values()),status:A}}}),{messages:E.messages,status:E.status}}catch(E){return console.error(`Failed to load agent content for ${C}:`,E),{messages:[],status:"failed"}}finally{m(E=>{const N=new Set(E);return N.delete(C),N})}},[n,d,a]),x=h.useCallback(w=>d.has(w),[d]),b={agentContent:n,toolUseToAgent:o,loadAgentContent:v,isLoading:x,projectId:c};return i.jsx(dy.Provider,{value:b,children:e})}function w4({block:e}){return i.jsxs("div",{className:"fallback-block",children:[i.jsx("div",{className:"fallback-type",children:e.type}),i.jsx("pre",{className:"fallback-content",children:i.jsx("code",{children:JSON.stringify(e,null,2)})})]})}const N4={type:[],render(e,n){return i.jsx(w4,{block:e,context:n})}};function E4({block:e}){return e._renderedHtml?i.jsx("div",{className:"text-block",dangerouslySetInnerHTML:{__html:e._renderedHtml}}):i.jsx("div",{className:"text-block",children:i.jsx("pre",{style:{whiteSpace:"pre-wrap",fontFamily:"inherit"},children:e.text})})}const _4={type:"text",render(e,n){return i.jsx(E4,{block:e})},getSummary(e){const n=e.text;return n.length>100?`${n.slice(0,97)}...`:n}};function C4({block:e,context:n}){const a=e.thinking||"";if(n.thinkingExpanded??!1)return i.jsxs("button",{type:"button",className:"thinking-block thinking-block-expanded",onClick:n.toggleThinkingExpanded,"aria-expanded":!0,children:[i.jsxs("div",{className:"thinking-toggle-expanded",children:[i.jsx("span",{className:"thinking-label",children:"Thinking"}),i.jsx("span",{className:"thinking-icon",children:""})]}),i.jsx("div",{className:"thinking-content",children:a})]});const c=n.isStreaming?"thinking-block thinking-streaming-collapsed":"thinking-block";return i.jsx("div",{className:c,children:i.jsxs("button",{type:"button",className:"thinking-toggle-collapsed",onClick:n.toggleThinkingExpanded,"aria-expanded":!1,children:[i.jsx("span",{className:"thinking-label",children:n.isStreaming?"Thinking...":"Thinking"}),i.jsx("span",{className:"thinking-icon",children:""})]})})}const T4={type:"thinking",render(e,n){return i.jsx(C4,{block:e,context:n})},getSummary(e){const a=(e.thinking||"").split(`
`)[0]||"";return a.length>80?`${a.slice(0,77)}...`:a}};function k4({block:e,context:n}){var d;const a=(d=n.getToolUse)==null?void 0:d.call(n,e.tool_use_id),o=(a==null?void 0:a.name)||"Unknown",c=e.is_error===!0;let u=n.toolUseResult;if(!u&&e.content)try{u=JSON.parse(e.content)}catch{u={content:e.content}}return i.jsxs("div",{className:`tool-block tool-result ${c?"tool-error":""}`,children:[i.jsxs("div",{className:"tool-header",children:[i.jsx("span",{className:"tool-icon",children:"<"}),i.jsx("span",{className:"tool-name",children:o}),c&&i.jsx("span",{className:"badge badge-error",children:"Error"})]}),i.jsx("div",{className:"tool-content",children:nn.renderToolResult(o,u,c,n)})]})}const R4={type:"tool_result",render(e,n){return i.jsx(k4,{block:e,context:n})},getSummary(e){return e.is_error?"Error":"Result"}};function A4({block:e,context:n}){return i.jsxs("div",{className:"tool-block tool-use",children:[i.jsxs("div",{className:"tool-header",children:[i.jsx("span",{className:"tool-icon",children:">"}),i.jsx("span",{className:"tool-name",children:e.name})]}),i.jsx("div",{className:"tool-content",children:nn.renderToolUse(e.name,e.input,n)})]})}const M4={type:"tool_use",render(e,n){return i.jsx(A4,{block:e,context:n})},getSummary(e){var o;const n=e,a=nn.get(n.name);return((o=a.getUseSummary)==null?void 0:o.call(a,n.input))||n.name}};class O4{constructor(n){Qe(this,"renderers",new Map);Qe(this,"fallback");this.fallback=n}register(n){const a=Array.isArray(n.type)?n.type:[n.type];for(const o of a)this.renderers.set(o,n)}getRenderer(n){return this.renderers.get(n.type)||this.fallback}render(n,a){return this.getRenderer(n).render(n,a)}}const No=new O4(N4);No.register(_4);No.register(T4);No.register(M4);No.register(R4);const fy=h.memo(function({block:n,context:a}){return i.jsx(i.Fragment,{children:No.render(n,a)})}),Fv=200,Gv=80;function z4(e){if(!e)return null;let n="";if(typeof e=="string")n=e;else if(typeof e=="object"&&e!==null&&"content"in e){const c=e.content;if(typeof c=="string")n=c;else if(Array.isArray(c)){for(const u of c)if(typeof u=="object"&&u!==null&&"type"in u&&u.type==="text"&&"text"in u){n=String(u.text);break}}}if(!n)return null;const a=lc(n),o=a.cleanedMessage.length>Gv?`${a.cleanedMessage.slice(0,Gv)}...`:a.cleanedMessage;return{raw:n,summary:o,label:a.label}}function hy(e){return e<1e3?`${e}ms`:e<6e4?`${(e/1e3).toFixed(1)}s`:`${(e/6e4).toFixed(1)}m`}function U4({input:e}){const[n,a]=h.useState(!1),o=e.prompt.length>Fv?`${e.prompt.slice(0,Fv)}...`:e.prompt;return i.jsxs("div",{className:"task-tool-use",children:[i.jsxs("div",{className:"task-header",children:[i.jsx("span",{className:"task-description",children:e.description}),i.jsx("span",{className:"badge badge-info",children:e.subagent_type}),e.model&&i.jsx("span",{className:"badge",children:e.model})]}),e.prompt&&i.jsxs("div",{className:"task-prompt",children:[i.jsx("button",{type:"button",className:"task-prompt-toggle",onClick:()=>a(!n),children:n?"Hide prompt":"Show prompt"}),n&&i.jsx("pre",{className:"task-prompt-content",children:i.jsx("code",{children:n?e.prompt:o})})]})]})}function L4({messages:e,isStreaming:n}){const[a,o]=h.useState(!1),c=h.useCallback(()=>{o(d=>!d)},[]),u=h.useMemo(()=>Bf(e),[e]);return i.jsx("div",{className:"task-nested-content",children:u.map(d=>i.jsx(lf,{item:d,isStreaming:n,thinkingExpanded:a,toggleThinkingExpanded:c},d.id))})}function D4({input:e,result:n,isError:a,status:o,toolUseId:c}){var F;const{projectId:u,sessionId:d}=If(),m=h.useContext(dy),{reportValidationError:p,enabled:v,isToolIgnored:x}=In(),b=(n==null?void 0:n.agentId)??(c?m==null?void 0:m.toolUseToAgent.get(c):void 0),w=b?m==null?void 0:m.agentContent[b]:void 0,C=!((n==null?void 0:n.status)==="completed"||(n==null?void 0:n.status)==="failed")&&(o==="pending"||(w==null?void 0:w.status)==="running"),[E,N]=h.useState(!1),[z,O]=h.useState(!1),U=h.useRef(null),P=h.useRef(!0),A=h.useRef(!1),D=h.useRef(0),I=h.useCallback(G=>{A.current=!0,G.scrollTop=G.scrollHeight-G.clientHeight,D.current=G.scrollHeight,requestAnimationFrame(()=>{A.current=!1})},[]),Z=h.useCallback(()=>{if(A.current)return;const G=U.current;if(!G)return;const we=100,Me=G.scrollHeight-G.scrollTop-G.clientHeight;P.current=Me<we},[]);h.useEffect(()=>{const G=U.current;if(!(!G||!E))return G.addEventListener("scroll",Z),()=>{G.removeEventListener("scroll",Z)}},[Z,E]),h.useEffect(()=>{const G=U.current;if(!G||!E||!C)return;D.current=G.scrollHeight;const we=new ResizeObserver(()=>{const Me=G.scrollHeight;Me>D.current&&P.current?I(G):D.current=Me});for(const Me of G.children)we.observe(Me);return we.observe(G),()=>{we.disconnect()}},[E,C,I]),h.useEffect(()=>{if(E&&C){P.current=!0;const G=U.current;G&&requestAnimationFrame(()=>{I(G)})}},[E,C,I]);const re=h.useRef(!1);h.useEffect(()=>{if(!E||!b||!m||re.current)return;re.current=!0,(async()=>{O(!0);try{await m.loadAgentContent(u,d,b)}finally{O(!1)}})()},[E,b,m,u,d]);const[_e,Te]=h.useState(null);h.useEffect(()=>{if(!n||!v){Te(null);return}const G=qn("Task",n);!G.valid&&G.errors?(Te(G.errors),p("Task",G.errors)):Te(null)},[n,v,p]);const se=v&&_e!==null&&!x("Task"),le=async()=>{const G=(w==null?void 0:w.messages)&&w.messages.length>0;if(!E&&b&&m&&!G){N(!0),O(!0);try{await m.loadAgentContent(u,d,b)}finally{O(!1)}}else N(!E)},me=a?z4(n):null,L=a?{class:"badge-error",text:(me==null?void 0:me.label)??"failed"}:o==="aborted"?{class:"badge-warning",text:"interrupted"}:C?{class:"badge-running",text:"running"}:(n==null?void 0:n.status)==="completed"?{class:"badge-success",text:"completed"}:(n==null?void 0:n.status)==="failed"?{class:"badge-error",text:"failed"}:{class:"badge-pending",text:"pending"};return i.jsxs("div",{className:`task-inline ${E?"expanded":"collapsed"} status-${L.text}`,children:[i.jsxs("button",{type:"button",className:"task-inline-header",onClick:le,children:[i.jsx("span",{className:"task-expand-icon",children:E?"":""}),i.jsx("span",{className:"badge badge-info task-agent-type",children:e.subagent_type}),i.jsx("span",{className:"task-inline-title",children:e.description}),e.model&&i.jsx("span",{className:"badge task-model",children:e.model}),C&&i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"task-spinner","aria-label":"Running",children:i.jsx(Yv,{})}),(w==null?void 0:w.contextUsage)&&i.jsxs("span",{className:"task-context-usage",children:[w.contextUsage.percentage.toFixed(0),"% context"]})]}),!C&&i.jsx("span",{className:`badge ${L.class}`,children:L.text}),!E&&me&&i.jsx("span",{className:"task-error-summary",title:me.raw,children:me.summary}),n&&!a&&i.jsxs("span",{className:"task-stats",children:[hy(n.totalDurationMs??0)," "," ",(n.totalTokens??0).toLocaleString()," tokens"]}),se&&_e&&i.jsx(vt,{toolName:"Task",errors:_e})]}),z&&i.jsxs("div",{className:"task-loading",children:[i.jsx(Yv,{})," Loading agent content..."]}),E&&i.jsxs("div",{className:"task-inline-content",ref:U,children:[me&&i.jsx("div",{className:"task-error-details",children:i.jsx("pre",{className:"task-error-message",children:me.raw})}),!me&&(w!=null&&w.messages.length)?i.jsx(L4,{messages:w.messages,isStreaming:C}):!me&&((F=n==null?void 0:n.content)!=null&&F.length)?i.jsx("div",{className:"task-content",children:n.content.map(G=>{var we;return i.jsx(fy,{block:G,context:{isStreaming:!1,theme:"dark"}},G.id??`${b}-${G.type}-${((we=G.text)==null?void 0:we.slice(0,20))??""}`)})}):me?null:i.jsx("div",{className:"task-empty",children:C?"Waiting for agent activity...":"No content"})]})]})}function Yv(){return i.jsx("svg",{className:"spinner",viewBox:"0 0 16 16",width:"12",height:"12","aria-hidden":"true",children:i.jsx("circle",{cx:"8",cy:"8",r:"6",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"24",strokeDashoffset:"8"})})}function B4({result:e,isError:n}){const[a,o]=h.useState(!0);if(n)return i.jsx("div",{className:"task-error",children:typeof e=="object"&&"content"in e?String(e.content):"Task failed"});if(!e)return i.jsx("div",{className:"task-empty",children:"No result"});const c=e.status==="completed"?"badge-success":e.status==="failed"?"badge-error":"badge-warning";return i.jsxs("div",{className:"task-result",children:[i.jsxs("div",{className:"task-result-header",children:[i.jsx("span",{className:`badge ${c}`,children:e.status}),i.jsxs("span",{className:"task-stats",children:[hy(e.totalDurationMs??0)," "," ",(e.totalTokens??0).toLocaleString()," tokens "," ",e.totalToolUseCount??0," tools"]}),i.jsx("button",{type:"button",className:"expand-button",onClick:()=>o(!a),children:a?"Collapse":"Expand"})]}),a&&e.content&&e.content.length>0&&i.jsx("div",{className:"task-content",children:e.content.map((u,d)=>i.jsx(fy,{block:u,context:{isStreaming:!1,theme:"dark"}},`${e.agentId}-${d}`))})]})}const $4={tool:"Task",renderToolUse(e,n){return i.jsx(U4,{input:e})},renderToolResult(e,n,a){return i.jsx(B4,{result:e,isError:n})},getUseSummary(e){return e.description},getResultSummary(e,n){if(n)return"Error";const a=e;return a!=null&&a.status?`${a.status} (${a.totalToolUseCount} tools)`:"Complete"},renderInline(e,n,a,o,c){return i.jsx(D4,{input:e,result:n,isError:a,status:o,toolUseId:c.toolUseId})}};function I4(e){switch(e){case"pending":return"";case"in_progress":return"";case"completed":return"";default:return""}}function P4({todo:e}){const n=`todo-status-${e.status}`,a=e.status==="completed";return i.jsxs("div",{className:`todo-item ${n}`,children:[i.jsx("span",{className:"todo-checkbox",children:I4(e.status)}),i.jsx("span",{className:`todo-content ${a?"todo-completed":""}`,children:e.content})]})}function H4({input:e}){if(!(e!=null&&e.todos)||e.todos.length===0)return i.jsx("div",{className:"todo-empty",children:"No todos specified"});const n=e.todos.filter(c=>c.status==="in_progress"),a=e.todos.filter(c=>c.status==="pending"),o=e.todos.filter(c=>c.status==="completed");return i.jsx("div",{className:"todo-tool-use",children:i.jsxs("span",{className:"todo-summary",children:[n.length>0&&`${n.length} in progress`,n.length>0&&(a.length>0||o.length>0)&&", ",a.length>0&&`${a.length} pending`,a.length>0&&o.length>0&&", ",o.length>0&&`${o.length} completed`]})})}function Z4({result:e,isError:n}){const{enabled:a,reportValidationError:o,isToolIgnored:c}=In(),[u,d]=h.useState(null);h.useEffect(()=>{if(a&&e){const p=qn("TodoWrite",e);!p.valid&&p.errors?(d(p.errors),o("TodoWrite",p.errors)):d(null)}},[a,e,o]);const m=a&&u&&!c("TodoWrite");if(n){const p=e;return i.jsxs("div",{className:"todo-error",children:[m&&u&&i.jsx(vt,{toolName:"TodoWrite",errors:u}),typeof e=="object"&&(p!=null&&p.content)?String(p.content):"Failed to update todos"]})}return!(e!=null&&e.newTodos)||e.newTodos.length===0?i.jsxs("div",{className:"todo-empty",children:[m&&u&&i.jsx(vt,{toolName:"TodoWrite",errors:u}),"No todos"]}):i.jsxs("div",{className:"todo-result",children:[m&&u&&i.jsx(vt,{toolName:"TodoWrite",errors:u}),i.jsx("div",{className:"todo-list",children:e.newTodos.map((p,v)=>i.jsx(P4,{todo:p},`${p.content}-${v}`))})]})}const q4={tool:"TodoWrite",displayName:"Update Todos",renderToolUse(e,n){return i.jsx(H4,{input:e})},renderToolResult(e,n,a){return i.jsx(Z4,{result:e,isError:n})},getUseSummary(e){const n=e.todos;return n?`${n.length} items`:"Todos"},getResultSummary(e,n){if(n)return"Error";const a=e;return a!=null&&a.newTodos?`${a.newTodos.length} items`:"Todos"}},Kv=30;function V4(e){return e<1024?`${e} B`:e<1024*1024?`${(e/1024).toFixed(1)} KB`:`${(e/(1024*1024)).toFixed(1)} MB`}function F4({input:e}){return i.jsxs("div",{className:"webfetch-tool-use",children:[i.jsx("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"webfetch-url",children:e.url}),e.prompt&&i.jsx("div",{className:"webfetch-prompt",children:e.prompt})]})}function G4({result:e,isError:n}){var C;const[a,o]=h.useState(!1),{enabled:c,reportValidationError:u,isToolIgnored:d}=In(),[m,p]=h.useState(null);h.useEffect(()=>{if(c&&e){const E=qn("WebFetch",e);!E.valid&&E.errors?(p(E.errors),u("WebFetch",E.errors)):p(null)}},[c,e,u]);const v=c&&m&&!d("WebFetch");if(n){const E=e;return i.jsxs("div",{className:"webfetch-error",children:[v&&m&&i.jsx(vt,{toolName:"WebFetch",errors:m}),typeof e=="object"&&(E!=null&&E.content)?String(E.content):"Fetch failed"]})}if(!e)return i.jsx("div",{className:"webfetch-empty",children:"No content"});const x=((C=e.result)==null?void 0:C.split(`
`))||[],b=x.length>Kv,w=b&&!a?x.slice(0,Kv):x,_=e.code>=200&&e.code<300?"badge-success":e.code>=400?"badge-error":"badge-warning";return i.jsxs("div",{className:"webfetch-result",children:[i.jsxs("div",{className:"webfetch-header",children:[i.jsx("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"webfetch-url",children:e.url}),i.jsxs("span",{className:`badge ${_}`,children:[e.code," ",e.codeText]}),i.jsxs("span",{className:"webfetch-meta",children:[V4(e.bytes),"  ",e.durationMs,"ms"]}),v&&m&&i.jsx(vt,{toolName:"WebFetch",errors:m})]}),e.result&&i.jsxs(i.Fragment,{children:[i.jsx("pre",{className:"webfetch-content code-block",children:i.jsx("code",{children:w.join(`
`)})}),b&&i.jsx("button",{type:"button",className:"expand-button",onClick:()=>o(!a),children:a?"Show less":`Show all ${x.length} lines`})]})]})}const Y4={tool:"WebFetch",renderToolUse(e,n){return i.jsx(F4,{input:e})},renderToolResult(e,n,a){return i.jsx(G4,{result:e,isError:n})},getUseSummary(e){const n=e.url;try{return new URL(n).hostname}catch{return n}},getResultSummary(e,n){if(n)return"Error";const a=e;return a!=null&&a.code?`${a.code} ${a.codeText}`:"Fetched"}};function K4({input:e}){return i.jsx("div",{className:"websearch-tool-use",children:i.jsx("span",{className:"websearch-query",children:e.query})})}function W4({result:e,isError:n}){var v;const{enabled:a,reportValidationError:o,isToolIgnored:c}=In(),[u,d]=h.useState(null);h.useEffect(()=>{if(a&&e){const x=qn("WebSearch",e);!x.valid&&x.errors?(d(x.errors),o("WebSearch",x.errors)):d(null)}},[a,e,o]);const m=a&&u&&!c("WebSearch");if(n){const x=e;return i.jsxs("div",{className:"websearch-error",children:[m&&u&&i.jsx(vt,{toolName:"WebSearch",errors:u}),typeof e=="object"&&(x!=null&&x.content)?String(x.content):"Search failed"]})}if(!e)return i.jsx("div",{className:"websearch-empty",children:"No results"});const p=((v=e.results)==null?void 0:v.flatMap(x=>x.content||[]).filter(Boolean))||[];return i.jsxs("div",{className:"websearch-result",children:[i.jsxs("div",{className:"websearch-header",children:[i.jsxs("span",{className:"websearch-query-display",children:['"',e.query,'"']}),e.durationSeconds!==void 0&&i.jsxs("span",{className:"badge",children:[e.durationSeconds.toFixed(2),"s"]}),m&&u&&i.jsx(vt,{toolName:"WebSearch",errors:u})]}),p.length>0?i.jsx("ul",{className:"websearch-links",children:p.map((x,b)=>i.jsxs("li",{className:"websearch-link-item",children:[i.jsx("a",{href:x.url,target:"_blank",rel:"noopener noreferrer",className:"websearch-link",children:x.title}),i.jsx("span",{className:"websearch-url",children:x.url})]},`${x.url}-${b}`))}):i.jsx("div",{className:"websearch-empty",children:"No results found"})]})}const X4={tool:"WebSearch",renderToolUse(e,n){return i.jsx(K4,{input:e})},renderToolResult(e,n,a){return i.jsx(W4,{result:e,isError:n})},getUseSummary(e){return e.query},getResultSummary(e,n){var c;if(n)return"Error";const a=e;return`${((c=a==null?void 0:a.results)==null?void 0:c.flatMap(u=>u.content||[]).length)||0} results`}},Wv=30,$d=3;function ai(e){return e.split("/").pop()||e}function Q4(e,n){const a=e.split('<span class="line">');return a.length<=n+1?e:`${a.slice(0,n+1).join('<span class="line">')}</code></pre>`}function J4({input:e}){const n=ai(e.file_path),a=e.content.split(`
`).length;return i.jsxs("div",{className:"write-tool-use",children:[i.jsx("span",{className:"file-path",children:n}),i.jsxs("span",{className:"write-info",children:[a," lines"]})]})}function e5({file:e,input:n}){const a=e.content.split(`
`);return n!=null&&n._highlightedContentHtml?i.jsx("div",{className:"file-content-modal",children:i.jsxs("div",{className:"file-viewer-code file-viewer-code-highlighted",children:[i.jsx("div",{className:"shiki-container",dangerouslySetInnerHTML:{__html:n._highlightedContentHtml}}),n._highlightedTruncated&&i.jsx("div",{className:"file-viewer-truncated",children:"Content truncated for highlighting (showing first 2000 lines)"})]})}):i.jsx("div",{className:"file-content-modal",children:i.jsxs("div",{className:"file-content-with-lines",children:[i.jsx("div",{className:"line-numbers",children:a.map((o,c)=>i.jsx("div",{children:e.startLine+c},`ln-${c+1}`))}),i.jsx("pre",{className:"line-content",children:i.jsx("code",{children:e.content})})]})})}function t5({result:e,isError:n,input:a}){const[o,c]=h.useState(!1),{enabled:u,reportValidationError:d,isToolIgnored:m}=In(),[p,v]=h.useState(null);h.useEffect(()=>{if(u&&e){const N=qn("Write",e);!N.valid&&N.errors?(v(N.errors),d("Write",N.errors)):v(null)}},[u,e,d]);const x=u&&p&&!m("Write");if(n||!(e!=null&&e.file)){let N="Failed to write file";if(typeof e=="string")N=e;else if(typeof e=="object"&&e!==null){const z=e;z.content&&(N=String(z.content))}return i.jsxs("div",{className:"write-error",children:[x&&p&&i.jsx(vt,{toolName:"Write",errors:p}),N]})}const{file:b}=e,w=b.content.split(`
`),_=w.length>Wv,C=ai(b.filePath);if(a!=null&&a._highlightedContentHtml)return i.jsxs("div",{className:"write-result",children:[i.jsxs("div",{className:"file-header",children:[i.jsx("span",{className:"file-path",children:C}),i.jsxs("span",{className:"file-range",children:[b.numLines," lines written"]}),x&&p&&i.jsx(vt,{toolName:"Write",errors:p})]}),i.jsxs("div",{className:"file-viewer-code file-viewer-code-highlighted",children:[i.jsx("div",{className:"shiki-container",dangerouslySetInnerHTML:{__html:a._highlightedContentHtml}}),a._highlightedTruncated&&i.jsx("div",{className:"file-viewer-truncated",children:"Content truncated for highlighting (showing first 2000 lines)"})]})]});const E=_&&!o?w.slice(0,Wv):w;return i.jsxs("div",{className:"write-result",children:[i.jsxs("div",{className:"file-header",children:[i.jsx("span",{className:"file-path",children:C}),i.jsxs("span",{className:"file-range",children:[b.numLines," lines written"]}),x&&p&&i.jsx(vt,{toolName:"Write",errors:p})]}),i.jsxs("div",{className:"file-content-with-lines",children:[i.jsxs("div",{className:"line-numbers",children:[E.map((N,z)=>{const O=b.startLine+z;return i.jsx("div",{children:O},`line-${O}`)}),_&&!o&&i.jsx("div",{children:"..."})]}),i.jsx("pre",{className:"line-content",children:i.jsx("code",{children:E.join(`
`)})})]}),_&&i.jsx("button",{type:"button",className:"expand-button",onClick:()=>c(!o),children:o?"Show less":`Show all ${w.length} lines`})]})}function n5({input:e,result:n,isError:a}){var P,A,D;const[o,c]=h.useState(!1),{enabled:u,reportValidationError:d,isToolIgnored:m}=In(),[p,v]=h.useState(null);h.useEffect(()=>{if(u&&n){const I=qn("Write",n);!I.valid&&I.errors?(v(I.errors),d("Write",I.errors)):v(null)}},[u,n,d]);const x=u&&p&&!m("Write"),b=h.useCallback(I=>{I.stopPropagation(),a||c(!0)},[a]),w=h.useCallback(()=>{c(!1)},[]),_=((P=n==null?void 0:n.file)==null?void 0:P.content)??e.content,C=((A=n==null?void 0:n.file)==null?void 0:A.filePath)??e.file_path,E=ai(C),N=_.split(`
`),z=((D=n==null?void 0:n.file)==null?void 0:D.numLines)??N.length,O=N.length>$d,U=h.useMemo(()=>e._highlightedContentHtml?Q4(e._highlightedContentHtml,$d):null,[e._highlightedContentHtml]);if(a){let I="Failed to write file";if(typeof n=="string")I=n;else if(typeof n=="object"&&n!==null){const Z=n;Z.content&&(I=String(Z.content))}return i.jsxs("div",{className:"write-collapsed-preview write-collapsed-error",children:[x&&p&&i.jsx(vt,{toolName:"Write",errors:p}),i.jsx("span",{className:"write-preview-error",children:I})]})}return i.jsxs(i.Fragment,{children:[i.jsxs("button",{type:"button",className:"write-collapsed-preview",onClick:b,children:[i.jsxs("div",{className:"write-preview-lines",children:[z," lines",x&&p&&i.jsx(vt,{toolName:"Write",errors:p})]}),i.jsxs("div",{className:`write-preview-content ${O?"write-preview-truncated":""}`,children:[U?i.jsx("div",{className:"shiki-container",dangerouslySetInnerHTML:{__html:U}}):i.jsx("pre",{children:i.jsx("code",{children:N.slice(0,$d).join(`
`)})}),O&&i.jsx("div",{className:"write-preview-fade"})]})]}),o&&i.jsx(bs,{title:i.jsx("span",{className:"file-path",children:E}),onClose:w,children:i.jsx(e5,{file:(n==null?void 0:n.file)??{filePath:C,content:_,numLines:z,startLine:1,totalLines:z},input:e})})]})}const s5={tool:"Write",renderToolUse(e,n){return i.jsx(J4,{input:e})},renderToolResult(e,n,a,o){return i.jsx(t5,{result:e,isError:n,input:o})},getUseSummary(e){return ai(e.file_path)},getResultSummary(e,n,a){if(n)return"Error";const o=e;return o!=null&&o.file?ai(o.file.filePath):a?ai(a.file_path):"Writing..."},renderCollapsedPreview(e,n,a,o){return i.jsx(n5,{input:e,result:n,isError:a})}};class a5{constructor(n){Qe(this,"tools",new Map);Qe(this,"fallback");this.fallback=n}register(n){this.tools.set(n.tool,n)}get(n){return this.tools.get(n)||this.fallback}renderToolUse(n,a,o){return this.get(n).renderToolUse(a,o)}renderToolResult(n,a,o,c,u){return this.get(n).renderToolResult(a,o,c,u)}hasInteractiveSummary(n){return typeof this.get(n).renderInteractiveSummary=="function"}hasCollapsedPreview(n){return typeof this.get(n).renderCollapsedPreview=="function"}renderCollapsedPreview(n,a,o,c,u){const d=this.get(n);return d.renderCollapsedPreview?d.renderCollapsedPreview(a,o,c,u):null}renderInteractiveSummary(n,a,o,c,u){const d=this.get(n);return d.renderInteractiveSummary?d.renderInteractiveSummary(a,o,c,u):null}hasInlineRenderer(n){return typeof this.get(n).renderInline=="function"}renderInline(n,a,o,c,u,d){const m=this.get(n);return m.renderInline?m.renderInline(a,o,c,u,d):null}getDisplayName(n){return this.get(n).displayName||n}}const r5={tool:"__fallback__",renderToolUse(e,n){return i.jsx("pre",{className:"tool-fallback",children:i.jsx("code",{children:JSON.stringify(e,null,2)})})},renderToolResult(e,n,a){return i.jsx("pre",{className:`tool-fallback ${n?"tool-fallback-error":""}`,children:i.jsx("code",{children:JSON.stringify(e,null,2)})})}},nn=new a5(r5);nn.register($3);nn.register(x4);nn.register(Q3);nn.register(s5);nn.register(a4);nn.register(u4);nn.register(q4);nn.register($4);nn.register(X4);nn.register(Y4);nn.register(C3);nn.register(e4);nn.register(M3);nn.register(S4);nn.register(h4);function my(e,n,a,o){const c=nn.get(e);if(o==="pending"||o==="aborted")return c.getUseSummary?c.getUseSummary(n):Xv(e,n);const u=c.getUseSummary?c.getUseSummary(n):Xv(e,n),d=c.getResultSummary?c.getResultSummary(a==null?void 0:a.structured,(a==null?void 0:a.isError)??!1,n):i5(e,a,o);return e==="Glob"||e==="Grep"?`${u}  ${d}`:e==="Bash"?u:d}function Xv(e,n){const a=n;switch(e){case"Read":return Id(String(a.file_path||""));case"Write":return Id(String(a.file_path||""));case"Edit":return Id(String(a.file_path||""));case"Bash":return Pl(String(a.command||""),40);case"Glob":return String(a.pattern||"*");case"Grep":return`"${a.pattern||""}"`;case"Task":return Pl(String(a.description||""),30);case"WebSearch":return Pl(String(a.query||""),30);case"WebFetch":return Pl(String(a.url||""),40);default:return"..."}}function i5(e,n,a){if(a==="error")return"failed";if(!n)return"done";const c=(n.content||"").split(`
`).filter(Boolean).length;switch(e){case"Read":return`${c} lines`;case"Bash":return`${c} lines`;case"Glob":return`${c} files`;case"Grep":return`${c} matches`;default:return"done"}}function Pl(e,n){return e.length<=n?e:`${e.slice(0,n-3)}...`}function Id(e){return e.split("/").pop()||e}const o5=h.memo(function({id:n,toolName:a,toolInput:o,toolResult:c,status:u}){const d=nn.hasInlineRenderer(a),m=nn.hasInteractiveSummary(a),p=nn.hasCollapsedPreview(a),v=m||p,[x,b]=h.useState(!v&&(a==="Edit"||a==="TodoWrite")),w=h.useMemo(()=>my(a,o,c,u),[a,o,c,u]),_=()=>{v||b(!x)},C=h.useMemo(()=>({isStreaming:u==="pending",theme:"dark",toolUseId:n}),[u,n]),E=(c==null?void 0:c.structured)??(c==null?void 0:c.content);return d?i.jsx("div",{className:"tool-inline timeline-item",children:nn.renderInline(a,o,E,(c==null?void 0:c.isError)??!1,u,C)}):i.jsxs("div",{className:`tool-row timeline-item ${x?"expanded":"collapsed"} status-${u} ${v?"interactive":""}`,children:[i.jsxs("div",{className:`tool-row-header ${v?"non-expandable":""}`,onClick:v?void 0:_,onKeyDown:v?void 0:N=>N.key==="Enter"&&_(),role:v?"presentation":"button",tabIndex:v?void 0:0,children:[u==="pending"&&i.jsx("span",{className:"tool-spinner","aria-label":"Running",children:i.jsx(u5,{})}),u==="aborted"&&i.jsx("span",{className:"tool-aborted-icon","aria-label":"Interrupted",children:""}),i.jsx("span",{className:"tool-name",children:nn.getDisplayName(a)}),m&&u==="complete"?i.jsx("span",{className:"tool-summary interactive-summary",children:nn.renderInteractiveSummary(a,o,E,(c==null?void 0:c.isError)??!1,C)}):i.jsxs("span",{className:"tool-summary",children:[w,u==="aborted"&&i.jsx("span",{className:"tool-aborted-label",children:" (interrupted)"})]}),!v&&i.jsx("span",{className:"expand-chevron","aria-hidden":"true",children:x?"":""})]}),p&&i.jsx("div",{className:"tool-row-collapsed-preview",children:nn.renderCollapsedPreview(a,o,E,(c==null?void 0:c.isError)??!1,C)}),x&&!v&&i.jsx("div",{className:"tool-row-content",children:u==="pending"||u==="aborted"?i.jsx(l5,{toolName:a,toolInput:o,context:C}):i.jsx(c5,{toolName:a,toolInput:o,toolResult:c,context:C})})]})});function l5({toolName:e,toolInput:n,context:a}){return i.jsx("div",{className:"tool-use-expanded",children:nn.renderToolUse(e,n,a)})}function c5({toolName:e,toolInput:n,toolResult:a,context:o}){if(!a)return i.jsx("div",{className:"tool-no-result",children:"No result data"});const c=a.structured??a.content;return i.jsx("div",{className:"tool-result-expanded",children:nn.renderToolResult(e,c,a.isError,o,n)})}function u5(){return i.jsx("svg",{className:"spinner",viewBox:"0 0 16 16",width:"12",height:"12","aria-hidden":"true",children:i.jsx("circle",{cx:"8",cy:"8",r:"6",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"24",strokeDashoffset:"8"})})}const d5=e2;function f5(e){const n=[],a=`

User uploaded files:
`,o=e.indexOf(a);if(o===-1)return{textWithoutUploads:e,uploadedFiles:[]};const c=e.slice(0,o),u=e.slice(o+a.length),d=/^- (.+?) \(([^,]+), ([^)]+)\): (.+)$/;for(const m of u.split(`
`)){const p=m.match(d);p&&n.push({originalName:p[1]??"",size:p[2]??"",mimeType:p[3]??"",path:p[4]??""})}return{textWithoutUploads:c,uploadedFiles:n}}function Qv(e){const{textWithoutUploads:n,uploadedFiles:a}=f5(e);return{text:Xj(n),openedFiles:Jj(n),uploadedFiles:a}}const of=12,Pd=of*100;function Hl({files:e}){return e.length===0?null:i.jsx("div",{className:"user-prompt-metadata",children:e.map(n=>i.jsx("span",{className:"opened-file",title:`file was opened in editor: ${n}`,children:d5(n)},n))})}function h5(e){return e.startsWith("image/")}function m5(e){const n=e.split("/");if(n.length<3)return null;const a=n[n.length-1],o=n[n.length-2],c=n[n.length-3];return!a||!o||!c||!/^[0-9a-f-]{36}_/.test(a)?null:`/api/projects/${c}/sessions/${o}/upload/${encodeURIComponent(a)}`}function p5({file:e}){const[n,a]=h.useState(!1),o=h5(e.mimeType),c=o?m5(e.path):null;return o&&c?i.jsxs(i.Fragment,{children:[i.jsxs("button",{type:"button",className:"uploaded-file uploaded-file-clickable",title:`${e.mimeType}, ${e.size}`,onClick:()=>a(!0),children:[" ",e.originalName]}),n&&i.jsx(bs,{title:e.originalName,onClose:()=>a(!1),children:i.jsx("div",{className:"uploaded-image-modal",children:i.jsx("img",{src:c,alt:e.originalName})})})]}):i.jsxs("span",{className:"uploaded-file",title:`${e.mimeType}, ${e.size}`,children:[" ",e.originalName]})}function Zl({files:e}){return e.length===0?null:i.jsx("div",{className:"user-prompt-metadata",children:e.map(n=>i.jsx(p5,{file:n},n.path))})}function Jv({text:e}){const[n,a]=h.useState(!1),o=e.split(`
`),c=o.length>of,u=e.length>Pd,d=c||u;if(!d||n)return i.jsxs("div",{className:"text-block",children:[e,n&&d&&i.jsx("button",{type:"button",className:"show-more-btn",onClick:()=>a(!1),children:"Show less"})]});let m=c?o.slice(0,of).join(`
`):e;return m.length>Pd&&(m=m.slice(0,Pd)),i.jsxs("div",{className:"text-block collapsible-text",children:[i.jsxs("div",{className:"truncated-content",children:[m,i.jsx("div",{className:"fade-overlay"})]}),i.jsx("button",{type:"button",className:"show-more-btn",onClick:()=>a(!0),children:"Show more"})]})}const g5=h.memo(function({content:n}){if(typeof n=="string"){const{text:d,openedFiles:m,uploadedFiles:p}=Qv(n);return d?i.jsxs("div",{className:"user-prompt-container",children:[i.jsx("div",{className:"message message-user-prompt",children:i.jsxs("div",{className:"message-content",children:[i.jsx(Jv,{text:d}),i.jsx(Zl,{files:p})]})}),i.jsx(Hl,{files:m})]}):m.length>0||p.length>0?i.jsxs(i.Fragment,{children:[i.jsx(Zl,{files:p}),i.jsx(Hl,{files:m})]}):null}const a=n.filter(d=>d.type==="text"&&d.text).map(d=>d.text).join(`
`),{text:o,openedFiles:c,uploadedFiles:u}=Qv(a);return o?i.jsxs("div",{className:"user-prompt-container",children:[i.jsx("div",{className:"message message-user-prompt",children:i.jsxs("div",{className:"message-content",children:[i.jsx(Jv,{text:o}),i.jsx(Zl,{files:u})]})}),i.jsx(Hl,{files:c})]}):c.length>0||u.length>0?i.jsxs(i.Fragment,{children:[i.jsx(Zl,{files:u}),i.jsx(Hl,{files:c})]}):i.jsx("div",{className:"message message-user-prompt",children:i.jsx("div",{className:"message-content",children:i.jsx("div",{className:"text-block",children:"[Complex content]"})})})}),lf=h.memo(function({item:n,isStreaming:a,thinkingExpanded:o,toggleThinkingExpanded:c}){const u=h.useCallback(m=>{const p=window.getSelection();p&&p.toString().length>0||(m.ctrlKey||m.metaKey)&&(m.preventDefault(),m.stopPropagation(),console.log("[DEBUG] RenderItem:",n),console.log("[DEBUG] Source JSONL entries:",n.sourceMessages))},[n]),d=()=>{switch(n.type){case"text":return i.jsx(v3,{text:n.text,isStreaming:n.isStreaming,augmentHtml:n.augmentHtml});case"thinking":return i.jsx(b3,{thinking:n.thinking,status:n.status,isExpanded:o,onToggle:c});case"tool_call":return i.jsx(o5,{id:n.id,toolName:n.toolName,toolInput:n.toolInput,toolResult:n.toolResult,status:n.status});case"user_prompt":return i.jsx(g5,{content:n.content});case"system":return i.jsxs("div",{className:"system-message",children:[i.jsx("span",{className:"system-message-icon",children:""}),i.jsx("span",{className:"system-message-text",children:n.content})]});default:return null}};return i.jsx("div",{className:n.isSubagent?"subagent-item":void 0,"data-render-type":n.type,"data-render-id":n.id,onClick:u,children:d()})});function v5(e){const n=[];let a=[];for(const o of e)o.type==="user_prompt"?(a.length>0&&(n.push({isUserPrompt:!1,items:a}),a=[]),n.push({isUserPrompt:!0,items:[o]})):a.push(o);return a.length>0&&n.push({isUserPrompt:!1,items:a}),n}const x5=h.memo(function({messages:n,isStreaming:a=!1,isProcessing:o=!1,scrollTrigger:c=0,pendingMessages:u=[],markdownAugments:d,activeToolApproval:m}){const p=h.useRef(null),v=h.useRef(!0),x=h.useRef(!0),b=h.useRef(!1),w=h.useRef(0),_=h.useRef(null),[C,E]=h.useState(!1),N=h.useCallback(A=>{b.current=!0,A.scrollTop=A.scrollHeight-A.clientHeight,w.current=A.scrollHeight,requestAnimationFrame(()=>{b.current=!1}),_.current!==null&&clearTimeout(_.current),_.current=setTimeout(()=>{_.current=null,v.current&&(b.current=!0,A.scrollTop=A.scrollHeight-A.clientHeight,w.current=A.scrollHeight,requestAnimationFrame(()=>{b.current=!1}))},50)},[]),z=h.useMemo(()=>Bf(n,{markdown:d,activeToolApproval:m}),[n,d,m]),O=h.useMemo(()=>v5(z),[z]),U=h.useCallback(()=>{E(A=>!A)},[]),P=h.useCallback(()=>{var Z;if(b.current)return;const A=(Z=p.current)==null?void 0:Z.parentElement;if(!A)return;const D=100,I=A.scrollHeight-A.scrollTop-A.clientHeight;v.current=I<D},[]);return h.useEffect(()=>{var D;const A=(D=p.current)==null?void 0:D.parentElement;if(A)return A.addEventListener("scroll",P),()=>{A.removeEventListener("scroll",P)}},[P]),h.useEffect(()=>{var Z;const A=(Z=p.current)==null?void 0:Z.parentElement;if(!A)return;const D=A;w.current=D.scrollHeight;const I=new ResizeObserver(()=>{const re=D.scrollHeight;re>w.current&&v.current?N(D):w.current=re});return p.current&&I.observe(p.current),()=>{I.disconnect(),_.current!==null&&clearTimeout(_.current)}},[N]),h.useEffect(()=>{var A;if(c>0){v.current=!0;const D=(A=p.current)==null?void 0:A.parentElement;D&&N(D)}},[c,N]),h.useEffect(()=>{var A;if(x.current&&z.length>0){const D=(A=p.current)==null?void 0:A.parentElement;D&&N(D),x.current=!1}},[z.length,N]),i.jsxs("div",{className:"message-list",ref:p,children:[O.map(A=>{if(A.isUserPrompt){const I=A.items[0];return I?i.jsx(lf,{item:I,isStreaming:a,thinkingExpanded:C,toggleThinkingExpanded:U},I.id):null}const D=A.items[0];return D?i.jsx("div",{className:"assistant-turn",children:A.items.map(I=>i.jsx(lf,{item:I,isStreaming:a,thinkingExpanded:C,toggleThinkingExpanded:U},I.id))},`turn-${D.id}`):null}),u.map(A=>i.jsxs("div",{className:"pending-message",children:[i.jsx("div",{className:"message-user-prompt pending-message-bubble",children:A.content}),i.jsx("div",{className:"pending-message-status",children:"Sending..."})]},A.tempId)),i.jsx(h3,{isProcessing:o})]})});function y5(e){return e?e>=1e3?`${Math.round(e/1e3)}K tokens`:`${e} tokens`:"Disabled"}function b5(e){const n=new Date(e),o=new Date().getTime()-n.getTime(),c=Math.floor(o/1e3),u=Math.floor(c/60),d=Math.floor(u/60),m=Math.floor(d/24);return m>0?`${m}d ${d%24}h`:d>0?`${d}h ${u%60}m`:u>0?`${u}m ${c%60}s`:`${c}s`}function Hd(e){return new Date(e).toLocaleString()}function Kn({label:e,value:n,mono:a=!1}){return n==null?null:i.jsxs("div",{className:"process-info-row",children:[i.jsx("span",{className:"process-info-label",children:e}),i.jsx("span",{className:`process-info-value ${a?"mono":""}`,children:n})]})}function ql({title:e,children:n}){return i.jsxs("div",{className:"process-info-section",children:[i.jsx("h3",{className:"process-info-section-title",children:e}),n]})}function S5({sessionId:e,provider:n,model:a,status:o,processState:c,contextUsage:u,onClose:d}){const[m,p]=h.useState(null),[v,x]=h.useState(!1),[b,w]=h.useState(null);h.useEffect(()=>{o.state==="owned"&&(x(!0),w(null),Ke.getProcessInfo(e).then(E=>{p(E.process)}).catch(E=>{w(E.message||"Failed to fetch process info")}).finally(()=>{x(!1)}))},[e,o.state]);const _=()=>{if(o.state==="owned")switch(c){case"running":return"Running";case"idle":return"Idle";case"waiting-input":return"Waiting for input";case"hold":return"On hold";default:return c}return o.state==="external"?"External (other process)":"Idle (no process)"},C=E=>{switch(E){case"claude":return"Claude (Anthropic)";case"codex":return"Codex (OpenAI)";case"codex-oss":return"Codex OSS (Local)";case"gemini":return"Gemini (Google)";case"opencode":return"OpenCode";default:return E}};return i.jsx(bs,{title:"Session Info",onClose:d,children:i.jsxs("div",{className:"process-info-content",children:[i.jsxs(ql,{title:"Session",children:[i.jsx(Kn,{label:"Session ID",value:e,mono:!0}),i.jsx(Kn,{label:"Provider",value:C(n)}),i.jsx(Kn,{label:"Model",value:a||"Default",mono:!0}),i.jsx(Kn,{label:"Status",value:_()})]}),u&&i.jsxs(ql,{title:"Token Usage",children:[i.jsx(Kn,{label:"Input tokens",value:u.inputTokens.toLocaleString()}),u.outputTokens!==void 0&&i.jsx(Kn,{label:"Output tokens",value:u.outputTokens.toLocaleString()}),i.jsx(Kn,{label:"Context used",value:`${u.percentage.toFixed(1)}%`}),u.cacheReadTokens!==void 0&&i.jsx(Kn,{label:"Cache read",value:u.cacheReadTokens.toLocaleString()}),u.cacheCreationTokens!==void 0&&i.jsx(Kn,{label:"Cache created",value:u.cacheCreationTokens.toLocaleString()})]}),i.jsx(ql,{title:"Process",children:o.state==="owned"?i.jsxs(i.Fragment,{children:[v&&i.jsx("div",{className:"process-info-loading",children:"Loading..."}),b&&i.jsx("div",{className:"process-info-error",children:b}),m&&i.jsxs(i.Fragment,{children:[i.jsx(Kn,{label:"Process ID",value:m.id,mono:!0}),i.jsx(Kn,{label:"Started",value:Hd(m.startedAt)}),i.jsx(Kn,{label:"Uptime",value:b5(m.startedAt)}),i.jsx(Kn,{label:"Queue depth",value:m.queueDepth}),i.jsx(Kn,{label:"Extended thinking",value:y5(m.maxThinkingTokens)}),m.idleSince&&i.jsx(Kn,{label:"Idle since",value:Hd(m.idleSince)}),m.holdSince&&i.jsx(Kn,{label:"Hold since",value:Hd(m.holdSince)})]}),!v&&!m&&!b&&i.jsx("div",{className:"process-info-loading",children:"No process data"})]}):o.state==="external"?i.jsx("div",{className:"process-info-muted",children:"Session controlled by external process (VS Code, CLI)"}):i.jsx("div",{className:"process-info-muted",children:"No active process"})}),m&&i.jsxs(ql,{title:"Project",children:[i.jsx(Kn,{label:"Name",value:m.projectName}),i.jsx(Kn,{label:"Path",value:m.projectPath,mono:!0})]})]})})}const j5={claude:"var(--provider-claude)",codex:"var(--provider-codex)","codex-oss":"var(--provider-codex)",gemini:"var(--provider-gemini)",opencode:"var(--provider-opencode)"},w5={claude:"Claude",codex:"Codex","codex-oss":"CodexOSS",gemini:"Gemini",opencode:"OpenCode"};function N5({provider:e,compact:n=!1,model:a,isThinking:o=!1,className:c=""}){const u=j5[e],d=w5[e],p=(b=>{if(!b||b==="default")return null;const w=Gd.find(C=>C.value===b);if(w&&w.value!=="default")return w.label;const _=b.match(/claude-(\w+)-/);if(_!=null&&_[1]){const C=_[1],E=Gd.find(N=>N.value===C);return E?E.label:C.charAt(0).toUpperCase()+C.slice(1)}return b.charAt(0).toUpperCase()+b.slice(1)})(a);if(n)return i.jsx("span",{className:`provider-badge-stripe ${c}`,style:{backgroundColor:u},title:p?`${d} (${p})`:d,"aria-label":`Provider: ${d}${p?` (${p})`:""}`});const v=o?"provider-badge-dot-inline thinking":"provider-badge-dot-inline",x=o?{backgroundColor:"var(--thinking-color)"}:{backgroundColor:u};return i.jsxs("span",{className:`provider-badge ${c}`,style:{borderColor:u,color:u},children:[i.jsx("span",{className:v,style:x}),i.jsx("span",{className:"provider-badge-label",children:d}),p&&i.jsx("span",{className:"provider-badge-model",children:p})]})}const py="draft-tool-prompt-";function E5(e){const n=`${py}${e}-toolApprovalFeedback`,[a,o]=h.useState(()=>{try{return localStorage.getItem(n)??""}catch{return""}}),c=h.useCallback(d=>{o(d);try{d?localStorage.setItem(n,d):localStorage.removeItem(n)}catch{}},[n]),u=h.useCallback(()=>{o("");try{localStorage.removeItem(n)}catch{}},[n]);return[a,c,u]}function _5(e){const n=`${py}${e}-questionOther`,[a,o]=h.useState(()=>{try{const d=localStorage.getItem(n);return d?JSON.parse(d):{}}catch{return{}}}),c=h.useCallback((d,m)=>{o(p=>{const v={...p};m?v[d]=m:delete v[d];try{Object.keys(v).length>0?localStorage.setItem(n,JSON.stringify(v)):localStorage.removeItem(n)}catch{}return v})},[n]),u=h.useCallback(()=>{o({});try{localStorage.removeItem(n)}catch{}},[n]);return[a,c,u]}function C5({request:e,sessionId:n,onSubmit:a,onDeny:o}){const c=e.toolInput,u=(c==null?void 0:c.questions)||[],[d,m]=h.useState(0),[p,v]=h.useState({}),[x,b,w]=_5(n),[_,C]=h.useState(!1),[E,N]=h.useState(!1),z=h.useRef(null),O=u[d],U=d===u.length-1,P=O?p[O.question]:void 0,A=P==="__other__",D=u.every(se=>{const le=p[se.question];return le?le==="__other__"?(x[se.question]||"").trim().length>0:!0:!1});h.useEffect(()=>{A&&z.current&&(z.current.focus(),setTimeout(()=>{var se;(se=z.current)==null||se.scrollIntoView({behavior:"smooth",block:"center"})},100))},[A]);const I=h.useCallback(se=>{O&&v(le=>({...le,[O.question]:se}))},[O]),Z=h.useCallback(se=>{O&&b(O.question,se)},[O,b]),re=h.useCallback(()=>{U||m(se=>se+1)},[U]),_e=h.useCallback(async()=>{if(!D||_)return;const se={};for(const le of u){const me=p[le.question];me==="__other__"?se[le.question]=x[le.question]||"":me&&(se[le.question]=me)}C(!0);try{await a(se),w()}finally{C(!1)}},[D,_,u,p,x,a,w]),Te=h.useCallback(async()=>{C(!0);try{await o()}finally{C(!1)}},[o]);return h.useEffect(()=>{const se=le=>{if(!_){if(le.key==="Escape"){le.preventDefault(),Te();return}if(le.key==="Enter"&&!le.shiftKey){const me=P&&P!=="__other__",Re=P==="__other__"&&(x[(O==null?void 0:O.question)||""]||"").trim().length>0;(me||Re)&&(le.preventDefault(),U&&D?_e():re())}le.key==="Tab"&&!A&&(le.preventDefault(),le.shiftKey?m(me=>Math.max(0,me-1)):m(me=>Math.min(u.length-1,me+1)))}};return window.addEventListener("keydown",se),()=>window.removeEventListener("keydown",se)},[_,P,O,x,U,D,A,u.length,Te,_e,re]),u.length?i.jsxs("div",{className:"question-panel-wrapper",children:[i.jsx("button",{type:"button",className:"question-panel-toggle",onClick:()=>N(!E),"aria-label":E?"Expand question panel":"Collapse question panel","aria-expanded":!E,children:i.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:E?"chevron-up":"chevron-down","aria-hidden":"true",children:i.jsx("polyline",{points:"6 9 12 15 18 9"})})}),!E&&i.jsxs("div",{className:"question-panel",children:[i.jsx("div",{className:"question-tabs",children:u.map((se,le)=>{const me=le===d,Re=!!p[se.question];return i.jsxs("button",{type:"button",className:`question-tab ${me?"active":""} ${Re?"answered":""}`,onClick:()=>m(le),children:[Re&&i.jsx("span",{className:"question-tab-check",children:""}),se.header]},se.question)})}),O&&i.jsxs("div",{className:"question-content",children:[i.jsx("div",{className:"question-text",children:O.question}),i.jsxs("div",{className:"question-options-list",children:[O.options.map(se=>{const le=P===se.label;return i.jsxs("button",{type:"button",className:`question-option-btn ${le?"selected":""}`,onClick:()=>I(se.label),children:[i.jsx("span",{className:"question-option-radio",children:O.multiSelect?le?"":"":le?"":""}),i.jsxs("div",{className:"question-option-text",children:[i.jsx("span",{className:"question-option-label",children:se.label}),se.description&&i.jsx("span",{className:"question-option-desc",children:se.description})]})]},se.label)}),i.jsxs("button",{type:"button",className:`question-option-btn other ${A?"selected":""}`,onClick:()=>I("__other__"),children:[i.jsx("span",{className:"question-option-radio",children:A?"":""}),i.jsx("div",{className:"question-option-text",children:i.jsx("span",{className:"question-option-label",children:"Other"})})]}),A&&i.jsx("div",{className:"question-other-input",children:i.jsx("input",{ref:z,type:"text",placeholder:"Type your answer...",value:x[O.question]||"",onChange:se=>Z(se.target.value)})})]})]}),i.jsxs("div",{className:"question-actions",children:[i.jsxs("button",{type:"button",className:"question-btn deny",onClick:Te,disabled:_,children:["Cancel",i.jsx("kbd",{children:"esc"})]}),U?i.jsxs("button",{type:"button",className:"question-btn submit",onClick:_e,disabled:!D||_,children:["Submit",i.jsx("kbd",{children:""})]}):i.jsxs("button",{type:"button",className:"question-btn next",onClick:re,disabled:!P||_,children:["Next",i.jsx("kbd",{children:""})]})]})]})]}):i.jsx("div",{className:"question-panel-wrapper",children:i.jsx("div",{className:"question-panel",children:i.jsx("div",{className:"question-panel-empty",children:"No questions to answer"})})})}const e0=10;function T5(e){const n=Date.now(),a=new Date(e).getTime(),o=n-a,c=Math.floor(o/6e4),u=Math.floor(o/36e5),d=Math.floor(o/864e5);return c<1?"now":c<60?`${c}m`:u<24?`${u}h`:d<7?`${d}d`:new Date(e).toLocaleDateString(void 0,{month:"short",day:"numeric"})}function k5(e){return e.customTitle||e.title||"Untitled"}function R5({session:e}){if(e.processState==="running")return i.jsx(br,{});if(e.pendingInputType){const a=e.pendingInputType==="tool-approval"?"Appr":"Q";return i.jsx("span",{className:"recent-sessions-badge needs-input",children:a})}return e.status.state==="external"?i.jsx("span",{className:"recent-sessions-badge external",children:"Ext"}):null}function A5({currentSessionId:e,isOpen:n,onClose:a,onNavigate:o,triggerRef:c}){var b;const u=h.useRef(null),{sessions:d}=Jl({limit:e0+5}),m=d.filter(w=>w.id!==e&&!w.isArchived).slice(0,e0);if(h.useEffect(()=>{if(!n)return;const w=C=>{const E=C.target;u.current&&!u.current.contains(E)&&c.current&&!c.current.contains(E)&&a()},_=C=>{C.key==="Escape"&&a()};return document.addEventListener("mousedown",w),document.addEventListener("keydown",_),()=>{document.removeEventListener("mousedown",w),document.removeEventListener("keydown",_)}},[n,a,c]),h.useEffect(()=>{if(!n)return;const w=()=>a();return window.addEventListener("scroll",w,{passive:!0}),()=>window.removeEventListener("scroll",w)},[n,a]),!n)return null;const p=(b=c.current)==null?void 0:b.getBoundingClientRect(),v=p?{position:"fixed",top:p.bottom+4,left:Math.max(8,p.left-100),width:"min(830px, calc(100vw - 32px))"}:{},x=i.jsxs("div",{ref:u,className:"recent-sessions-dropdown",style:v,children:[i.jsx("div",{className:"recent-sessions-header",children:"Recent Sessions"}),m.length===0?i.jsx("div",{className:"recent-sessions-empty",children:"No other sessions"}):i.jsx("div",{className:"recent-sessions-list",children:m.map(w=>i.jsxs($s,{to:`/projects/${w.projectId}/sessions/${w.id}`,className:`recent-session-item${w.hasUnread?" unread":""}`,onClick:()=>{o(w.id,w.projectId),a()},children:[i.jsxs("div",{className:"recent-session-content",children:[i.jsxs("span",{className:"recent-session-title",children:[w.isStarred&&i.jsx("svg",{className:"recent-session-star",width:"10",height:"10",viewBox:"0 0 24 24",fill:"currentColor",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",children:i.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})}),i.jsx("span",{className:"recent-session-title-text",children:k5(w)})]}),i.jsx("span",{className:"recent-session-project",children:w.projectName})]}),i.jsxs("div",{className:"recent-session-meta",children:[i.jsx(R5,{session:w}),i.jsx("span",{className:"recent-session-time",children:T5(w.updatedAt)})]})]},w.id))})]});return di.createPortal(x,document.body)}const M5=["Edit","Write","NotebookEdit"],Zd=e=>e==="ExitPlanMode";function O5({request:e,sessionId:n,onApprove:a,onDeny:o,onApproveAcceptEdits:c,onDenyWithFeedback:u,collapsed:d=!1,onCollapsedChange:m}){const[p,v]=h.useState(!1),[x,b,w]=E5(n),[_,C]=h.useState(()=>x.length>0),E=h.useRef(null),N=e.toolName&&M5.includes(e.toolName),z=h.useCallback(async()=>{v(!0);try{await a()}finally{v(!1)}},[a]),O=h.useCallback(async()=>{if(c){v(!0);try{await c()}finally{v(!1)}}},[c]),U=h.useCallback(async()=>{v(!0);try{await o()}finally{v(!1)}},[o]),P=h.useCallback(async()=>{if(!(!u||!x.trim())){v(!0);try{await u(x.trim()),w(),C(!1)}finally{v(!1)}}},[u,x,w]);h.useEffect(()=>{_&&E.current&&E.current.focus()},[_]),h.useEffect(()=>{const D=I=>{if(p)return;if(_){I.key==="Escape"?(I.preventDefault(),C(!1),w()):I.key==="Enter"&&x.trim()&&(I.preventDefault(),P());return}Zd(e.toolName)?I.key==="1"&&c?(I.preventDefault(),O()):I.key==="2"?(I.preventDefault(),z()):I.key==="3"?(I.preventDefault(),U()):I.key==="Enter"&&!I.shiftKey&&c?(I.preventDefault(),O()):I.key==="Escape"&&(I.preventDefault(),U()):I.key==="1"?(I.preventDefault(),z()):I.key==="2"&&N&&c?(I.preventDefault(),O()):I.key==="3"||I.key==="2"&&(!N||!c)?(I.preventDefault(),U()):I.key==="Enter"&&!I.shiftKey?(I.preventDefault(),z()):I.key==="Escape"&&(I.preventDefault(),U())};return window.addEventListener("keydown",D),()=>window.removeEventListener("keydown",D)},[z,O,U,P,p,_,x,w,N,c,e.toolName]);const A=e.toolName?my(e.toolName,e.toolInput,void 0,"pending"):e.prompt;return i.jsxs("div",{className:"tool-approval-wrapper",children:[i.jsx("button",{type:"button",className:`tool-approval-toggle ${d?"has-pending":""}`,onClick:()=>m==null?void 0:m(!d),"aria-label":d?"Expand approval panel":"Collapse approval panel","aria-expanded":!d,children:i.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:d?"chevron-up":"chevron-down","aria-hidden":"true",children:i.jsx("polyline",{points:"6 9 12 15 18 9"})})}),!d&&i.jsxs("div",{className:"tool-approval-panel",children:[i.jsx("div",{className:"tool-approval-header",children:Zd(e.toolName)?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"tool-approval-title",children:"Accept this plan?"}),i.jsx("span",{className:"tool-approval-subtitle",children:"Review the plan above and decide whether to proceed"})]}):i.jsxs("span",{className:"tool-approval-question",children:["Allow"," ",i.jsx("span",{className:"tool-approval-name",children:e.toolName})," ",A,"?"]})}),i.jsxs("div",{className:"tool-approval-options",children:[Zd(e.toolName)?i.jsxs(i.Fragment,{children:[i.jsxs("button",{type:"button",className:"tool-approval-option primary",onClick:O,disabled:p||!c,children:[i.jsx("kbd",{children:"1"}),i.jsx("span",{children:"Yes, and auto-accept"})]}),i.jsxs("button",{type:"button",className:"tool-approval-option",onClick:z,disabled:p,children:[i.jsx("kbd",{children:"2"}),i.jsx("span",{children:"Yes, and manually approve edits"})]}),i.jsxs("button",{type:"button",className:"tool-approval-option",onClick:U,disabled:p,children:[i.jsx("kbd",{children:"3"}),i.jsx("span",{children:"No, keep planning"})]})]}):i.jsxs(i.Fragment,{children:[i.jsxs("button",{type:"button",className:"tool-approval-option primary",onClick:z,disabled:p,children:[i.jsx("kbd",{children:"1"}),i.jsx("span",{children:"Yes"})]}),N&&c&&i.jsxs("button",{type:"button",className:"tool-approval-option",onClick:O,disabled:p,children:[i.jsx("kbd",{children:"2"}),i.jsx("span",{children:"Yes, and don't ask again"})]}),i.jsxs("button",{type:"button",className:"tool-approval-option",onClick:U,disabled:p,children:[i.jsx("kbd",{children:N&&c?"3":"2"}),i.jsx("span",{children:"No"})]})]}),u&&!_&&i.jsx("button",{type:"button",className:"tool-approval-option feedback-toggle",onClick:()=>C(!0),disabled:p,children:i.jsx("span",{children:"Tell Claude what to do instead"})}),u&&_&&i.jsxs("div",{className:"tool-approval-feedback",children:[i.jsx("input",{ref:E,type:"text",placeholder:"Tell Claude what to do instead...",value:x,onChange:D=>b(D.target.value),disabled:p,className:"tool-approval-feedback-input"}),i.jsx("button",{type:"button",className:"tool-approval-feedback-submit",onClick:P,disabled:p||!x.trim(),children:"Send"})]})]})]})]})}const z5=3e4,t0=2e3;function U5(e){const{sessionId:n,activityAt:a,updatedAt:o,lastSeenAt:c,hasUnread:u=!1,enabled:d=!0}=e,m=h.useRef(Date.now()),p=h.useRef(null),v=h.useRef(null),x=h.useRef(!0),b=h.useRef(!0),w=h.useCallback(()=>a?c?a>c||u:!0:!1,[a,c,u]),_=h.useCallback(()=>{const N=document.hasFocus(),z=Date.now()-m.current<z5;return N&&z},[]),C=h.useCallback(()=>{!d||!x.current||!a||!o||p.current!==a&&_()&&w()&&(v.current&&clearTimeout(v.current),v.current=setTimeout(async()=>{if(x.current)try{await Ke.markSessionSeen(n,o),p.current=a}catch(N){console.warn("[useEngagementTracking] Failed to mark session as seen:",N)}},t0))},[d,n,a,o,_,w]);return h.useEffect(()=>{if(!d)return;const N=()=>{m.current=Date.now(),w()&&_()&&C()},z=["mousemove","keydown","scroll","click","touchstart"];for(const O of z)window.addEventListener(O,N,{passive:!0});return()=>{for(const O of z)window.removeEventListener(O,N)}},[d,w,_,C]),h.useEffect(()=>{if(!d)return;const N=()=>{document.visibilityState==="visible"&&w()&&_()&&C()},z=()=>{m.current=Date.now(),w()&&_()&&C()};return document.addEventListener("visibilitychange",N),window.addEventListener("focus",z),()=>{document.removeEventListener("visibilitychange",N),window.removeEventListener("focus",z)}},[d,w,_,C]),h.useEffect(()=>{d&&(!a||!o||b.current&&(b.current=!1,w()&&(v.current&&clearTimeout(v.current),v.current=setTimeout(async()=>{if(x.current&&p.current!==a)try{await Ke.markSessionSeen(n,o),p.current=a}catch(N){console.warn("[useEngagementTracking] Failed to mark session as seen:",N)}},t0))))},[d,n,a,o,w]),h.useEffect(()=>(x.current=!0,()=>{x.current=!1,v.current&&clearTimeout(v.current)}),[]),{forceMarkSeen:h.useCallback(async()=>{if(!(!d||!o))try{await Ke.markSessionSeen(n,o),p.current=a}catch(N){console.warn("[useEngagementTracking] Failed to force mark session as seen:",N)}},[d,n,a,o]),isEngaged:_}}function L5(e,n){Ke.recordVisit(e,n).catch(a=>{console.error("Failed to record session visit:",a)})}function D5(e){var o;const n=new Map,a=new Set;for(const c of e){const u=((o=c.message)==null?void 0:o.content)??c.content;if(Array.isArray(u))for(const d of u){if(d.type==="tool_use"&&d.name==="Task"&&typeof d.id=="string"){const m=d.input;n.set(d.id,{description:(m==null?void 0:m.description)??"Unknown task",subagentType:(m==null?void 0:m.subagent_type)??"unknown"})}d.type==="tool_result"&&typeof d.tool_use_id=="string"&&a.add(d.tool_use_id)}}return[...n.entries()].filter(([c])=>!a.has(c)).map(([c,{description:u,subagentType:d}])=>({toolUseId:c,description:u,subagentType:d}))}function B5(e){const n=e.relativePath.split(/[\\/]/).pop();if(!n)return null;let a=n;if(a.endsWith(".jsonl")?a=a.slice(0,-6):a.endsWith(".json")&&(a=a.slice(0,-5)),e.provider==="codex"){const o=a.match(/([0-9a-fA-F-]{36})$/);if(o)return o[1]??null}return a}function $5(e){const n=e.match(/\/api\/sessions\/([^/]+)\/stream/);return(n==null?void 0:n[1])??null}function I5(e,n){const[a,o]=h.useState(!1),c=h.useRef(null),u=h.useRef(null),d=h.useRef(null),m=h.useRef(null),p=h.useRef(n);p.current=n;const v=h.useRef(null),x=h.useRef(!1),b=h.useCallback(()=>{if(!e){v.current=null;return}if(c.current||u.current||v.current===e)return;v.current=e;const C=jf(),E=$5(e);C&&E?(x.current=!0,w(E)):(x.current=!1,_(e))},[e]),w=h.useCallback(C=>{u.current&&(u.current.close(),u.current=null);const E=jo(),N={onEvent:(z,O,U)=>{O&&(d.current=O),p.current.onMessage({...U,eventType:z})},onOpen:()=>{var z,O;o(!0),(O=(z=p.current).onOpen)==null||O.call(z)},onError:z=>{var O,U,P;o(!1),(U=(O=p.current).onError)==null||U.call(O,new Event("error")),(P=u.current)==null||P.close(),u.current=null,v.current=null,m.current=setTimeout(b,2e3)}};u.current=E.subscribeSession(C,N,d.current??void 0)},[b]),_=h.useCallback(C=>{const E=d.current?`${C}?lastEventId=${d.current}`:C,N=new EventSource(E);N.onopen=()=>{var O,U;o(!0),(U=(O=p.current).onOpen)==null||U.call(O)};const z=O=>U=>{if(U.lastEventId&&(d.current=U.lastEventId),!(U.data===void 0||U.data===null))try{const P=JSON.parse(U.data);p.current.onMessage({...P,eventType:O})}catch{}};N.addEventListener("connected",z("connected")),N.addEventListener("message",z("message")),N.addEventListener("status",z("status")),N.addEventListener("mode-change",z("mode-change")),N.addEventListener("error",z("error")),N.addEventListener("complete",z("complete")),N.addEventListener("heartbeat",z("heartbeat")),N.addEventListener("markdown-augment",z("markdown-augment")),N.addEventListener("pending",z("pending")),N.addEventListener("edit-augment",z("edit-augment")),N.addEventListener("claude-login",z("claude-login")),N.addEventListener("session-id-changed",z("session-id-changed")),N.onerror=O=>{var U,P;o(!1),(P=(U=p.current).onError)==null||P.call(U,O),N.close(),c.current=null,v.current=null,m.current=setTimeout(b,2e3)},c.current=N},[b]);return h.useEffect(()=>(b(),()=>{var C,E;m.current&&(clearTimeout(m.current),m.current=null),(C=c.current)==null||C.close(),c.current=null,(E=u.current)==null||E.close(),u.current=null,v.current=null}),[b]),{connected:a}}function P5(e){const{projectId:n,sessionId:a,onLoadComplete:o,onLoadError:c}=e,[u,d]=h.useState([]),[m,p]=h.useState({}),[v,x]=h.useState(()=>new Map),[b,w]=h.useState(!0),[_,C]=h.useState(null),E=h.useRef([]),N=h.useRef(!1),z=h.useRef(void 0),O=h.useRef(void 0);h.useEffect(()=>{const se=u[u.length-1];se&&(O.current=ss(se))},[u]);const U=h.useCallback(se=>{d(le=>OT(le,se).messages)},[]),P=h.useCallback((se,le)=>{p(me=>{const Re=me[le]??{messages:[],status:"running"},L=ss(se);return Re.messages.some(F=>ss(F)===L)?me:{...me,[le]:{...Re,messages:[...Re.messages,se],status:"running"}}})},[]),A=h.useCallback(()=>{const se=E.current;E.current=[];for(const le of se)le.type==="message"?U(le.msg):P(le.msg,le.agentId)},[U,P]);h.useEffect(()=>{N.current=!1,E.current=[],w(!0),p({}),Ke.getSession(n,a).then(se=>{C(se.session),z.current=se.session.provider;const le=se.messages.map(me=>({...me,_source:"jsonl"}));d(le),N.current=!0,A(),w(!1),o==null||o({session:se.session,status:se.status,pendingInputRequest:se.pendingInputRequest})}).catch(se=>{w(!1),c==null||c(se)})},[n,a,o,c,A]);const D=h.useCallback((se,le)=>{const me=ss(se);if(me){if(le){p(Re=>{const L=Re[le]??{messages:[],status:"running"},F=L.messages.findIndex(G=>ss(G)===me);if(F>=0){const G=[...L.messages];return G[F]=se,{...Re,[le]:{...L,messages:G}}}return{...Re,[le]:{...L,messages:[...L.messages,se]}}});return}d(Re=>{const L=Re.findIndex(F=>ss(F)===me);if(L>=0){const F=[...Re];return F[L]=se,F}return[...Re,se]})}},[]),I=h.useCallback(se=>{if(!N.current){E.current.push({type:"message",msg:se});return}U(se)},[U]),Z=h.useCallback((se,le)=>{if(!N.current){E.current.push({type:"subagent",msg:se,agentId:le});return}P(se,le)},[P]),re=h.useCallback((se,le)=>{x(me=>{if(me.has(se))return me;const Re=new Map(me);return Re.set(se,le),Re})},[]),_e=h.useCallback(async()=>{try{const se=await Ke.getSession(n,a,O.current);se.messages.length>0&&d(le=>MT(le,se.messages,{skipDagOrdering:!Vx(se.session.provider).capabilities.supportsDag}).messages),C(le=>le?{...le,...se.session,messages:le.messages}:se.session)}catch{}},[n,a]),Te=h.useCallback(async()=>{try{const se=await Ke.getSessionMetadata(n,a);C(le=>le?{...le,...se.session,messages:le.messages}:{...se.session,messages:[]})}catch{}},[n,a]);return{messages:u,agentContent:m,toolUseToAgent:v,loading:b,session:_,setSession:C,handleStreamingUpdate:D,handleSSEMessageEvent:I,handleSSESubagentMessage:Z,registerToolUseAgent:re,setAgentContent:p,setToolUseToAgent:x,setMessages:d,fetchNewMessages:_e,fetchSessionMetadata:Te}}const gy="yep-anywhere-streaming-enabled";function vy(){const e=localStorage.getItem(gy);return e===null?!0:e==="true"}function H5(e){localStorage.setItem(gy,String(e))}function Z5(){const[e,n]=h.useState(vy),a=h.useCallback(o=>{n(o),H5(o)},[]);return{streamingEnabled:e,setStreamingEnabled:a}}function q5(){return vy()}const V5=50;function F5(e){const{onUpdateMessage:n,streamingMarkdownCallbacks:a,onToolUseMapping:o,onAgentContextUsage:c}=e,u=h.useRef(new Map),d=h.useRef(null),m=h.useRef(null),p=h.useRef({timer:null,pendingIds:new Set}),v=h.useCallback(E=>{const N=u.current.get(E);if(!N)return;const z={id:E,type:"assistant",role:"assistant",message:{role:"assistant",content:N.blocks},_isStreaming:!0,_source:"sdk"};n(z,N.agentId)},[n]),x=h.useCallback(E=>{const N=p.current;N.pendingIds.add(E),N.timer||(N.timer=setTimeout(()=>{for(const z of N.pendingIds)v(z);N.pendingIds.clear(),N.timer=null},V5))},[v]),b=h.useCallback(E=>{var I,Z;if(E.type!=="stream_event"||!q5())return!1;const z=E.event;if(!z)return!0;const O=z.type,P=E.isSubagent&&typeof E.parentToolUseId=="string"?E.parentToolUseId:void 0;if(P&&o&&o(P,P),O==="message_start"){const re=z.message;if(re!=null&&re.id&&(d.current=re.id,m.current=P??null,(I=a==null?void 0:a.setCurrentMessageId)==null||I.call(a,re.id),P&&c)){const _e=re.usage;if(_e!=null&&_e.input_tokens){const Te=_e.input_tokens,se=Te/2e5*100;c(P,{inputTokens:Te,percentage:se})}}return!0}const A=d.current??`stream-${Date.now()}`,D=m.current??P;if(O==="content_block_start"){const re=z.index,_e=z.content_block;if(_e){const Te=u.current.get(A)??{blocks:[],isStreaming:!0,agentId:D};for(;Te.blocks.length<=re;)Te.blocks.push({type:"text",text:""});Te.blocks[re]={type:_e.type??"text",text:_e.text??"",thinking:_e.thinking??void 0},u.current.set(A,Te),v(A)}}else if(O==="content_block_delta"){const re=z.index,_e=z.delta;if(_e){const Te=u.current.get(A);if(Te!=null&&Te.blocks[re]){const se=Te.blocks[re],le=_e.type;le==="text_delta"&&_e.text?se.text=(se.text??"")+_e.text:le==="thinking_delta"&&_e.thinking&&(se.thinking=(se.thinking??"")+_e.thinking),x(A)}}}else O==="content_block_stop"||O==="message_stop"&&(u.current.delete(A),(Z=a==null?void 0:a.onStreamEnd)==null||Z.call(a));return!0},[v,x,a,o,c]),w=h.useCallback(()=>{u.current.clear(),d.current=null,m.current=null},[]),_=h.useCallback(()=>m.current,[]),C=h.useCallback(()=>{p.current.timer&&(clearTimeout(p.current.timer),p.current.timer=null)},[]);return{handleStreamEvent:b,clearStreaming:w,cleanup:C,getCurrentAgentId:_}}const G5=500;function Y5(e,n,a,o){const[c,u]=h.useState(a??{state:"idle"}),[d,m]=h.useState(a?"running":"idle"),[p,v]=h.useState(null),[x,b]=h.useState(null),[w,_]=h.useState(n),[C,E]=h.useState(null),[N,z]=h.useState([]),[O,U]=h.useState({}),[P,A]=h.useState("default"),[D,I]=h.useState("default"),[Z,re]=h.useState(0),[_e,Te]=h.useState([]),se=h.useRef(0),le=P!==D,me=h.useCallback((Ce,rt)=>{rt>=se.current&&(se.current=rt,I(Ce),A(Ce),re(rt))},[]),Re=h.useCallback(Ce=>{u(rt=>rt.state==="owned"&&Ce.status.state!=="owned"?rt:Ce.status),Ce.status.state==="owned"&&Ce.status.permissionMode&&Ce.status.modeVersion!==void 0&&me(Ce.status.permissionMode,Ce.status.modeVersion),Ce.pendingInputRequest&&v(Ce.pendingInputRequest)},[me]),L=h.useCallback(Ce=>{b(Ce)},[]),{messages:F,agentContent:G,toolUseToAgent:we,loading:Me,session:B,setSession:ie,handleStreamingUpdate:X,handleSSEMessageEvent:Se,handleSSESubagentMessage:pe,registerToolUseAgent:He,setAgentContent:et,setToolUseToAgent:Oe,setMessages:Ze,fetchNewMessages:Fe}=P5({projectId:e,sessionId:n,onLoadComplete:Re,onLoadError:L}),lt=h.useCallback(async Ce=>{if(A(Ce),c.state==="owned"||c.state==="external")try{const rt=await Ke.setPermissionMode(n,Ce);rt.modeVersion>=se.current&&(se.current=rt.modeVersion,I(rt.permissionMode),re(rt.modeVersion))}catch(rt){console.warn("Failed to sync permission mode:",rt)}},[n,c.state]),Xt=h.useCallback(async Ce=>{if(c.state!=="owned"&&c.state!=="external"){console.warn("Cannot set hold: no active process");return}try{const rt=await Ke.setHold(n,Ce);rt.state==="hold"?m("hold"):rt.state==="running"&&m("running")}catch(rt){console.warn("Failed to set hold:",rt)}},[n,c.state]),qt=h.useRef({timer:null,pending:!1}),Qt=h.useCallback(Ce=>{const rt=`temp-${Date.now()}`;return z(Vt=>[...Vt,{tempId:rt,content:Ce,timestamp:new Date().toISOString()}]),rt},[]),bn=h.useCallback(Ce=>{z(rt=>rt.filter(Vt=>Vt.tempId!==Ce))},[]),Gt=h.useRef(null);h.useEffect(()=>{if(Me||Gt.current===n||F.length===0)return;(async()=>{Gt.current=n;const rt=D5(F);if(rt.length!==0)try{const{mappings:Vt}=await Ke.getAgentMappings(e,n),sn=new Map(Vt.map(Ue=>[Ue.toolUseId,Ue.agentId]));Oe(Ue=>{const Rt=new Map(Ue);for(const[At,Ht]of sn)Rt.has(At)||Rt.set(At,Ht);return Rt});for(const Ue of rt){const Rt=sn.get(Ue.toolUseId);if(Rt)try{const At=await Ke.getAgentSession(e,n,Rt);et(Ht=>{const mt=Ht[Rt];if(mt&&mt.messages.length>0){const is=new Set(mt.messages.map(jn=>ss(jn))),Sn=At.messages.filter(jn=>!is.has(ss(jn)));return{...Ht,[Rt]:{messages:[...mt.messages,...Sn],status:At.status}}}return{...Ht,[Rt]:At}})}catch{}}}catch{}})()},[Me,F,e,n,et,Oe]);const pn=h.useCallback(()=>{const Ce=qt.current;Ce.timer?Ce.pending=!0:(Fe(),Ce.timer=setTimeout(()=>{Ce.timer=null,Ce.pending&&(Ce.pending=!1,pn())},G5))},[Fe]),V=h.useCallback(Ce=>{Ce.fileType!=="session"&&Ce.fileType!=="agent-session"||B5(Ce)!==n||c.state!=="owned"&&pn()},[n,c.state,pn]),he=h.useCallback(Ce=>{Ce.sessionId===n&&ie(rt=>rt&&{...rt,...Ce.title!==void 0&&{title:Ce.title},...Ce.messageCount!==void 0&&{messageCount:Ce.messageCount},...Ce.updatedAt!==void 0&&{updatedAt:Ce.updatedAt}})},[n,ie]),Ge=h.useCallback(Ce=>{Ce.sessionId===n&&u(Ce.status)},[n]);pi({onSessionStatusChange:Ge,onFileChange:V,onSessionUpdated:he}),h.useEffect(()=>()=>{qt.current.timer&&clearTimeout(qt.current.timer)},[]);const tt=h.useCallback((Ce,rt)=>{et(Vt=>{const sn=Vt[Ce]??{messages:[],status:"running"};return{...Vt,[Ce]:{...sn,contextUsage:rt}}})},[et]),{handleStreamEvent:Tt,clearStreaming:bt,cleanup:Ct}=F5({onUpdateMessage:X,onToolUseMapping:He,onAgentContextUsage:tt,streamingMarkdownCallbacks:o});h.useEffect(()=>()=>{Ct()},[Ct]);const Mn=h.useCallback(Ce=>{var rt,Vt,sn;if(Ce.eventType==="message"){E(new Date().toISOString());const Ue=Ce,Rt=Ue.uuid,At=Ue.id,Ht=(typeof Rt=="string"?Rt:null)??(typeof At=="string"?At:null)??`msg-${Date.now()}`,mt=typeof Ue.type=="string"?Ue.type:void 0,is=Ue.role;if(mt==="stream_event"&&Tt(Ue))return;if(mt==="assistant"){const Qn=Ue.isSubagent&&typeof Ue.parentToolUseId=="string"?Ue.parentToolUseId:void 0;bt(),Qn?et(wn=>{const kn=wn[Qn];if(!kn)return wn;const Nn=kn.messages.filter(Pn=>!Pn._isStreaming);return Nn.length===kn.messages.length?wn:{...wn,[Qn]:{...kn,messages:Nn}}}):Ze(wn=>wn.filter(kn=>!kn._isStreaming))}const Sn={...Ue,id:Ht,type:mt,role:is??(mt==="user"||mt==="assistant"?mt:void 0)};Sn.eventType=void 0,mt==="system"&&Ue.subtype==="init"&&Array.isArray(Ue.slash_commands)&&Te(Ue.slash_commands);const jn=Ue.tempId;if(mt==="user"&&jn&&bn(jn),Ue.isSubagent&&typeof Ue.parentToolUseId=="string"){const On=Ue.parentToolUseId;He(On,On),pe(Sn,On);return}Se(Sn)}else if(Ce.eventType==="status"){const Ue=Ce;(Ue.state==="idle"||Ue.state==="running"||Ue.state==="waiting-input"||Ue.state==="hold")&&m(Ue.state),Ue.state==="waiting-input"&&Ue.request?(v(Ue.request),Ue.request.sessionId&&Ue.request.sessionId!==n&&_(Ue.request.sessionId)):v(null)}else if(Ce.eventType==="complete")m("idle"),u({state:"idle"}),v(null);else if(Ce.eventType==="connected"){const Ue=Ce,Rt=Ue.sessionId??((rt=Ue.request)==null?void 0:rt.sessionId);Rt&&Rt!==n&&_(Rt),(Ue.state==="idle"||Ue.state==="running"||Ue.state==="waiting-input"||Ue.state==="hold")&&m(Ue.state),Ue.state==="waiting-input"&&Ue.request?v(Ue.request):v(null),Ue.permissionMode&&Ue.modeVersion!==void 0&&me(Ue.permissionMode,Ue.modeVersion);const At=Ue.provider,Ht=Ue.model;At&&ie(mt=>!mt||mt.provider?mt:{...mt,provider:At,model:Ht})}else if(Ce.eventType==="mode-change"){const Ue=Ce;Ue.permissionMode&&Ue.modeVersion!==void 0&&me(Ue.permissionMode,Ue.modeVersion)}else if(Ce.eventType==="markdown-augment"){const Ue=Ce;Ue.messageId&&Ue.blockIndex===void 0&&Ue.html?U(Rt=>({...Rt,[Ue.messageId]:{html:Ue.html}})):Ue.blockIndex!==void 0&&((Vt=o==null?void 0:o.onAugment)==null||Vt.call(o,{blockIndex:Ue.blockIndex,html:Ue.html,type:Ue.type??"text",messageId:Ue.messageId}))}else if(Ce.eventType==="pending"){const Ue=Ce;(sn=o==null?void 0:o.onPending)==null||sn.call(o,{html:Ue.html})}else if(Ce.eventType==="session-id-changed"){const Ue=Ce;Ue.newSessionId&&Ue.newSessionId!==n&&_(Ue.newSessionId)}},[me,n,Tt,bt,bn,o,Se,pe,He,et,Ze,ie]),cn=h.useCallback(async()=>{try{(await Ke.getSessionMetadata(e,n)).status.state!=="owned"&&(u({state:"idle"}),m("idle"))}catch{u({state:"idle"}),m("idle")}},[e,n]),{connected:st}=I5(c.state==="owned"?`/api/sessions/${n}/stream`:null,{onMessage:Mn,onError:cn});return{session:B,messages:F,agentContent:G,setAgentContent:et,toolUseToAgent:we,markdownAugments:O,status:c,processState:d,isHeld:d==="hold",pendingInputRequest:p,actualSessionId:w,permissionMode:P,isModePending:le,modeVersion:Z,loading:Me,error:x,connected:st,lastSSEActivityAt:C,setStatus:u,setProcessState:m,setPermissionMode:lt,setHold:Xt,pendingMessages:N,addPendingMessage:Qt,removePendingMessage:bn,slashCommands:_e}}function K5(){const{projectId:e,sessionId:n}=hf();return!e||!n?i.jsx("div",{className:"error",children:"Invalid session URL"}):i.jsx(m3,{children:i.jsx(W5,{projectId:e,sessionId:n},n)})}function W5({projectId:e,sessionId:n}){const{openSidebar:a,isWideScreen:o,toggleSidebar:c,isSidebarCollapsed:u}=Wa(),{project:d}=Hx(e),m=ea(),p=Hs(),v=p.state,x=v==null?void 0:v.initialStatus,b=v==null?void 0:v.initialTitle,w=v==null?void 0:v.initialModel,_=v==null?void 0:v.initialProvider,C=ny(),E=h.useMemo(()=>{if(C)return{onAugment:C.dispatchAugment,onPending:C.dispatchPending,onStreamEnd:C.dispatchStreamEnd,setCurrentMessageId:C.setCurrentMessageId,captureHtml:C.captureStreamingHtml}},[C]),{session:N,messages:z,agentContent:O,setAgentContent:U,toolUseToAgent:P,markdownAugments:A,status:D,processState:I,pendingInputRequest:Z,actualSessionId:re,permissionMode:_e,isModePending:Te,loading:se,error:le,lastSSEActivityAt:me,setStatus:Re,setProcessState:L,setPermissionMode:F,setHold:G,isHeld:we,pendingMessages:Me,addPendingMessage:B,removePendingMessage:ie,slashCommands:X}=Y5(e,n,x,E),Se=(N==null?void 0:N.provider)??_,pe=(N==null?void 0:N.model)??w,[He,et]=h.useState(0),Oe=h.useRef(null),Ze=h.useCallback(ue=>{Oe.current=ue},[]),{showToast:Fe}=Uf(),lt=Gx(),Xt=Yx(),{holdModeEnabled:qt}=Sf(),Qt=h.useMemo(()=>[...X,"login"],[X]),{providers:bn}=Df(),Gt=h.useMemo(()=>N!=null&&N.provider?bn.find(ue=>ue.name===N.provider)??null:null,[bn,N==null?void 0:N.provider]),pn=(Gt==null?void 0:Gt.supportsPermissionMode)??!0,V=(Gt==null?void 0:Gt.supportsThinkingToggle)??!0,he=(Gt==null?void 0:Gt.supportsSlashCommands)??!1,[Ge,tt]=h.useState(!1),[Tt,bt]=h.useState(""),[Ct,Mn]=h.useState(!1),cn=h.useRef(null),st=h.useRef(!1),[Ce,rt]=h.useState(!1),Vt=h.useRef(null),[sn,Ue]=h.useState(void 0),[Rt,At]=h.useState(void 0),[Ht,mt]=h.useState(void 0),[is,Sn]=h.useState(void 0);h.useEffect(()=>{Ue(void 0),At(void 0),mt(void 0),Sn(void 0)},[n]),h.useEffect(()=>{L5(n,e)},[n,e]),h.useEffect(()=>{re&&re!==n&&m(`/projects/${e}/sessions/${re}`,{replace:!0,state:p.state})},[re,n,e,m,p.state]);const[jn,On]=h.useState([]),[Qn,wn]=h.useState([]),[kn,Nn]=h.useState(!1),[Pn,cs]=h.useState(!1),Vn=(N==null?void 0:N.updatedAt)??null,us=h.useMemo(()=>!Vn&&!me?null:Vn?me?Vn>me?Vn:me:Vn:me,[Vn,me]);U5({sessionId:n,activityAt:us,updatedAt:Vn,lastSeenAt:N==null?void 0:N.lastSeenAt,hasUnread:N==null?void 0:N.hasUnread,enabled:D.state!=="external"});const ds=async ue=>{var ze,ne;if(ue.trim()==="/login"){lt.startLogin();return}const Ne=B(ue);L("running"),et(te=>te+1);const Le=[...jn];On([]);try{if(D.state==="idle"){const te=(N==null?void 0:N.model)??Yd(),be=Kd(),ge=await Ke.resumeSession(e,n,ue,{mode:_e,model:te,thinking:be,provider:N==null?void 0:N.provider},Le.length>0?Le:void 0,Ne);Re({state:"owned",processId:ge.processId})}else{const te=Kd(),be=await Ke.queueMessage(n,ue,_e,Le.length>0?Le:void 0,Ne,te);be.restarted&&be.processId&&Re({state:"owned",processId:be.processId})}(ze=Oe.current)==null||ze.clearDraft()}catch(te){if(console.error("Failed to send:",te),ie(Ne),(ne=Oe.current)==null||ne.restoreFromStorage(),On(Le),L("idle"),te instanceof Error&&(te.message.includes("404")||te.message.includes("No active process")))Re({state:"idle"}),Fe("Session process ended. Your message has been restored.","error");else{const ge=te instanceof Error?te.message:"Unknown error";Fe(`Failed to send message: ${ge}`,"error")}}},qs=async()=>{D.state==="owned"&&D.processId&&await Ke.abortProcess(D.processId)},En=h.useCallback(async()=>{if(Z)try{await Ke.respondToInput(n,Z.id,"approve")}catch(ue){const Ne=ue.status,Le=Ne?`Error ${Ne}`:"Failed to approve";Fe(Le,"error")}},[n,Z,Fe]),Ks=h.useCallback(async()=>{if(Z)try{await Ke.respondToInput(n,Z.id,"approve_accept_edits"),F("acceptEdits")}catch(ue){const Ne=ue.status,Le=Ne?`Error ${Ne}`:"Failed to approve";Fe(Le,"error")}},[n,Z,F,Fe]),j=h.useCallback(async()=>{if(Z)try{await Ke.respondToInput(n,Z.id,"deny")}catch(ue){const Ne=ue.status,Le=Ne?`Error ${Ne}`:"Failed to deny";Fe(Le,"error")}},[n,Z,Fe]),k=h.useCallback(async ue=>{if(Z)try{await Ke.respondToInput(n,Z.id,"deny",void 0,ue)}catch(Ne){const Le=Ne.status,ze=Le?`Error ${Le}`:"Failed to send feedback";Fe(ze,"error")}},[n,Z,Fe]),T=h.useCallback(async ue=>{if(Z)try{await Ke.respondToInput(n,Z.id,"approve",ue)}catch(Ne){const Le=Ne.status,ze=Le?`Error ${Le}`:"Failed to submit answer";Fe(ze,"error")}},[n,Z,Fe]),y=h.useCallback(async ue=>{for(const Ne of ue){const Le=crypto.randomUUID();wn(ze=>[...ze,{fileId:Le,fileName:Ne.name,bytesUploaded:0,totalBytes:Ne.size,percent:0}]);try{const ze=await Xt.upload(e,n,Ne,{onProgress:ne=>{wn(te=>te.map(be=>be.fileId===Le?{...be,bytesUploaded:ne,percent:Math.round(ne/Ne.size*100)}:be))}});On(ne=>[...ne,ze])}catch(ze){console.error("Upload failed:",ze);const ne=ze instanceof Error?ze.message:"Upload failed";Fe(`Failed to upload ${Ne.name}: ${ne}`,"error")}finally{wn(ze=>ze.filter(ne=>ne.fileId!==Le))}}},[e,n,Fe,Xt]),M=h.useCallback(ue=>{On(Ne=>Ne.filter(Le=>Le.id!==ue))},[]),Y=(Z==null?void 0:Z.toolName)==="AskUserQuestion",K=I==="running"||I==="waiting-input",ce=h.useMemo(()=>D.state!=="idle"?!1:Bf(z).some(Ne=>Ne.type==="tool_call"&&Ne.status==="pending"),[z,D.state]),ke=ya(N),Pe=sn??(ke!=="Untitled"?ke:null)??b??"Untitled",De=Rt??(N==null?void 0:N.isArchived)??!1,wt=Ht??(N==null?void 0:N.isStarred)??!1;Xx(d==null?void 0:d.name,Pe);const Ie=()=>{bt(Pe),tt(!0),setTimeout(()=>{var ue,Ne;(ue=cn.current)==null||ue.focus(),(Ne=cn.current)==null||Ne.select()},0)},nt=()=>{st.current||(tt(!1),bt(""))},de=()=>{if(!st.current){if(!Tt.trim()||Tt.trim()===Pe){nt();return}$e()}},$e=async()=>{if(!(!Tt.trim()||Ct)){st.current=!0,Mn(!0);try{await Ke.updateSessionMetadata(n,{title:Tt.trim()}),Ue(Tt.trim()),tt(!1),Fe("Session renamed","success")}catch(ue){console.error("Failed to rename session:",ue),Fe("Failed to rename session","error")}finally{Mn(!1),st.current=!1}}},ct=ue=>{ue.key==="Enter"?(ue.preventDefault(),$e()):ue.key==="Escape"&&(ue.preventDefault(),nt())},ut=async()=>{const ue=!De;try{await Ke.updateSessionMetadata(n,{archived:ue}),At(ue),Fe(ue?"Session archived":"Session unarchived","success")}catch(Ne){console.error("Failed to update archive status:",Ne),Fe("Failed to update archive status","error")}},dt=async()=>{const ue=!wt;try{await Ke.updateSessionMetadata(n,{starred:ue}),mt(ue),Fe(ue?"Session starred":"Session unstarred","success")}catch(Ne){console.error("Failed to update star status:",Ne),Fe("Failed to update star status","error")}},Ve=is??(N==null?void 0:N.hasUnread)??!1,qe=async()=>{const ue=!Ve;Sn(ue);try{ue?await Ke.markSessionUnread(n):await Ke.markSessionSeen(n),Fe(ue?"Marked as unread":"Marked as read","success")}catch(Ne){console.error("Failed to update read status:",Ne),Sn(void 0),Fe("Failed to update read status","error")}};if(le)return i.jsxs("div",{className:"error",children:["Error: ",le.message]});const We=()=>i.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[i.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),i.jsx("line",{x1:"9",y1:"3",x2:"9",y2:"21"})]});return i.jsx("div",{className:o?"main-content-wrapper":"main-content-mobile",children:i.jsxs("div",{className:o?"main-content-constrained":"main-content-mobile-inner",children:[i.jsx("header",{className:"session-header",children:i.jsxs("div",{className:"session-header-inner",children:[i.jsxs("div",{className:"session-header-left",children:[!(o&&u)&&i.jsx("button",{type:"button",className:"sidebar-toggle",onClick:o?c:a,title:o?"Toggle sidebar":"Open sidebar","aria-label":o?"Toggle sidebar":"Open sidebar",children:i.jsx(We,{})}),(d==null?void 0:d.name)&&i.jsx($s,{to:`/sessions?project=${e}`,className:"project-breadcrumb",title:d.name,children:d.name.length>12?`${d.name.slice(0,12)}...`:d.name}),i.jsxs("div",{className:"session-title-row",children:[wt&&i.jsxs("svg",{className:"star-indicator-inline",width:"12",height:"12",viewBox:"0 0 24 24",fill:"currentColor",stroke:"currentColor",strokeWidth:"2",role:"img","aria-label":"Starred",children:[i.jsx("title",{children:"Starred"}),i.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})]}),se?i.jsx("span",{className:"session-title-skeleton"}):Ge?i.jsx("input",{ref:cn,type:"text",className:"session-title-input",value:Tt,onChange:ue=>bt(ue.target.value),onKeyDown:ct,onBlur:de,disabled:Ct}):i.jsxs(i.Fragment,{children:[i.jsxs("button",{ref:Vt,type:"button",className:"session-title session-title-dropdown-trigger",onClick:()=>rt(!Ce),title:(N==null?void 0:N.fullTitle)??Pe,children:[i.jsx("span",{className:"session-title-text",children:Pe}),i.jsx("svg",{className:"session-title-chevron",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:i.jsx("polyline",{points:"6 9 12 15 18 9"})})]}),i.jsx(A5,{currentSessionId:n,isOpen:Ce,onClose:()=>rt(!1),onNavigate:()=>rt(!1),triggerRef:Vt})]}),!se&&De&&i.jsx("span",{className:"archived-badge",children:"Archived"}),!se&&i.jsx(Fx,{sessionId:n,projectId:e,isStarred:wt,isArchived:De,hasUnread:Ve,provider:N==null?void 0:N.provider,onToggleStar:dt,onToggleArchive:ut,onToggleRead:qe,onRename:Ie,onClone:ue=>{m(`/projects/${e}/sessions/${ue}`)},useFixedPositioning:!0,useEllipsisIcon:!0})]})]}),i.jsx("div",{className:"session-header-right",children:!se&&Se&&i.jsx("button",{type:"button",className:"provider-badge-button",onClick:()=>cs(!0),title:"View session info",children:i.jsx(N5,{provider:Se,model:pe,isThinking:I==="running"})})})]})}),Pn&&N&&i.jsx(S5,{sessionId:re,provider:N.provider,model:N.model,status:D,processState:I,contextUsage:N.contextUsage,onClose:()=>cs(!1)}),D.state==="external"&&i.jsx("div",{className:"external-session-warning",children:"External session active - enter messages at your own risk!"}),ce&&i.jsx("div",{className:"external-session-warning pending-tool-warning",children:"This session may be waiting for input in another process (VS Code, CLI). Check there before sending a message."}),i.jsx("main",{className:"session-messages",children:se?i.jsx("div",{className:"loading",children:"Loading session..."}):i.jsx(I3,{projectId:e,projectPath:(d==null?void 0:d.path)??null,sessionId:n,children:i.jsx(j4,{agentContent:O,setAgentContent:U,toolUseToAgent:P,projectId:e,sessionId:n,children:i.jsx(x5,{messages:z,isProcessing:D.state==="owned"&&I==="running",scrollTrigger:He,pendingMessages:Me,markdownAugments:A,activeToolApproval:K})})})}),i.jsx("footer",{className:"session-input",children:i.jsxs("div",{className:"session-input-inner",children:[Z&&Z.sessionId===re&&Y&&i.jsx(C5,{request:Z,sessionId:re,onSubmit:T,onDeny:j}),Z&&Z.sessionId===re&&!Y&&i.jsxs(i.Fragment,{children:[i.jsx(O5,{request:Z,sessionId:re,onApprove:En,onDeny:j,onApproveAcceptEdits:Ks,onDenyWithFeedback:k,collapsed:kn,onCollapsedChange:Nn}),i.jsx(Qx,{mode:_e,onModeChange:F,isModePending:Te,isHeld:qt?we:void 0,onHoldChange:qt?G:void 0,supportsPermissionMode:pn,supportsThinkingToggle:V,contextUsage:N==null?void 0:N.contextUsage,isRunning:D.state==="owned",isThinking:I==="running",onStop:qs,pendingApproval:kn?{type:"tool-approval",onExpand:()=>Nn(!1)}:void 0})]}),!(Z&&Z.sessionId===re&&!Y)&&i.jsx(s3,{onSend:ds,placeholder:D.state==="external"?"External session - send at your own risk...":I==="idle"?"Send a message to resume...":"Queue a message...",mode:_e,onModeChange:F,isModePending:Te,isHeld:qt?we:void 0,onHoldChange:qt?G:void 0,supportsPermissionMode:pn,supportsThinkingToggle:V,isRunning:D.state==="owned",isThinking:I==="running",onStop:qs,draftKey:`draft-message-${n}`,onDraftControlsReady:Ze,collapsed:!!(Z&&Z.sessionId===re),contextUsage:N==null?void 0:N.contextUsage,projectId:e,sessionId:n,attachments:jn,onAttach:y,onRemoveAttachment:M,uploadProgress:Qn,slashCommands:he&&D.state==="owned"?Qt:[]})]})}),lt.isOpen&&i.jsx(Wx,{authMethod:lt.authMethod,onSelectMethod:lt.selectMethod,url:lt.url,statusMessage:lt.statusMessage,startupError:lt.error,onSuccess:lt.handleSuccess,onCancel:lt.handleCancel})]})})}const n0="yep-anywhere-device-id",X5="/sw.js";function Q5(){const[e,n]=h.useState({isSupported:!1,isSubscribed:!1,isLoading:!0,error:null,permission:"default",deviceId:null}),[a,o]=h.useState(null),c=typeof window<"u"&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window,u=h.useCallback(()=>{let b=localStorage.getItem(n0);return b||(b=crypto.randomUUID(),localStorage.setItem(n0,b)),b},[]);h.useEffect(()=>{if(!c){const w="Push notifications not supported in this browser";n(_=>({..._,isSupported:!1,isLoading:!1,error:w}));return}(async()=>{try{const w=await navigator.serviceWorker.register(X5);o(w),await navigator.serviceWorker.ready;const _=await w.pushManager.getSubscription(),C=u();n({isSupported:!0,isSubscribed:!!_,isLoading:!1,error:null,permission:Notification.permission,deviceId:C})}catch(w){console.error("[usePushNotifications] Init error:",w),n(_=>({..._,isSupported:!0,isLoading:!1,error:w instanceof Error?w.message:"Failed to initialize"}))}})()},[c,u]);const d=h.useCallback(async()=>{if(!a){n(b=>({...b,error:"Service worker not ready"}));return}n(b=>({...b,isLoading:!0,error:null}));try{const b=await Notification.requestPermission();if(n(z=>({...z,permission:b})),b!=="granted"){n(z=>({...z,isLoading:!1,error:"Notification permission denied"}));return}const{publicKey:w}=await Ke.getPushPublicKey(),_=J5(w),C=await a.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:_.buffer}),E=u(),N=C.toJSON();await Ke.subscribePush(E,N,eR()),n(z=>({...z,isSubscribed:!0,isLoading:!1,error:null,deviceId:E}))}catch(b){console.error("[usePushNotifications] Subscribe error:",b),n(w=>({...w,isLoading:!1,error:b instanceof Error?b.message:"Failed to subscribe"}))}},[a,u]),m=h.useCallback(async()=>{if(!a){n(b=>({...b,error:"Service worker not ready"}));return}n(b=>({...b,isLoading:!0,error:null}));try{const b=await a.pushManager.getSubscription();b&&await b.unsubscribe();const w=u();await Ke.unsubscribePush(w),n(_=>({..._,isSubscribed:!1,isLoading:!1,error:null}))}catch(b){console.error("[usePushNotifications] Unsubscribe error:",b),n(w=>({...w,isLoading:!1,error:b instanceof Error?b.message:"Failed to unsubscribe"}))}},[a,u]),p=h.useCallback(async()=>{const b=u();n(w=>({...w,isLoading:!0,error:null}));try{await Ke.testPush(b),n(w=>({...w,isLoading:!1}))}catch(w){console.error("[usePushNotifications] Test push error:",w),n(_=>({..._,isLoading:!1,error:w instanceof Error?w.message:"Failed to send test"}))}},[u]),v=h.useCallback(async()=>{var w;const b=(w=navigator.serviceWorker)==null?void 0:w.controller;return b?new Promise(_=>{const C=new MessageChannel;C.port1.onmessage=E=>{var N;_(((N=E.data)==null?void 0:N.logs)||[])},b.postMessage({type:"get-sw-logs"},[C.port2]),setTimeout(()=>_([]),2e3)}):(console.warn("[usePushNotifications] No active service worker"),[])},[]),x=h.useCallback(async()=>{var w;const b=(w=navigator.serviceWorker)==null?void 0:w.controller;if(b)return new Promise(_=>{const C=new MessageChannel;C.port1.onmessage=()=>_(),b.postMessage({type:"clear-sw-logs"},[C.port2]),setTimeout(_,1e3)})},[]);return{...e,subscribe:d,unsubscribe:m,sendTest:p,getSwLogs:v,clearSwLogs:x}}function J5(e){const n="=".repeat((4-e.length%4)%4),a=(e+n).replace(/-/g,"+").replace(/_/g,"/"),o=window.atob(a),c=new Uint8Array(o.length);for(let u=0;u<o.length;++u)c[u]=o.charCodeAt(u);return c}function eR(){const e=navigator.userAgent;return/iPhone/.test(e)?"iPhone":/iPad/.test(e)?"iPad":/Android/.test(e)?"Android":/Mac/.test(e)?"Mac":/Windows/.test(e)?"Windows":/Linux/.test(e)?"Linux":"Browser"}function tR(){const{isSupported:e,isSubscribed:n,isLoading:a,error:o,permission:c,subscribe:u,unsubscribe:d,sendTest:m}=Q5(),{notifyInApp:p,setNotifyInApp:v}=uT(),x=async()=>{n?await d():await u()};return e?c==="denied"?i.jsx("div",{className:"settings-item",children:i.jsxs("div",{className:"settings-item-info",children:[i.jsx("strong",{children:"Push Notifications"}),i.jsx("p",{className:"settings-warning",children:"Notifications are blocked. Enable them in your browser settings to receive push notifications."})]})}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"settings-item",children:[i.jsxs("div",{className:"settings-item-info",children:[i.jsx("strong",{children:"Push Notifications"}),i.jsx("p",{children:"Receive notifications when a session needs your attention, even when the app is in the background."}),o&&i.jsx("p",{className:"settings-error",children:o})]}),i.jsxs("label",{className:"toggle-switch",children:[i.jsx("input",{type:"checkbox",checked:n,onChange:x,disabled:a}),i.jsx("span",{className:"toggle-slider"})]})]}),n&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"settings-item",children:[i.jsxs("div",{className:"settings-item-info",children:[i.jsx("strong",{children:"Notify When In App"}),i.jsx("p",{children:"Show notifications even when the app is open, as long as you're not viewing that session."})]}),i.jsxs("label",{className:"toggle-switch",children:[i.jsx("input",{type:"checkbox",checked:p,onChange:b=>v(b.target.checked)}),i.jsx("span",{className:"toggle-slider"})]})]}),i.jsxs("div",{className:"settings-item",children:[i.jsxs("div",{className:"settings-item-info",children:[i.jsx("strong",{children:"Test Notification"}),i.jsx("p",{children:"Send a test notification to verify push is working."})]}),i.jsx("button",{type:"button",className:"settings-button",onClick:m,disabled:a,children:a?"Sending...":"Send Test"})]})]})]}):i.jsx("div",{className:"settings-item",children:i.jsxs("div",{className:"settings-item-info",children:[i.jsx("strong",{children:"Push Notifications"}),i.jsx("p",{className:"settings-muted",children:o||"Push notifications are not supported in this browser."}),i.jsx("p",{className:"settings-muted",children:i.jsx("a",{href:"https://github.com/kzahel/yepanywhere/blob/main/docs/push-notifications.md",target:"_blank",rel:"noopener noreferrer",children:"Troubleshooting guide"})})]})})}const nR=h.createContext(null);function sR(){const e=h.useContext(nR);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e}let pr=null;function aR(){const[e,n]=h.useState(!1),[a,o]=h.useState(!1);h.useEffect(()=>{if(window.matchMedia("(display-mode: standalone)").matches||"standalone"in navigator&&navigator.standalone===!0){o(!0);return}pr&&n(!0);const d=p=>{p.preventDefault(),pr=p,n(!0)},m=()=>{o(!0),n(!1),pr=null};return window.addEventListener("beforeinstallprompt",d),window.addEventListener("appinstalled",m),()=>{window.removeEventListener("beforeinstallprompt",d),window.removeEventListener("appinstalled",m)}},[]);const c=h.useCallback(async()=>{if(!pr)return!1;await pr.prompt();const{outcome:u}=await pr.userChoice;return u==="accepted"?(n(!1),pr=null,!0):!1},[]);return{canInstall:e,isInstalled:a,install:c}}function rR(){const[e,n]=h.useState({backend:!1,frontend:!1}),[a,o]=h.useState(null),[c,u]=h.useState(Wn.connected),[d,m]=h.useState({type:"worker-activity-changed",activeWorkers:0,queueLength:0,hasActiveWork:!1,timestamp:""}),p=h.useCallback(()=>{Je("/dev/status").then(E=>{E&&!E.backendDirty&&n(N=>({...N,backend:!1}))}).catch(()=>{}),Je("/status/workers").then(E=>{E&&m(E)}).catch(()=>{})},[]);h.useEffect(()=>{Je("/dev/status").then(E=>{o(E),E.backendDirty&&n(N=>({...N,backend:!0}))}).catch(()=>{o(null)})},[]),h.useEffect(()=>{const E=[];return E.push(Wn.on("source-change",N=>{n(z=>({...z,[N.target]:!0}))})),E.push(Wn.on("backend-reloaded",()=>{n(N=>({...N,backend:!1}))})),E.push(Wn.on("worker-activity-changed",N=>{m(N)})),E.push(Wn.on("reconnect",()=>{u(!0),p()})),()=>{for(const N of E)N()}},[p]),h.useEffect(()=>{const N=setInterval(()=>{u(Wn.connected)},1e3);return()=>clearInterval(N)},[]),h.useEffect(()=>{(a!=null&&a.noBackendReload||a!=null&&a.noFrontendReload)&&p()},[a,p]);const v=h.useCallback(async()=>{console.log("[ReloadNotifications] Requesting backend reload...");try{await Je("/dev/reload",{method:"POST"}),console.log("[ReloadNotifications] Reload completed"),n(E=>({...E,backend:!1}))}catch(E){console.log("[ReloadNotifications] Reload error (may be expected):",E)}},[]),x=h.useCallback(()=>{window.location.reload()},[]),b=h.useCallback(()=>{e.backend?v():e.frontend&&x()},[e,v,x]),w=h.useCallback(E=>{n(N=>({...N,[E]:!1}))},[]),_=h.useCallback(()=>{n({backend:!1,frontend:!1})},[]);return h.useEffect(()=>{const E=N=>{N.ctrlKey&&N.shiftKey&&N.key==="R"&&(N.preventDefault(),b())};return window.addEventListener("keydown",E),()=>window.removeEventListener("keydown",E)},[b]),{isManualReloadMode:(a==null?void 0:a.noBackendReload)||(a==null?void 0:a.noFrontendReload),pendingReloads:e,connected:c,reloadBackend:v,reloadFrontend:x,reload:b,dismiss:w,dismissAll:_,workerActivity:d,unsafeToRestart:d.hasActiveWork}}function iR(){const[e,n]=h.useState(null),[a,o]=h.useState(!0),[c,u]=h.useState(null),d=h.useCallback(async()=>{try{const x=await Je("/remote-access/config");n(x),u(null)}catch(x){console.error("[useRemoteAccess] Failed to fetch config:",x),u(x instanceof Error?x.message:"Failed to fetch config")}},[]);h.useEffect(()=>{o(!0),d().finally(()=>o(!1))},[d]);const m=h.useCallback(async(x,b)=>{try{await Je("/remote-access/configure",{method:"POST",body:JSON.stringify({username:x,password:b})}),await d()}catch(w){const _=w instanceof Error?w.message:"Failed to enable remote access";throw u(_),new Error(_)}},[d]),p=h.useCallback(async()=>{try{await Je("/remote-access/disable",{method:"POST"}),await d()}catch(x){const b=x instanceof Error?x.message:"Failed to disable remote access";throw u(b),new Error(b)}},[d]),v=h.useCallback(async()=>{try{await Je("/remote-access/clear",{method:"POST"}),await d()}catch(x){const b=x instanceof Error?x.message:"Failed to clear remote access credentials";throw u(b),new Error(b)}},[d]);return{config:e,loading:a,error:c,enable:m,disable:p,clearCredentials:v,refresh:d}}function oR(){const[e,n]=h.useState(null),[a,o]=h.useState(!0),[c,u]=h.useState(null),d=h.useRef(!1),m=h.useCallback(async()=>{o(!0),u(null);try{const p=await Ke.getVersion();n(p)}catch(p){u(p instanceof Error?p:new Error(String(p)))}finally{o(!1)}},[]);return h.useEffect(()=>{d.current||(d.current=!0,m())},[m]),{version:e,loading:a,error:c,refetch:m}}function lR(){const{isManualReloadMode:e,pendingReloads:n,connected:a,reloadBackend:o,reloadFrontend:c,unsafeToRestart:u,workerActivity:d}=rR(),{fontSize:m,setFontSize:p}=bT(),{theme:v,setTheme:x}=ET(),{streamingEnabled:b,setStreamingEnabled:w}=Z5(),{funPhrasesEnabled:_,setFunPhrasesEnabled:C}=o3(),{model:E,setModel:N,thinkingLevel:z,setThinkingLevel:O,thinkingEnabled:U,setThinkingEnabled:P}=sc(),{canInstall:A,isInstalled:D,install:I}=aR(),{settings:Z,setEnabled:re}=kx(),{holdModeEnabled:_e,setHoldModeEnabled:Te,websocketTransportEnabled:se,setWebsocketTransportEnabled:le}=Sf(),{ignoredTools:me,clearIgnoredTools:Re}=In(),{isAuthenticated:L,authEnabled:F,authDisabledByEnv:G,authFilePath:we,logout:Me,changePassword:B,enableAuth:ie,disableAuth:X}=sR(),{providers:Se}=Df(),{version:pe}=oR(),et=qT().map(de=>{const $e=Se.find(ct=>ct.name===de.id);return{...de,installed:($e==null?void 0:$e.installed)??!1,authenticated:($e==null?void 0:$e.authenticated)??!1}}),[Oe,Ze]=h.useState(!1),[Fe,lt]=h.useState(!1),[Xt,qt]=h.useState(""),[Qt,bn]=h.useState(""),[Gt,pn]=h.useState(""),[V,he]=h.useState(null),[Ge,tt]=h.useState(!1),[Tt,bt]=h.useState(!1),[Ct,Mn]=h.useState(!1),[cn,st]=h.useState(""),[Ce,rt]=h.useState(""),[Vt,sn]=h.useState(null),[Ue,Rt]=h.useState(!1),[At,Ht]=h.useState(!1),[mt,is]=h.useState(!1),[Sn,jn]=h.useState("idle"),[On,Qn]=h.useState(null),{config:wn,loading:kn,enable:Nn,disable:Pn}=iR(),[cs,Vn]=h.useState(!1),[us,ds]=h.useState(""),[qs,En]=h.useState(""),[Ks,j]=h.useState(""),[k,T]=h.useState(null),[y,M]=h.useState(!1),[Y,K]=h.useState(!1),[ce,ke]=h.useState(!1),{openSidebar:Pe,isWideScreen:De}=Wa();h.useEffect(()=>{Oe&&a&&Ze(!1)},[Oe,a]);const wt=async()=>{Ze(!0),await o()},Ie=()=>{c()},nt=async()=>{jn("testing"),Qn(null);try{const $e=await jo().fetch("/version");$e!=null&&$e.current?(jn("success"),le(!0)):(jn("error"),Qn("Unexpected response format"))}catch(de){jn("error"),Qn(de instanceof Error?de.message:"Connection failed")}};return i.jsx("div",{className:De?"main-content-wrapper":"main-content-mobile",children:i.jsxs("div",{className:De?"main-content-constrained":"main-content-mobile-inner",children:[i.jsx(Ga,{title:"Settings",onOpenSidebar:Pe}),i.jsx("main",{className:"page-scroll-container",children:i.jsxs("div",{className:"page-content-inner",children:[(A||D)&&i.jsxs("section",{className:"settings-section",children:[i.jsx("h2",{children:"App"}),i.jsx("div",{className:"settings-group",children:i.jsxs("div",{className:"settings-item",children:[i.jsxs("div",{className:"settings-item-info",children:[i.jsx("strong",{children:"Install App"}),i.jsx("p",{children:D?"Yep Anywhere is installed on your device.":"Add Yep Anywhere to your home screen for quick access."})]}),D?i.jsx("span",{className:"settings-status-badge",children:"Installed"}):i.jsx("button",{type:"button",className:"settings-button",onClick:I,children:"Install"})]})})]}),i.jsxs("section",{className:"settings-section",children:[i.jsx("h2",{children:"Appearance"}),i.jsxs("div",{className:"settings-group",children:[i.jsxs("div",{className:"settings-item",children:[i.jsxs("div",{className:"settings-item-info",children:[i.jsx("strong",{children:"Theme"}),i.jsx("p",{children:"Choose your preferred color scheme."})]}),i.jsx("div",{className:"font-size-selector",children:$x.map(de=>i.jsx("button",{type:"button",className:`font-size-option ${v===de?"active":""}`,onClick:()=>x(de),children:wT(de)},de))})]}),i.jsxs("div",{className:"settings-item",children:[i.jsxs("div",{className:"settings-item-info",children:[i.jsx("strong",{children:"Font Size"}),i.jsx("p",{children:"Adjust the text size throughout the application."})]}),i.jsx("div",{className:"font-size-selector",children:Ux.map(de=>i.jsx("button",{type:"button",className:`font-size-option ${m===de?"active":""}`,onClick:()=>p(de),children:xT(de)},de))})]}),i.jsxs("div",{className:"settings-item",children:[i.jsxs("div",{className:"settings-item-info",children:[i.jsx("strong",{children:"Response Streaming"}),i.jsx("p",{children:"Show responses as they are generated, token by token. Disable for better performance on slower devices."})]}),i.jsxs("label",{className:"toggle-switch",children:[i.jsx("input",{type:"checkbox",checked:b,onChange:de=>w(de.target.checked)}),i.jsx("span",{className:"toggle-slider"})]})]}),i.jsxs("div",{className:"settings-item",children:[i.jsxs("div",{className:"settings-item-info",children:[i.jsx("strong",{children:"Fun Phrases"}),i.jsx("p",{children:'Show playful status messages while waiting for responses. Disable to show only "Thinking..."'})]}),i.jsxs("label",{className:"toggle-switch",children:[i.jsx("input",{type:"checkbox",checked:_,onChange:de=>C(de.target.checked)}),i.jsx("span",{className:"toggle-slider"})]})]})]})]}),i.jsxs("section",{className:"settings-section",children:[i.jsx("h2",{children:"Model"}),i.jsxs("div",{className:"settings-group",children:[i.jsxs("div",{className:"settings-item",children:[i.jsxs("div",{className:"settings-item-info",children:[i.jsx("strong",{children:"Model"}),i.jsx("p",{children:"Select which Claude model to use for new sessions."})]}),i.jsx("div",{className:"font-size-selector",children:Gd.map(de=>i.jsx("button",{type:"button",className:`font-size-option ${E===de.value?"active":""}`,onClick:()=>N(de.value),children:de.label},de.value))})]}),i.jsxs("div",{className:"settings-item",children:[i.jsxs("div",{className:"settings-item-info",children:[i.jsx("strong",{children:"Extended Thinking"}),i.jsx("p",{children:'Allow the model to "think" before responding. Toggle on to enable deeper reasoning.'})]}),i.jsxs("label",{className:"toggle-switch",children:[i.jsx("input",{type:"checkbox",checked:U,onChange:de=>P(de.target.checked)}),i.jsx("span",{className:"toggle-slider"})]})]}),i.jsxs("div",{className:"settings-item",children:[i.jsxs("div",{className:"settings-item-info",children:[i.jsx("strong",{children:"Thinking Level"}),i.jsx("p",{children:"Token budget for thinking. Higher levels enable deeper reasoning but use more tokens."})]}),i.jsx("div",{className:"font-size-selector",children:_j.map(de=>i.jsxs("button",{type:"button",className:`font-size-option ${z===de.value?"active":""}`,onClick:()=>O(de.value),title:de.description,children:[de.label," (",de.description,")"]},de.value))})]})]})]}),i.jsxs("section",{className:"settings-section",children:[i.jsx("h2",{children:"Providers"}),i.jsx("p",{className:"settings-section-description",children:"AI providers are auto-detected when their CLI is installed."}),i.jsx("div",{className:"settings-group",children:et.map(de=>i.jsxs("div",{className:"settings-item",children:[i.jsxs("div",{className:"settings-item-info",children:[i.jsxs("div",{className:"settings-item-header",children:[i.jsx("strong",{children:de.displayName}),de.installed?i.jsx("span",{className:"settings-status-badge settings-status-detected",children:"Detected"}):i.jsx("span",{className:"settings-status-badge settings-status-not-detected",children:"Not Detected"})]}),i.jsx("p",{children:de.metadata.description}),de.metadata.limitations.length>0&&i.jsx("ul",{className:"settings-limitations",children:de.metadata.limitations.map($e=>i.jsx("li",{children:$e},$e))})]}),de.metadata.website&&i.jsx("a",{href:de.metadata.website,target:"_blank",rel:"noopener noreferrer",className:"settings-link",children:"Website"})]},de.id))})]}),i.jsxs("section",{className:"settings-section",children:[i.jsx("h2",{children:"Notifications"}),i.jsx("div",{className:"settings-group",children:i.jsx(tR,{})})]}),i.jsxs("section",{className:"settings-section",children:[i.jsx("h2",{children:"Security"}),G&&i.jsx("p",{className:"settings-section-description settings-warning",children:"Authentication is currently bypassed by --auth-disable flag. Remove the flag to enforce authentication."}),i.jsxs("div",{className:"settings-group",children:[!F&&!G&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"settings-item",children:[i.jsxs("div",{className:"settings-item-info",children:[i.jsx("strong",{children:"Enable Authentication"}),i.jsx("p",{children:"Require a password to access this server. Recommended when exposing to the network."})]}),Ct?i.jsx("button",{type:"button",className:"settings-button settings-button-secondary",onClick:()=>{Mn(!1),st(""),rt(""),sn(null)},children:"Cancel"}):i.jsx("button",{type:"button",className:"settings-button",onClick:()=>Mn(!0),children:"Enable Auth"})]}),Ct&&i.jsx("div",{className:"settings-item settings-item-form",children:i.jsxs("form",{onSubmit:async de=>{if(de.preventDefault(),sn(null),cn!==Ce){sn("Passwords do not match");return}if(cn.length<8){sn("Password must be at least 8 characters");return}Rt(!0);try{await ie(cn),Mn(!1),st(""),rt("")}catch($e){sn($e instanceof Error?$e.message:"Failed to enable auth")}finally{Rt(!1)}},children:[i.jsxs("div",{className:"form-field",children:[i.jsx("label",{htmlFor:"enable-auth-password",children:"Password"}),i.jsx("input",{id:"enable-auth-password",type:"password",value:cn,onChange:de=>st(de.target.value),autoComplete:"new-password",minLength:8,required:!0})]}),i.jsxs("div",{className:"form-field",children:[i.jsx("label",{htmlFor:"enable-auth-confirm",children:"Confirm Password"}),i.jsx("input",{id:"enable-auth-confirm",type:"password",value:Ce,onChange:de=>rt(de.target.value),autoComplete:"new-password",minLength:8,required:!0})]}),Vt&&i.jsx("p",{className:"form-error",children:Vt}),i.jsxs("p",{className:"form-hint",children:["If you forget your password, restart with"," ",i.jsx("code",{children:"--auth-disable"})," to bypass auth."]}),i.jsx("button",{type:"submit",className:"settings-button",disabled:Ue,children:Ue?"Enabling...":"Enable Authentication"})]})})]}),F&&L&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"settings-item",children:[i.jsxs("div",{className:"settings-item-info",children:[i.jsx("strong",{children:"Change Password"}),i.jsx("p",{children:"Update your account password."})]}),Fe?i.jsx("button",{type:"button",className:"settings-button settings-button-secondary",onClick:()=>{lt(!1),qt(""),bn(""),pn(""),he(null),tt(!1)},children:"Cancel"}):i.jsx("button",{type:"button",className:"settings-button",onClick:()=>lt(!0),children:"Change Password"})]}),Fe&&i.jsx("div",{className:"settings-item settings-item-form",children:i.jsxs("form",{onSubmit:async de=>{if(de.preventDefault(),he(null),tt(!1),Qt!==Gt){he("Passwords do not match");return}if(Qt.length<8){he("Password must be at least 8 characters");return}bt(!0);try{await B(Xt,Qt),tt(!0),qt(""),bn(""),pn(""),setTimeout(()=>{lt(!1),tt(!1)},2e3)}catch($e){he($e instanceof Error?$e.message:"Failed to change password")}finally{bt(!1)}},children:[i.jsxs("div",{className:"form-field",children:[i.jsx("label",{htmlFor:"current-password",children:"Current Password"}),i.jsx("input",{id:"current-password",type:"password",value:Xt,onChange:de=>qt(de.target.value),autoComplete:"current-password",required:!0})]}),i.jsxs("div",{className:"form-field",children:[i.jsx("label",{htmlFor:"new-password",children:"New Password"}),i.jsx("input",{id:"new-password",type:"password",value:Qt,onChange:de=>bn(de.target.value),autoComplete:"new-password",minLength:8,required:!0})]}),i.jsxs("div",{className:"form-field",children:[i.jsx("label",{htmlFor:"confirm-password",children:"Confirm New Password"}),i.jsx("input",{id:"confirm-password",type:"password",value:Gt,onChange:de=>pn(de.target.value),autoComplete:"new-password",minLength:8,required:!0})]}),V&&i.jsx("p",{className:"form-error",children:V}),Ge&&i.jsx("p",{className:"form-success",children:"Password changed!"}),i.jsx("button",{type:"submit",className:"settings-button",disabled:Tt,children:Tt?"Changing...":"Update Password"})]})}),i.jsxs("div",{className:"settings-item",children:[i.jsxs("div",{className:"settings-item-info",children:[i.jsx("strong",{children:"Disable Authentication"}),i.jsx("p",{children:"Remove password protection from this server."})]}),At?i.jsxs("div",{className:"settings-confirm-buttons",children:[i.jsx("button",{type:"button",className:"settings-button settings-button-danger",onClick:async()=>{is(!0);try{await X(),Ht(!1)}finally{is(!1)}},disabled:mt,children:mt?"Disabling...":"Confirm Disable"}),i.jsx("button",{type:"button",className:"settings-button settings-button-secondary",onClick:()=>Ht(!1),children:"Cancel"})]}):i.jsx("button",{type:"button",className:"settings-button settings-button-danger",onClick:()=>Ht(!0),children:"Disable Auth"})]}),i.jsxs("div",{className:"settings-item",children:[i.jsxs("div",{className:"settings-item-info",children:[i.jsx("strong",{children:"Logout"}),i.jsx("p",{children:"Sign out of your account on this device."})]}),i.jsx("button",{type:"button",className:"settings-button settings-button-danger",onClick:Me,children:"Logout"})]})]})]})]}),i.jsxs("section",{className:"settings-section",children:[i.jsx("h2",{children:"Remote Access"}),i.jsx("p",{className:"settings-section-description",children:"Access your yepanywhere server from anywhere through an encrypted relay connection."}),i.jsx("div",{className:"settings-group",children:kn?i.jsx("div",{className:"settings-item",children:i.jsx("div",{className:"settings-item-info",children:i.jsx("strong",{children:"Loading..."})})}):wn!=null&&wn.enabled?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"settings-item",children:[i.jsxs("div",{className:"settings-item-info",children:[i.jsx("strong",{children:"Status"}),i.jsxs("p",{children:["Remote access is enabled for user"," ",i.jsx("code",{children:wn.username}),"."]})]}),i.jsx("span",{className:"settings-status-badge settings-status-detected",children:"Enabled"})]}),i.jsxs("div",{className:"settings-item",children:[i.jsxs("div",{className:"settings-item-info",children:[i.jsx("strong",{children:"Disable Remote Access"}),i.jsx("p",{children:"Remove remote access credentials from this server."})]}),Y?i.jsxs("div",{className:"settings-confirm-buttons",children:[i.jsx("button",{type:"button",className:"settings-button settings-button-danger",onClick:async()=>{ke(!0);try{await Pn(),K(!1)}finally{ke(!1)}},disabled:ce,children:ce?"Disabling...":"Confirm Disable"}),i.jsx("button",{type:"button",className:"settings-button settings-button-secondary",onClick:()=>K(!1),children:"Cancel"})]}):i.jsx("button",{type:"button",className:"settings-button settings-button-danger",onClick:()=>K(!0),children:"Disable"})]})]}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"settings-item",children:[i.jsxs("div",{className:"settings-item-info",children:[i.jsx("strong",{children:"Enable Remote Access"}),i.jsx("p",{children:"Set up a username and password to connect from outside your local network."})]}),cs?i.jsx("button",{type:"button",className:"settings-button settings-button-secondary",onClick:()=>{Vn(!1),ds(""),En(""),j(""),T(null)},children:"Cancel"}):i.jsx("button",{type:"button",className:"settings-button",onClick:()=>Vn(!0),children:"Set Up"})]}),cs&&i.jsx("div",{className:"settings-item settings-item-form",children:i.jsxs("form",{onSubmit:async de=>{if(de.preventDefault(),T(null),!us.trim()){T("Username is required");return}if(us.length<3){T("Username must be at least 3 characters");return}if(qs!==Ks){T("Passwords do not match");return}if(qs.length<8){T("Password must be at least 8 characters");return}M(!0);try{await Nn(us,qs),Vn(!1),ds(""),En(""),j("")}catch($e){T($e instanceof Error?$e.message:"Failed to enable remote access")}finally{M(!1)}},children:[i.jsxs("div",{className:"form-field",children:[i.jsx("label",{htmlFor:"remote-access-username",children:"Username"}),i.jsx("input",{id:"remote-access-username",type:"text",value:us,onChange:de=>ds(de.target.value),autoComplete:"username",minLength:3,required:!0})]}),i.jsxs("div",{className:"form-field",children:[i.jsx("label",{htmlFor:"remote-access-password",children:"Password"}),i.jsx("input",{id:"remote-access-password",type:"password",value:qs,onChange:de=>En(de.target.value),autoComplete:"new-password",minLength:8,required:!0})]}),i.jsxs("div",{className:"form-field",children:[i.jsx("label",{htmlFor:"remote-access-confirm",children:"Confirm Password"}),i.jsx("input",{id:"remote-access-confirm",type:"password",value:Ks,onChange:de=>j(de.target.value),autoComplete:"new-password",minLength:8,required:!0})]}),k&&i.jsx("p",{className:"form-error",children:k}),i.jsx("p",{className:"form-hint",children:"Your password is never stored. Only a secure verifier is kept on the server."}),i.jsx("button",{type:"submit",className:"settings-button",disabled:y,children:y?"Setting up...":"Enable Remote Access"})]})})]})})]}),e&&i.jsxs("section",{className:"settings-section",children:[i.jsx("h2",{children:"Development"}),i.jsxs("div",{className:"settings-group",children:[i.jsxs("div",{className:"settings-item",children:[i.jsxs("div",{className:"settings-item-info",children:[i.jsx("strong",{children:"Schema Validation"}),i.jsx("p",{children:"Validate tool results against expected schemas. Shows toast notifications and logs errors to console."})]}),i.jsxs("label",{className:"toggle-switch",children:[i.jsx("input",{type:"checkbox",checked:Z.enabled,onChange:de=>re(de.target.checked)}),i.jsx("span",{className:"toggle-slider"})]})]}),me.length>0&&i.jsxs("div",{className:"settings-item",children:[i.jsxs("div",{className:"settings-item-info",children:[i.jsx("strong",{children:"Ignored Tools"}),i.jsx("p",{children:"Tools with validation errors you chose to ignore. They will not show toast notifications."}),i.jsx("div",{className:"ignored-tools-list",children:me.map(de=>i.jsx("span",{className:"ignored-tool-badge",children:de},de))})]}),i.jsx("button",{type:"button",className:"settings-button settings-button-secondary",onClick:Re,children:"Clear Ignored"})]}),i.jsxs("div",{className:"settings-item",children:[i.jsxs("div",{className:"settings-item-info",children:[i.jsx("strong",{children:"Hold Mode"}),i.jsx("p",{children:"Show hold/resume option in the mode selector. Pauses execution at the next yield point (experimental)."})]}),i.jsxs("label",{className:"toggle-switch",children:[i.jsx("input",{type:"checkbox",checked:_e,onChange:de=>Te(de.target.checked)}),i.jsx("span",{className:"toggle-slider"})]})]}),i.jsxs("div",{className:"settings-item",children:[i.jsxs("div",{className:"settings-item-info",children:[i.jsx("strong",{children:"WebSocket Transport"}),i.jsx("p",{children:"Use WebSocket for API requests instead of fetch/SSE. Tests the relay protocol without encryption (Phase 2b)."}),Sn==="success"&&i.jsx("p",{className:"form-success",children:"Connection successful! WebSocket enabled."}),Sn==="error"&&i.jsx("p",{className:"form-error",children:On||"Connection failed"})]}),i.jsxs("div",{className:"settings-confirm-buttons",children:[i.jsx("button",{type:"button",className:"settings-button",onClick:nt,disabled:Sn==="testing",children:Sn==="testing"?"Testing...":"Test"}),i.jsxs("label",{className:"toggle-switch",children:[i.jsx("input",{type:"checkbox",checked:se,onChange:de=>le(de.target.checked)}),i.jsx("span",{className:"toggle-slider"})]})]})]})]}),i.jsxs("div",{className:"settings-group",children:[i.jsxs("div",{className:"settings-item",children:[i.jsxs("div",{className:"settings-item-info",children:[i.jsx("strong",{children:"Restart Server"}),i.jsxs("p",{children:["Restart the backend server to pick up code changes.",n.backend&&i.jsxs("span",{className:"settings-pending",children:[" ","(changes pending)"]})]}),u&&i.jsxs("p",{className:"settings-warning",children:[d.activeWorkers," active session",d.activeWorkers!==1?"s":""," will be interrupted"]})]}),i.jsx("button",{type:"button",className:`settings-button ${u?"settings-button-danger":""}`,onClick:wt,disabled:Oe,children:Oe?"Restarting...":u?"Restart Anyway":"Restart Server"})]}),i.jsxs("div",{className:"settings-item",children:[i.jsxs("div",{className:"settings-item-info",children:[i.jsx("strong",{children:"Reload Frontend"}),i.jsxs("p",{children:["Refresh the browser to pick up frontend changes.",n.frontend&&i.jsxs("span",{className:"settings-pending",children:[" ","(changes pending)"]})]})]}),i.jsx("button",{type:"button",className:"settings-button",onClick:Ie,children:"Reload Frontend"})]})]})]}),i.jsxs("section",{className:"settings-section",children:[i.jsx("h2",{children:"About"}),i.jsxs("div",{className:"settings-group",children:[i.jsx("div",{className:"settings-item",children:i.jsxs("div",{className:"settings-item-info",children:[i.jsx("strong",{children:"Version"}),i.jsx("p",{children:pe?i.jsxs(i.Fragment,{children:["v",pe.current,pe.updateAvailable&&pe.latest?i.jsxs("span",{className:"settings-update-available",children:[" ","(v",pe.latest," available)"]}):pe.latest?i.jsxs("span",{className:"settings-up-to-date",children:[" ","(up to date)"]}):null]}):"Loading..."}),(pe==null?void 0:pe.updateAvailable)&&i.jsxs("p",{className:"settings-update-hint",children:["Run ",i.jsx("code",{children:"npm i -g yepanywhere"})," to update"]})]})}),i.jsxs("div",{className:"settings-item",children:[i.jsxs("div",{className:"settings-item-info",children:[i.jsx("strong",{children:"Report a Bug"}),i.jsx("p",{children:"Found an issue? Report it on GitHub to help improve Yep Anywhere."})]}),i.jsx("a",{href:"https://github.com/kzahel/yepanywhere/issues",target:"_blank",rel:"noopener noreferrer",className:"settings-button",children:"Report Bug"})]})]})]})]})})]})})}const cR=h.Fragment;_T();ST();const uR="/".replace(/\/$/,"")||void 0,xy=document.getElementById("root");if(!xy)throw new Error("Root element not found");O1.createRoot(xy).render(i.jsx(cR,{children:i.jsx(aj,{basename:uR,children:i.jsx(pT,{children:i.jsxs(OS,{children:[i.jsx(xs,{path:"/",element:i.jsx(Dg,{to:"/projects",replace:!0})}),i.jsxs(xs,{element:i.jsx(KT,{}),children:[i.jsx(xs,{path:"/projects",element:i.jsx(Qk,{})}),i.jsx(xs,{path:"/sessions",element:i.jsx(Dk,{})}),i.jsx(xs,{path:"/agents",element:i.jsx(hk,{})}),i.jsx(xs,{path:"/tasks",element:i.jsx(bk,{})}),i.jsx(xs,{path:"/inbox",element:i.jsx(Pk,{})}),i.jsx(xs,{path:"/settings",element:i.jsx(lR,{})}),i.jsx(xs,{path:"/projects/:projectId",element:i.jsx(Dg,{to:"/sessions",replace:!0})}),i.jsx(xs,{path:"/new-session",element:i.jsx(Kk,{})}),i.jsx(xs,{path:"/projects/:projectId/sessions/:sessionId",element:i.jsx(K5,{})})]}),i.jsx(xs,{path:"/projects/:projectId/file",element:i.jsx(Ok,{})}),i.jsx(xs,{path:"/activity",element:i.jsx(nk,{})})]})})})}));
